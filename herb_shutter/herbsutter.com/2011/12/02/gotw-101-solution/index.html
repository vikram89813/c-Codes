<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>GotW #101: Solution | Sutter’s Mill</title>
<link rel="pingback" href="https://herbsutter.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"typekit":{"id":"eyo0tqd"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active #header h1{font-size:2.12em;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active body{font-size:89.7%;font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation{font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation ul li.search{font-size:1.06em}.wf-active #navigation ul li.search input#searchsubmit{font-size:1.06em}.wf-active #content .post-info, .wf-active #content .postmetadata{font-size:1.06em}.wf-active #sidebar{font-size:1.06em}.wf-active #footer p.right{font-size:1.06em}.wf-active .commentnum{font-size:1.77em}.wf-active .commentlist li .cmtinfo{font-size:1.18em}.wf-active .commentlist li .cmtinfo em{font-size:1.06em}.wf-active #respond label{font-size:11.8px}.wf-active #respond .required{font-size:11.8px}.wf-active #respond .subscribe-label{font-size:14.2px}.wf-active #respond .comment-notes{font-size:13px}.wf-active .wp-caption p.wp-caption-text{font-size:13px}.wf-active #content h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active #header h2{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active #content h3{font-size:1.65em;font-weight:400;font-style:normal}.wf-active #content h4{font-size:1.3em;font-style:normal;font-weight:400}.wf-active #content h5{font-size:1.18em;font-style:normal;font-weight:400}.wf-active #content .post h2{font-size:1.65em;font-weight:400;font-style:normal}.wf-active li.sidebox h2{font-weight:400;font-size:1.89em;font-style:normal}.wf-active .post h4{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active .post h4 em{font-style:normal;font-weight:400}</style>
		<script src='https://r-login.wordpress.com/remote-login.php?action=js&amp;host=herbsutter.com&amp;id=3379246&amp;t=1542966197&amp;back=https%3A%2F%2Fherbsutter.com%2F2011%2F12%2F02%2Fgotw-101-solution%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//herbsutter.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Feed" href="https://herbsutter.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Comments Feed" href="https://herbsutter.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; GotW #101: Solution Comments Feed" href="https://herbsutter.com/2011/12/02/gotw-101-solution/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNkN1uwjAMhV9onsUG69W0Z0laE0zzp8QR6tvjUlUCwSpuonOS81knxkuGPkWhKBgaZN8cx4qeR6p4JsmmH+HmPvtaP/B1nOORI8uEcqKgYG4WA1eZfErjFtinQnofspE5EWhgQ15nRNnCQv5ZqVmetORmv0vWNFibC9UKegZuAZayT9wKuabWUnEwt0Tb2A9ofbotxBZTJpx/SE8DXi3hn+h9Rx4cSUVJGXKqqt5GaurZeGCNPJoFZoxJlsdVbE11lEB/aYRTfDBw9IbLFlpI9+NUOtTUnZ2hv/C7O+y/uu9uf+jOV8Xg7sY=?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyFztEKwjAMBdAfsquTiXsRv6XWOFKXtDbphn69HeiDMBQCgdzDJXZOBtmP5QJiQ517gfx4rybIxv4ChnDITqEh5A/2kRVYF0vxjCOYIpDdUG+16BpXXIqiBCIVraTfLyFPCPNfFkCT8zeTQfC5tJ7o2Hb9Yde3+24bXjRNW9I='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbsutter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='C++ Spring: GoingNative, Feb 2-3,&nbsp;2012' href='https://herbsutter.com/2011/11/23/c-spring-goingnative-feb-2-3-2012/' />
<link rel='next' title='GotW #102: Exception-Safe Function Calls (Difficulty:&nbsp;7/10)' href='https://herbsutter.com/2011/12/02/gotw-102-exception-safe-function-calls-difficulty-710/' />
<meta name="generator" content="WordPress.com" />
<link rel="canonical" href="https://herbsutter.com/2011/12/02/gotw-101-solution/" />
<link rel='shortlink' href='https://wp.me/peb5Y-hR' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fherbsutter.com%2F2011%2F12%2F02%2Fgotw-101-solution%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fherbsutter.com%2F2011%2F12%2F02%2Fgotw-101-solution%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="GotW #101: Solution" />
<meta property="og:url" content="https://herbsutter.com/2011/12/02/gotw-101-solution/" />
<meta property="og:description" content="The solution to GotW #101 is now live." />
<meta property="article:published_time" content="2011-12-03T01:06:11+00:00" />
<meta property="article:modified_time" content="2012-04-21T22:25:08+00:00" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://herbsutter.files.wordpress.com/2011/11/image_thumb31.png" />
<meta property="og:image:secure_url" content="https://herbsutter.files.wordpress.com/2011/11/image_thumb31.png" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:text:title" content="GotW #101: Solution" />
<meta name="twitter:image" content="https://herbsutter.files.wordpress.com/2011/11/image_thumb31.png?w=1400" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=114" />
<link rel='openid.server' href='https://herbsutter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://herbsutter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<script type="text/javascript" id="webfont-output">
  
  WebFontConfig = {"typekit":{"id":"cjs1oxc"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Sutter’s Mill" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Herb Sutter on software development" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbsutter.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="The solution to GotW #101 is now live." />
<style type="text/css">
			#header h1 a,
		#header h2 {
			color: #265E15 !important;
		}
				#headerimage {
			background: url('https://herbsutter.files.wordpress.com/2011/10/cropped-blog-header.jpg') no-repeat;
			height: 200px;
		}
	</style>
<link rel="amphtml" href="https://herbsutter.com/2011/12/02/gotw-101-solution/amp/"><style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s2.wp.com/?custom-css=1&#038;csblog=eb5Y&#038;cscache=6&#038;csrev=60" />
		</head>
<body id="section-index" class="post-template-default single single-post postid-1107 single-format-standard mp6 customizer-styles-applied highlander-enabled highlander-light">


<div id="navigation" class="clearfix">
		<div class="menu">
		<ul>
			<li ><a href="https://herbsutter.com/" title="Home">Home</a></li>
			<li class="page_item page-item-912"><a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the&nbsp;Jungle</a></li>
<li class="page_item page-item-864 page_item_has_children"><a href="https://herbsutter.com/gotw/">GotW</a></li>
<li class="page_item page-item-761"><a href="https://herbsutter.com/elements-of-modern-c-style/">Elements of Modern C++&nbsp;Style</a></li>
<li class="page_item page-item-2 page_item_has_children"><a href="https://herbsutter.com/about/">About</a></li>
									<li class="search"><form method="get" id="searchform" action="https://herbsutter.com"><input type="text" class="textbox" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></form></li>
					</ul>
	</div>
</div><!-- end id:navigation -->

<div id="container">

<div id="header">
<h1><a href="https://herbsutter.com/" title="Sutter’s Mill">Sutter’s Mill</a></h1>
<h2>Herb Sutter on software development</h2>
</div><!-- end id:header -->


	
		<div id="feedarea">
	<dl>
		<dt><strong>Feeds:</strong></dt>

			<dd><a href="https://herbsutter.com/feed/">Posts</a></dd>
	
			<dd><a href="https://herbsutter.com/comments/feed/">Comments</a></dd>
		</dl>
	</div><!-- end id:feedarea -->
	
	<div id="headerimage">
</div><!-- end id:headerimage -->

<div id="content">
<div id="content-main">

		
									<div class="postnav">
				<div class="alignleft">&laquo; <a href="https://herbsutter.com/2011/11/23/c-spring-goingnative-feb-2-3-2012/" rel="prev">C++ Spring: GoingNative, Feb 2-3,&nbsp;2012</a></div>
				<div class="alignright"><a href="https://herbsutter.com/2011/12/02/gotw-102-exception-safe-function-calls-difficulty-710/" rel="next">GotW #102: Exception-Safe Function Calls (Difficulty:&nbsp;7/10)</a> &raquo;</div>
			</div>
			
			<div class="post-1107 post type-post status-publish format-standard hentry category-c category-gotw" id="post-1107">
				<div class="posttitle">
					<h2>GotW #101: Solution</h2>
					<p class="post-info">2011-12-02 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p><a href="https://herbsutter.com/gotw/_101/"><img style="display:inline;float:right;margin:0 0 0 10px;" src="https://herbsutter.files.wordpress.com/2011/11/image_thumb31.png?w=500" alt="" align="right" /></a><a href="https://herbsutter.com/gotw/_101/">The solution to GotW #101 is now live.</a></p>
									</div>

				<p class="postmetadata">
					Posted in <a href="https://herbsutter.com/category/c/" rel="category tag">C++</a>, <a href="https://herbsutter.com/category/c/gotw/" rel="category tag">GotW</a> | 											14 Comments									</p>
				
<!-- You can start editing here. -->

<h3 id="comments">14 Responses</h3>

	<ol class="commentlist">
			<li class="comment even thread-even depth-1 highlander-comment" id="comment-4641">
		<div id="div-comment-4641">
		<div class="cmtinfo"><em> on <a href="#comment-4641" title="">2012-01-01 at 10:56 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/43be4883982160a5eada19e2220c86aa?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Alex Ivanoff</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4641"></div><p>Should operator-&gt; and operator* actually be const?</p>
<p>T* operator-&gt;() const;<br />
T &amp; operator*() const</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-4611">
		<div id="div-comment-4611">
		<div class="cmtinfo"><em> on <a href="#comment-4611" title="">2011-12-21 at 2:50 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/cbf447d48bcb551d60f1ffe126b6558a?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>MSN</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4611"></div><p>I believe pimpl needs to be explicitly instantiated as well. I tried using the code in GotW #101 in VC 2010, and it did not link without expliclty instantiating pimpl where I implemented widget::impl.</p>
<p>MSN</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor even thread-even depth-1 highlander-comment" id="comment-4582">
		<div id="div-comment-4582">
		<div class="cmtinfo"><em> on <a href="#comment-4582" title="">2011-12-13 at 2:52 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.gotw.ca' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4582"></div><p>@Simon: I should have been clearer in the text about benefits of the helper. Using the helper, the code is simpler because if you write it yourself you also have to write out-of-line ctor, and have to remember to write the out-of-line dtor. The code is also more robust, because for example you can&#8217;t forget to write the out-of-line dtor.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-4581">
		<div id="div-comment-4581">
		<div class="cmtinfo"><em> on <a href="#comment-4581" title="">2011-12-13 at 12:47 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/e4e30f948d6fa04fecaf20111fc943b5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Robert</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4581"></div><p>@Andrzerj: I agree that you need to do it &#8220;somehow&#8221;. The question is what does this helper offer that is better than simply using std::unique_ptr? And yes, I would need to include  anyway, but in this case I could end up &#8220;having&#8221; to include &#8220;pimpl.h&#8221; AND . For me this is a case of is the extra hassle/complexity (however small) worth it?</p>
<p>I think this boils down to the case (which you describe) where you want a deep copy and would prefer automatic generation of c-const and c-assign. In any other case I cannot see any advantage for this approach over using std::unique_ptr directly.</p>
<p><q><br />
One other reason to use such pimpl helper is that by only using something with name “pimpl” makes your intentions more clear. Anyone will easily see that you wanted to implement this idiom (even if you have made some error that prevents code analysis). But again, this is just an aesthetic matter.<br />
</q></p>
<p>Indeed it is an aesthetic matter, though in my personal opinion &#8220;struct implementation&#8221; is a pretty big giveaway. You migth as well do a typedef on std::unique_ptr anc call it pimpl.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-akrzemi1 even thread-even depth-1 highlander-comment" id="comment-4580">
		<div id="div-comment-4580">
		<div class="cmtinfo"><em> on <a href="#comment-4580" title="">2011-12-13 at 12:26 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/c3baf4aa5bebf6d1407ed4e3b0981864?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://akrzemi1.wordpress.com' rel='external nofollow' class='url'>Andrzej Krzemieński</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4580"></div><p>@Robert: You definitely need to implement a pimpl idiom *somehow*. If you choose to do it with a raw pointer you are risking lots of memory-management-related problems. If you choose to use *some* smart pointer you need to include an extra header file anyway. </p>
<p>Now, which of the hundred possible smart pointers will you choose? The one that fits your task best. What does std::unique_ptr have to offer? (1). It will release memory in the destructor, (2). It will prevent the automatic generation of invalid copy constructor and copy assignment. </p>
<p>Can other smart pointers offer something else? Something better? I think yes: they can offer simpler construction syntax, and automatic generation of the correct copy constructor and copy assignment (with deep copy semantics). If you want your class to be copyable it saves you a certain amount of &#8220;boiler-plate&#8221; code. How is such pointer called? It is not called yet (at least I haven&#8217;t heard of such pointer), but you could call it pimpl. </p>
<p>I guess the answer to question &#8220;is it worth it?&#8221; pretty much depends on your programming style, your taste, your environment&#8217;s constraints, etc. If you do not want your class to be copyable &#8212; such smart pointer is not any better for you than a std::unique_ptr. If you cannot afford including a header file, this solution is not for you (I can afford it, and put it into a pre-compiled header, to decrease compile-times).</p>
<p>One other reason to use such pimpl helper is that by only using something with name &#8220;pimpl&#8221; makes your intentions more clear. Anyone will easily see that you wanted to implement this idiom (even if you have made some error that prevents code analysis). But again, this is just an aesthetic matter.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-4579">
		<div id="div-comment-4579">
		<div class="cmtinfo"><em> on <a href="#comment-4579" title="">2011-12-13 at 10:06 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/e4e30f948d6fa04fecaf20111fc943b5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Robert</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4579"></div><p>I don&#8217;t quite see how this makes the pimpl any simpler? </p>
<p>+ include extras files<br />
&#8211; instead of pimpl_(new impl(params)), we now write pimpl(params)</p>
<p>Doesn&#8217;t it actually make it more complex than using the pimpl idioms without any &#8220;helper&#8221;?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-4572">
		<div id="div-comment-4572">
		<div class="cmtinfo"><em> on <a href="#comment-4572" title="">2011-12-12 at 1:43 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/283838d8dff09419e01612638f9500d1?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.digitalinblue.com' rel='external nofollow' class='url'>John Farrier</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4572"></div><p>I was reading this post and the previous GotW #100, and I was wondering:  Is there a benefit to using this idiom to help with C++/CLI Native/Managed interoperability?  </p>
<p>It would be nice to have custom controls and objects be more purely managed code, but I have to do a great deal of interaction with native libraries.  This can lead to Visual Studio designer instability, Visual Studio locking of DLL&#8217;s, and difficult debugging with so many managed to native transitions.  Putting all of the managed/native interop code in an &#8220;Impl&#8221; managed class (and into a .cpp file and out of the header) may ease this type of development.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-akrzemi1 odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-4563">
		<div id="div-comment-4563">
		<div class="cmtinfo"><em> on <a href="#comment-4563" title="">2011-12-09 at 6:39 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c3baf4aa5bebf6d1407ed4e3b0981864?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://akrzemi1.wordpress.com' rel='external nofollow' class='url'>Andrzej Krzemieński</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4563"></div><p>@Simon: In Herb&#8217;s pimpl the difference seems to be in the variadic constructor. But you could also use different pimpl that provides value semantics: deep copy and deep assignment (unique_ptr provides shallow copy and assignment). Then your class gets copy and assignment for free (generated by compiler).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-4561">
		<div id="div-comment-4561">
		<div class="cmtinfo"><em> on <a href="#comment-4561" title="">2011-12-09 at 3:19 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/56718dd4f05497433e895ccad98bd2c5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Simon</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4561"></div><p>Herb, I notice you&#8217;ve changed your original solution to a simpler one, but as far as I can tell, your new solution basically amounts to writing the solution to #100 in a very round-about way when #100 is good enough as it is. At least the original inherited solution to #101 saved you writing the pimpl management code time and time again. This new solution doesn&#8217;t even do that.</p>
<p>Now, instead of writing:</p>
<pre class="brush: plain; title: ; notranslate" title="">
class widget {
  class impl;
  std::unique_ptr&lt;impl&gt; d;
};
</pre>
<p>you write:</p>
<pre class="brush: plain; title: ; notranslate" title="">
class widget {
  class impl;
  pimpl&lt;impl&gt; d;
};
</pre>
<p>Seems to me like its the same result and doesn&#8217;t save us writing any code.</p>
<p>I&#8217;m sure I must be missing something.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-akrzemi1 odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-4559">
		<div id="div-comment-4559">
		<div class="cmtinfo"><em> on <a href="#comment-4559" title="">2011-12-08 at 3:02 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c3baf4aa5bebf6d1407ed4e3b0981864?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://akrzemi1.wordpress.com' rel='external nofollow' class='url'>Andrzej Krzemieński</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4559"></div><p>Herb, I encountered a tiny problem when using pimpls like the one you describe. Perhaps you know how to solve it better. Or perhaps you could mention it your GOTW item.</p>
<p>I try to apply the rule &#8220;treat warnings as errors&#8221;, and my problem is in fact about an annoying warning. (Annoying because it is a &#8220;template&#8221; which spreads across many, many lines)</p>
<p>I am using VS compilers. I am exposing my class, lets call it Flight, as part of the interface of my DLL, so it is declared as:</p>
<pre class="brush: plain; title: ; notranslate" title="">
class EXPORT_MODE LFlight
{
  // ...
}; 
</pre>
<p>where EXPORT_MODE is either __declspec(dllexport) or __declspec(dllimport), based on who is including the header. I think this is a standard and recommended practice? </p>
<p>I do not want to expose the guts of Flight to the users of my DLL, so I use pimpl, but in fact I end up exposing the pimpl template to anyone. In the end I get warning C4251: &#8220;[class template] needs to have dll-interface to be used by clients of class LFlight&#8221;. This is a general issue of exposing template members as part of dll interface. But pimpl, on the other hand, should be just the right tool for such &#8220;dll firewall&#8221;.</p>
<p>I fix this problem by adding additional declarations which introduce explicit external EXPORT_MODE specializations for pimpl:</p>
<p>  extern template class __declspec(dllimport) pimpl;<br />
or<br />
  template class __declspec(dllexport) pimpl;</p>
<p>based on who is including the header. Is this the only way?</p>
<p>Regards,<br />
&amp;rzej</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-4537">
		<div id="div-comment-4537">
		<div class="cmtinfo"><em> on <a href="#comment-4537" title="">2011-12-03 at 10:11 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/952334e44219669082ca6658db2e2e26?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Robert</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4537"></div><p>Shouldn&#8217;t you also include copy/move constructors?</p>
<p><code><br />
pimpl(std::unique_ptr&amp;&amp; other);<br />
pimpl(const std::unique_ptr&amp; other);</p>
<p>template<br />
pimpl::pimpl(std::unique_ptr&lt;typename pimpl::impl&gt;&amp;&amp; other) : m(std::move(other)){}</p>
<p>template<br />
pimpl::pimpl(const typename std::unique_ptr&lt;typename pimpl::impl&gt;&amp; other) : m(new pimpl::impl(*other)){}<br />
</code></p>
<p>or maybe even?</p>
<p><code><br />
pimpl(T&amp;&amp; other);<br />
pimpl(const T&amp; other);</p>
<p>template<br />
pimpl::pimpl(T&amp;&amp; other) : m(std::move(other.m)){}</p>
<p>template<br />
pimpl::pimpl(const T&amp; other) : impl_(new pimpl::m(*other.impl_)){}<br />
</code></p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-4535">
		<div id="div-comment-4535">
		<div class="cmtinfo"><em> on <a href="#comment-4535" title="">2011-12-03 at 8:24 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/05aa36ab5c7d2c620d27d86415ba2eb7?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://mmocny.com' rel='external nofollow' class='url'>Michal Mocny</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4535"></div><p>I have tried to write a similar helper class before, but had not thought to use a perfect forwarding constructor for initialization. Cool.</p>
<p>However, I really dislike the naming of pimpl.cpp, because I dislike seeing cpp files in include statements, and especially since this one is merely a template implementation file, which often have a special file extension (tpp?). Personally, I just leave them as .h files but would name them something like pimpl_fwd.h and pimpl_impl.h</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-4533">
		<div id="div-comment-4533">
		<div class="cmtinfo"><em> on <a href="#comment-4533" title="">2011-12-03 at 8:08 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/952334e44219669082ca6658db2e2e26?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Robert</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4533"></div><p>Would it be possible to extend the pimpl class and provide default implementation for some common methods? e.g. swap?</p>
<p>class pimpl {<br />
protected:<br />
class impl;<br />
std::unique_ptr m;</p>
<p>public:<br />
void swap(pimpl&amp; other)<br />
{<br />
m.swap(other.m);<br />
}</p>
<p>};</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-4532">
		<div id="div-comment-4532">
		<div class="cmtinfo"><em> on <a href="#comment-4532" title="">2011-12-03 at 8:08 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/952334e44219669082ca6658db2e2e26?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Robert</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_4532"></div><p>I see 2 potential problems with this:</p>
<p>First of, template class pimpl::impl will need to be in the namespace as “pimpl”.</p>
<p>So if widget is in its own namespace, then the implementation will need to be in a different one?</p>
<p>.h</p>
<p>namespace foo {</p>
<p>class widget : public pimpl {…}</p>
<p>}</p>
<p>.cpp</p>
<p>using namespace foo;</p>
<p>template class pimpl::impl</p>
<p>namespace foo {</p>
<p>widget::widget() : pimpl(){}</p>
<p>}</p>
<p>Second, what about inheritance? Will that not cause ambiguity?</p>
<p>class widget : public pimpl {…}<br />
class clock : public widget, public pimpl{…} // what pimpl to use?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<br />

  	<p class="nocomments">Comments are closed.</p>
  <div class="post-content">
<p>
</p>
</div>

			</div>

		
		<p align="center"></p>

	</div><!-- end id:content-main -->
<div id="sidebar">
<ul>
<li class="sidebox"><h2><label for="subscribe-field">Follow by email</label></h2>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
																	<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"/></p>
					
					<p>
						<input type="hidden" name="action" value="subscribe"/>
						<input type="hidden" name="blog_id" value="3379246"/>
						<input type="hidden" name="source" value="https://herbsutter.com/2011/12/02/gotw-101-solution/"/>
						<input type="hidden" name="sub-type" value="widget"/>
						<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
						<input type="hidden" id="_wpnonce" name="_wpnonce" value="4590924cc6" />						<input type="submit" value="Subscribe" />
					</p>
				</form>
			
</li><li class="sidebox"><h2><a href='http://twitter.com/herbsutter'>Tweets</a></h2><ul class='tweets'></ul><a href="http://twitter.com/herbsutter"  class='twitter-follow-button' data-show-count='false' data-link-color='#265e15' data-text-color='#333333'>Follow @herbsutter</a></li><li class="sidebox"><h2>Popular</h2><ul>				<li>
										<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" class="bump-view" data-bump-view="tp">
						Trip report: Fall ISO C++ standards meeting (San Diego)					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/gotw/" class="bump-view" data-bump-view="tp">
						GotW					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" class="bump-view" data-bump-view="tp">
						Lifetime profile v1.0 posted					</a>
										</li>
				</ul></li><li class="sidebox"><h2>Categories</h2>		<ul>
				<li class="cat-item cat-item-291"><a href="https://herbsutter.com/category/apple/" >Apple</a>
</li>
	<li class="cat-item cat-item-49277"><a href="https://herbsutter.com/category/c-net/" >C# / .NET</a>
</li>
	<li class="cat-item cat-item-2426"><a href="https://herbsutter.com/category/c/" >C++</a>
</li>
	<li class="cat-item cat-item-69816"><a href="https://herbsutter.com/category/cloud/" >Cloud</a>
</li>
	<li class="cat-item cat-item-214618"><a href="https://herbsutter.com/category/concurrency/" >Concurrency</a>
</li>
	<li class="cat-item cat-item-8259773"><a href="https://herbsutter.com/category/effective-concurrency/" >Effective Concurrency</a>
</li>
	<li class="cat-item cat-item-3696745"><a href="https://herbsutter.com/category/friday-thoughts/" >Friday Thoughts</a>
</li>
	<li class="cat-item cat-item-3867746"><a href="https://herbsutter.com/category/c/gotw/" >GotW</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://herbsutter.com/category/hardware/" >Hardware</a>
</li>
	<li class="cat-item cat-item-1017"><a href="https://herbsutter.com/category/java/" >Java</a>
</li>
	<li class="cat-item cat-item-637"><a href="https://herbsutter.com/category/microsoft/" >Microsoft</a>
</li>
	<li class="cat-item cat-item-420845"><a href="https://herbsutter.com/category/opinion-editorial/" >Opinion &amp; Editorial</a>
</li>
	<li class="cat-item cat-item-1633077"><a href="https://herbsutter.com/category/reader-qa/" >Reader Q&amp;A</a>
</li>
	<li class="cat-item cat-item-2301"><a href="https://herbsutter.com/category/software-development/" >Software Development</a>
</li>
	<li class="cat-item cat-item-393523"><a href="https://herbsutter.com/category/talks-events/" >Talks &amp; Events</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://herbsutter.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-151"><a href="https://herbsutter.com/category/web/" >Web</a>
</li>
		</ul>
			</li></ul>
</div><!-- end id:sidebar -->
</div><!-- end id:content -->
</div><!-- end id:container -->
<div id="footer">
	<div id="colophon">
		<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a></p>
		<p>WPThemes.</p>
		<br class="clear" />
	</div><!-- end #colophon-->
</div><!-- end #footer-->
<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201847y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-43be4883982160a5eada19e2220c86aa">
	</div>
	<div class="grofile-hash-map-cbf447d48bcb551d60f1ffe126b6558a">
	</div>
	<div class="grofile-hash-map-c0ba56bfd231f8f04feb057728975181">
	</div>
	<div class="grofile-hash-map-e4e30f948d6fa04fecaf20111fc943b5">
	</div>
	<div class="grofile-hash-map-c3baf4aa5bebf6d1407ed4e3b0981864">
	</div>
	<div class="grofile-hash-map-283838d8dff09419e01612638f9500d1">
	</div>
	<div class="grofile-hash-map-56718dd4f05497433e895ccad98bd2c5">
	</div>
	<div class="grofile-hash-map-952334e44219669082ca6658db2e2e26">
	</div>
	<div class="grofile-hash-map-05aa36ab5c7d2c620d27d86415ba2eb7">
	</div>
	</div>
<script type='text/javascript' charset='UTF-8' id='polldaddyRatings'><!--//--><![CDATA[//><!--
PDRTJS_settings_468178_comm_4641={"id":468178,"unique_id":"wp-comment-4641","title":"Should%20operator-%26gt%3B%20and%20operator%2A%20actually%20be%20const%3FT%2A%20operator-%26gt%3B%28%29%20const%3BT%20%26amp%3B%20operator%2A%28%29%20const...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4641","item_id":"_comm_4641"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4641 == 'undefined' ){PDRTJS_468178_comm_4641 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4641 );}}PDRTJS_settings_468178_comm_4611={"id":468178,"unique_id":"wp-comment-4611","title":"I%20believe%20pimpl%20needs%20to%20be%20explicitly%20instantiated%20as%20well.%20I%20tried%20using%20the%20code%20in%20GotW%20%23101%20in%20VC%202010%2C%20and%20it%20did%20not%20link%20without%20expliclty%20instantiating%20pimpl%20where%20I%20implemented%20widget%3A%3A...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4611","item_id":"_comm_4611"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4611 == 'undefined' ){PDRTJS_468178_comm_4611 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4611 );}}PDRTJS_settings_468178_comm_4582={"id":468178,"unique_id":"wp-comment-4582","title":"%40Simon%3A%20I%20should%20have%20been%20clearer%20in%20the%20text%20about%20benefits%20of%20the%20helper.%20Using%20the%20helper%2C%20the%20code%20is%20simpler%20because%20if%20you%20write%20it%20yourself%20you%20also%20have%20to%20write%20out-of-line%20ctor%2C%20and%20ha...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4582","item_id":"_comm_4582"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4582 == 'undefined' ){PDRTJS_468178_comm_4582 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4582 );}}PDRTJS_settings_468178_comm_4581={"id":468178,"unique_id":"wp-comment-4581","title":"%40Andrzerj%3A%20I%20agree%20that%20you%20need%20to%20do%20it%20%26quot%3Bsomehow%26quot%3B.%20The%20question%20is%20what%20does%20this%20helper%20offer%20that%20is%20better%20than%20simply%20using%20std%3A%3Aunique_ptr%3F%20And%20yes%2C%20I%20would%20need%20to%20include%20%20anyway%2C%20but%20in...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4581","item_id":"_comm_4581"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4581 == 'undefined' ){PDRTJS_468178_comm_4581 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4581 );}}PDRTJS_settings_468178_comm_4580={"id":468178,"unique_id":"wp-comment-4580","title":"%40Robert%3A%20You%20definitely%20need%20to%20implement%20a%20pimpl%20idiom%20%2Asomehow%2A.%20If%20you%20choose%20to%20do%20it%20with%20a%20raw%20pointer%20you%20are%20risking%20lots%20of%20memory-management-related%20problems.%20If%20you%20choose%20to%20use%20%2Asome...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4580","item_id":"_comm_4580"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4580 == 'undefined' ){PDRTJS_468178_comm_4580 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4580 );}}PDRTJS_settings_468178_comm_4579={"id":468178,"unique_id":"wp-comment-4579","title":"I%20don%26%23039%3Bt%20quite%20see%20how%20this%20makes%20the%20pimpl%20any%20simpler%3F%20%2B%20include%20extras%20files-%20instead%20of%20pimpl_%28new%20impl%28params%29%29%2C%20we%20now%20write%20pimpl%28params%29Doesn%26%23039%3Bt%20it%20actually%20make%20it%20more%20complex%20than%20using%20...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4579","item_id":"_comm_4579"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4579 == 'undefined' ){PDRTJS_468178_comm_4579 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4579 );}}PDRTJS_settings_468178_comm_4572={"id":468178,"unique_id":"wp-comment-4572","title":"I%20was%20reading%20this%20post%20and%20the%20previous%20GotW%20%23100%2C%20and%20I%20was%20wondering%3A%20%20Is%20there%20a%20benefit%20to%20using%20this%20idiom%20to%20help%20with%20C%2B%2B%2FCLI%20Native%2FManaged%20interoperability%3F%20%20It%20would%20be%20nice%20to%20have%20cu...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4572","item_id":"_comm_4572"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4572 == 'undefined' ){PDRTJS_468178_comm_4572 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4572 );}}PDRTJS_settings_468178_comm_4563={"id":468178,"unique_id":"wp-comment-4563","title":"%40Simon%3A%20In%20Herb%26%23039%3Bs%20pimpl%20the%20difference%20seems%20to%20be%20in%20the%20variadic%20constructor.%20But%20you%20could%20also%20use%20different%20pimpl%20that%20provides%20value%20semantics%3A%20deep%20copy%20and%20deep%20assignment%20%28unique_ptr%20pro...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4563","item_id":"_comm_4563"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4563 == 'undefined' ){PDRTJS_468178_comm_4563 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4563 );}}PDRTJS_settings_468178_comm_4561={"id":468178,"unique_id":"wp-comment-4561","title":"Herb%2C%20I%20notice%20you%26%23039%3Bve%20changed%20your%20original%20solution%20to%20a%20simpler%20one%2C%20but%20as%20far%20as%20I%20can%20tell%2C%20your%20new%20solution%20basically%20amounts%20to%20writing%20the%20solution%20to%20%23100%20in%20a%20very%20round-about%20way%20when...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4561","item_id":"_comm_4561"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4561 == 'undefined' ){PDRTJS_468178_comm_4561 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4561 );}}PDRTJS_settings_468178_comm_4559={"id":468178,"unique_id":"wp-comment-4559","title":"Herb%2C%20I%20encountered%20a%20tiny%20problem%20when%20using%20pimpls%20like%20the%20one%20you%20describe.%20Perhaps%20you%20know%20how%20to%20solve%20it%20better.%20Or%20perhaps%20you%20could%20mention%20it%20your%20GOTW%20item.I%20try%20to%20apply%20the%20rule%20%26quot%3Btr...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4559","item_id":"_comm_4559"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4559 == 'undefined' ){PDRTJS_468178_comm_4559 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4559 );}}PDRTJS_settings_468178_comm_4537={"id":468178,"unique_id":"wp-comment-4537","title":"Shouldn%26%23039%3Bt%20you%20also%20include%20copy%2Fmove%20constructors%3F%26lt%3Bcode%26gt%3Bpimpl%28std%3A%3Aunique_ptr%26amp%3B%26amp%3B%20other%29%3Bpimpl%28const%20std%3A%3Aunique_ptr%26amp%3B%20other%29%3Btemplatepimpl%3A%3Apimpl%28std%3A%3Aunique_ptr%26lt%3Btypename%20pimpl%3A%3Aimpl...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4537","item_id":"_comm_4537"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4537 == 'undefined' ){PDRTJS_468178_comm_4537 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4537 );}}PDRTJS_settings_468178_comm_4535={"id":468178,"unique_id":"wp-comment-4535","title":"I%20have%20tried%20to%20write%20a%20similar%20helper%20class%20before%2C%20but%20had%20not%20thought%20to%20use%20a%20perfect%20forwarding%20constructor%20for%20initialization.%20Cool.%20However%2C%20I%20really%20dislike%20the%20naming%20of%20pimpl.cpp%2C%20becau...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4535","item_id":"_comm_4535"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4535 == 'undefined' ){PDRTJS_468178_comm_4535 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4535 );}}PDRTJS_settings_468178_comm_4533={"id":468178,"unique_id":"wp-comment-4533","title":"Would%20it%20be%20possible%20to%20extend%20the%20pimpl%20class%20and%20provide%20default%20implementation%20for%20some%20common%20methods%3F%20e.g.%20swap%3F%20class%20pimpl%20%7Bprotected%3Aclass%20impl%3Bstd%3A%3Aunique_ptr%20m%3B%20public%3Avoid%20swap%28pimpl%26amp%3Ba...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4533","item_id":"_comm_4533"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4533 == 'undefined' ){PDRTJS_468178_comm_4533 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4533 );}}PDRTJS_settings_468178_comm_4532={"id":468178,"unique_id":"wp-comment-4532","title":"I%20see%202%20potential%20problems%20with%20this%3A%20First%20of%2C%20template%20class%20pimpl%3A%3Aimpl%20will%20need%20to%20be%20in%20the%20namespace%20as%20pimpl.%20So%20if%20widget%20is%20in%20its%20own%20namespace%2C%20then%20the%20implementation%20will%20need%20to%20be...","permalink":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/#comment-4532","item_id":"_comm_4532"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_4532 == 'undefined' ){PDRTJS_468178_comm_4532 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_4532 );}}
//--><!]]></script><script type='text/javascript' charset='UTF-8' src='https://polldaddy.com/js/rating/rating.js'></script><script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMAxpon2traGJkZGxiZGhskgUAFHlAaw=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s1.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"3379246","siteName":"Sutter\u2019s Mill","siteURL":"https:\/\/herbsutter.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/mistylook","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2011%2F12%2F02%2Fgotw-101-solution%2F","themeURL":"","xhrURL":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"8fb9818ae2","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"4590924cc6\" \/>","referer":"https:\/\/herbsutter.com\/2011\/12\/02\/gotw-101-solution\/","canFollow":"1","feedID":"171936","statusMessage":"","customizeLink":"https:\/\/herbsutter.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbsutter.wordpress.com%2F2011%2F12%2F02%2Fgotw-101-solution%2F","postID":"1107","shortlink":"https:\/\/wp.me\/peb5Y-hR","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/herbsutter.com\/1107","statsLink":"https:\/\/wordpress.com\/stats\/post\/1107\/herbsutter.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: MistyLook","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 19,532 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2011%2F12%2F02%2Fgotw-101-solution%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVjcEOgjAQRH/IuoIYT8Zvqe2GLrQLdlvAv7ceJEYTEg+bTGbe7MA8KjNwQk7QCVicyOC47DvZwUcUshp9bokFPPUocM+Y0Wm2HuM3/CblwUkvjlrnyyWMv87GjraBWN10hKCloEWpYcIYyZb91fvzQ4ra9LJVMokGfpVWVehruFSnujo0x+Zcd0+y+3Rn'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'3379246','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'3379246','v':'wpcom','tz':'-8','user_id':'0','post':'1107','subd':'herbsutter'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d1TjBELytHc0k/MXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sQjlvK0phaSVQRzVpTk58eltoaSZkdG9XaVkudTNYTU4xW1NOMnZOeGpaaXRRLHxuLnZtOVlnTiYuWXNPSitmOFY0MF10eDVpTzcuRDlbSyx5c2xEZF9OTTksckImMXRpUUtWQkJbQXFyb1FobTAwQTRVZEpwUXdJdlRbPVNlQ34/Jkd8UCtMdUpbM0RVZ0QtYzhyaSYwLHxpejdjZEMwLHJuNGp8Y2NdPUpZOWZxXy1VSTBTVnBQTzV2b01jQy5bQVtvSUhL'}]);
_stq.push([ 'clickTrackerInit', '3379246', '1107' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>