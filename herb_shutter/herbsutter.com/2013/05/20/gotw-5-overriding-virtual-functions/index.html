<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>GotW #5: Overriding Virtual Functions | Sutter’s Mill</title>
<link rel="pingback" href="https://herbsutter.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"typekit":{"id":"eyo0tqd"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active #header h1{font-size:2.12em;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active body{font-size:89.7%;font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation{font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation ul li.search{font-size:1.06em}.wf-active #navigation ul li.search input#searchsubmit{font-size:1.06em}.wf-active #content .post-info, .wf-active #content .postmetadata{font-size:1.06em}.wf-active #sidebar{font-size:1.06em}.wf-active #footer p.right{font-size:1.06em}.wf-active .commentnum{font-size:1.77em}.wf-active .commentlist li .cmtinfo{font-size:1.18em}.wf-active .commentlist li .cmtinfo em{font-size:1.06em}.wf-active #respond label{font-size:11.8px}.wf-active #respond .required{font-size:11.8px}.wf-active #respond .subscribe-label{font-size:14.2px}.wf-active #respond .comment-notes{font-size:13px}.wf-active .wp-caption p.wp-caption-text{font-size:13px}.wf-active #content h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active #header h2{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active #content h3{font-size:1.65em;font-weight:400;font-style:normal}.wf-active #content h4{font-size:1.3em;font-style:normal;font-weight:400}.wf-active #content h5{font-size:1.18em;font-style:normal;font-weight:400}.wf-active #content .post h2{font-size:1.65em;font-weight:400;font-style:normal}.wf-active li.sidebox h2{font-weight:400;font-size:1.89em;font-style:normal}.wf-active .post h4{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active .post h4 em{font-style:normal;font-weight:400}</style>
		<script src='https://r-login.wordpress.com/remote-login.php?action=js&amp;host=herbsutter.com&amp;id=3379246&amp;t=1542965403&amp;back=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F20%2Fgotw-5-overriding-virtual-functions%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//herbsutter.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Feed" href="https://herbsutter.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Comments Feed" href="https://herbsutter.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; GotW #5: Overriding Virtual&nbsp;Functions Comments Feed" href="https://herbsutter.com/2013/05/20/gotw-5-overriding-virtual-functions/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNkN1uwjAMhV9onsUG69W0Z0laE0zzp8QR6tvjUlUCwSpuonOS81knxkuGPkWhKBgaZN8cx4qeR6p4JsmmH+HmPvtaP/B1nOORI8uEcqKgYG4WA1eZfErjFtinQnofspE5EWhgQ15nRNnCQv5ZqVmetORmv0vWNFibC9UKegZuAZayT9wKuabWUnEwt0Tb2A9ofbotxBZTJpx/SE8DXi3hn+h9Rx4cSUVJGXKqqt5GaurZeGCNPJoFZoxJlsdVbE11lEB/aYRTfDBw9IbLFlpI9+NUOtTUnZ2hv/C7O+y/uu9uf+jOV8Xg7sY=?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyFztEKwjAMBdAfsquTiXsRv6XWOFKXtDbphn69HeiDMBQCgdzDJXZOBtmP5QJiQ517gfx4rybIxv4ChnDITqEh5A/2kRVYF0vxjCOYIpDdUG+16BpXXIqiBCIVraTfLyFPCPNfFkCT8zeTQfC5tJ7o2Hb9Yde3+24bXjRNW9I='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbsutter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='GotW #4 Solution: Class&nbsp;Mechanics' href='https://herbsutter.com/2013/05/20/gotw-4-class-mechanics/' />
<link rel='next' title='GotW #5 Solution: Overriding Virtual&nbsp;Functions' href='https://herbsutter.com/2013/05/22/gotw-5-solution-overriding-virtual-functions/' />
<meta name="generator" content="WordPress.com" />
<link rel="canonical" href="https://herbsutter.com/2013/05/20/gotw-5-overriding-virtual-functions/" />
<link rel='shortlink' href='https://wp.me/peb5Y-vC' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F20%2Fgotw-5-overriding-virtual-functions%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F20%2Fgotw-5-overriding-virtual-functions%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="GotW #5: Overriding Virtual Functions" />
<meta property="og:url" content="https://herbsutter.com/2013/05/20/gotw-5-overriding-virtual-functions/" />
<meta property="og:description" content="Virtual functions are a pretty basic feature, but they occasionally harbor subtleties that trap the unwary. If you can answer questions like this one, then you know virtual functions cold, and you&amp;…" />
<meta property="article:published_time" content="2013-05-20T18:27:25+00:00" />
<meta property="article:modified_time" content="2013-05-21T23:37:57+00:00" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=200&amp;ts=1542965403" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:text:title" content="GotW #5: Overriding Virtual&nbsp;Functions" />
<meta name="twitter:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=240" />
<meta name="twitter:card" content="summary" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=114" />
<link rel='openid.server' href='https://herbsutter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://herbsutter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<script type="text/javascript" id="webfont-output">
  
  WebFontConfig = {"typekit":{"id":"cjs1oxc"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Sutter’s Mill" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Herb Sutter on software development" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbsutter.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="Virtual functions are a pretty basic feature, but they occasionally harbor subtleties that trap the unwary. If you can answer questions like this one, then you know virtual functions cold, and you&#039;re less likely to waste a lot of time debugging problems like the ones illustrated below.  Problem JG Question 1. What do the override&hellip;" />
<style type="text/css">
			#header h1 a,
		#header h2 {
			color: #265E15 !important;
		}
				#headerimage {
			background: url('https://herbsutter.files.wordpress.com/2011/10/cropped-blog-header.jpg') no-repeat;
			height: 200px;
		}
	</style>
<link rel="amphtml" href="https://herbsutter.com/2013/05/20/gotw-5-overriding-virtual-functions/amp/"><style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s2.wp.com/?custom-css=1&#038;csblog=eb5Y&#038;cscache=6&#038;csrev=60" />
		</head>
<body id="section-index" class="post-template-default single single-post postid-1960 single-format-standard mp6 customizer-styles-applied highlander-enabled highlander-light">


<div id="navigation" class="clearfix">
		<div class="menu">
		<ul>
			<li ><a href="https://herbsutter.com/" title="Home">Home</a></li>
			<li class="page_item page-item-912"><a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the&nbsp;Jungle</a></li>
<li class="page_item page-item-864 page_item_has_children"><a href="https://herbsutter.com/gotw/">GotW</a></li>
<li class="page_item page-item-761"><a href="https://herbsutter.com/elements-of-modern-c-style/">Elements of Modern C++&nbsp;Style</a></li>
<li class="page_item page-item-2 page_item_has_children"><a href="https://herbsutter.com/about/">About</a></li>
									<li class="search"><form method="get" id="searchform" action="https://herbsutter.com"><input type="text" class="textbox" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></form></li>
					</ul>
	</div>
</div><!-- end id:navigation -->

<div id="container">

<div id="header">
<h1><a href="https://herbsutter.com/" title="Sutter’s Mill">Sutter’s Mill</a></h1>
<h2>Herb Sutter on software development</h2>
</div><!-- end id:header -->


	
		<div id="feedarea">
	<dl>
		<dt><strong>Feeds:</strong></dt>

			<dd><a href="https://herbsutter.com/feed/">Posts</a></dd>
	
			<dd><a href="https://herbsutter.com/comments/feed/">Comments</a></dd>
		</dl>
	</div><!-- end id:feedarea -->
	
	<div id="headerimage">
</div><!-- end id:headerimage -->

<div id="content">
<div id="content-main">

		
									<div class="postnav">
				<div class="alignleft">&laquo; <a href="https://herbsutter.com/2013/05/20/gotw-4-class-mechanics/" rel="prev">GotW #4 Solution: Class&nbsp;Mechanics</a></div>
				<div class="alignright"><a href="https://herbsutter.com/2013/05/22/gotw-5-solution-overriding-virtual-functions/" rel="next">GotW #5 Solution: Overriding Virtual&nbsp;Functions</a> &raquo;</div>
			</div>
			
			<div class="post-1960 post type-post status-publish format-standard hentry category-gotw" id="post-1960">
				<div class="posttitle">
					<h2>GotW #5: Overriding Virtual&nbsp;Functions</h2>
					<p class="post-info">2013-05-20 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p><span style="color:#5a5a5a;"><em>Virtual functions are a pretty basic feature, but they occasionally harbor subtleties that trap the unwary. If you can answer questions like this one, then you know virtual functions cold, and you&#8217;re less likely to waste a lot of time debugging problems like the ones illustrated below.<br />
</em></span></p>
<p>
 </p>
<h1>Problem<br />
</h1>
<h2>JG Question<br />
</h2>
<p>1. What do the <span style="color:#2e74b5;">override</span> and <span style="color:#2e74b5;">final</span> keywords do? Why are they useful?
</p>
<h2>Guru Question<br />
</h2>
<p>2. In your travels through the dusty corners of your company&#8217;s code archives, you come across the following program fragment written by an unknown programmer. The programmer seems to have been experimenting to see how some C++ features worked.
</p>
<p style="margin-left:14pt;">(a) What could be improved in the code&#8217;s correctness or style?
</p>
<p style="margin-left:14pt;">(b) What did the programmer probably expect the program to print, but what is the actual result?
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>class base {<br />public:<br />    virtual void f( int );<br />    virtual void f( double );<br />    virtual void g( int i = 10 );<br />};<br /><br />void base::f( int ) {<br />    cout &lt;&lt; "base::f(int)" &lt;&lt; endl;<br />}<br /><br />void base::f( double ) {<br />    cout &lt;&lt; "base::f(double)" &lt;&lt; endl;<br />}<br /><br />void base::g( int i ) {<br />    cout &lt;&lt; i &lt;&lt; endl;<br />}<br /><br />class derived: public base {<br />public:<br />    void f( complex&lt;double&gt; );<br />    void g( int i = 20 );<br />};<br /><br />void derived::f( complex&lt;double&gt; ) {<br />    cout &lt;&lt; "derived::f(complex)" &lt;&lt; endl;<br />}<br /><br />void derived::g( int i ) {<br />    cout &lt;&lt; "derived::g() " &lt;&lt; i &lt;&lt; endl;<br />}<br /><br />int main() {<br />    base    b;<br />    derived d;<br />    base*   pb = new derived;<br /><br />    b.f(1.0);<br />    d.f(1.0);<br />    pb-&gt;f(1.0);<br /><br />    b.g();<br />    d.g();<br />    pb-&gt;g();<br /><br />    delete pb;<br />}
</code></pre></p>
									</div>

				<p class="postmetadata">
					Posted in <a href="https://herbsutter.com/category/c/gotw/" rel="category tag">GotW</a> | 											11 Comments									</p>
				
<!-- You can start editing here. -->

<h3 id="comments">11 Responses</h3>

	<ol class="commentlist">
			<li class="comment even thread-even depth-1 highlander-comment" id="comment-10349">
		<div id="div-comment-10349">
		<div class="cmtinfo"><em> on <a href="#comment-10349" title="">2013-05-23 at 12:57 am</a></em> <img alt='' src='https://i2.wp.com/a0.twimg.com/profile_images/536188544/digihood_normal.png?resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://twitter.com/ppetrovdotnet' rel='external nofollow' class='url'>pip010 (@ppetrovdotnet)</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10349"></div><p>few quick ones:<br />
1) why do you need to define a virtual destructor to object having no dynamic memory / pointer members. not calling it has no mem leaks right?</p>
<p>2) how exactly in this case:<br />
base    b;<br />
    derived d;<br />
    auto &amp; rb = d;</p>
<p>auto will default to base type and not derive type. cause I expect to have the same effect as invoking a virtual call on base* and derive*, which has different outcome as we all know.</p>
<p>3) about final , is the first time i hear about it. hope is not same semantic as in C#, though it looks like it is.<br />
PLEASE consider removing it. as someone pointed out please show one compelling case for it. where there are plenty of points i can give you against. it is a mess in C# !!! the most compelling reason being unit testing. mock frameworks cannot work against sealed classes. so it is a valid case regardless what were the design decision leading you to using sealed!</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10324">
		<div id="div-comment-10324">
		<div class="cmtinfo"><em> on <a href="#comment-10324" title="">2013-05-22 at 12:09 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/048b60040ffdd00df1aa43d3caa5fceb?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Tom</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10324"></div><p>Some times Curiously Recurring Template Pattern can help too.</p>
<pre class="brush: plain; title: ; notranslate" title="">
#include &lt;iostream&gt;
#include &lt;complex&gt;

using namespace std;

template &lt;class Derived&gt;
class baseT {
    Derived&amp; derived() {  return *static_cast&lt;Derived*&gt;(this);  }
public:
    void f( int ) { cout &lt;&lt; &quot;base::f(int)&quot; &lt;&lt; endl; }
    void f( double ) { cout &lt;&lt; &quot;base::f(double)&quot; &lt;&lt; endl; }
    void g( int i ) { derived().g(i); }
    void g( ) { derived().g();  }
};

class base : public baseT&lt;base&gt; { 
public:
    void g( int i ) { cout &lt;&lt; i &lt;&lt; endl; }
    void g( ) { g(10);  }
};

class derived : public baseT&lt;derived&gt; { 
public:
    using baseT&lt;derived&gt;::f; //make f() from base visible here
    void f( const complex&lt;double&gt; &amp; ) { cout &lt;&lt; &quot;derived::f(complex)&quot; &lt;&lt; endl; }
    void g( int i ) { cout &lt;&lt; &quot;derived::g() &quot; &lt;&lt; i &lt;&lt; endl; }
    void g( )  { g(20); }
};

int main() {
    base    b;
    derived d;
    auto &amp; rb = d;
 
    b.f(1.0);       //base::f(double)
    d.f(1.0);       //base::f(double)
    rb.f(1.0);      //base::f(double)
 
    b.g();          //10
    d.g();          //derived::g() 20
    rb.g();         //derived::g() 20

    return 0;
}
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10295">
		<div id="div-comment-10295">
		<div class="cmtinfo"><em> on <a href="#comment-10295" title="">2013-05-21 at 1:06 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/fbe43538cf41cb5974a7bf75b7f9d843?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Pavel Davydov</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10295"></div><p>1. override means that this function should override some virtual function from the parent class. final means that this function should not be overridden in some child class.<br />
2. a) my version of improved code would be (I skipped some code that wasn&#8217;t modified):</p>
<pre class="brush: plain; title: ; notranslate" title="">
class base {
	public:
		virtual void f( int ) final; //if function is not meant to be overridden, it should be final
		virtual void f( double ) final;
		virtual void g( int i ); //avoid using default values in virtual functions, they are chosen statically
		virtual void g( ); //use separate virtual function without arguments instead
		virtual ~base() {}
};

void base::g( ) {
	g(10);
}

class derived: public base {
	public:
		using base::f; //to make f functions from base visible here
	        void f( complex&lt;double&gt; );
		void g( int i ) override; //override makes the compiler check if this function really override something
		void g( ) override;
};

void derived::g( ) {
	g(20);
}
</pre>
<p>2. b) the actual result of execution is:</p>
<pre class="brush: plain; title: ; notranslate" title="">
	b.f(1.0); //base::f
	d.f(1.0); //derived::f( complex&lt;double&gt; ), expected base::f( double )
	pb-&gt;f(1.0); //base::f

	b.g(); //10
	d.g(); //20
	pb-&gt;g(); //10 cause defaults are chosen statically, expected 20
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10288">
		<div id="div-comment-10288">
		<div class="cmtinfo"><em> on <a href="#comment-10288" title="">2013-05-21 at 9:48 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/68f403eb5e6fef229e3c19a5d5f7fea6?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Mikhail Belyaev</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10288"></div><p>@Barry<br />
Defaults are not inherited. Neither they are stored in virtual tables. So you can not override them, but you can kinda change them in derived classes (and face the judgement). It is a compile-time issue, so it is based on static types.<br />
So afaik d.g() really calls derived::g(20) and pb-&gt;g() really calls derived::g(10).<br />
I may be wrong though, don&#8217;t have a ready-to-use c++11 compiler now.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10284">
		<div id="div-comment-10284">
		<div class="cmtinfo"><em> on <a href="#comment-10284" title="">2013-05-21 at 6:11 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/18afd5485cf7f169a22cb51d64531c54?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/muxecoid' rel='external nofollow' class='url'>muxecoid</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10284"></div><p>Previous comments already say that &#8220;You should avoid overriding and overloading functions at the same time if you don’t REALLY need that. It leads to errors almost every time&#8221;.<br />
The easy way to remember this rule is to think of every virtual function as interface definition. And if you have an interface you want it to be well (strictly) defined. It means for every function you know what exactly it accepts, without maybes.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10282">
		<div id="div-comment-10282">
		<div class="cmtinfo"><em> on <a href="#comment-10282" title="">2013-05-21 at 5:35 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/8328e2a775af97d904f274f4693ea582?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Barry</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10282"></div><p>@Mikhael, isn&#8217;t d.g() supposed to call derived::g(10), not derived::g(20)? Can&#8217;t override default values.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10274">
		<div id="div-comment-10274">
		<div class="cmtinfo"><em> on <a href="#comment-10274" title="">2013-05-21 at 12:57 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/e6ca6db2bed3478aaef583b9cecf7f19?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>@lb</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10274"></div><p>Hello,</p>
<p>I really long for a &#8216;real-life&#8217; example of &#8216;final&#8217; use. Though I fully understand how it works, I still don&#8217;t manage to see where, in a design point of view, it can be relevant or even judicious. </p>
<p>Of course, I do not consider &#8216;value-classes&#8217; since, as mentioned in previous gotw, the final keyword may enforce this semantic (though we could still wonder why avoiding private inheritance which can be considered as an alternative (and debatable) way of composition). </p>
<p>For the references classes, apart for compiler optimisation help, once a class has been designed to be refined, I fail to see a valid reason why stopping this behavior beeing a good design choice (or inheritance was not the most appropriate variation pattern).</p>
<p>Thank&#8217;s in advance.</p>
<p>Best regards.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mttpd odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10266">
		<div id="div-comment-10266">
		<div class="cmtinfo"><em> on <a href="#comment-10266" title="">2013-05-20 at 2:43 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/1cc4a77a8256c3049728728c6c45625b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>mttpd</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10266"></div><p>Ad 1: I feel this has been adequately addressed in the previous comments :-)<br />
Perhaps I could just add that &#8220;final&#8221; has two uses: member-function-wide and class-wide. However, &#8220;preventing overriding&#8221; is a good general summary of its intent in both cases (inheritance being necessary to enable overriding anyway).</p>
<p>Ad 2: Also agree with the already-made comments.</p>
<p>To expand, and to perhaps somewhat enliven the discussion, I&#8217;ll just make some (possibly unorthodox) extra points [mostly concerning part (a)]:</p>
<p>0. For improved modularity &amp; re-usability (and, perhaps less importantly for this case, to also improve compile times), let&#8217;s move the class definitions to a separate header file. To help in accomplishing that without issues, I&#8217;d preemptively get rid of the using-directive &#8220;using namespace std;&#8221; and wrap the classes in a distinct namespace.</p>
<p>1.I won&#8217;t suggest replacing </p>
<pre class="brush: plain; title: ; notranslate" title="">base*</pre>
<p> with a smart pointer (like, say, </p>
<pre class="brush: plain; title: ; notranslate" title="">std::unique_ptr&lt;base&gt;</pre>
<p>), and I won&#8217;t suggest replacing </p>
<pre class="brush: plain; title: ; notranslate" title="">new</pre>
<p> with the relevant smart pointer factory (say, </p>
<pre class="brush: plain; title: ; notranslate" title="">make_unique&lt;derived&gt;</pre>
<p>, assuming C++14 or access to the well-known piece of code :]) to remove </p>
<pre class="brush: plain; title: ; notranslate" title="">delete</pre>
<p>.</p>
<p>Instead, I&#8217;d suggest getting rid of the free store allocation entirely! :-)</p>
<p>After all, it&#8217;s completely unnecessary for dynamic (run-time) polymorphism &#8212; and references work perfectly fine here.</p>
<p>// This point was aptly made and discussed by Bryan St. Amour in his &#8220;Need polymorphism? Consider using references&#8221; post, although I&#8217;m only able to find a reddit reference to it: <a href="http://www.reddit.com/r/cpp/comments/vo2zc/need_polymorphism_consider_using_references/" rel="nofollow">http://www.reddit.com/r/cpp/comments/vo2zc/need_polymorphism_consider_using_references/</a></p>
<p>In other words, let&#8217;s get rid of this:</p>
<pre class="brush: plain; title: ; notranslate" title="">base*   pb = new derived;</pre>
<p>and use this instead:</p>
<pre class="brush: plain; title: ; notranslate" title="">derived base &amp; rb = d;</pre>
<p>so we can get rid of having to do this:</p>
<pre class="brush: plain; title: ; notranslate" title="">delete pb;</pre>
<p>(Make sure to change </p>
<pre class="brush: plain; title: ; notranslate" title="">pb-&gt;</pre>
<p> to </p>
<pre class="brush: plain; title: ; notranslate" title="">rb.</pre>
<p>, too).</p>
<p>In this case we even have an extra gain of not having to create another, duplicate object.<br />
In case this was actually necessary, we can just do:</p>
<pre class="brush: plain; title: ; notranslate" title="">derived another_d;</pre>
<pre class="brush: plain; title: ; notranslate" title="">derived base &amp; rb = another_d;</pre>
<p>Note that we get the automatic / scope-based life-time for free, without having to use std::unique_ptr.</p>
<p>2. Since the alternative interface designs are discussed (e.g., NVI) &#8212; how about using CRTP and static (compile-time) polymorphism instead?</p>
<p>See:<br />
<a href="http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Curiously_Recurring_Template_Pattern" rel="nofollow">http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Curiously_Recurring_Template_Pattern</a></p>
<p>I can&#8217;t see anything that warrants dynamic (run-time) polymorphism here and IMO it brings an extra, unnecessary (and thus unwanted) complexity: I&#8217;d take even a potentially long-winded compiler diagnostic any day over debugging code with (avoidable!) run-time pointer chasing and worrying about dangling references/pointers.</p>
<p>It&#8217;s true that historically most books/references were presenting pointers and virtuals first, and templates last (or in a footnote, or not at all). This may (incorrectly) lead some to assume that dynamic (run-time) polymorphism is somewhat &#8220;easier&#8221; or &#8220;simpler&#8221;. Given that it&#8217;s actually more flexible and offers more features (due to late / run-time binding, ordinarily not available via CRTP), one can argue it&#8217;s exactly the opposite. While templates (and, by extension, CRTP), may sometimes generate somewhat long-winded diagnostics (however, note that this is much less of a concern with C++11, type-traits, static_assert, and, as a last resort, enable_if; it will hopefully become even less of a concern with concepts lite in C++14), at least we have a higher degree of confidence that a compiled program is correct (with the associated debugging and reasoning about the program sematics becoming simplified as well).</p>
<p>Given the aforementioned advances, shouldn&#8217;t the static (compile-time) polymorphism (and CRTP) be *the* default polymorphism in this day and age?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-litb1 even thread-even depth-1 highlander-comment" id="comment-10264">
		<div id="div-comment-10264">
		<div class="cmtinfo"><em> on <a href="#comment-10264" title="">2013-05-20 at 12:30 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/31a1c40a45079decc7f5525d2a873481?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>litb1</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10264"></div><p>I think this is an excellent example where the NVI (non-virtual interface) pattern can be applied. Have the function with the default argument be public and non-virtual, and call a private or protected &#8220;doG(int i);&#8221;-style function that is virtual and overridden by derived classes. For the overloaded function, each could call a `doF (complex )&#8221;-style virtual protected/private function.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10263">
		<div id="div-comment-10263">
		<div class="cmtinfo"><em> on <a href="#comment-10263" title="">2013-05-20 at 12:07 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/68f403eb5e6fef229e3c19a5d5f7fea6?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Mikhail Belyaev</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10263"></div><p>Somehow lost a part of my code, the derived class should be like:</p>
<pre class="brush: plain; title: ; notranslate" title="">
class derived: public base {
public:
    using base::f; // this is essential if you mean overloading across class hierarchies
    void f( const complex&lt;double&gt;&amp; );
    void g( int i = 20 );
};
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10262">
		<div id="div-comment-10262">
		<div class="cmtinfo"><em> on <a href="#comment-10262" title="">2013-05-20 at 12:03 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/68f403eb5e6fef229e3c19a5d5f7fea6?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Mikhail Belyaev</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10262"></div><p>1. What do the override and final keywords do? Why are they useful? </p>
<p>These keywords are useful for signaling to the compiler that we actually tried to override something or that something is not a subject for override. The override keyword is significantly useful to avoid errors like &#8220;overload instead of override&#8221; that tend to happen often in big class hierarchies spread across developers and are very difficult to spot otherwise. The final keyword is useful in an opposite situation &#8212; when you don&#8217;t want to override (or to be overridden) and you really mean it.</p>
<p>2. This is an example of the abovementioned &#8220;overloading instead of overriding&#8221; situation.</p>
<p>1) You should avoid overriding and overloading functions at the same time if you don&#8217;t REALLY need that. It leads to errors almost every time.<br />
2) You should avoid giving default values to virtual functions&#8217; parameters as this leads to a difference in behavior for normal and polymorphic invoking of these functions, which is a Bad Thing.<br />
3) The base class should have a virtual destr</p>
<p>Taking that into account and assuming that we really need all this overload-override-default-parameter-stuff:</p>
<pre class="brush: plain; title: ; notranslate" title="">
#include &lt;iostream&gt;
#include &lt;complex&gt;
using namespace std;

class base {
public:
    virtual void f( int );
    virtual void f( double );
    virtual void g( int i = 10 );
};

void base::f( int ) {
    cout &lt;&lt; &quot;base::f(int)&quot; &lt;&lt; endl;
}

void base::f( double ) {
    cout &lt;&lt; &quot;base::f(double)&quot; &lt;&lt; endl;
}

void base::g( int i ) {
    cout &lt;&lt; i &lt;&lt; endl;
}

class derived: public base {
public:
    void f( complex&lt;double&gt; );
    void g( int i = 20 );
};

void derived::f( complex&lt;double&gt; ) {
    cout &lt;&lt; &quot;derived::f(complex)&quot; &lt;&lt; endl;
}

void derived::g( int i ) {
    cout &lt;&lt; &quot;derived::g() &quot; &lt;&lt; i &lt;&lt; endl;
}

int main() {
    base    b;
    derived d;
    base*   pb = new derived;

    b.f(1.0); // calls base::f(double)
    d.f(1.0); // calls derived::f(std::complex) !!
    pb-&gt;f(1.0); // calls base::f(double)

    b.g(); // calls base::g(10)
    d.g(); // calls derived::g(20)
    pb-&gt;g(); // calls derived::g(10) !!

    delete pb; // This one would be a memleak if we had any data in derived !!
}

</pre>
<p>Changed:</p>
<pre class="brush: plain; title: ; notranslate" title="">
#include &lt;iostream&gt;
#include &lt;complex&gt;
using namespace std;

class base {
public:
    virtual void f( int );
    virtual void f( double );
    virtual void g( int i); // do not provide a default;
    inline void g() { g(10); } // provide a new def instead
    virtual ~base() {}; // provide a virtual destructor
};

void base::f( int ) {
    cout &lt;&lt; &quot;base::f(int)&quot; &lt;&lt; endl;
}

void base::f( double ) {
    cout &lt;&lt; &quot;base::f(double)&quot; &lt;&lt; endl;
}

void base::g(int x) {
  cout &lt;&lt; x &lt;&lt; endl;
} 

class derived: public base {
public:
    void f( const complex&lt;double&gt;&amp; );
    void g( int i = 20 );
};

void derived::f( const complex&lt;double&gt;&amp; ) {
    cout &lt;&lt; &quot;derived::f(complex)&quot; &lt;&lt; endl;
}

void derived::g( int i ) {
    cout &lt;&lt; &quot;derived::g() &quot; &lt;&lt; i &lt;&lt; endl;
}

int main() {
    base    b;
    derived d;
    base*   pb = new derived;

    b.f(1.0); // calls base::f(double)
    d.f(1.0); // calls base::f(double)
    pb-&gt;f(1.0); // calls base::f(double)

    b.g(); // calls base::g() (which calls base::g(10))
    d.g(); // calls derived::g(20) 
    pb-&gt;g(); // compiler error

    delete pb; // This one is ok now
}

</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<br />

  	<p class="nocomments">Comments are closed.</p>
  <div class="post-content">
<p>
</p>
</div>

			</div>

		
		<p align="center"></p>

	</div><!-- end id:content-main -->
<div id="sidebar">
<ul>
<li class="sidebox"><h2><label for="subscribe-field">Follow by email</label></h2>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
																	<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"/></p>
					
					<p>
						<input type="hidden" name="action" value="subscribe"/>
						<input type="hidden" name="blog_id" value="3379246"/>
						<input type="hidden" name="source" value="https://herbsutter.com/2013/05/20/gotw-5-overriding-virtual-functions/"/>
						<input type="hidden" name="sub-type" value="widget"/>
						<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
						<input type="hidden" id="_wpnonce" name="_wpnonce" value="4590924cc6" />						<input type="submit" value="Subscribe" />
					</p>
				</form>
			
</li><li class="sidebox"><h2><a href='http://twitter.com/herbsutter'>Tweets</a></h2><ul class='tweets'></ul><a href="http://twitter.com/herbsutter"  class='twitter-follow-button' data-show-count='false' data-link-color='#265e15' data-text-color='#333333'>Follow @herbsutter</a></li><li class="sidebox"><h2>Popular</h2><ul>				<li>
										<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" class="bump-view" data-bump-view="tp">
						Trip report: Fall ISO C++ standards meeting (San Diego)					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/gotw/" class="bump-view" data-bump-view="tp">
						GotW					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" class="bump-view" data-bump-view="tp">
						Lifetime profile v1.0 posted					</a>
										</li>
				</ul></li><li class="sidebox"><h2>Categories</h2>		<ul>
				<li class="cat-item cat-item-291"><a href="https://herbsutter.com/category/apple/" >Apple</a>
</li>
	<li class="cat-item cat-item-49277"><a href="https://herbsutter.com/category/c-net/" >C# / .NET</a>
</li>
	<li class="cat-item cat-item-2426"><a href="https://herbsutter.com/category/c/" >C++</a>
</li>
	<li class="cat-item cat-item-69816"><a href="https://herbsutter.com/category/cloud/" >Cloud</a>
</li>
	<li class="cat-item cat-item-214618"><a href="https://herbsutter.com/category/concurrency/" >Concurrency</a>
</li>
	<li class="cat-item cat-item-8259773"><a href="https://herbsutter.com/category/effective-concurrency/" >Effective Concurrency</a>
</li>
	<li class="cat-item cat-item-3696745"><a href="https://herbsutter.com/category/friday-thoughts/" >Friday Thoughts</a>
</li>
	<li class="cat-item cat-item-3867746"><a href="https://herbsutter.com/category/c/gotw/" >GotW</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://herbsutter.com/category/hardware/" >Hardware</a>
</li>
	<li class="cat-item cat-item-1017"><a href="https://herbsutter.com/category/java/" >Java</a>
</li>
	<li class="cat-item cat-item-637"><a href="https://herbsutter.com/category/microsoft/" >Microsoft</a>
</li>
	<li class="cat-item cat-item-420845"><a href="https://herbsutter.com/category/opinion-editorial/" >Opinion &amp; Editorial</a>
</li>
	<li class="cat-item cat-item-1633077"><a href="https://herbsutter.com/category/reader-qa/" >Reader Q&amp;A</a>
</li>
	<li class="cat-item cat-item-2301"><a href="https://herbsutter.com/category/software-development/" >Software Development</a>
</li>
	<li class="cat-item cat-item-393523"><a href="https://herbsutter.com/category/talks-events/" >Talks &amp; Events</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://herbsutter.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-151"><a href="https://herbsutter.com/category/web/" >Web</a>
</li>
		</ul>
			</li></ul>
</div><!-- end id:sidebar -->
</div><!-- end id:content -->
</div><!-- end id:container -->
<div id="footer">
	<div id="colophon">
		<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a></p>
		<p>WPThemes.</p>
		<br class="clear" />
	</div><!-- end #colophon-->
</div><!-- end #footer-->
<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201847y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-c7d819019894a38e26620c9b659c22f6">
	</div>
	<div class="grofile-hash-map-048b60040ffdd00df1aa43d3caa5fceb">
	</div>
	<div class="grofile-hash-map-fbe43538cf41cb5974a7bf75b7f9d843">
	</div>
	<div class="grofile-hash-map-68f403eb5e6fef229e3c19a5d5f7fea6">
	</div>
	<div class="grofile-hash-map-18afd5485cf7f169a22cb51d64531c54">
	</div>
	<div class="grofile-hash-map-8328e2a775af97d904f274f4693ea582">
	</div>
	<div class="grofile-hash-map-e6ca6db2bed3478aaef583b9cecf7f19">
	</div>
	<div class="grofile-hash-map-1cc4a77a8256c3049728728c6c45625b">
	</div>
	<div class="grofile-hash-map-31a1c40a45079decc7f5525d2a873481">
	</div>
	</div>
<script type='text/javascript' charset='UTF-8' id='polldaddyRatings'><!--//--><![CDATA[//><!--
PDRTJS_settings_468178_comm_10349={"id":468178,"unique_id":"wp-comment-10349","title":"few%20quick%20ones%3A1%29%20why%20do%20you%20need%20to%20define%20a%20virtual%20destructor%20to%20object%20having%20no%20dynamic%20memory%20%2F%20pointer%20members.%20not%20calling%20it%20has%20no%20mem%20leaks%20right%3F2%29%20how%20exactly%20in%20this%20case%3Abase%20%20%20%20b%3B...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10349","item_id":"_comm_10349"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10349 == 'undefined' ){PDRTJS_468178_comm_10349 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10349 );}}PDRTJS_settings_468178_comm_10324={"id":468178,"unique_id":"wp-comment-10324","title":"Some%20times%20Curiously%20Recurring%20Template%20Pattern%20can%20help%20too.%26%23091%3Bcode%26%23093%3B%23include%20%26lt%3Biostream%26gt%3B%23include%20%26lt%3Bcomplex%26gt%3Busing%20namespace%20std%3Btemplate%20%26lt%3Bclass%20Derived%26gt%3Bclass%20baseT%20%7B%20%20%20%20Derived%26amp%3B...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10324","item_id":"_comm_10324"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10324 == 'undefined' ){PDRTJS_468178_comm_10324 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10324 );}}PDRTJS_settings_468178_comm_10295={"id":468178,"unique_id":"wp-comment-10295","title":"1.%20override%20means%20that%20this%20function%20should%20override%20some%20virtual%20function%20from%20the%20parent%20class.%20final%20means%20that%20this%20function%20should%20not%20be%20overridden%20in%20some%20child%20class.2.%20a%29%20my%20version%20of%20i...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10295","item_id":"_comm_10295"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10295 == 'undefined' ){PDRTJS_468178_comm_10295 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10295 );}}PDRTJS_settings_468178_comm_10288={"id":468178,"unique_id":"wp-comment-10288","title":"%40BarryDefaults%20are%20not%20inherited.%20Neither%20they%20are%20stored%20in%20virtual%20tables.%20So%20you%20can%20not%20override%20them%2C%20but%20you%20can%20kinda%20change%20them%20in%20derived%20classes%20%28and%20face%20the%20judgement%29.%20It%20is%20a%20compi...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10288","item_id":"_comm_10288"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10288 == 'undefined' ){PDRTJS_468178_comm_10288 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10288 );}}PDRTJS_settings_468178_comm_10284={"id":468178,"unique_id":"wp-comment-10284","title":"Previous%20comments%20already%20say%20that%20%26quot%3BYou%20should%20avoid%20overriding%20and%20overloading%20functions%20at%20the%20same%20time%20if%20you%20dont%20REALLY%20need%20that.%20It%20leads%20to%20errors%20almost%20every%20time%26quot%3B.The%20easy%20way%20to%20reme...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10284","item_id":"_comm_10284"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10284 == 'undefined' ){PDRTJS_468178_comm_10284 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10284 );}}PDRTJS_settings_468178_comm_10282={"id":468178,"unique_id":"wp-comment-10282","title":"%40Mikhael%2C%20isn%26%23039%3Bt%20d.g%28%29%20supposed%20to%20call%20derived%3A%3Ag%2810%29%2C%20not%20derived%3A%3Ag%2820%29%3F%20Can%26%23039%3Bt%20override%20default%20values....","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10282","item_id":"_comm_10282"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10282 == 'undefined' ){PDRTJS_468178_comm_10282 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10282 );}}PDRTJS_settings_468178_comm_10274={"id":468178,"unique_id":"wp-comment-10274","title":"Hello%2CI%20really%20long%20for%20a%20%26%23039%3Breal-life%26%23039%3B%20example%20of%20%26%23039%3Bfinal%26%23039%3B%20use.%20Though%20I%20fully%20understand%20how%20it%20works%2C%20I%20still%20don%26%23039%3Bt%20manage%20to%20see%20where%2C%20in%20a%20design%20point%20of%20view%2C%20it%20can%20be%20relevant%20or%20even%20judi...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10274","item_id":"_comm_10274"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10274 == 'undefined' ){PDRTJS_468178_comm_10274 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10274 );}}PDRTJS_settings_468178_comm_10266={"id":468178,"unique_id":"wp-comment-10266","title":"Ad%201%3A%20I%20feel%20this%20has%20been%20adequately%20addressed%20in%20the%20previous%20comments%20%3A-%29Perhaps%20I%20could%20just%20add%20that%20%26quot%3Bfinal%26quot%3B%20has%20two%20uses%3A%20member-function-wide%20and%20class-wide.%20However%2C%20%26quot%3Bpreventing%20overridin...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10266","item_id":"_comm_10266"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10266 == 'undefined' ){PDRTJS_468178_comm_10266 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10266 );}}PDRTJS_settings_468178_comm_10264={"id":468178,"unique_id":"wp-comment-10264","title":"I%20think%20this%20is%20an%20excellent%20example%20where%20the%20NVI%20%28non-virtual%20interface%29%20pattern%20can%20be%20applied.%20Have%20the%20function%20with%20the%20default%20argument%20be%20public%20and%20non-virtual%2C%20and%20call%20a%20private%20or%20pro...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10264","item_id":"_comm_10264"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10264 == 'undefined' ){PDRTJS_468178_comm_10264 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10264 );}}PDRTJS_settings_468178_comm_10263={"id":468178,"unique_id":"wp-comment-10263","title":"Somehow%20lost%20a%20part%20of%20my%20code%2C%20the%20derived%20class%20should%20be%20like%3A%26%23091%3Bcode%26%23093%3Bclass%20derived%3A%20public%20base%20%7Bpublic%3A%20%20%20%20using%20base%3A%3Af%3B%20%2F%2F%20this%20is%20essential%20if%20you%20mean%20overloading%20across%20class%20hierarchies%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10263","item_id":"_comm_10263"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10263 == 'undefined' ){PDRTJS_468178_comm_10263 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10263 );}}PDRTJS_settings_468178_comm_10262={"id":468178,"unique_id":"wp-comment-10262","title":"1.%20What%20do%20the%20override%20and%20final%20keywords%20do%3F%20Why%20are%20they%20useful%3F%20These%20keywords%20are%20useful%20for%20signaling%20to%20the%20compiler%20that%20we%20actually%20tried%20to%20override%20something%20or%20that%20something%20is%20not%20a...","permalink":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/#comment-10262","item_id":"_comm_10262"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10262 == 'undefined' ){PDRTJS_468178_comm_10262 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10262 );}}
//--><!]]></script><script type='text/javascript' charset='UTF-8' src='https://polldaddy.com/js/rating/rating.js'></script><script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMAxpon2traGJkZGxiZGhskgUAFHlAaw=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s1.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"3379246","siteName":"Sutter\u2019s Mill","siteURL":"https:\/\/herbsutter.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/mistylook","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F20%2Fgotw-5-overriding-virtual-functions%2F","themeURL":"","xhrURL":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"8fb9818ae2","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"4590924cc6\" \/>","referer":"https:\/\/herbsutter.com\/2013\/05\/20\/gotw-5-overriding-virtual-functions\/","canFollow":"1","feedID":"171936","statusMessage":"","customizeLink":"https:\/\/herbsutter.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbsutter.wordpress.com%2F2013%2F05%2F20%2Fgotw-5-overriding-virtual-functions%2F","postID":"1960","shortlink":"https:\/\/wp.me\/peb5Y-vC","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/herbsutter.com\/1960","statsLink":"https:\/\/wordpress.com\/stats\/post\/1960\/herbsutter.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: MistyLook","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 19,532 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F20%2Fgotw-5-overriding-virtual-functions%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVjcEOgjAQRH/IuoIYT8Zvqe2GLrQLdlvAv7ceJEYTEg+bTGbe7MA8KjNwQk7QCVicyOC47DvZwUcUshp9bokFPPUocM+Y0Wm2HuM3/CblwUkvjlrnyyWMv87GjraBWN10hKCloEWpYcIYyZb91fvzQ4ra9LJVMokGfpVWVehruFSnujo0x+Zcd0+y+3Rn'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'3379246','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'3379246','v':'wpcom','tz':'-8','user_id':'0','post':'1960','subd':'herbsutter'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d1TjBELytHc0k/MXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sNGs4cy9deTl3OERpNWt3bCYsZ0dCaDdRaVNuVzNYcnlyQlh3ZGpPdmkvRkVJRkNZTS5OXUtaMjQzci09fk0uNkROMTJSSEhCM011bXc2JXpwVXx4amw2cXJvNWQxeWdmLnxNZVl5WkFdZT0mcHR2Rks3TGV+WG9pXUVSU3E/NEtTb0lnciVTOVdfLi5PM2V1SnV8TX5HfEhjMmU9TWpIWD9CRk1tQSVoRU84L0M1QkUrbFtGU1BULVJxTlNhZn5VSlMtUT8xSw=='}]);
_stq.push([ 'clickTrackerInit', '3379246', '1960' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>