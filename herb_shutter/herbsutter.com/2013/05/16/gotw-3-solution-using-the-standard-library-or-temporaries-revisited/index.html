<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>GotW #3 Solution: Using the Standard Library (or, Temporaries Revisited) | Sutter’s Mill</title>
<link rel="pingback" href="https://herbsutter.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"typekit":{"id":"eyo0tqd"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active #header h1{font-size:2.12em;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active body{font-size:89.7%;font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation{font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation ul li.search{font-size:1.06em}.wf-active #navigation ul li.search input#searchsubmit{font-size:1.06em}.wf-active #content .post-info, .wf-active #content .postmetadata{font-size:1.06em}.wf-active #sidebar{font-size:1.06em}.wf-active #footer p.right{font-size:1.06em}.wf-active .commentnum{font-size:1.77em}.wf-active .commentlist li .cmtinfo{font-size:1.18em}.wf-active .commentlist li .cmtinfo em{font-size:1.06em}.wf-active #respond label{font-size:11.8px}.wf-active #respond .required{font-size:11.8px}.wf-active #respond .subscribe-label{font-size:14.2px}.wf-active #respond .comment-notes{font-size:13px}.wf-active .wp-caption p.wp-caption-text{font-size:13px}.wf-active #content h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active #header h2{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active #content h3{font-size:1.65em;font-weight:400;font-style:normal}.wf-active #content h4{font-size:1.3em;font-style:normal;font-weight:400}.wf-active #content h5{font-size:1.18em;font-style:normal;font-weight:400}.wf-active #content .post h2{font-size:1.65em;font-weight:400;font-style:normal}.wf-active li.sidebox h2{font-weight:400;font-size:1.89em;font-style:normal}.wf-active .post h4{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active .post h4 em{font-style:normal;font-weight:400}</style>
		<script src='https://r-login.wordpress.com/remote-login.php?action=js&amp;host=herbsutter.com&amp;id=3379246&amp;t=1542965315&amp;back=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-3-solution-using-the-standard-library-or-temporaries-revisited%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//herbsutter.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Feed" href="https://herbsutter.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Comments Feed" href="https://herbsutter.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; GotW #3 Solution: Using the Standard Library (or, Temporaries&nbsp;Revisited) Comments Feed" href="https://herbsutter.com/2013/05/16/gotw-3-solution-using-the-standard-library-or-temporaries-revisited/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNkN1uwjAMhV9onsUG69W0Z0laE0zzp8QR6tvjUlUCwSpuonOS81knxkuGPkWhKBgaZN8cx4qeR6p4JsmmH+HmPvtaP/B1nOORI8uEcqKgYG4WA1eZfErjFtinQnofspE5EWhgQ15nRNnCQv5ZqVmetORmv0vWNFibC9UKegZuAZayT9wKuabWUnEwt0Tb2A9ofbotxBZTJpx/SE8DXi3hn+h9Rx4cSUVJGXKqqt5GaurZeGCNPJoFZoxJlsdVbE11lEB/aYRTfDBw9IbLFlpI9+NUOtTUnZ2hv/C7O+y/uu9uf+jOV8Xg7sY=?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyFztEKwjAMBdAfsquTiXsRv6XWOFKXtDbphn69HeiDMBQCgdzDJXZOBtmP5QJiQ517gfx4rybIxv4ChnDITqEh5A/2kRVYF0vxjCOYIpDdUG+16BpXXIqiBCIVraTfLyFPCPNfFkCT8zeTQfC5tJ7o2Hb9Yde3+24bXjRNW9I='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbsutter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='GotW #3: Using the Standard Library (or, Temporaries Revisited)&nbsp;(3/10)' href='https://herbsutter.com/2013/05/13/gotw-3-using-the-standard-library-or-temporaries-revisited-310/' />
<link rel='next' title='GotW #4: Class Mechanics&nbsp;(7/10)' href='https://herbsutter.com/2013/05/16/gotw-4-class-mechanics-710/' />
<meta name="generator" content="WordPress.com" />
<link rel="canonical" href="https://herbsutter.com/2013/05/16/gotw-3-solution-using-the-standard-library-or-temporaries-revisited/" />
<link rel='shortlink' href='https://wp.me/peb5Y-uQ' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-3-solution-using-the-standard-library-or-temporaries-revisited%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-3-solution-using-the-standard-library-or-temporaries-revisited%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="GotW #3 Solution: Using the Standard Library (or, Temporaries Revisited)" />
<meta property="og:url" content="https://herbsutter.com/2013/05/16/gotw-3-solution-using-the-standard-library-or-temporaries-revisited/" />
<meta property="og:description" content="Effective reuse is an important part of good software engineering. To demonstrate how much better off you can be by using standard library algorithms instead of handcrafting your own, let&#8217;s r…" />
<meta property="article:published_time" content="2013-05-16T19:58:23+00:00" />
<meta property="article:modified_time" content="2013-05-17T20:02:32+00:00" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=200&amp;ts=1542965315" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:text:title" content="GotW #3 Solution: Using the Standard Library (or, Temporaries&nbsp;Revisited)" />
<meta name="twitter:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=240" />
<meta name="twitter:card" content="summary" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=114" />
<link rel='openid.server' href='https://herbsutter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://herbsutter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<script type="text/javascript" id="webfont-output">
  
  WebFontConfig = {"typekit":{"id":"cjs1oxc"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Sutter’s Mill" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Herb Sutter on software development" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbsutter.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="Effective reuse is an important part of good software engineering. To demonstrate how much better off you can be by using standard library algorithms instead of handcrafting your own, let&#039;s reconsider the previous question to demonstrate how many of the problems could have been avoided by simply reusing what&#039;s already available in the standard library.&hellip;" />
<style type="text/css">
			#header h1 a,
		#header h2 {
			color: #265E15 !important;
		}
				#headerimage {
			background: url('https://herbsutter.files.wordpress.com/2011/10/cropped-blog-header.jpg') no-repeat;
			height: 200px;
		}
	</style>
<link rel="amphtml" href="https://herbsutter.com/2013/05/16/gotw-3-solution-using-the-standard-library-or-temporaries-revisited/amp/"><style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s2.wp.com/?custom-css=1&#038;csblog=eb5Y&#038;cscache=6&#038;csrev=60" />
		</head>
<body id="section-index" class="post-template-default single single-post postid-1912 single-format-standard mp6 customizer-styles-applied highlander-enabled highlander-light">


<div id="navigation" class="clearfix">
		<div class="menu">
		<ul>
			<li ><a href="https://herbsutter.com/" title="Home">Home</a></li>
			<li class="page_item page-item-912"><a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the&nbsp;Jungle</a></li>
<li class="page_item page-item-864 page_item_has_children"><a href="https://herbsutter.com/gotw/">GotW</a></li>
<li class="page_item page-item-761"><a href="https://herbsutter.com/elements-of-modern-c-style/">Elements of Modern C++&nbsp;Style</a></li>
<li class="page_item page-item-2 page_item_has_children"><a href="https://herbsutter.com/about/">About</a></li>
									<li class="search"><form method="get" id="searchform" action="https://herbsutter.com"><input type="text" class="textbox" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></form></li>
					</ul>
	</div>
</div><!-- end id:navigation -->

<div id="container">

<div id="header">
<h1><a href="https://herbsutter.com/" title="Sutter’s Mill">Sutter’s Mill</a></h1>
<h2>Herb Sutter on software development</h2>
</div><!-- end id:header -->


	
		<div id="feedarea">
	<dl>
		<dt><strong>Feeds:</strong></dt>

			<dd><a href="https://herbsutter.com/feed/">Posts</a></dd>
	
			<dd><a href="https://herbsutter.com/comments/feed/">Comments</a></dd>
		</dl>
	</div><!-- end id:feedarea -->
	
	<div id="headerimage">
</div><!-- end id:headerimage -->

<div id="content">
<div id="content-main">

		
									<div class="postnav">
				<div class="alignleft">&laquo; <a href="https://herbsutter.com/2013/05/13/gotw-3-using-the-standard-library-or-temporaries-revisited-310/" rel="prev">GotW #3: Using the Standard Library (or, Temporaries Revisited)&nbsp;(3/10)</a></div>
				<div class="alignright"><a href="https://herbsutter.com/2013/05/16/gotw-4-class-mechanics-710/" rel="next">GotW #4: Class Mechanics&nbsp;(7/10)</a> &raquo;</div>
			</div>
			
			<div class="post-1912 post type-post status-publish format-standard hentry category-gotw" id="post-1912">
				<div class="posttitle">
					<h2>GotW #3 Solution: Using the Standard Library (or, Temporaries&nbsp;Revisited)</h2>
					<p class="post-info">2013-05-16 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p><span style="color:#5a5a5a;"><em>Effective reuse is an important part of good software engineering. To demonstrate how much better off you can be by using standard library algorithms instead of handcrafting your own, let&#8217;s reconsider the previous question to demonstrate how many of the problems could have been avoided by simply reusing what&#8217;s already available in the standard library.<br />
</em></span></p>
<p>
 </p>
<h1>Problem<br />
</h1>
<h2>JG Question<br />
</h2>
<p>1. What is the most widely used C++ library?
</p>
<h2>Guru Question<br />
</h2>
<p>2. How many of the pitfalls in GotW #2 could have been avoided in the first place, if only the programmer had replaced the explicit iterator-based <span style="color:#2e74b5;">for</span> loop with:
</p>
<p style="margin-left:36pt;">(a) a range-based <span style="color:#2e74b5;">for</span> loop?
</p>
<p style="margin-left:36pt;">(b) a standard library algorithm call?
</p>
<p>Demonstrate. (Note: As with GotW #2, don&#8217;t change the semantics of the function, even though they could be improved.)
</p>
<p>To recap, here is the mostly-fixed function:
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>string find_addr( const list&lt;employee&gt;&amp; emps, const string&amp; name ) {<br />    for( auto i = begin(emps);  i != end(emps); ++i ) {<br />        if( i-&gt;name() == name ) {<br />            return i-&gt;addr;<br />        }<br />    }<br />    return "";<br />}
</code></pre>
</p>
<p>
 </p>
<h1>Solution<br />
</h1>
<h2>1. What is the most widely used C++ library?<br />
</h2>
<p>The C++ standard library, with its implementations on every platform.
</p>
<p>
 </p>
<h2>2. (a) How many of the pitfalls in GotW #2 could have been avoided with a range-based for loop?<br />
</h2>
<p>Astute readers of GotW #2 will have been champing at the bit to say: &#8220;Why aren&#8217;t you using a range-based <span style="color:#2e74b5;">for</span> loop?&#8221; Indeed, why not? That would solve several of the temporaries, never mind be easier to write.
</p>
<p>Compare the original unimproved explicit iterator loop:
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>    for( auto i = begin(emps); i != end(emps); i++ ) {<br />        if( *i == name ) {<br />            return i-&gt;addr;<br />        }<br />    }
</code></pre>
</p>
<p>with the range-based <span style="color:#2e74b5;">for</span> loop (bonus points if you remembered to write the <span style="color:#2e74b5;">const auto&amp;</span>):
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>    for( const auto&amp; e : emps ) {<br />        if( e == name ) {<br />            return e.addr;<br />        }<br />    }
</code></pre>
</p>
<p>The expressions <span style="color:#2e74b5;">e == name</span> and <span style="color:#2e74b5;">return e.addr;</span> are unchanged in terms of their possible or actual temporaries. But the questions in the naked loop code about whether or not the <span style="color:#2e74b5;">=</span> causes a temporary (recall: it doesn&#8217;t), whether or not <span style="color:#2e74b5;">end()</span> recalculation matters and should be hoisted (recall: probably not, but maybe), and whether or not <span style="color:#2e74b5;">i++</span> should be rewritten <span style="color:#2e74b5;">++i</span> (recall: it should) all simply don&#8217;t arise in the range-<span style="color:#2e74b5;">for</span> code. Such is the power of clear code, and using a higher level of abstraction.
</p>
<p>A key advantage is that using the range-based <span style="color:#2e74b5;">for</span> loop has increased our level of abstraction, the information density in our code. Consider: What can you say about the following two pieces of code without reading what comes next?
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>    for( auto i = begin(emps); i != end(emps); i++ ) {   // A<br /><br />    for( const auto&amp; e : emps ) {                        // B
</code></pre>
</p>
<p>At first it might seem that lines A and B convey the same information, but they don&#8217;t. When you see A, all you know is that there&#8217;s a loop of some sort that uses an iterator over <span style="color:#2e74b5;">emps</span>. Granted, we&#8217;re so used to A that our eye&#8217;s peripheral vision tends to &#8220;autocomplete&#8221; it in our heads into &#8220;a loop that visits the elements of <span style="color:#2e74b5;">emps</span> in order&#8221; and our autocomplete is often correct—except when it isn&#8217;t: was that a <span style="color:#2e74b5;">++</span>, or a s<span style="color:#2e74b5;">+= 2</span> in a strided loop? is the index modified inside the body? Our peripheral vision might be wrong.
</p>
<p>On the other hand, B conveys more information to the reader. When you see B, you know for certain without inspecting the body of the loop that it is a loop that visits the element of <span style="color:#2e74b5;">emps</span> in order. What&#8217;s more, you&#8217;ve simplified the loop control because there&#8217;s no need for an iterator indirection. Both of these are raising the level of abstraction of our code, and that&#8217;s a good thing.
</p>
<p>Note that, as discussed in GotW #2, the naked <span style="color:#2e74b5;">for</span> loop didn&#8217;t naturally allow consolidating to a single <span style="color:#2e74b5;">return</span> statement without resorting to making the code more complex by adding an additional variable and performing extra computation (a default construction followed by an assignment, instead of just a construction). That&#8217;s still true of the range-based <span style="color:#2e74b5;">for</span> loop form, because it still has the two <span style="color:#2e74b5;">return</span> statements in different scopes.
</p>
<h2>2. (b) … with a standard library algorithm call?<br />
</h2>
<p>With no other changes, simply using the standard <span style="color:#2e74b5;">find</span> algorithm could do everything the range-based <span style="color:#2e74b5;">for</span> loop did to avoid needless temporaries (and questions about them):
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>// Better (focusing on internals)<br />//<br />string find_addr( /*...*/ ) {<br />    const auto i = find( begin(emps), end(emps), name );   // TFTFY<br />    return i != end(emps) ? i-&gt;addr : "";<br />}
</code></pre>
</p>
<p>This naturally eliminates the same temporaries as the range-<span style="color:#2e74b5;">for</span> version, and it further increases our level of abstraction. As with the range-based <span style="color:#2e74b5;">for</span> loop, we can see at a glance and for certain that the loop will visit the elements of <span style="color:#2e74b5;">emps</span> in order, but on top of that we also know we&#8217;re trying to <span style="color:#2e74b5;">find</span> something and will get back an iterator to the first matching element if one exists. We do still have an iterator indirection, but only a single-use iterator object and no iterator arithmetic as in the original naked iterator <span style="color:#2e74b5;">for</span> loop.
</p>
<p>Further, we have eliminated a loop nested scope entirely and flattened out the function to a single scope which can simplify this calling function in ways even the range-<span style="color:#2e74b5;">for</span> couldn&#8217;t. To demonstrate still more just how fundamental this point is, note that what else the flattening out of the body buys us: Now, because the <span style="color:#2e74b5;">return</span> statements are in the same scope (possible only because we eliminated the loop scope), we have the option of naturally combining them. You could still write <span style="color:#2e74b5;">if( i != end(emps) ) return i-&gt;addr; else return &#8220;&#8221;;</span> here, on one or two or four lines, but there&#8217;s no need to. To be clear, the point here is not that reducing <span style="color:#2e74b5;">return</span> statements should be a goal in itself—it shouldn&#8217;t be, and &#8220;single exit&#8221; thinking has always been flawed as we already saw in GotW #2. Rather, the point is that using an algorithm often simplifies our code more than an explicit loop, even a range-<span style="color:#2e74b5;">for</span> loop, can do—not only directly by removing extra indirections and extra variables and a loop nested scope, but often also by permitting additional simplifications in nearby code.
</p>
<p>The above code might still cause a temporary when comparing an <span style="color:#2e74b5;">employee</span> with a <span style="color:#2e74b5;">string</span>, and we can eliminate even that temporary if we go one small step further and use <span style="color:#2e74b5;">find_if</span> with a custom comparison that compares <span style="color:#2e74b5;">e.name() == name</span> to avoid a possible conversion, assuming something like a suitable <span style="color:#2e74b5;">employee::name()</span> is available as we did in GotW #2. Combining this with the other fixes to pass parameters by reference, we get:
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>// Better still (complete)<br />//<br />string find_addr( const list&lt;employee&gt;&amp; emps, const string&amp; name ) {<br />    const auto i = find_if( begin(emps), end(emps),<br />                      [&amp;](const auto&amp; e) { return e.name() == name; } );<br />    return i != end(emps) ? i-&gt;addr : "";<br />}
</code></pre>
</p>
<p>
 </p>
<h2>Summary<br />
</h2>
<p>Prefer algorithm calls over explicit loops, when you have or can write a suitable algorithm that does what you want. They raise the level of abstraction and the clarity of our code. Scott Meyers&#8217; advice in <em>Effective STL</em> is still true, and more applicable than even now that lambdas make algorithms much more usable than before:
</p>
<blockquote>
<p><strong>Guideline: </strong>Prefer algorithm calls to explicit loops. Algorithm calls are often clearer and reduce complexity. If no suitable algorithm exists, why not write it? You&#8217;ll use it again.
</p>
</blockquote>
<p>Prefer reusing existing library code to handcrafting your own. The more widely used the library, the more likely it is to come well-designed, pre-debugged, and pre-optimized for many common requirements. And what library is more widely used than the standard library? In your C++ program, your standard library implementation is the most widely used library code you&#8217;re likely to use. This helps you both in the library&#8217;s design and its implementation: It&#8217;s full of code that&#8217;s intended to be used and reused, and to that end a lot of thought and care has gone into the design of its features, including its standard algorithms like <span style="color:#2e74b5;">find</span> and <span style="color:#2e74b5;">sort</span>. Implementers have also spent hours sweating over efficiency details, and usability details, and all sorts of other considerations so that you don&#8217;t have to—including performing optimizations you should almost never resort to in application-level code, such as using nonportable OS- and CPU-target specific optimizations.
</p>
<p>So, always prefer to reuse code, especially algorithms and especially the standard library, and escape the trap of &#8220;I&#8217;ll-write-my-own-just-&#8217;cause-I-can.&#8221;
</p>
<blockquote>
<p><strong>Guideline: </strong>Reuse code—especially standard library code—instead of handcrafting your own. It&#8217;s faster, easier, and safer.
</p>
</blockquote>
<h2>Acknowledgments<br />
</h2>
<p>Thanks in particular to the following for their feedback to improve this article: Olaf ven der Spek, Sam Kramer.</p>
									</div>

				<p class="postmetadata">
					Posted in <a href="https://herbsutter.com/category/c/gotw/" rel="category tag">GotW</a> | 											32 Comments									</p>
				
<!-- You can start editing here. -->

<h3 id="comments">32 Responses</h3>

	<ol class="commentlist">
			<li class="comment even thread-even depth-1 highlander-comment" id="comment-18219">
		<div id="div-comment-18219">
		<div class="cmtinfo"><em> on <a href="#comment-18219" title="">2014-04-06 at 7:13 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/836c7af24d8e6e1b3131b2f0609388f2?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Tim</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_18219"></div><p>Hello.<br />
&gt;If you mean auto as a lambda parameter type</p>
<p>yes exactly! Thanks for the answer, I have to refresh my knowledge of auto now :)</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-18066">
		<div id="div-comment-18066">
		<div class="cmtinfo"><em> on <a href="#comment-18066" title="">2014-04-03 at 7:39 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_18066"></div><p>@Tim: If you mean auto as a lambda parameter type, such as [](auto&amp; s){ use(s); }, good question! That&#8217;s a new feature in C++14. I&#8217;ve written a longer answer here as a new post so everyone will see the question and the answer: <a href="https://herbsutter.com/2014/04/03/reader-qa-generic-lambdas/" rel="nofollow">https://herbsutter.com/2014/04/03/reader-qa-generic-lambdas/</a> .</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-18065">
		<div id="div-comment-18065">
		<div class="cmtinfo"><em> on <a href="#comment-18065" title="">2014-04-03 at 7:36 am</a></em> <img alt='' src='https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='https://herbsutter.com/2014/04/03/reader-qa-generic-lambdas/' rel='external nofollow' class='url'>Reader Q&amp;A: Generic lambdas | Sutter’s Mill</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_18065"></div><p>[&#8230;] Tim just added this comment on the GotW #3 Solution blog post from last year: [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-18063">
		<div id="div-comment-18063">
		<div class="cmtinfo"><em> on <a href="#comment-18063" title="">2014-04-03 at 6:19 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/836c7af24d8e6e1b3131b2f0609388f2?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Tim</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_18063"></div><p>Are you sure you can use auto in lambda like this?<br />
I can not compile the code and I&#8217;m pretty sure auto does not work here.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-10351">
		<div id="div-comment-10351">
		<div class="cmtinfo"><em> on <a href="#comment-10351" title="">2013-05-23 at 2:33 am</a></em>  <cite><a href='http://alikhuram.wordpress.com/2013/05/23/sorting-localized-strings/' rel='external nofollow' class='url'>Sorting Localized Strings | Khuram Ali</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10351"></div><p>[&#8230;] GotW #3 Solution: Using the Standard Library (or, Temporaries Revisited) (herbsutter.com) [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10305">
		<div id="div-comment-10305">
		<div class="cmtinfo"><em> on <a href="#comment-10305" title="">2013-05-22 at 12:44 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/ecba9d9a00dd0fff899bf31ba544ea65?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>David Collier</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10305"></div><p>Sorry for the digression, but from that concepts@isocpp thread it seems a big part of the objections is the ambiguity whereby [](e) { &#8230; } could mean a function taking an unnamed parameter of type e. Which looks like a fair point.</p>
<p>I was wondering whether it had been considered to have a specific exception for ref and const-ref parameters, so that you could write</p>
<p>[](&amp;e) { use(e) }</p>
<p>but if you wanted pass-by-value, or if you wanted something more complicated like a parameter of type function-taking-auto-returning-bool, you&#8217;d have to use the auto placeholder.</p>
<p>I&#8217;d have thought that reference parameters are more useful than by-value parameters in a generic context, so this doesn&#8217;t seem to lose much.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor even thread-even depth-1 highlander-comment" id="comment-10250">
		<div id="div-comment-10250">
		<div class="cmtinfo"><em> on <a href="#comment-10250" title="">2013-05-20 at 10:18 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10250"></div><p>@Leo: This is an interesting observation, especially if instead of deducing const auto&amp; we deduce the constraint more generally. I&#8217;ve started a thread based on your example at <a href="mailto:concepts@isocpp.org">concepts@isocpp.org</a> here: <a href="https://groups.google.com/a/isocpp.org/d/msg/concepts/mUlJ3D1VGVE/41JYIKu_004J" rel="nofollow">https://groups.google.com/a/isocpp.org/d/msg/concepts/mUlJ3D1VGVE/41JYIKu_004J</a> . I don&#8217;t know if it&#8217;ll go anywhere, but it could address the concerns about the nice &#8220;[](e){ use(e); }&#8221; syntax too&#8230;</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10241">
		<div id="div-comment-10241">
		<div class="cmtinfo"><em> on <a href="#comment-10241" title="">2013-05-19 at 12:22 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/d51032a14bd8da40bbc1f0d7412b090b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Leo</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10241"></div><p>Herb, if Bjarne&#8217;s expectations for C++14 (<a href="https://www.informit.com/articles/article.aspx?p=2080042" rel="nofollow">https://www.informit.com/articles/article.aspx?p=2080042</a>) are fulfilled wouldn&#8217;t the STL provide an overload like the following (if it would work):</p>
<pre class="brush: plain; title: ; notranslate" title="">
template&lt;Container Cont, Predicate Pred&gt;
requires Input_iterator&lt;Iterator&lt;Cont&gt;&gt;()
Iterator&lt;Cont&gt; find_if(Cont&amp; c, Pred p);
</pre>
<p>If then the fact could be taken into account that a Predicate is not supposed to change its argument, the type of e could default to const auto&amp;. Then one could write:</p>
<pre class="brush: plain; title: ; notranslate" title="">
const auto i = find_if(emps, [&amp;](e) { return e.name() == name; });
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10238">
		<div id="div-comment-10238">
		<div class="cmtinfo"><em> on <a href="#comment-10238" title="">2013-05-19 at 9:05 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/d6438991d6d292ab415d698d8345b942?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Roger</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10238"></div><p>With lambdas now available, I use the built in functions as much as I can. I often find I cannot because relationships between elements in a list are often important (remember the index to something, or whatever). </p>
<p>But the code is still so frustrating to type, and ugly. We have ranges now, wouldn&#8217;t it be nice to add it into the standard library for all things that take ranges? We also have auto, it would be nice if we didn&#8217;t have to keep typing the names of types that we already know. Consider:</p>
<pre class="brush: plain; title: ; notranslate" title="">const auto i = find_if (e:emps, [&amp;](auto) {return e.name() == name});</pre>
<p>I&#8217;m sure that syntax would break something in C++, but this is along the lines of what I want in a modern language. Herb said something in a talk about C++11 not being your dad&#8217;s C++ (or a metaphor to that effect). Well, it still is, albeit  better. I don&#8217;t want to type begin(x), end(x) anymore. I don&#8217;t want to type types for a lambda when they can be figured out. More importantly, I don&#8217;t want to parse through tons of boilerplate code that somebody else typed (or that I typed 6 months ago) to try to figure out what is being done.I find myself moving back to using simple for loops, I find them clearer to read and a heck of a lot easier to type. I don&#8217;t want to have to keep in my mental stack the iterator that the find_if introduces. I don&#8217;t want to have to parse the ? operator code to see which value is returned in each case. Range based for is readable, the last solution is just a mess.</p>
<p>Actually, i would love to write something like:</p>
<pre class="brush: plain; title: ; notranslate" title="">
string find_addr (emps,name) {
   return e.addr if e.name == name in e:emps;
   return &quot;&quot;;
}
</pre>
<p>and just have the compiler figure out things like name can be passed by const reference, that emps needs to be something that supports ranges and has addr and name fields, and that the auto is implied. That&#8217;s true information density. </p>
<p>C++ has become so unreadable. &#8216;const std::shared_ptr&lt;std::vector&gt;&amp;&#8217; is a typical signature for a single parameter in my code. (I would love a GotW that focused on using managed pointers in a readable way, btw). </p>
<p>Sorry if this comes off as a rant, but I think conciseness and readability is far more important than removing any possible creation of a temporary variable, and more important than following a (generally good) rule like use the standard library. Try reading code where a default parameter like less is used, and search through all the headers, and headers included by headers, to figure out what version of less is being used by the standard library call for a user defined struct. A for loop makes it all explicit, often with far fewer characters. Explicit is good. Readability is good. I would not want my engineers writing code like Herb&#8217;s last example unless this function was so critical that efficiency came before anything else. It&#8217;s horrible, ugly code IMO.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10226">
		<div id="div-comment-10226">
		<div class="cmtinfo"><em> on <a href="#comment-10226" title="">2013-05-19 at 8:22 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10226"></div><p>@Ran: cppreference.com seems to have it correct: <a href="http://en.cppreference.com/w/cpp/language/range-for" rel="nofollow">http://en.cppreference.com/w/cpp/language/range-for</a></p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10220">
		<div id="div-comment-10220">
		<div class="cmtinfo"><em> on <a href="#comment-10220" title="">2013-05-18 at 10:48 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/0887d4bcbf5f1ab465f7dd9487120e27?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Ran</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10220"></div><p>Herb, can you please elaborate on the underneath work that is done in ranged-based loops? As getting higher in the abstraction we also loose contact with the ground. And though we KNOW we are on the safe side and performance is taken into consideration, still, can you please explain more on what the standard says to implementers of range based loops?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10206">
		<div id="div-comment-10206">
		<div class="cmtinfo"><em> on <a href="#comment-10206" title="">2013-05-17 at 4:29 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.facebook.com/profile.php?id=745788893' rel='external nofollow' class='url'>David Thomas</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10206"></div><p>Since employee supports find(&#8230;, name), instead of e.name() == name the lambda could contain e == name.  If name() returns a reference to const string, then I suspect it won&#8217;t matter.  If name() returns a string, then I suspect we are paying price greater than e == name (on each iteration).  Writing the lambda to avoid the potential temporaries yeidlds:</p>
<pre class="brush: plain; title: ; notranslate" title="">
string find_addr( const list&lt;employee&gt;&amp; emps, const string&amp; name ) {
    const auto i = find_if( begin(emps), end(emps),
                      [&amp;](const auto&amp; e) { return e == name; } );
    return i != end(emps) ? i-&gt;addr : &quot;&quot;;
}
</pre>
<p>On the compiler that I checked, if name() returns a const string&amp;, then e == name optimizes to the same code as e.name() == name. No penalty here.  However, if name() returns a string, then the impact is significant (the complexity prevented inlining and temporaries were created).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10200">
		<div id="div-comment-10200">
		<div class="cmtinfo"><em> on <a href="#comment-10200" title="">2013-05-17 at 1:42 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/db892012bc52cc6cbfd27db9d98acf8b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>GregM</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10200"></div><p>Dave, I asked the strlen question in GoTW #1, and Herb assures me that it&#8217;s not there is a &#8220;good&#8221; string library.  It checks for the first character being 0 before it calls strlen.</p>
<p>While equality may feel simpler than inequality, I generally prefer to check for success rather than failure when the two options are basically equivalent.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10195">
		<div id="div-comment-10195">
		<div class="cmtinfo"><em> on <a href="#comment-10195" title="">2013-05-17 at 12:19 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/51d9c0f234a7029ac58358a6dc2053f5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Dave Harris</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10195"></div><p>Am I the only person who would prefer:</p>
<pre class="brush: plain; title: ; notranslate" title="">
return i == end(emps) ? &quot;&quot; : i-&gt;addr;
</pre>
<p>Equality feels slightly simpler than inequality. I&#8217;d also prefer to avoid converting the c-string to a std::string:</p>
<pre class="brush: plain; title: ; notranslate" title="">
return i == end(emps) ? string() : i-&gt;addr;
</pre>
<p>The conversion probably won&#8217;t allocate memory, but it&#8217;s still doing unnecessary work &#8211; possibly including a call to strlen(), for example.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor even thread-even depth-1 highlander-comment" id="comment-10194">
		<div id="div-comment-10194">
		<div class="cmtinfo"><em> on <a href="#comment-10194" title="">2013-05-17 at 12:02 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10194"></div><p>@Olaf: OK, clarified (in GotW #2) along the lines that “I’m assuming something like .name() is available and .name() == name has the same semantics.”</p>
<p>@Sam: Good point, noted.</p>
<p>@Adrian: A program that does that has undefined behavior and could achieve the same effect by dereferencing a random int cast to a pointer. Within defined behavior, the range-for can iterate only one way, from the front in order visiting every element exactly once, and the only possibly variation in behavior is that it could stop early if there&#8217;s a break or return inside vs. visiting all elements.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10189">
		<div id="div-comment-10189">
		<div class="cmtinfo"><em> on <a href="#comment-10189" title="">2013-05-17 at 8:34 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/ca391c038b300a739462dae91c5e8cbc?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Adrian</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10189"></div><p>&#8220;When you see B [the range-based for loop], you know for certain without inspecting the body of the loop that it is a loop that visits the element of emps in order.&#8221;  Certainly there are some things the body _might_ do that would contradict that.  For example, if the body modifies the container in a way that would invalidate outstanding iterators, you no longer can be sure that the loop will proceed normally. Consider:</p>
<pre class="brush: plain; title: ; notranslate" title="">
for (const auto &amp; e : emps) {
  if (e.name == &quot;Herb&quot;) {
    emps.push_front(employee(&quot;Bjarne&quot;));
  }
}
</pre>
<p>Obviously, this isn&#8217;t an advisable thing to do in the loop, but the compiler isn&#8217;t likely to notice.  Thus a range-based for loop might give you more confidence that it visits each element in order, but, unless emps is const, you cannot be absolutely certain without looking inside the body and without knowing the type of container and that container type&#8217;s iterator invalidation rules.  Right?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10185">
		<div id="div-comment-10185">
		<div class="cmtinfo"><em> on <a href="#comment-10185" title="">2013-05-17 at 7:32 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c6d076eb5be7f09dd4256e70d903615c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Sam Kramer</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10185"></div><p>The astute reader will have noticed that the guidance from this tip is derived directly from the book Effective STL, Item 43: Prefer algorithm calls to hand-written loops. It&#8217;s good to know that best practices from C++98 are still largely relevant in C++11.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10176">
		<div id="div-comment-10176">
		<div class="cmtinfo"><em> on <a href="#comment-10176" title="">2013-05-17 at 3:46 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/8328e2a775af97d904f274f4693ea582?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Barry</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10176"></div><p>This extra branch;</p>
<pre class="brush: plain; title: ; notranslate" title="">return i != end(emps) ? i-&gt;addr : &quot;&quot;;</pre>
<p>Find just returns an iterator that you still have to check. The range-for version just returns.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10173">
		<div id="div-comment-10173">
		<div class="cmtinfo"><em> on <a href="#comment-10173" title="">2013-05-17 at 12:56 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/ef95896d2a7b776c0c22f0039bd0bf4d?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Brian M</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10173"></div><p>One important thing is that abstraction does not always equate to better or more readable code.  The use of more familiar constructs is often a better overall solution, errors are more likely to be seen by the casual reader etc. Although the examples are fairly trivial some are certainly more comfortable and easier to read  and Jay gets it about right with his comment. The important thing to remember is that code is just a means to an end! If we are thinking at this level of trivia is there something else wrong?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10172">
		<div id="div-comment-10172">
		<div class="cmtinfo"><em> on <a href="#comment-10172" title="">2013-05-17 at 12:04 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/26230e55188637785a569c6ec8ca0f3f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://xwis.net/' rel='external nofollow' class='url'>Olaf van der Spek</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10172"></div><p>@Herb Sure. IMO you disregarded this note: &#8220;Note: As with GotW #2, don’t change the semantics of the function, even though they could be improved.&#8221;<br />
Whether employee == string is valid and has the same semantics as employee::name() == string isn&#8217;t given, so you shouldn&#8217;t assume it is.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10166">
		<div id="div-comment-10166">
		<div class="cmtinfo"><em> on <a href="#comment-10166" title="">2013-05-16 at 10:57 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/f82ffa4ef26e04998604eefde494332f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/larsviklund' rel='external nofollow' class='url'>Lars Viklund</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10166"></div><p>Aren&#8217;t generic lambdas C++1y?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10164">
		<div id="div-comment-10164">
		<div class="cmtinfo"><em> on <a href="#comment-10164" title="">2013-05-16 at 8:57 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/78e87615823ef2ad514ccd618fd22f21?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Balakrishnan B</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10164"></div><p>I dont understand what does an extra branch mean in the find_if version. Does everyone refer to a function call? I guess algorithms like find_if would be most likely be inlined as it takes template arguments.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10155">
		<div id="div-comment-10155">
		<div class="cmtinfo"><em> on <a href="#comment-10155" title="">2013-05-16 at 2:51 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/8328e2a775af97d904f274f4693ea582?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Barry</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10155"></div><p>Yes, in this specific example the fact that we&#8217;re returning a string by-value dwarfs the extra branch after the find(), but I am more interested in the general case, where we do call some function lots of times, and its return is very light (say it returns a pointer to the found element or 0).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10154">
		<div id="div-comment-10154">
		<div class="cmtinfo"><em> on <a href="#comment-10154" title="">2013-05-16 at 2:35 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/21e08c9dc5723cb8cd946ea149610656?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/thematto' rel='external nofollow' class='url'>TheMatto</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10154"></div><p>Minor point. The range-for loop can be written </p>
<pre class="brush: plain; title: ; notranslate" title="">for ( auto &amp; e : emps ) {...}</pre>
<p> given that emps is const.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-nosenseetal even thread-even depth-1 highlander-comment" id="comment-10152">
		<div id="div-comment-10152">
		<div class="cmtinfo"><em> on <a href="#comment-10152" title="">2013-05-16 at 2:27 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>nosenseetal</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10152"></div><p>@Jay imao both of your code blocks are uglier than Herbs find version because you have std function that is designed to (tadaaaam) find element in a range. Period. :)<br />
Beside I would guesstimate all this talk about perf is unrealistic&#8230; I mean if you really call this method like a mad man you probably want to go to the dark side and return a reference, also kill std::list with fire . :)</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10151">
		<div id="div-comment-10151">
		<div class="cmtinfo"><em> on <a href="#comment-10151" title="">2013-05-16 at 2:14 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/9e39a7e29a8d191c3a198ccb056999f7?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/austinwiltshire' rel='external nofollow' class='url'>austinwiltshire</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10151"></div><p>@Jay<br />
Are you confusing readability for familiarity? :)</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10149">
		<div id="div-comment-10149">
		<div class="cmtinfo"><em> on <a href="#comment-10149" title="">2013-05-16 at 1:42 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/8cce47c29b37ed4cc8909c9fdb997507?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Jay Miller</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10149"></div><p>Two issues.  One is that I think Barry&#8217;s point is relevant even though, in this case, an extra branch is swamped out by dynamic memory allocation.  Similarly to using prefix increment, doing things in a consistent manner every time that yields better performance in a subset of cases is a Good Thing if it doesn&#8217;t make readability worse (though sometimes being consistent makes for better readability even if it&#8217;s slightly more complex).</p>
<p>That brings us to the second issue, which is that I can&#8217;t in good conscience say that</p>
<pre class="brush: plain; title: ; notranslate" title="">
string find_addr( const list&lt;employee&gt;&amp; emps, const string&amp; name ) {
    const auto i = find_if( begin(emps), end(emps),
                      [&amp;](const auto&amp; e) { return e.name() == name; } );
    return i != end(emps) ? i-&gt;addr : &quot;&quot;;
}
</pre>
<p>is more readable than</p>
<pre class="brush: plain; title: ; notranslate" title="">
string find_addr( const list&lt;employee&gt;&amp; emps, const string&amp; name ) {
    for (const auto&amp; e : emps) {
        if (e.name() == name) {
            return e.addr;
        }
    }
    return string(); 
}
</pre>
<p>Granted it&#8217;s fewer lines, but I can reason very intuitively about the bottom.  The difference is small, so if the find_if case were faster then I&#8217;d use it.  But an extra branch /and/ not as readable?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10146">
		<div id="div-comment-10146">
		<div class="cmtinfo"><em> on <a href="#comment-10146" title="">2013-05-16 at 1:26 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10146"></div><p>@Olaf: Can you elaborate?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10141">
		<div id="div-comment-10141">
		<div class="cmtinfo"><em> on <a href="#comment-10141" title="">2013-05-16 at 1:08 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/26230e55188637785a569c6ec8ca0f3f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://xwis.net/' rel='external nofollow' class='url'>Olaf van der Spek</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10141"></div><p>Herb, you&#8217;re cheating by using find instead of find_if. :p</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-nosenseetal odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10140">
		<div id="div-comment-10140">
		<div class="cmtinfo"><em> on <a href="#comment-10140" title="">2013-05-16 at 1:04 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>nosenseetal</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10140"></div><p>find_if is worse for readability than find because beside being linger find_if says im checking for predicate(aka name.size()&gt;123) not value&#8230;  btw I wonder if there is any diff in IRL perf between find and find_if</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10139">
		<div id="div-comment-10139">
		<div class="cmtinfo"><em> on <a href="#comment-10139" title="">2013-05-16 at 12:57 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/909469b64d49eaf2c4e82fbba166d55c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Stephan</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10139"></div><p>@Barry find_addr returns a string (that needs to be constructed and likely requires dynamic memory allocation), so the extra branch doesn&#8217;t matter even if find_if isn&#8217;t inlined.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10136">
		<div id="div-comment-10136">
		<div class="cmtinfo"><em> on <a href="#comment-10136" title="">2013-05-16 at 12:27 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/8328e2a775af97d904f274f4693ea582?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Barry</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10136"></div><p>When using find or find_if, doesn&#8217;t that incur an extra branch over the normal range-for loop implementation? I&#8217;m not sure the algorithm solution is necessarily cleaner enough to merit the hit.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<br />

  	<p class="nocomments">Comments are closed.</p>
  <div class="post-content">
<p>
</p>
</div>

			</div>

		
		<p align="center"></p>

	</div><!-- end id:content-main -->
<div id="sidebar">
<ul>
<li class="sidebox"><h2><label for="subscribe-field">Follow by email</label></h2>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
																	<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"/></p>
					
					<p>
						<input type="hidden" name="action" value="subscribe"/>
						<input type="hidden" name="blog_id" value="3379246"/>
						<input type="hidden" name="source" value="https://herbsutter.com/2013/05/16/gotw-3-solution-using-the-standard-library-or-temporaries-revisited/"/>
						<input type="hidden" name="sub-type" value="widget"/>
						<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
						<input type="hidden" id="_wpnonce" name="_wpnonce" value="4590924cc6" />						<input type="submit" value="Subscribe" />
					</p>
				</form>
			
</li><li class="sidebox"><h2><a href='http://twitter.com/herbsutter'>Tweets</a></h2><ul class='tweets'></ul><a href="http://twitter.com/herbsutter"  class='twitter-follow-button' data-show-count='false' data-link-color='#265e15' data-text-color='#333333'>Follow @herbsutter</a></li><li class="sidebox"><h2>Popular</h2><ul>				<li>
										<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" class="bump-view" data-bump-view="tp">
						Trip report: Fall ISO C++ standards meeting (San Diego)					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/gotw/" class="bump-view" data-bump-view="tp">
						GotW					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" class="bump-view" data-bump-view="tp">
						Lifetime profile v1.0 posted					</a>
										</li>
				</ul></li><li class="sidebox"><h2>Categories</h2>		<ul>
				<li class="cat-item cat-item-291"><a href="https://herbsutter.com/category/apple/" >Apple</a>
</li>
	<li class="cat-item cat-item-49277"><a href="https://herbsutter.com/category/c-net/" >C# / .NET</a>
</li>
	<li class="cat-item cat-item-2426"><a href="https://herbsutter.com/category/c/" >C++</a>
</li>
	<li class="cat-item cat-item-69816"><a href="https://herbsutter.com/category/cloud/" >Cloud</a>
</li>
	<li class="cat-item cat-item-214618"><a href="https://herbsutter.com/category/concurrency/" >Concurrency</a>
</li>
	<li class="cat-item cat-item-8259773"><a href="https://herbsutter.com/category/effective-concurrency/" >Effective Concurrency</a>
</li>
	<li class="cat-item cat-item-3696745"><a href="https://herbsutter.com/category/friday-thoughts/" >Friday Thoughts</a>
</li>
	<li class="cat-item cat-item-3867746"><a href="https://herbsutter.com/category/c/gotw/" >GotW</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://herbsutter.com/category/hardware/" >Hardware</a>
</li>
	<li class="cat-item cat-item-1017"><a href="https://herbsutter.com/category/java/" >Java</a>
</li>
	<li class="cat-item cat-item-637"><a href="https://herbsutter.com/category/microsoft/" >Microsoft</a>
</li>
	<li class="cat-item cat-item-420845"><a href="https://herbsutter.com/category/opinion-editorial/" >Opinion &amp; Editorial</a>
</li>
	<li class="cat-item cat-item-1633077"><a href="https://herbsutter.com/category/reader-qa/" >Reader Q&amp;A</a>
</li>
	<li class="cat-item cat-item-2301"><a href="https://herbsutter.com/category/software-development/" >Software Development</a>
</li>
	<li class="cat-item cat-item-393523"><a href="https://herbsutter.com/category/talks-events/" >Talks &amp; Events</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://herbsutter.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-151"><a href="https://herbsutter.com/category/web/" >Web</a>
</li>
		</ul>
			</li></ul>
</div><!-- end id:sidebar -->
</div><!-- end id:content -->
</div><!-- end id:container -->
<div id="footer">
	<div id="colophon">
		<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a></p>
		<p>WPThemes.</p>
		<br class="clear" />
	</div><!-- end #colophon-->
</div><!-- end #footer-->
<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201847y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-836c7af24d8e6e1b3131b2f0609388f2">
	</div>
	<div class="grofile-hash-map-c0ba56bfd231f8f04feb057728975181">
	</div>
	<div class="grofile-hash-map-ecba9d9a00dd0fff899bf31ba544ea65">
	</div>
	<div class="grofile-hash-map-d51032a14bd8da40bbc1f0d7412b090b">
	</div>
	<div class="grofile-hash-map-d6438991d6d292ab415d698d8345b942">
	</div>
	<div class="grofile-hash-map-0887d4bcbf5f1ab465f7dd9487120e27">
	</div>
	<div class="grofile-hash-map-b0cc2208baa8138cdb6fc898bd298500">
	</div>
	<div class="grofile-hash-map-db892012bc52cc6cbfd27db9d98acf8b">
	</div>
	<div class="grofile-hash-map-51d9c0f234a7029ac58358a6dc2053f5">
	</div>
	<div class="grofile-hash-map-ca391c038b300a739462dae91c5e8cbc">
	</div>
	<div class="grofile-hash-map-c6d076eb5be7f09dd4256e70d903615c">
	</div>
	<div class="grofile-hash-map-8328e2a775af97d904f274f4693ea582">
	</div>
	<div class="grofile-hash-map-ef95896d2a7b776c0c22f0039bd0bf4d">
	</div>
	<div class="grofile-hash-map-26230e55188637785a569c6ec8ca0f3f">
	</div>
	<div class="grofile-hash-map-f82ffa4ef26e04998604eefde494332f">
	</div>
	<div class="grofile-hash-map-78e87615823ef2ad514ccd618fd22f21">
	</div>
	<div class="grofile-hash-map-21e08c9dc5723cb8cd946ea149610656">
	</div>
	<div class="grofile-hash-map-6aea6e2f57f2a7b1cd6870375fbdc42f">
	</div>
	<div class="grofile-hash-map-9e39a7e29a8d191c3a198ccb056999f7">
	</div>
	<div class="grofile-hash-map-8cce47c29b37ed4cc8909c9fdb997507">
	</div>
	<div class="grofile-hash-map-909469b64d49eaf2c4e82fbba166d55c">
	</div>
	</div>
<script type='text/javascript' charset='UTF-8' id='polldaddyRatings'><!--//--><![CDATA[//><!--
PDRTJS_settings_468178_comm_18219={"id":468178,"unique_id":"wp-comment-18219","title":"Hello.%26gt%3BIf%20you%20mean%20auto%20as%20a%20lambda%20parameter%20typeyes%20exactly%21%20Thanks%20for%20the%20answer%2C%20I%20have%20to%20refresh%20my%20knowledge%20of%20auto%20now%20%3A%29...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-18219","item_id":"_comm_18219"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_18219 == 'undefined' ){PDRTJS_468178_comm_18219 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_18219 );}}PDRTJS_settings_468178_comm_18066={"id":468178,"unique_id":"wp-comment-18066","title":"%40Tim%3A%20If%20you%20mean%20auto%20as%20a%20lambda%20parameter%20type%2C%20such%20as%20%26%23091%3B%26%23093%3B%28auto%26amp%3B%20s%29%7B%20use%28s%29%3B%20%7D%2C%20good%20question%21%20That%26%23039%3Bs%20a%20new%20feature%20in%20C%2B%2B14.%20I%26%23039%3Bve%20written%20a%20longer%20answer%20here%20as%20a%20new%20post%20so%20everyone%20wi...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-18066","item_id":"_comm_18066"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_18066 == 'undefined' ){PDRTJS_468178_comm_18066 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_18066 );}}PDRTJS_settings_468178_comm_18065={"id":468178,"unique_id":"wp-comment-18065","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20Tim%20just%20added%20this%20comment%20on%20the%20GotW%20%233%20Solution%20blog%20post%20from%20last%20year%3A%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-18065","item_id":"_comm_18065"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_18065 == 'undefined' ){PDRTJS_468178_comm_18065 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_18065 );}}PDRTJS_settings_468178_comm_18063={"id":468178,"unique_id":"wp-comment-18063","title":"Are%20you%20sure%20you%20can%20use%20auto%20in%20lambda%20like%20this%3FI%20can%20not%20compile%20the%20code%20and%20I%26%23039%3Bm%20pretty%20sure%20auto%20does%20not%20work%20here....","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-18063","item_id":"_comm_18063"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_18063 == 'undefined' ){PDRTJS_468178_comm_18063 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_18063 );}}PDRTJS_settings_468178_comm_10351={"id":468178,"unique_id":"wp-comment-10351","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20GotW%20%233%20Solution%3A%20Using%20the%20Standard%20Library%20%28or%2C%20Temporaries%20Revisited%29%20%28herbsutter.com%29%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10351","item_id":"_comm_10351"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10351 == 'undefined' ){PDRTJS_468178_comm_10351 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10351 );}}PDRTJS_settings_468178_comm_10305={"id":468178,"unique_id":"wp-comment-10305","title":"Sorry%20for%20the%20digression%2C%20but%20from%20that%20concepts%40isocpp%20thread%20it%20seems%20a%20big%20part%20of%20the%20objections%20is%20the%20ambiguity%20whereby%20%26%23091%3B%26%23093%3B%28e%29%20%7B%20...%20%7D%20could%20mean%20a%20function%20taking%20an%20unnamed%20parameter%20of%20ty...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10305","item_id":"_comm_10305"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10305 == 'undefined' ){PDRTJS_468178_comm_10305 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10305 );}}PDRTJS_settings_468178_comm_10250={"id":468178,"unique_id":"wp-comment-10250","title":"%40Leo%3A%20This%20is%20an%20interesting%20observation%2C%20especially%20if%20instead%20of%20deducing%20const%20auto%26amp%3B%20we%20deduce%20the%20constraint%20more%20generally.%20I%26%23039%3Bve%20started%20a%20thread%20based%20on%20your%20example%20at%20concepts%40isocpp...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10250","item_id":"_comm_10250"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10250 == 'undefined' ){PDRTJS_468178_comm_10250 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10250 );}}PDRTJS_settings_468178_comm_10241={"id":468178,"unique_id":"wp-comment-10241","title":"Herb%2C%20if%20Bjarne%26%23039%3Bs%20expectations%20for%20C%2B%2B14%20%28https%3A%2F%2Fwww.informit.com%2Farticles%2Farticle.aspx%3Fp%3D2080042%29%20are%20fulfilled%20wouldn%26%23039%3Bt%20the%20STL%20provide%20an%20overload%20like%20the%20following%20%28if%20it%20would%20work%29%3A%26%23091%3Bcode%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10241","item_id":"_comm_10241"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10241 == 'undefined' ){PDRTJS_468178_comm_10241 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10241 );}}PDRTJS_settings_468178_comm_10238={"id":468178,"unique_id":"wp-comment-10238","title":"With%20lambdas%20now%20available%2C%20I%20use%20the%20built%20in%20functions%20as%20much%20as%20I%20can.%20I%20often%20find%20I%20cannot%20because%20relationships%20between%20elements%20in%20a%20list%20are%20often%20important%20%28remember%20the%20index%20to%20someth...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10238","item_id":"_comm_10238"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10238 == 'undefined' ){PDRTJS_468178_comm_10238 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10238 );}}PDRTJS_settings_468178_comm_10226={"id":468178,"unique_id":"wp-comment-10226","title":"%40Ran%3A%20cppreference.com%20seems%20to%20have%20it%20correct%3A%20http%3A%2F%2Fen.cppreference.com%2Fw%2Fcpp%2Flanguage%2Frange-for...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10226","item_id":"_comm_10226"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10226 == 'undefined' ){PDRTJS_468178_comm_10226 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10226 );}}PDRTJS_settings_468178_comm_10220={"id":468178,"unique_id":"wp-comment-10220","title":"Herb%2C%20can%20you%20please%20elaborate%20on%20the%20underneath%20work%20that%20is%20done%20in%20ranged-based%20loops%3F%20As%20getting%20higher%20in%20the%20abstraction%20we%20also%20loose%20contact%20with%20the%20ground.%20And%20though%20we%20KNOW%20we%20are%20on%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10220","item_id":"_comm_10220"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10220 == 'undefined' ){PDRTJS_468178_comm_10220 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10220 );}}PDRTJS_settings_468178_comm_10206={"id":468178,"unique_id":"wp-comment-10206","title":"Since%20employee%20supports%20find%28...%2C%20name%29%2C%20instead%20of%20e.name%28%29%20%3D%3D%20name%20the%20lambda%20could%20contain%20e%20%3D%3D%20name.%20%20If%20name%28%29%20returns%20a%20reference%20to%20const%20string%2C%20then%20I%20suspect%20it%20won%26%23039%3Bt%20matter.%20%20If%20name%28%29...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10206","item_id":"_comm_10206"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10206 == 'undefined' ){PDRTJS_468178_comm_10206 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10206 );}}PDRTJS_settings_468178_comm_10200={"id":468178,"unique_id":"wp-comment-10200","title":"Dave%2C%20I%20asked%20the%20strlen%20question%20in%20GoTW%20%231%2C%20and%20Herb%20assures%20me%20that%20it%26%23039%3Bs%20not%20there%20is%20a%20%26quot%3Bgood%26quot%3B%20string%20library.%20%20It%20checks%20for%20the%20first%20character%20being%200%20before%20it%20calls%20strlen.While%20equality%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10200","item_id":"_comm_10200"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10200 == 'undefined' ){PDRTJS_468178_comm_10200 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10200 );}}PDRTJS_settings_468178_comm_10195={"id":468178,"unique_id":"wp-comment-10195","title":"Am%20I%20the%20only%20person%20who%20would%20prefer%3A%26%23091%3Bcode%26%23093%3Breturn%20i%20%3D%3D%20end%28emps%29%20%3F%20%26quot%3B%26quot%3B%20%3A%20i-%26gt%3Baddr%3B%26%23091%3B%2Fcode%26%23093%3BEquality%20feels%20slightly%20simpler%20than%20inequality.%20I%26%23039%3Bd%20also%20prefer%20to%20avoid%20converting%20the%20c-str...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10195","item_id":"_comm_10195"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10195 == 'undefined' ){PDRTJS_468178_comm_10195 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10195 );}}PDRTJS_settings_468178_comm_10194={"id":468178,"unique_id":"wp-comment-10194","title":"%40Olaf%3A%20OK%2C%20clarified%20%28in%20GotW%20%232%29%20along%20the%20lines%20that%20Im%20assuming%20something%20like%20.name%28%29%20is%20available%20and%20.name%28%29%20%3D%3D%20name%20has%20the%20same%20semantics.%40Sam%3A%20Good%20point%2C%20noted.%40Adrian%3A%20A%20program%20that%20d...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10194","item_id":"_comm_10194"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10194 == 'undefined' ){PDRTJS_468178_comm_10194 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10194 );}}PDRTJS_settings_468178_comm_10189={"id":468178,"unique_id":"wp-comment-10189","title":"%26quot%3BWhen%20you%20see%20B%20%26%23091%3Bthe%20range-based%20for%20loop%26%23093%3B%2C%20you%20know%20for%20certain%20without%20inspecting%20the%20body%20of%20the%20loop%20that%20it%20is%20a%20loop%20that%20visits%20the%20element%20of%20emps%20in%20order.%26quot%3B%20%20Certainly%20there%20are%20some%20thi...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10189","item_id":"_comm_10189"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10189 == 'undefined' ){PDRTJS_468178_comm_10189 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10189 );}}PDRTJS_settings_468178_comm_10185={"id":468178,"unique_id":"wp-comment-10185","title":"The%20astute%20reader%20will%20have%20noticed%20that%20the%20guidance%20from%20this%20tip%20is%20derived%20directly%20from%20the%20book%20Effective%20STL%2C%20Item%2043%3A%20Prefer%20algorithm%20calls%20to%20hand-written%20loops.%20It%26%23039%3Bs%20good%20to%20know%20that%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10185","item_id":"_comm_10185"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10185 == 'undefined' ){PDRTJS_468178_comm_10185 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10185 );}}PDRTJS_settings_468178_comm_10176={"id":468178,"unique_id":"wp-comment-10176","title":"This%20extra%20branch%3B%26%23091%3Bcode%26%23093%3Breturn%20i%20%21%3D%20end%28emps%29%20%3F%20i-%26gt%3Baddr%20%3A%20%26quot%3B%26quot%3B%3B%26%23091%3B%2Fcode%26%23093%3BFind%20just%20returns%20an%20iterator%20that%20you%20still%20have%20to%20check.%20The%20range-for%20version%20just%20returns....","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10176","item_id":"_comm_10176"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10176 == 'undefined' ){PDRTJS_468178_comm_10176 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10176 );}}PDRTJS_settings_468178_comm_10173={"id":468178,"unique_id":"wp-comment-10173","title":"One%20important%20thing%20is%20that%20abstraction%20does%20not%20always%20equate%20to%20better%20or%20more%20readable%20code.%20%20The%20use%20of%20more%20familiar%20constructs%20is%20often%20a%20better%20overall%20solution%2C%20errors%20are%20more%20likely%20to%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10173","item_id":"_comm_10173"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10173 == 'undefined' ){PDRTJS_468178_comm_10173 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10173 );}}PDRTJS_settings_468178_comm_10172={"id":468178,"unique_id":"wp-comment-10172","title":"%40Herb%20Sure.%20IMO%20you%20disregarded%20this%20note%3A%20%26quot%3BNote%3A%20As%20with%20GotW%20%232%2C%20dont%20change%20the%20semantics%20of%20the%20function%2C%20even%20though%20they%20could%20be%20improved.%26quot%3BWhether%20employee%20%3D%3D%20string%20is%20valid%20and%20has%20the%20s...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10172","item_id":"_comm_10172"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10172 == 'undefined' ){PDRTJS_468178_comm_10172 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10172 );}}PDRTJS_settings_468178_comm_10166={"id":468178,"unique_id":"wp-comment-10166","title":"Aren%26%23039%3Bt%20generic%20lambdas%20C%2B%2B1y%3F...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10166","item_id":"_comm_10166"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10166 == 'undefined' ){PDRTJS_468178_comm_10166 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10166 );}}PDRTJS_settings_468178_comm_10164={"id":468178,"unique_id":"wp-comment-10164","title":"I%20dont%20understand%20what%20does%20an%20extra%20branch%20mean%20in%20the%20find_if%20version.%20Does%20everyone%20refer%20to%20a%20function%20call%3F%20I%20guess%20algorithms%20like%20find_if%20would%20be%20most%20likely%20be%20inlined%20as%20it%20takes%20templa...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10164","item_id":"_comm_10164"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10164 == 'undefined' ){PDRTJS_468178_comm_10164 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10164 );}}PDRTJS_settings_468178_comm_10155={"id":468178,"unique_id":"wp-comment-10155","title":"Yes%2C%20in%20this%20specific%20example%20the%20fact%20that%20we%26%23039%3Bre%20returning%20a%20string%20by-value%20dwarfs%20the%20extra%20branch%20after%20the%20find%28%29%2C%20but%20I%20am%20more%20interested%20in%20the%20general%20case%2C%20where%20we%20do%20call%20some%20functio...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10155","item_id":"_comm_10155"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10155 == 'undefined' ){PDRTJS_468178_comm_10155 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10155 );}}PDRTJS_settings_468178_comm_10154={"id":468178,"unique_id":"wp-comment-10154","title":"Minor%20point.%20The%20range-for%20loop%20can%20be%20written%20%26%23091%3Bcode%26%23093%3Bfor%20%28%20auto%20%26amp%3B%20e%20%3A%20emps%20%29%20%7B...%7D%26%23091%3B%2Fcode%26%23093%3B%20given%20that%20emps%20is%20const....","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10154","item_id":"_comm_10154"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10154 == 'undefined' ){PDRTJS_468178_comm_10154 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10154 );}}PDRTJS_settings_468178_comm_10152={"id":468178,"unique_id":"wp-comment-10152","title":"%40Jay%20imao%20both%20of%20your%20code%20blocks%20are%20uglier%20than%20Herbs%20find%20version%20because%20you%20have%20std%20function%20that%20is%20designed%20to%20%28tadaaaam%29%20find%20element%20in%20a%20range.%20Period.%20%3A%29Beside%20I%20would%20guesstimate%20al...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10152","item_id":"_comm_10152"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10152 == 'undefined' ){PDRTJS_468178_comm_10152 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10152 );}}PDRTJS_settings_468178_comm_10151={"id":468178,"unique_id":"wp-comment-10151","title":"%40JayAre%20you%20confusing%20readability%20for%20familiarity%3F%20%3A%29...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10151","item_id":"_comm_10151"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10151 == 'undefined' ){PDRTJS_468178_comm_10151 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10151 );}}PDRTJS_settings_468178_comm_10149={"id":468178,"unique_id":"wp-comment-10149","title":"Two%20issues.%20%20One%20is%20that%20I%20think%20Barry%26%23039%3Bs%20point%20is%20relevant%20even%20though%2C%20in%20this%20case%2C%20an%20extra%20branch%20is%20swamped%20out%20by%20dynamic%20memory%20allocation.%20%20Similarly%20to%20using%20prefix%20increment%2C%20doing%20thin...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10149","item_id":"_comm_10149"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10149 == 'undefined' ){PDRTJS_468178_comm_10149 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10149 );}}PDRTJS_settings_468178_comm_10146={"id":468178,"unique_id":"wp-comment-10146","title":"%40Olaf%3A%20Can%20you%20elaborate%3F...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10146","item_id":"_comm_10146"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10146 == 'undefined' ){PDRTJS_468178_comm_10146 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10146 );}}PDRTJS_settings_468178_comm_10141={"id":468178,"unique_id":"wp-comment-10141","title":"Herb%2C%20you%26%23039%3Bre%20cheating%20by%20using%20find%20instead%20of%20find_if.%20%3Ap...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10141","item_id":"_comm_10141"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10141 == 'undefined' ){PDRTJS_468178_comm_10141 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10141 );}}PDRTJS_settings_468178_comm_10140={"id":468178,"unique_id":"wp-comment-10140","title":"find_if%20is%20worse%20for%20readability%20than%20find%20because%20beside%20being%20linger%20find_if%20says%20im%20checking%20for%20predicate%28aka%20name.size%28%29%26gt%3B123%29%20not%20value...%20%20btw%20I%20wonder%20if%20there%20is%20any%20diff%20in%20IRL%20perf%20b...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10140","item_id":"_comm_10140"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10140 == 'undefined' ){PDRTJS_468178_comm_10140 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10140 );}}PDRTJS_settings_468178_comm_10139={"id":468178,"unique_id":"wp-comment-10139","title":"%40Barry%20find_addr%20returns%20a%20string%20%28that%20needs%20to%20be%20constructed%20and%20likely%20requires%20dynamic%20memory%20allocation%29%2C%20so%20the%20extra%20branch%20doesn%26%23039%3Bt%20matter%20even%20if%20find_if%20isn%26%23039%3Bt%20inlined....","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10139","item_id":"_comm_10139"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10139 == 'undefined' ){PDRTJS_468178_comm_10139 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10139 );}}PDRTJS_settings_468178_comm_10136={"id":468178,"unique_id":"wp-comment-10136","title":"When%20using%20find%20or%20find_if%2C%20doesn%26%23039%3Bt%20that%20incur%20an%20extra%20branch%20over%20the%20normal%20range-for%20loop%20implementation%3F%20I%26%23039%3Bm%20not%20sure%20the%20algorithm%20solution%20is%20necessarily%20cleaner%20enough%20to%20merit%20the%20hit....","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/#comment-10136","item_id":"_comm_10136"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10136 == 'undefined' ){PDRTJS_468178_comm_10136 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10136 );}}
//--><!]]></script><script type='text/javascript' charset='UTF-8' src='https://polldaddy.com/js/rating/rating.js'></script><script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMAxpon2traGJkZGxiZGhskgUAFHlAaw=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s1.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"3379246","siteName":"Sutter\u2019s Mill","siteURL":"https:\/\/herbsutter.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/mistylook","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-3-solution-using-the-standard-library-or-temporaries-revisited%2F","themeURL":"","xhrURL":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"8fb9818ae2","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"4590924cc6\" \/>","referer":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-3-solution-using-the-standard-library-or-temporaries-revisited\/","canFollow":"1","feedID":"171936","statusMessage":"","customizeLink":"https:\/\/herbsutter.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbsutter.wordpress.com%2F2013%2F05%2F16%2Fgotw-3-solution-using-the-standard-library-or-temporaries-revisited%2F","postID":"1912","shortlink":"https:\/\/wp.me\/peb5Y-uQ","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/herbsutter.com\/1912","statsLink":"https:\/\/wordpress.com\/stats\/post\/1912\/herbsutter.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: MistyLook","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 19,532 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-3-solution-using-the-standard-library-or-temporaries-revisited%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVjcEOgjAQRH/IuoIYT8Zvqe2GLrQLdlvAv7ceJEYTEg+bTGbe7MA8KjNwQk7QCVicyOC47DvZwUcUshp9bokFPPUocM+Y0Wm2HuM3/CblwUkvjlrnyyWMv87GjraBWN10hKCloEWpYcIYyZb91fvzQ4ra9LJVMokGfpVWVehruFSnujo0x+Zcd0+y+3Rn'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'3379246','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'3379246','v':'wpcom','tz':'-8','user_id':'0','post':'1912','subd':'herbsutter'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d1TjBELytHc0k/MXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sLmd0YUFvWFE2QTk5bltbQ2IydXFvQV1zVC9KdH58OHwlVGw9bGNGK1NdV1dxcHxXRFl5RGRzMDJ4PWlocithJTkmTnh6NXRdMjdKUTNrNEMuR18zNUc0eixWSk5LSXQwT3E5T2dHXTQvZzR5Ri5TLnxtMFloS1M5U096VnwmM0krVENQNmtNQm5VRllqNmpIT0VYQkwmek81M0pbRG5XeVJdSDdNeGYyRnVrUXxnTU9UQ0x1RG4vL19kXy9XaEs3LnZwdTUuag=='}]);
_stq.push([ 'clickTrackerInit', '3379246', '1912' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>