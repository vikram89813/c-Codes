<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>GotW #4: Class Mechanics (7/10) | Sutter’s Mill</title>
<link rel="pingback" href="https://herbsutter.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"typekit":{"id":"eyo0tqd"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active #header h1{font-size:2.12em;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active body{font-size:89.7%;font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation{font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation ul li.search{font-size:1.06em}.wf-active #navigation ul li.search input#searchsubmit{font-size:1.06em}.wf-active #content .post-info, .wf-active #content .postmetadata{font-size:1.06em}.wf-active #sidebar{font-size:1.06em}.wf-active #footer p.right{font-size:1.06em}.wf-active .commentnum{font-size:1.77em}.wf-active .commentlist li .cmtinfo{font-size:1.18em}.wf-active .commentlist li .cmtinfo em{font-size:1.06em}.wf-active #respond label{font-size:11.8px}.wf-active #respond .required{font-size:11.8px}.wf-active #respond .subscribe-label{font-size:14.2px}.wf-active #respond .comment-notes{font-size:13px}.wf-active .wp-caption p.wp-caption-text{font-size:13px}.wf-active #content h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active #header h2{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active #content h3{font-size:1.65em;font-weight:400;font-style:normal}.wf-active #content h4{font-size:1.3em;font-style:normal;font-weight:400}.wf-active #content h5{font-size:1.18em;font-style:normal;font-weight:400}.wf-active #content .post h2{font-size:1.65em;font-weight:400;font-style:normal}.wf-active li.sidebox h2{font-weight:400;font-size:1.89em;font-style:normal}.wf-active .post h4{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active .post h4 em{font-style:normal;font-weight:400}</style>
		<script src='https://r-login.wordpress.com/remote-login.php?action=js&amp;host=herbsutter.com&amp;id=3379246&amp;t=1542965407&amp;back=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-4-class-mechanics-710%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//herbsutter.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Feed" href="https://herbsutter.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Comments Feed" href="https://herbsutter.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; GotW #4: Class Mechanics&nbsp;(7/10) Comments Feed" href="https://herbsutter.com/2013/05/16/gotw-4-class-mechanics-710/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNkN1uwjAMhV9onsUG69W0Z0laE0zzp8QR6tvjUlUCwSpuonOS81knxkuGPkWhKBgaZN8cx4qeR6p4JsmmH+HmPvtaP/B1nOORI8uEcqKgYG4WA1eZfErjFtinQnofspE5EWhgQ15nRNnCQv5ZqVmetORmv0vWNFibC9UKegZuAZayT9wKuabWUnEwt0Tb2A9ofbotxBZTJpx/SE8DXi3hn+h9Rx4cSUVJGXKqqt5GaurZeGCNPJoFZoxJlsdVbE11lEB/aYRTfDBw9IbLFlpI9+NUOtTUnZ2hv/C7O+y/uu9uf+jOV8Xg7sY=?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyFztEKwjAMBdAfsquTiXsRv6XWOFKXtDbphn69HeiDMBQCgdzDJXZOBtmP5QJiQ517gfx4rybIxv4ChnDITqEh5A/2kRVYF0vxjCOYIpDdUG+16BpXXIqiBCIVraTfLyFPCPNfFkCT8zeTQfC5tJ7o2Hb9Yde3+24bXjRNW9I='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbsutter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='GotW #3 Solution: Using the Standard Library (or, Temporaries&nbsp;Revisited)' href='https://herbsutter.com/2013/05/16/gotw-3-solution-using-the-standard-library-or-temporaries-revisited/' />
<link rel='next' title='GotW #4 Solution: Class&nbsp;Mechanics' href='https://herbsutter.com/2013/05/20/gotw-4-class-mechanics/' />
<meta name="generator" content="WordPress.com" />
<link rel="canonical" href="https://herbsutter.com/2013/05/16/gotw-4-class-mechanics-710/" />
<link rel='shortlink' href='https://wp.me/peb5Y-uY' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-4-class-mechanics-710%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-4-class-mechanics-710%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="GotW #4: Class Mechanics (7/10)" />
<meta property="og:url" content="https://herbsutter.com/2013/05/16/gotw-4-class-mechanics-710/" />
<meta property="og:description" content="How good are you at the details of writing classes? This item focuses not only on blatant errors, but even more so on professional style. Understanding these principles will help you to design clas…" />
<meta property="article:published_time" content="2013-05-16T20:09:32+00:00" />
<meta property="article:modified_time" content="2013-05-19T16:28:23+00:00" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=200&amp;ts=1542965407" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:text:title" content="GotW #4: Class Mechanics&nbsp;(7/10)" />
<meta name="twitter:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=240" />
<meta name="twitter:card" content="summary" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=114" />
<link rel='openid.server' href='https://herbsutter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://herbsutter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<script type="text/javascript" id="webfont-output">
  
  WebFontConfig = {"typekit":{"id":"cjs1oxc"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Sutter’s Mill" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Herb Sutter on software development" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbsutter.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="How good are you at the details of writing classes? This item focuses not only on blatant errors, but even more so on professional style. Understanding these principles will help you to design classes that are easier to use and easier to maintain.  Problem JG Question 1. What makes interfaces &quot;easy to use correctly, hard&hellip;" />
<style type="text/css">
			#header h1 a,
		#header h2 {
			color: #265E15 !important;
		}
				#headerimage {
			background: url('https://herbsutter.files.wordpress.com/2011/10/cropped-blog-header.jpg') no-repeat;
			height: 200px;
		}
	</style>
<link rel="amphtml" href="https://herbsutter.com/2013/05/16/gotw-4-class-mechanics-710/amp/"><style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s2.wp.com/?custom-css=1&#038;csblog=eb5Y&#038;cscache=6&#038;csrev=60" />
		</head>
<body id="section-index" class="post-template-default single single-post postid-1920 single-format-standard mp6 customizer-styles-applied highlander-enabled highlander-light">


<div id="navigation" class="clearfix">
		<div class="menu">
		<ul>
			<li ><a href="https://herbsutter.com/" title="Home">Home</a></li>
			<li class="page_item page-item-912"><a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the&nbsp;Jungle</a></li>
<li class="page_item page-item-864 page_item_has_children"><a href="https://herbsutter.com/gotw/">GotW</a></li>
<li class="page_item page-item-761"><a href="https://herbsutter.com/elements-of-modern-c-style/">Elements of Modern C++&nbsp;Style</a></li>
<li class="page_item page-item-2 page_item_has_children"><a href="https://herbsutter.com/about/">About</a></li>
									<li class="search"><form method="get" id="searchform" action="https://herbsutter.com"><input type="text" class="textbox" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></form></li>
					</ul>
	</div>
</div><!-- end id:navigation -->

<div id="container">

<div id="header">
<h1><a href="https://herbsutter.com/" title="Sutter’s Mill">Sutter’s Mill</a></h1>
<h2>Herb Sutter on software development</h2>
</div><!-- end id:header -->


	
		<div id="feedarea">
	<dl>
		<dt><strong>Feeds:</strong></dt>

			<dd><a href="https://herbsutter.com/feed/">Posts</a></dd>
	
			<dd><a href="https://herbsutter.com/comments/feed/">Comments</a></dd>
		</dl>
	</div><!-- end id:feedarea -->
	
	<div id="headerimage">
</div><!-- end id:headerimage -->

<div id="content">
<div id="content-main">

		
									<div class="postnav">
				<div class="alignleft">&laquo; <a href="https://herbsutter.com/2013/05/16/gotw-3-solution-using-the-standard-library-or-temporaries-revisited/" rel="prev">GotW #3 Solution: Using the Standard Library (or, Temporaries&nbsp;Revisited)</a></div>
				<div class="alignright"><a href="https://herbsutter.com/2013/05/20/gotw-4-class-mechanics/" rel="next">GotW #4 Solution: Class&nbsp;Mechanics</a> &raquo;</div>
			</div>
			
			<div class="post-1920 post type-post status-publish format-standard hentry category-gotw" id="post-1920">
				<div class="posttitle">
					<h2>GotW #4: Class Mechanics&nbsp;(7/10)</h2>
					<p class="post-info">2013-05-16 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p><span style="color:#5a5a5a;"><em>How good are you at the details of writing classes? This item focuses not only on blatant errors, but even more so on professional style. Understanding these principles will help you to design classes that are easier to use and easier to maintain.<br />
</em></span></p>
<p>
 </p>
<h1>Problem<br />
</h1>
<h2>JG Question<br />
</h2>
<p>1. What makes interfaces &#8220;easy to use correctly, hard to use incorrectly&#8221;? Explain.
</p>
<h2>Guru Question<br />
</h2>
<p>2. You are doing a code review. A programmer has written the following class, which shows some poor style and has some real errors. How many can you find, and how would you fix them?
</p>
<p style="background:#ffffcc;margin-left:14pt;">
<pre><code>class complex {<br />public:<br />    complex( double r, double i = 0 )<br />        : real(r), imag(i)<br />    { }<br /><br />    void operator+ ( complex other ) {<br />        real = real + other.real;<br />        imag = imag + other.imag;<br />    }<br /><br />    void operator&lt;&lt;( ostream os ) {<br />        os &lt;&lt; "(" &lt;&lt; real &lt;&lt; "," &lt;&lt; imag &lt;&lt; ")";<br />    }<br /><br />    complex operator++() {<br />        ++real;<br />        return *this;<br />    }<br /><br />    complex operator++( int ) {<br />        auto temp = *this;<br />        ++real;<br />        return temp;<br />    }<br /><br />    // ... more functions that complement the above ...<br /><br />private:<br />    double real, imag;<br />};
</code></pre>
</p>
<p>Note: This is not intended to be a complete class. For example, if you provide <span style="color:#2e74b5;">operator++</span> you would normally also provide <span style="color:#2e74b5;">operator&#8211;</span>. Rather, this is an instructive example to focus on the mechanics of writing correctly the kinds of functions this class is trying to support.</p>
									</div>

				<p class="postmetadata">
					Posted in <a href="https://herbsutter.com/category/c/gotw/" rel="category tag">GotW</a> | 											34 Comments									</p>
				
<!-- You can start editing here. -->

<h3 id="comments">34 Responses</h3>

	<ol class="commentlist">
			<li class="comment even thread-even depth-1 highlander-comment" id="comment-10246">
		<div id="div-comment-10246">
		<div class="cmtinfo"><em> on <a href="#comment-10246" title="">2013-05-20 at 7:23 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/d6438991d6d292ab415d698d8345b942?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Roger</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10246"></div><p>I&#8217;m going to address one tiny part of this &#8211; the streaming. I&#8217;ve always hated this form of implementing printing. I don&#8217;t mean the fact that it is a member vs non-member function. I mean the assumption that one form of printing is good or correct. Perhaps it is due to the fact that I do a lot of map applications, but why the assumption that I have only one way to &#8216;print&#8217; (stream) something? In my application domain, a latitude can be printed as decimal degrees (32.3443534N), as deg/min, as deg/min/sec, we can use N/S or +/- to denote hemispheres, and so on. I may want to stream it to a file in a different format, to a SQL database in yet another format, and so on. </p>
<p>Also, you may need to stream to the cout stream, you may need to use Windows&#8217; WriteFile function, or who knows what sink. </p>
<p>So, first of all, any kind of printing or streaming does not belong in the class. And, it should not assume some single representation. Hey, if your app requires a single representation,sure, go for it, but I would think that a class like Complex would span across more than one app if you are working in a space where you need complex numbers. </p>
<p>And, of course, this considers only half of the issue. Why are we implementing streaming to output, but not streaming from input to the class? Perhaps that makes the wide variety of possible formats clearer &#8211; you may be reading a file generated from a 3rd party app, you might be reading user input with errors in it, and so on. Clearly there is no &#8216;one size fits all&#8217; solution here. Yet we so often treat output that way.</p>
<p>In short, I almost never use the &lt;&gt; operators to define streaming for a class because it is something that reasonably has to vary (to be fair, I&#8217;ve always worked in industries where a piece of code like this is likely to hang around and be used for at least a few decades &#8211; I&#8217;d write a stream function like this in a second for &#8216;throwaway&#8217; code)</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10244">
		<div id="div-comment-10244">
		<div class="cmtinfo"><em> on <a href="#comment-10244" title="">2013-05-20 at 5:34 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/cbf30a22f4780d66a41cbf13f4dbd170?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.broune.com' rel='external nofollow' class='url'>Bjarke Hammersholt Roune</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10244"></div><p>Good interface design is an exercise in tradeoffs. There is no single meaning of something like “easy to use correctly, hard to use incorrectly” &#8211; like everything in life, it depends on context. This is a list of things to consider. It is a rare situation indeed where there is any way to do all of these things at the same time. It&#8217;s a trade-off. In many cases, some of these items can&#8217;t be done no matter what you do.</p>
<p> * If the main concern for your program is performance, and the interface will participate in performance-critical computations, then avoid designing an interface that makes it difficult or impossible to achieve top performance. In this case, correct use of an interface implies efficient use. For example, avoid unnecessary copying and memory allocation when possible.</p>
<p> * Make method names succinctly, aptly and clearly describe what the method does. I know what obj.setX(5) probably does, but I&#8217;m much less sure about obj.adjustX(5). Use long method names if that is necessary. </p>
<p> * Follow the conventions of the code that the interface is a part of.</p>
<p> * Avoid abbreviations unless you are sure that the user of the interface will understand them easily. Abbreviating pointer to ptr is probably fine. Abbreviating &#8220;the identity function&#8221; to &#8220;id&#8221; is only OK if you know for a fact that everyone who will have to deal with your interface is going to make the connection easily.</p>
<p> * If clearly describing what a method does requires a 30+ character name, try to see if you can&#8217;t change what the function does so that you can give it a shorter name. Perhaps split it into two simpler methods.</p>
<p> * If a method is unavoidably so complicated that a user of it simply must read the documentation, give it a name that will trigger people to go look at the documentation. Don&#8217;t let obj.setX(5) do something complicated &#8211; I&#8217;m going to think that I know what it does and I&#8217;ll be wrong. Rename it to something complicated or mysterious (yet still apt) so people will go look up its documentation because they realize that they can&#8217;t figure out what that means without looking at the documentation. First, try to redesign the interface so you don&#8217;t need that method in the first place.</p>
<p> * Consider how your interface will show up in intellisense and compiler error messages. For example, if you have a public foo(int) and a private foo(MyInternalType), users of your interface are going to see the private foo in error messages and in intellisense, which probably isn&#8217;t what you want. Give the private foo a different name (oh, and don&#8217;t name your methods foo).</p>
<p> * Avoid methods with many parameters of the same type. If you&#8217;ve got a function like foo(bool, bool, bool, bool), then likely each parameter does something different and it will be difficult for people to see at a glance whether the order of the parameters is correct. Sometimes there&#8217;s no good way around this, but a possible replacement would be fooA(bool), fooB(bool), fooC(bool) and fooD(bool), where A, B, C and D are descriptions of what those bools do.</p>
<p> * Avoid designing an interface where obj.doSomething(false) causes something to be done. For example, doSomething(bool) might do what it does in a different way depending on the parameter. This is confusing. It looks like you are asking for something not to be done.</p>
<p> * Suppose that you know that most of the people who will be using the interface do not understand some advanced concept, like template-templates in C++ or topologically sorted directed acyclic graphs. If you must use such a concept anyway, you need to document the concept carefully, perhaps by offering a link to an online resource. First, try to avoid using the concept.</p>
<p> * Minimize preconditions. For example, suppose you take a std::vector&amp; as a parameter and that you need this vector to be sorted and that you need to hold on to the vector for a while. You could have a precondition stating that the vector must be already sorted and that it must stay alive and be unchanged for the life-time of your object. Instead, you could simplify the precondition by copying the vector and then sorting it yourself.</p>
<p> * Avoid potentially bad interactions between the methods in the interface. If every call to foo() must be followed by a call to bar(), and if something bad happens if you do it the other way around, then that makes the interface harder to use correctly. There&#8217;s often no good way around this.</p>
<p> * Design the interface so that it is possible to follow the Liskov substitution principle. From Wikipedia: &#8220;if S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may be substituted for objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.).&#8221;</p>
<p> * Minimize visible state in your interface. The dynamic type of an object is one example of a state. That kind of state is accessed through virtual functions and the Liskov substitution principle is essentially stating that the client code should not have to know the sub-type. More generally, it is desirable for an interface not to have any state at all, or if it does have state, then client code should ideally not have to worry about what the state is. Some kinds of state are not a problem, for example because it is very simple (setName() and getName()) or because it&#8217;s not visible (a transparent cache).</p>
<p> * If your interface participates in parallel computation, make it very clear what the contract for parallel use of the interface is.</p>
<p> * Design the interface so that it is possible to use the type system to check for bugs. You do that by making as many bugs as possible cause compile-time errors or at least warnings. You could try to expand this by making your interface easy for static analysis tools to understand, perhaps by annotating it.</p>
<p> * Design your interface so that there is no tricky or repetitive thing that the user of the interface has to remember to do. Returning a pointer that has to be deleted is a great/horrible example of that (use a smart pointer). Returning an error code that must be checked is another example (use exceptions).</p>
<p> * Offer exception guarantees. Offer the strong exception guarantee when you can. If you can&#8217;t, offer the weak one. Document what guarantee you are giving &#8211; maybe not always, but at least in all cases where the answer is not what one would expect.</p>
<p> * Don&#8217;t design an interface that can&#8217;t be implemented without using global state. (Singletons are global state).</p>
<p> * Design the interface so that it is possible for the implementation of the interface to check that it is being used correctly at run-time. For example, if the parameter t to obj.foo(t) must be less than some number X, then you could make it mandatory to inform obj about X, so that t can be checked inside foo, even if it would not otherwise be necessary to know the value of X to implement the interface.</p>
<p> * Make it testable. If you can&#8217;t test to the interface in a reasonable way, there&#8217;s more likely to be bugs that you won&#8217;t be aware of until the worst possible time. It&#8217;s hard to use an interface correctly if it wasn&#8217;t implemented correctly.</p>
<p> * Encapsulate. The interface should not reveal how it is being implemented.</p>
<p> * Don&#8217;t do too much. An interface with too many responsibilities tends to be hard to use.</p>
<p> * Make it general. You want to be able to use this interface in different contexts, so don&#8217;t make your interface specific to a context for no reason.</p>
<p> * Do something well. If you make your interface too general, you might end up with something that will work in every relevant circumstance, but that doesn&#8217;t fit well to any specific use. Make sure your interface is a good fit in at least one situation.</p>
<p> * Consider the impact of your interface on the whole program&#8217;s complexity &#8211; both statically and at run-time. It is sometimes possible to make an interface really simple and nice-looking, but programs that use that interface end up having to build very complicated structures in memory. For example, the observer pattern is simple (and sometimes a good choice), yet you can use it to create an impossibly complex maze of calls-backs at run-time. If your interface encourages or even requires that sort of thing, then that makes it harder to use correctly. Sometimes it&#8217;s better to complicate your interface if the result is that client code ends up constructing simpler structures in memory. Pushing complexity from your interface into the surrounding code or into the run-time characteristics of the program isn&#8217;t always a good idea.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10243">
		<div id="div-comment-10243">
		<div class="cmtinfo"><em> on <a href="#comment-10243" title="">2013-05-20 at 5:08 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0700a8d328517621a8b22e2a9123219?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>rbrown</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10243"></div><p>To those suggesting that the constructor be made explicit, it&#8217;s worth noting out that std::complex has a constructor of the form (note the lack of an &#8220;explicit&#8221; keyword):</p>
<pre class="brush: plain; title: ; notranslate" title="">constexpr complex(double re = 0.0, double im = 0.0);</pre>
<p>As litb1 pointed out, making the constructor explicit will prevent the use of a C++11 initializer list for copy-initialization. For example, the following won&#8217;t compile:</p>
<pre class="brush: plain; title: ; notranslate" title="">void f(complex c);
f({ 1.0, 1.0 });
f({ 1.0 })</pre>
<p>I think in this case an implicit conversion is natural, and I don&#8217;t see it leading to unintended side-effects (unlike, say, going from std::string to const char *).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10242">
		<div id="div-comment-10242">
		<div class="cmtinfo"><em> on <a href="#comment-10242" title="">2013-05-20 at 1:28 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/9379f2b1faceba1fa58d7a1d65712213?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>qdii</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10242"></div><p>@Crazy Eddie<br />
I disagree with your idea of adding getters to this class.</p>
<p>A complex number can be defined in different ways, one of them being the sum of a and ib, as it is here. Another implementation could rely on its absolute value and its argument.</p>
<p>To make an example, consider a complex class implemented in term of absolute value and argument:</p>
<pre class="brush: plain; title: ; notranslate" title="">
class complex
{
public:
    double getReal() const { return /* formula */; }  
    double getImaginary() const { return /* formula */; }

private:
    double argument;
    double absoluteValue;
};
</pre>
<p>Now what would operator==() code be?</p>
<pre class="brush: plain; title: ; notranslate" title="">
bool operator==(const complex&amp; a, const complex&amp; b)
{
    return (a.getReal() == b.getReal()) &amp;&amp; (a.getImaginary() == b.getImaginary());
}
</pre>
<p>This probably won’t work because of round-up errors, and even if it does, it will under-perform because of all the computation needed by getReal() and getImaginary(). This is why operator== needs access to the inner guts of the class, in a perfect world it would really be part of the class, but for design reasons (namely, symmetry), it was cast away.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10203">
		<div id="div-comment-10203">
		<div class="cmtinfo"><em> on <a href="#comment-10203" title="">2013-05-17 at 2:33 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/31a1c40a45079decc7f5525d2a873481?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>litb1</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10203"></div><p>You also need to consider multi element initializer lists when making a constructor &#8220;explicit&#8221; (see the tuple &#8220;explicit&#8221; constructor).</p>
<p>The question becomes, do you want this to work?</p>
<p>    void f (complex c);<br />
    f ({ 0.f, 1.f });</p>
<p>Simply making the two parameter constructor explicit just to guard against the one-argument case then is unsuitable because it guards against the multi arg case too. You will need to overload it (possibly using constructor delegation in the implementation).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10202">
		<div id="div-comment-10202">
		<div class="cmtinfo"><em> on <a href="#comment-10202" title="">2013-05-17 at 1:47 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/db892012bc52cc6cbfd27db9d98acf8b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>GregM</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10202"></div><p>&#8220;Just focusing one issue I haven’t seen mentioned by others already, I’d question the appropriateness of offering the increment operators at all.&#8221;</p>
<p>I had a similar thought when I read the class, &#8220;what exactly does it mean to increment a complex number?&#8221;.  I don&#8217;t think I&#8217;ve ever used increment on a floating point number.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10201">
		<div id="div-comment-10201">
		<div class="cmtinfo"><em> on <a href="#comment-10201" title="">2013-05-17 at 1:43 pm</a></em> <img alt='' src='https://i0.wp.com/a0.twimg.com/profile_images/242635332/Klaim_normal.png?resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://twitter.com/MJKlaim' rel='external nofollow' class='url'>Klaim - Joel Lamotte (@MJKlaim)</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10201"></div><p>To make an easy to use interface:</p>
<p>1. Make it impossible or very hard to use incorrectly (fail to compile, crashes, etc when used incorrectly &#8211; see std::chrono as a simple example) &#8211; this is the most important guideline for type design because it both prevent errors by mistake and, more importantly, it drives the usage (it&#8217;s like walls for a blind: when you touch it you know you can&#8217;t go this way);<br />
2. Make sure each operation have only one way to be done &#8211; this actually improve composition (note that if two functions does the same thing but in a different way that impact the semantic, it&#8217;s two operations);<br />
3. Hide complexity. Unfortunately it is not always efficient to hide totally the implementation details of our types (maybe it will be with modules but don&#8217;t count on it until we got implementations), but if you can hide the details, the only thing visible is how to use it.<br />
4. Give a unique responsability to the type, not more.<br />
5. Make it as short as possible, that is, a minimum of functions (depends on the domain and responsability);<br />
6. Use names as obvious as possible in the domain context;<br />
7. Document the interface. I put this at last because I consider it of last resort but you always end up doing it for member functions doing not that obvious operations.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10198">
		<div id="div-comment-10198">
		<div class="cmtinfo"><em> on <a href="#comment-10198" title="">2013-05-17 at 12:48 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/51d9c0f234a7029ac58358a6dc2053f5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Dave Harris</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10198"></div><p>Interfaces are easy to use correctly if they follow established conventions and best practices. (Ideally your established conventions will reflect best practice, but best practice evolves, so the longer your conventions have been established the greater the danger they are out of date.) They should follow the principle of least surprise. Ideally a reasonably skilled programmer using them would not need to look up the documentation to see how they work.</p>
<p>The example class is presumably intended to be a numeric type, so it should follow the conventions established by int, double and other numeric types. It doesn&#8217;t. Note that its definition of operator+() isn&#8217;t [i]intrinsically[/i] wrong; it isn&#8217;t impossible to use correctly: but it is different to how operator+() works for double so very liable to be used incorrectly. It doesn&#8217;t matter if the documentation describes the idiosyncratic behaviour correctly and lucidly. Few programmers will think to read it.</p>
<p>Programmers have ample opportunities to be creative. Deciding the behaviour of operator+() is not one of them.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10197">
		<div id="div-comment-10197">
		<div class="cmtinfo"><em> on <a href="#comment-10197" title="">2013-05-17 at 12:45 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/68f403eb5e6fef229e3c19a5d5f7fea6?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Mikhail Belyaev</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10197"></div><p>Another thought: if we do not make it a template (which we possibly do not want) the whole class is actually better off being a constexpr class. It won&#8217;t hurt, it&#8217;ll help in some cases and it is certainly a good thing to do with classes this simple.<br />
It won&#8217;t optimize anything, but lets you actually say in your code that that whole bunch of complex arithmetics on constants should run at compile-time.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mttpd odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10192">
		<div id="div-comment-10192">
		<div class="cmtinfo"><em> on <a href="#comment-10192" title="">2013-05-17 at 9:32 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/1cc4a77a8256c3049728728c6c45625b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>mttpd</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10192"></div><p>Good points in the previous comments.</p>
<p>One more thing which comes to mind &#8212; given that it makes sense for &#8220;complex&#8221; to have value semantics (as opposed to reference semantics), we&#8217;d probably want to consider preventing inheritance (for the same reason it&#8217;s not a good idea to inherit from an STL container).</p>
<p>As in:<br />
Guideline #4: A base class destructor should be either public and virtual, or protected and nonvirtual.<br />
<a href="http://www.gotw.ca/publications/mill18.htm" rel="nofollow">http://www.gotw.ca/publications/mill18.htm</a></p>
<p>I don&#8217;t see the case for public &amp; virtual (since I don&#8217;t see the case for our &#8220;complex&#8221; class having reference semantics). Hence, I&#8217;d go with the other alternative.</p>
<p>This is where C++11 comes in, as it allows us to use &#8220;final&#8221; to prevent inheritance:<br />
<a href="http://en.cppreference.com/w/cpp/language/final" rel="nofollow">http://en.cppreference.com/w/cpp/language/final</a></p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10190">
		<div id="div-comment-10190">
		<div class="cmtinfo"><em> on <a href="#comment-10190" title="">2013-05-17 at 9:11 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/ca391c038b300a739462dae91c5e8cbc?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Adrian</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10190"></div><p>Just focusing one issue I haven&#8217;t seen mentioned by others already, I&#8217;d question the appropriateness of offering the increment operators at all.</p>
<p>The increment and decrement operators make intuitive sense for discrete types, like counters, chars, certain enumerations, even bools.</p>
<p>Perhaps because I&#8217;ve always thought of these operators as analogues of Pascal&#8217;s succ() and pred(), it&#8217;s always seemed odd to me that C and C++ provide them for floating point types.  What does it mean to increment a type that approximates a continuous quantity?  It&#8217;s not intuitive (to me), given a double d, what </p>
<pre class="brush: plain; title: ; notranslate" title="">++d</pre>
<p> would mean.  Does it increment by 1.0 or does it increment by some epsilon to get to the next higher, representable value?  Both would be useful, and, given that I could always write </p>
<pre class="brush: plain; title: ; notranslate" title="">d += 1.0;</pre>
<p> for the former, defining operator++ for the latter would make the most sense.  But alas, that&#8217;s not the case.  That might just be my own bias.</p>
<p>Even if I make peace with increment and decrement on a double, what should they mean on a complex?  That&#8217;s even less intuitive.  A complex is a two-dimensional quantity.  Should increment affect the real part or the imaginary part or both?  It&#8217;s simply not obvious&#8211;at least not to everyone.</p>
<p>In the interest of making it easy to use correctly and difficult to use incorrectly, I&#8217;d leave out the increment and decrement operators for this class at least until a client of the class made a strong case for them.  (A strong case might be that having these operators enables a class or function template that otherwise can&#8217;t use them.)  In the mean time, a client can write </p>
<pre class="brush: plain; title: ; notranslate" title="">c += 1.0;</pre>
<p>, which is not only correct, it&#8217;s _obviously_ correct.  To everyone.</p>
<p>To me, that&#8217;s the difference between a well-implemented class interface and a well-_designed_ one.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10180">
		<div id="div-comment-10180">
		<div class="cmtinfo"><em> on <a href="#comment-10180" title="">2013-05-17 at 5:00 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/6ca9d3543f3286af11d61293e4dd5051?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Rainer Blome</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10180"></div><p>1. What makes interfaces “easy to use correctly, hard to use incorrectly”?</p>
<p>The first answer coming to my mind is &#8220;Documentation&#8221;.<br />
The standard classes are quite well documented &#8211; imagine how difficult it would be to use them correctly without this documentation, and how easy it would be to use them incorrectly.</p>
<p>It makes me a little sad that no one mentioned this so far.</p>
<p>Among the very effective programmers that I got to know, the share of those who actually write good documentation is surprisingly low. There are even some who explicitly argue against documentation. I often wonder why this is so.</p>
<p>Reasons might be:</p>
<p>* Documentation is (usually) not being paid for. What usually matters is functionality.</p>
<p>* Not every one is a born writer. Some very effective programmers that I got to know write surprisingly bad natural language. My guess is that most of these actually know this (but some don&#8217;t :-). Many people dislike doing things that they are not good at. Thus I assume that some simply hate writing documentation because it makes them feel bad, or even inadequate.</p>
<p>* Writing good documentation is a skill that by most people must be learned. This takes at least effort and time, and thereby usually money.</p>
<p>* Tools that check for language errors in documentation are not widespread. This is in contrast to the code, where the compiler and tools like lint can help to work out the kinks.</p>
<p>Granted, in contexts where the code is not likely to ever be read, writing documentation has only one benefit that I can think of: The writer can hone his writing skills. </p>
<p>However, in contexts where the code is likely to be read, maintained or reused, documentation is crucial. In my professional experience (15y), this is the case in by far the majority of projects. In some circumstances, especially when key people leave a project, missing or bad documentation can become extremely expensive.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10177">
		<div id="div-comment-10177">
		<div class="cmtinfo"><em> on <a href="#comment-10177" title="">2013-05-17 at 4:18 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/3e120959c00490731769ecac98a5aca0?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Marc</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10177"></div><p>Just had to give it a final try.</p>
<pre class="brush: plain; title: ; notranslate" title="">
class complex 
{
	// allow access to private members
	friend ostream&amp; operator&lt;&lt;( ostream&amp; os, const complex&amp; c );

public:
	// doubles as default ctor
	complex( double r = 0, double i = 0 ) : real(r), imag(i) { }

	// to efficiently implement operator+ 
	complex&amp; operator+=(const complex&amp; c) 
	{
		real += c.real;
		imag += c.imag;

		return *this;
	}

	// return reference to result
	complex&amp; operator++()
	{        
		++real;        
		return *this;    
	}    

	// return unchanged object by value
	complex operator++( int ) 
	{        
		auto temp = *this;        
		++real;        
		return temp;    
	}   

	// ... more functions that complement the above ...
private:    
	double real, imag;
};

// IO operator cannot be a class member. 
// Class member ops require the left operand to be a class object
ostream&amp; operator&lt;&lt;( ostream&amp; os, const complex&amp; c ) 
{        
	os &lt;&lt; &quot;(&quot; &lt;&lt; c.real &lt;&lt; &quot;,&quot; &lt;&lt; c.imag &lt;&lt; &quot;)&quot;;
	return os;
}

// allows implicit conversion of operands
complex operator+ ( const complex &amp;c1, const complex&amp; c2 ) 
{   
	complex c(c1);
	c += c2; 
	return c;
}  
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10174">
		<div id="div-comment-10174">
		<div class="cmtinfo"><em> on <a href="#comment-10174" title="">2013-05-17 at 1:07 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/ef95896d2a7b776c0c22f0039bd0bf4d?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Brian M</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10174"></div><p>Think I would as reviewer simply say use a std:: complex or other library and go off and have lunch!<br />
But was never any good with made up exam questions&#8230;.</p>
<p>ps Unfortunately saw similar when someone was writing a linked list class. It was a good lunch!</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10171">
		<div id="div-comment-10171">
		<div class="cmtinfo"><em> on <a href="#comment-10171" title="">2013-05-17 at 12:00 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/2d039d25f4b02b7ed314d399a2494a16?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>khurshid</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10171"></div><p>Sorry,  forgot default ctor.</p>
<pre class="brush: plain; title: ; notranslate" title="">
class complex{
   complex() = default;
   complex( const complex&amp; other) = default;
   complex&amp; operator = (const complex&amp; other) = default;
   // other method and ctors   ..............................
}
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10170">
		<div id="div-comment-10170">
		<div class="cmtinfo"><em> on <a href="#comment-10170" title="">2013-05-16 at 11:50 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/2d039d25f4b02b7ed314d399a2494a16?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>khurshid</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10170"></div><pre class="brush: plain; title: ; notranslate" title="">

class complex 
{
public:
   constexpr explicit complex( double r, double i = 0.0 ) noexcept
        : real_ { r }
       , imag_ { i }
    { }

   constexpr complex operator+ ( const complex&amp; other ) const noexcept
   {
        return complex( real_ + other.real_,  imag_ + other.imag_ );
    }

  complex&amp; operator++() noexcept
   {
        ++real_;
        return *this;
    }

    complex operator++( int )  noexcept
   {
        auto temp = *this;
        ++real_;
        return temp;
    }

    // ... more functions that complement the above ...
    
    constexpr double real()const noexcept { return real_; }
    constexpr double imaginary() const noexcept { return imag_;}
    
private:
    double real_ = 0.0;
    double imag_ = 0.0;
};

std::ostream&amp;  operator &lt;&lt; (std::ostream&amp; os,  const complex&amp; c)
{
       return os &lt;&lt; '(' &lt;&lt; c.real() &lt;&lt; ',' &lt;&lt; c.imaginary() &lt;&lt; ')' ;
}

</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10169">
		<div id="div-comment-10169">
		<div class="cmtinfo"><em> on <a href="#comment-10169" title="">2013-05-16 at 11:48 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/3e120959c00490731769ecac98a5aca0?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Marc</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10169"></div><p>But made error(s). So, back to work</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10168">
		<div id="div-comment-10168">
		<div class="cmtinfo"><em> on <a href="#comment-10168" title="">2013-05-16 at 11:36 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/3e120959c00490731769ecac98a5aca0?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Marc</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10168"></div><p>Thought I&#8217;d give it a try</p>
<pre class="brush: plain; title: ; notranslate" title="">
using namespace std;

// IO operator cannot be a class member. 
// Class member ops require the left operand to be a class object
ostream&amp; operator&lt;&lt;( ostream&amp; os, const complex&amp; c ) 
{        
	os &lt;&lt; &quot;(&quot; &lt;&lt; c.real &lt;&lt; &quot;,&quot; &lt;&lt; c.imag &lt;&lt; &quot;)&quot;;

	return os;
}

complex operator+ ( const&amp; complex c1, const&amp; complex c2 ) 
{   
	complex c = c1;
	c.real += c2.real; // '+=' assumed
	c.imag += c2.imag;

	return c;
}  

class complex 
{
	// allow access to private members
	friend ostream&amp; operator&lt;&lt;( ostream&amp; os, const complex&amp; c );
	friend complex operator+ ( const&amp; complex c1, const&amp; complex c2 );

public:
	complex( double r = 0, double i = 0 ) : real(r), imag(i) { } // doubles as default ctor

	complex&amp; operator++() // return reference to result
	{        
		++real;        
		return *this;    
	}    

	complex operator++( int ) 
	{        
		auto temp = *this;        
		++real;        
		return temp;    
	}   

	// ... more functions that complement the above ...
private:    
	double real, imag;
};
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10167">
		<div id="div-comment-10167">
		<div class="cmtinfo"><em> on <a href="#comment-10167" title="">2013-05-16 at 11:25 pm</a></em> <img alt='' src='https://i2.wp.com/a0.twimg.com/sticky/default_profile_images/default_profile_5_normal.png?resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://twitter.com/duhonedd' rel='external nofollow' class='url'>Eric Duhon (@duhonedd)</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10167"></div><p>I figured using user literals would helps with syntax and avoid implicit cast problems from float(i.e. was the float a real or imaginary). Ended up with a lot of code though.</p>
<p><code><br />
#include </p>
<p>using namespace std;</p>
<p>//template<br />
class Imaginary<br />
{<br />
public:<br />
    constexpr Imaginary() = default;<br />
    constexpr Imaginary(const Imaginary&amp;) = default;<br />
    Imaginary&amp; operator=(const Imaginary&amp;) = default;<br />
    explicit constexpr Imaginary(double _value) : m_Value(_value) { }</p>
<p>    Imaginary&amp; operator-()<br />
    {<br />
        m_Value = -m_Value;<br />
        return *this;<br />
    }</p>
<p>    Imaginary&amp; operator+=(const Imaginary&amp; _other)<br />
    {<br />
        m_Value += _other.m_Value;<br />
        return *this;<br />
    }</p>
<p>    ostream&amp; PrintToStream(ostream&amp; _stream) const<br />
    {<br />
        _stream &lt;&lt; m_Value &lt;&lt; &#039;i&#039;;<br />
        return _stream;<br />
    }</p>
<p>private:<br />
    //Don&#039;t want getters/setters for this, don&#039;t want a way to treat this as a standard float.<br />
    double m_Value = 0;<br />
};</p>
<p>Imaginary operator+(const Imaginary&amp; _arg1, const Imaginary&amp; _arg2)<br />
{<br />
    Imaginary result = _arg1;<br />
    result += _arg2;<br />
    return result;<br />
}</p>
<p>ostream&amp; operator&lt;&lt;(ostream&amp; _stream, const Imaginary&amp; _value)<br />
{<br />
    return _value.PrintToStream(_stream);<br />
}</p>
<p>//could use _fi or something for Imaginary and then templatize the Complex and Imaginary class<br />
constexpr Imaginary operator"" _i (long double _value)<br />
{<br />
    return Imaginary(static_cast(_value));<br />
}</p>
<p>constexpr Imaginary operator"" _i (unsigned long long _value)<br />
{<br />
    return Imaginary(static_cast(_value));<br />
}</p>
<p>class Complex<br />
{<br />
public:<br />
    constexpr Complex() = default;<br />
    constexpr Complex(const Complex&amp;) = default;<br />
    Complex&amp; operator=(const Complex&amp;) = default;</p>
<p>    constexpr Complex(double _real, const Imaginary&amp; _imag) : m_Real(_real), m_Imag(_imag) {}<br />
    constexpr Complex(double _real) : Complex(_real, 0_i) {}<br />
    constexpr Complex(const Imaginary&amp; _imag) : Complex(0, _imag) {}</p>
<p>    Complex&amp; operator+=(const Complex&amp; _other)<br />
    {<br />
        m_Real += _other.m_Real;<br />
        m_Imag += _other.m_Imag;<br />
        return *this;<br />
    }</p>
<p>    Complex&amp; operator++()<br />
    {<br />
        *this += 1;<br />
        return *this;<br />
    }</p>
<p>    Complex operator++(int)<br />
    {<br />
        Complex result = *this;<br />
        ++(*this);<br />
        return result;<br />
    }</p>
<p>    ostream&amp; PrintToStream(ostream&amp; _stream) const<br />
    {<br />
        _stream &lt;&lt; m_Real &lt;&lt; &quot;+&quot; &lt;&lt; m_Imag;<br />
        return _stream;<br />
    }</p>
<p>private:<br />
    double m_Real = 0;<br />
    Imaginary m_Imag = 0_i;<br />
};</p>
<p>Complex operator+(const Complex&amp; _arg1, const Complex&amp; _arg2)<br />
{<br />
    Complex result = _arg1;<br />
    result += _arg2;<br />
    return result;<br />
}</p>
<p>Complex operator+(double _real, const Imaginary&amp; _imag)<br />
{<br />
    return Complex(_real, _imag);<br />
}</p>
<p>Complex operator+(const Imaginary&amp; _imag, double _real)<br />
{<br />
    return Complex(_real, _imag);<br />
}</p>
<p>ostream&amp; operator&lt;&lt;(ostream&amp; _stream, const Complex&amp; _value)<br />
{<br />
    return _value.PrintToStream(_stream);<br />
}</p>
<p>int main(int argc, const char * argv[])<br />
{<br />
    auto im = -4_i;<br />
    cout &lt;&lt; im &lt;&lt; endl;</p>
<p>    auto im2 = 2_i + im;<br />
    cout &lt;&lt; im2 &lt;&lt; endl;</p>
<p>    Complex cx1 = 1 + 3_i;<br />
    cout &lt;&lt; cx1 &lt;&lt; endl;</p>
<p>    Complex cx2 = 4_i + -3;<br />
    cx2 += cx1;<br />
    cout &lt;&lt; cx2 &lt;&lt; endl;</p>
<p>    cout &lt;&lt; ++cx2 &lt;&lt; endl;<br />
    cout &lt;&lt; cx2++ &lt;&lt; endl;<br />
    cout &lt;&lt; cx2 &lt;&lt; endl;</p>
<p>    cx2 = cx2 + cx1;<br />
    cout &lt;&lt; cx2 &lt;&lt; endl;</p>
<p>    cx2 += -14_i;<br />
    cout &lt;&lt; cx2 &lt;&lt; endl;</p>
<p>    return 0;<br />
}<br />
</code></p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alfps odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10165">
		<div id="div-comment-10165">
		<div class="cmtinfo"><em> on <a href="#comment-10165" title="">2013-05-16 at 9:07 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/c6d1c46e2968a7674186b73b819dbca4?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://alfps.wordpress.com' rel='external nofollow' class='url'>Alf P. Steinbach</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10165"></div><p>The notion of &#8220;easy to use correctly and hard to use incorrectly&#8221; is generally a good idea, but not always. As an example, a simple 2D mutable <code>Point</code> class is easiest to use correctly when it just has two public members and a constructor or two. Improbable as it may seem, for <code>double&gt;/code&gt; members Visual C++ has a hard time optimizing optimizing code that accesses the members indirectly, or at least, it still was a bit deficient re such optimizations the year before last, so this has also to do with fundamental low-level efficiency.</p>
<p>The "easy to use correctly" has to do with the class as a provider of practically useful operations and with the class as a single well understood abstraction, which is more at the language independent design level, while the "hard to use incorrectly" has to do with the class as an enforcer of design constraints, which is more at the language specific and even compiler specific level, Accommodating Visual C++'s optimization problems is an example of possibly valid compiler-specific concerns. I think such choices need to be DOCUMENTED in order to be understood by maintenance programmers or even just by client code programmers.</p>
<p>Having noted that efficiency is a valid consideration, one should also note that it's easy to walk into the premature optimization trap. And the class presented in this question looks like an example of that. Apparently it's meant to provide a convenient increment operator, a </code><code>operator++</code>, but that would be better provided for a class derived from <code>std::complex&amp;lt&gt;T</code> (derived class in order to minimize the problem of multiple definitions of such an operator).</p>
<p>The above addresses some main concerns of the "JG" question, question 1. Others have already discussed the trivia of the "Guru" question, question 2, what the compiler can tell you if you give it the code. I think the "Guru" designation for that is a bit misplaced: nowadays it's not hard to feed some code to a compiler.</p>
<p>So far the existing answers have failed to mention what a compiler can't tell you, such as the pros and cons of choosing `void` as result type for `operator++`. Much in the same vein as choosing an as yet somewhat unconventional signed size type. This has to do with the more challenging "hard to use incorrectly" aspect &ndash; challenging in part because some established conventions in C++ are at odds with that goal.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10163">
		<div id="div-comment-10163">
		<div class="cmtinfo"><em> on <a href="#comment-10163" title="">2013-05-16 at 6:47 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/6066ef169dd493f52b173af5014b8113?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/infogulch' rel='external nofollow' class='url'>infogulch</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10163"></div><p>GregM &#8220;It is when all but one of the parameters is defaulted.&#8221;</p>
<p>Ah I didn&#8217;t catch that, thanks.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10162">
		<div id="div-comment-10162">
		<div class="cmtinfo"><em> on <a href="#comment-10162" title="">2013-05-16 at 6:37 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://crazycpp.wordpress.com' rel='external nofollow' class='url'>Crazy Eddie</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10162"></div><p>Well, others have mentioned that the postfix ++ should be based on prefix ++ so I wont reiterate that.  The problem with &lt;&lt; being part of the class likewise has been covered, but making it a friend is a mistake.</p>
<p>What this class needs is &#039;getters&#039; for real and imag.  Then + and &lt;&lt; can be implemented as non-friend functions.  Although setters for simple data in a class is sometimes a mistake, it&#039;s warranted here.  The sanity that the operators provide is simply to keep two values locked together in a sensible way.  There are a great many reasons why we&#039;d want getters for real and imag and the class is rather useless without them.</p>
<p>Adding the getters (not necessarily setters) also obeys the principle that you should be able to tell if two objects are equal based on their public interface alone.  In other words, we want to be able to write == as a non-friend function as well.  I forget where I got this principle but it&#039;s a good one.</p>
<p>That said, operator + should defer to +=, which should be added.</p>
<pre class="brush: plain; title: ; notranslate" title="">
complex operator + (complex left, complex const&amp; right)
{
  return left += right;
}
</pre>
<p>The compiler will get rid of the unnecessary temporaries either by using move construction or RVO.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10160">
		<div id="div-comment-10160">
		<div class="cmtinfo"><em> on <a href="#comment-10160" title="">2013-05-16 at 6:24 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/68f403eb5e6fef229e3c19a5d5f7fea6?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Mikhail Belyaev</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10160"></div><p>Follow-up:</p>
<p>My bad. It is generally better to write operator+ as a friend for classes with implicit constructors:</p>
<pre class="brush: plain; title: ; notranslate" title="">
//... inside the class
friend complex operator+(const complex&amp; lhv, const complex&amp; rhv) {
    return { lhv.real+rhv.real, lhv.imag+rhv.imag };
}
//...
</pre>
<p>This way both cmplx + 2.2 and 2.2 + cmplx will work.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10159">
		<div id="div-comment-10159">
		<div class="cmtinfo"><em> on <a href="#comment-10159" title="">2013-05-16 at 6:19 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/68f403eb5e6fef229e3c19a5d5f7fea6?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Mikhail Belyaev</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10159"></div><pre class="brush: plain; title: ; notranslate" title="">
// 1. why not use std::complex?
class complex {
public:
    // 2. where's the default/move/copy constructor?
    complex() = default;
    complex(const complex&amp;) = default;
    // the 0 instead of 0.0 is not really an issue, but why not be a kind Samaritan?
    complex( double r, double i = 0.0 ): real(r), imag(i) { }

    // 3. this was messed up
    complex operator+ (const complex&amp; other ) {
        return { real+other.real, imag+other.imag };
    }

    // 4. this was way totally messed up
    friend ostream&amp; operator &lt;&lt; (ostream&amp; os, const complex&amp; cm) {
        return os &lt;&lt; &quot;(&quot; &lt;&lt; cm.real &lt;&lt; &quot;,&quot; &lt;&lt; cm.imag &lt;&lt; &quot;)&quot;;
    }

    // 5. as was this
    const complex&amp; operator++() {
        ++real;
        return *this;
    }

    // 6. the postfix ++ was actually the only operator that worked as it should
    // but it's generally better to write it using prefix ++
    complex operator++( int ) {
        auto temp = *this;
        ++*this;
        return temp;
    }

    // ... more functions that complement the above ...

private:
    double real, imag;
};

</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10157">
		<div id="div-comment-10157">
		<div class="cmtinfo"><em> on <a href="#comment-10157" title="">2013-05-16 at 5:15 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/db892012bc52cc6cbfd27db9d98acf8b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>GregM</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10157"></div><p>Joe &#8220;I don’t think explicit is necessary because implicit conversion isn’t possible with multi-parameter constructors.&#8221;</p>
<p>It is when all but one of the parameters is defaulted.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10156">
		<div id="div-comment-10156">
		<div class="cmtinfo"><em> on <a href="#comment-10156" title="">2013-05-16 at 5:00 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/048b60040ffdd00df1aa43d3caa5fceb?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Tom</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10156"></div><pre class="brush: plain; title: ; notranslate" title="">
template&lt;typename FloatType = double&gt;
class complex {
public:
    inline complex(const FloatType r = FloatType(),const FloatType i = FloatType() )
        : real{r}, imag{i}
    { }
 
    complex&amp; operator+= (const FloatType&amp; r) {
        real += r; 
        return *this;
    }
 
    friend
    inline complex operator+ (const complex&amp; a, const complex&amp; b) {
        return {a.real + b.real, a.imag + b.imag};
    }
 
    friend
    inline ostream&amp; operator&lt;&lt;( ostream&amp; os, const complex&amp; cp ) const {
        return os &lt;&lt; &quot;(&quot; &lt;&lt; cp.real &lt;&lt; &quot;,&quot; &lt;&lt; cp.imag &lt;&lt; &quot;)&quot;;
    }
 
    inline complex&amp; operator++() {
        ++real;
        return *this;
    }
 
    inline complex operator++( FloatType ) {
        auto temp = *this;
        ++real;
        return temp;
    }
 
    // ... more functions that complement the above ...
 
private:
    FloatType real, imag;
};
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10148">
		<div id="div-comment-10148">
		<div class="cmtinfo"><em> on <a href="#comment-10148" title="">2013-05-16 at 1:36 pm</a></em> <img alt='' src='https://i0.wp.com/a0.twimg.com/profile_images/2390352971/2i91uu8i1n3hpiebo213_normal.png?resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://twitter.com/sehetw' rel='external nofollow' class='url'>sehe (@sehetw)</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10148"></div><p>0. implicit conversion constructor could be undesired<br />
1. missing includes iosfwd<br />
2. ostream not by reference<br />
3. operator &lt;&lt; wrong param ordering<br />
4. operator &lt;&lt; &quot;wrong&quot; return type (no chaining)<br />
   fixing operator&lt;&lt;:</p>
<pre class="brush: plain; title: ; notranslate" title="">
    // in class
    friend std::ostream&amp; operator&lt;&lt;( std::ostream&amp; os, complex const&amp; c); 

    // in cpp
    #include &lt;ostream&gt;

    std::ostream&amp; operator&lt;&lt;( std::ostream&amp; os, complex const&amp; c) {
        return os &lt;&lt; &#039;(&#039; &lt;&lt; c.real &lt;&lt; &#039;,&#039; &lt;&lt; c.imag &lt;&lt; &#039;)&#039;;
    }
</pre>
<p>5. operator+() actually implements more of `operator+=` and could take a const&amp; to allow for rvalues (implicit conversions)</p>
<p>   fixing it as operator+ (note const): </p>
<pre class="brush: plain; title: ; notranslate" title="">
    complex operator+ ( complex const &amp;other ) const {
        return { real + other.real, imag + other.imag };
    }
</pre>
<p>6. operator++() (prefix version) should return by reference</p>
<p>7. Consider using friend operator+ instead of member operator+ to allow for implicit conversion of the first operand as well:</p>
<pre class="brush: plain; title: ; notranslate" title="">
    friend complex operator+ ( complex const&amp; a, complex const &amp;other )  {
        return { a.real + other.real, a.imag + other.imag };
    }
</pre>
<p>   Note this becomes less useful if the constructor was made explicit</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10147">
		<div id="div-comment-10147">
		<div class="cmtinfo"><em> on <a href="#comment-10147" title="">2013-05-16 at 1:30 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/8a63fb909fa27c62c81c623696cc9461?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/tianyuzhu' rel='external nofollow' class='url'>Tianyu Zhu</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10147"></div><p>Something other people haven&#8217;t pointer out:<br />
operator + is actually operator +=. That is, the following code:</p>
<p>Complex a(1, 0), b(0, 1);<br />
a + b;</p>
<p>Actually changes the value of a.</p>
<p>I would probably implement operator + like this:</p>
<p>complex operator +(complex other) const {<br />
    return complex(real+other.real, imag+other.imag);<br />
}</p>
<p>Or perhaps in terms of an implemented += operator.</p>
<p>I wouldn&#8217;t necessarily take arguments by const&amp; since this is a relatively small class and it may not be necessary.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10145">
		<div id="div-comment-10145">
		<div class="cmtinfo"><em> on <a href="#comment-10145" title="">2013-05-16 at 1:25 pm</a></em> <img alt='' src='https://i1.wp.com/graph.facebook.com/1485159689/picture?q=type%3Dlarge%26_md5%3Db073285360854367a303453fc742f969&#038;resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.facebook.com/dmunoztrejo' rel='external nofollow' class='url'>Daniel Angel Muñoz Trejo</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10145"></div><pre class="brush: plain; title: ; notranslate" title="">class complex {
public:
    complex( double r, double i = 0.0 )
        : real(r), imag(i)
    { }

    complex operator+ (const complex&amp; other ) const {
        return complex(real + other.real, imag + other.imag);
    }

    ostream&amp; operator&lt;&lt;( ostream&amp; os ) const {
        return os &lt;&lt; &quot;(&quot; &lt;&lt; real &lt;&lt; &quot;,&quot; &lt;&lt; imag &lt;&lt; &quot;)&quot;;
    }

    complex&amp; operator++() {
        ++real;
        return *this;
    }

    complex operator++( int ) {
        auto temp = *this;
        ++real;
        return temp;
    }

    // ... more functions that complement the above ...

private:
    double real, imag;
};</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10144">
		<div id="div-comment-10144">
		<div class="cmtinfo"><em> on <a href="#comment-10144" title="">2013-05-16 at 1:21 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/6066ef169dd493f52b173af5014b8113?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/infogulch' rel='external nofollow' class='url'>Joe Taber</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10144"></div><p>@Kris:</p>
<p>Should `operator+()` and `operator++(int)` return `complex` as `const` instead?</p>
<p>I don&#8217;t think explicit is necessary because implicit conversion isn&#8217;t possible with multi-parameter constructors.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10143">
		<div id="div-comment-10143">
		<div class="cmtinfo"><em> on <a href="#comment-10143" title="">2013-05-16 at 1:15 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/cbf30a22f4780d66a41cbf13f4dbd170?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>BHR</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10143"></div><p>operator+ seems to be a typo, since it changes the object &#8211; it probably was intended to say operator+=. In that case a reference to *this should be returned, rather than void. If it really is intended to be operator+, it should be const and not change the object, instead it should return a temporary that is the sum.</p>
<p>The member operator &lt;&lt; is a poor choice. As written, you would have to write &quot;complex(1,2) &lt;&lt; std::cout&quot; instead of the more natural &quot;std::cout &lt;&lt; complex(1,2)&quot;. It would be better to make a free-standing operator&lt;&lt; that reverses the operator order. When doing that, an ostream&amp; should be returned instead of void. Also, the parameter should be an ostream&amp;, not an ostream.</p>
<p>std::ostream is written as just ostream. This requires a preceding &quot;using std::ostream;&quot; or &quot;using namespace std;&quot;. Putting that in a header puts that using declaration into all code that includes the header. Whether that is OK depends on the local coding convention, though I&#039;d avoid it. As a minor point, the strings that are being written to os are all one character long, so they could as well be chars. That probably won&#039;t matter much, but writing &#039;(&#039; is no more complicated than &quot;(&quot;, so you might as well choose the one that&#039;s likely to be faster.</p>
<p>operator++() should return a complex&amp;.</p>
<p>All of the parameters and the local variable temp in operator++(int) could be const. So a coder following the rule &quot;if it can be const, it should be const&quot; would make them const. However, reasonable people can disagree about whether taking consting to this level makes sense. I would do it.</p>
<p>A more philosophical note is whether incrementing a floating point complex number is a natural notion. It isn&#039;t to me so I&#039;d prefer there not to be an operator++.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10142">
		<div id="div-comment-10142">
		<div class="cmtinfo"><em> on <a href="#comment-10142" title="">2013-05-16 at 1:09 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/95699dd56dd40227b4ef4d1768a28a9f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>BK</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10142"></div><p>1. Operator + should take take the arg by const ref (pointed out in the prior response)<br />
2. Pre-increment should return a reference.<br />
3. operator&lt;&lt; takes an ostream by value &#8212; change to ref (also, would be better if the ouput method were moved out of the class)<br />
4. I would also add a move constructor. The post increment operator is returing a complex by value, a temporary can be eliminated here using the move ctor.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-10138">
		<div id="div-comment-10138">
		<div class="cmtinfo"><em> on <a href="#comment-10138" title="">2013-05-16 at 12:53 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/573cf6ef896d2680ba41fc7d9ac08c01?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://kriscience.blogspot.com' rel='external nofollow' class='url'>Kris</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10138"></div><p>* first of all should have used `std::complex&#8217; instead of implementing their own<br />
* constructor should be `explicit&#8217; to avoid implicid (unexpected) conversions<br />
* `operator+()&#8217; should return `complex&#8217;, take the argument by const reference and be declared as `const&#8217;</p>
<pre class="brush: plain; title: ; notranslate" title="">
    complex operator+ ( const complex&amp; other ) const {
        return complex(real + other.real, imag + other.imag);
    }
</pre>
<p>* stream operator should be a friend free function returning `std::ostream&#8217; and taking a const reference to `complex as the second argument</p>
<pre class="brush: plain; title: ; notranslate" title="">
    friend
    std::ostream&amp; operator&lt;&lt;( std::ostream&amp; os, const complex&amp; c ) {
        return os &lt;&lt; &quot;(&quot; &lt;&lt; c.real &lt;&lt; &quot;,&quot; &lt;&lt; c.imag &lt;&lt; &quot;)&quot;;
    }
</pre>
<p>* both increment operators do not make much sense, but leaving this aside:<br />
** pre-increment `operator++()&#8217; should return reference to `complex&#8217;<br />
** post-increment `operator++(int)&#8217; ideally should be implemented in terms the former one</p>
<pre class="brush: plain; title: ; notranslate" title="">
    complex operator++( int ) const {
        return ++complex(*this);
    }
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-10135">
		<div id="div-comment-10135">
		<div class="cmtinfo"><em> on <a href="#comment-10135" title="">2013-05-16 at 12:26 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/1cc4a77a8256c3049728728c6c45625b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.facebook.com/MattPD' rel='external nofollow' class='url'>Matt P. Dziubinski</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_10135"></div><p>A few thoughts on first sight:<br />
&#8211; let&#8217;s wrap this in a namespace, we wouldn&#8217;t want a clash with some other class named &#8220;complex&#8221;<br />
&#8211; let&#8217;s make it a class template instead of hard-coding the underlying type &#8220;double&#8221; (for &#8220;real&#8221;, &#8220;imag&#8221;, &#8220;r&#8221;, &#8220;i&#8221;, etc.)<br />
&#8211; optional: possibly use compile-time constraint on the underlying type, for instance, using type-trait like &#8220;std::is_floating_point&#8221; (or at least &#8220;std::is_arithmetic&#8221;) coupled with static_assert and/or std::enable_if // although we&#8217;re facing some trade-offs here &#8212; for instance, we could like to also use Boost.Multiprecision types (which is one of the reasons for making &#8220;complex&#8221; a class template in the first place)<br />
&#8211; use value-initialization instead of hard-coding &#8220;double i = 0&#8221; default argument (with unnecessary implicit conversion)<br />
&#8211; operator+ &#8212; result: make it return the result (by const-ref), use += for the components (or, even better, implement it in terms of operator += working for the class);<br />
&#8211; operator+ &#8212; arguments: I was about to say something about using const-ref, but then I recalled N3445 and thought pass-by-value might be fit better here:<br />
<a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3445.html" rel="nofollow">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3445.html</a><br />
&#8211; operator&lt;&lt; &#8212; make it behave like the operator&lt;&lt; in the Standard IOStream (take-and-return stream by reference)<br />
&#8211; (prefix) operator++ &#8212; there&#039;s an avoidable (by reference) copy in the pre-increment operator++<br />
&#8211; (postfix) operator++ &#8212; implement in terms of the prefix operator++ instead of handcoding ++real</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<br />

  	<p class="nocomments">Comments are closed.</p>
  <div class="post-content">
<p>
</p>
</div>

			</div>

		
		<p align="center"></p>

	</div><!-- end id:content-main -->
<div id="sidebar">
<ul>
<li class="sidebox"><h2><label for="subscribe-field">Follow by email</label></h2>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
																	<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"/></p>
					
					<p>
						<input type="hidden" name="action" value="subscribe"/>
						<input type="hidden" name="blog_id" value="3379246"/>
						<input type="hidden" name="source" value="https://herbsutter.com/2013/05/16/gotw-4-class-mechanics-710/"/>
						<input type="hidden" name="sub-type" value="widget"/>
						<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
						<input type="hidden" id="_wpnonce" name="_wpnonce" value="4590924cc6" />						<input type="submit" value="Subscribe" />
					</p>
				</form>
			
</li><li class="sidebox"><h2><a href='http://twitter.com/herbsutter'>Tweets</a></h2><ul class='tweets'></ul><a href="http://twitter.com/herbsutter"  class='twitter-follow-button' data-show-count='false' data-link-color='#265e15' data-text-color='#333333'>Follow @herbsutter</a></li><li class="sidebox"><h2>Popular</h2><ul>				<li>
										<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" class="bump-view" data-bump-view="tp">
						Trip report: Fall ISO C++ standards meeting (San Diego)					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/gotw/" class="bump-view" data-bump-view="tp">
						GotW					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" class="bump-view" data-bump-view="tp">
						Lifetime profile v1.0 posted					</a>
										</li>
				</ul></li><li class="sidebox"><h2>Categories</h2>		<ul>
				<li class="cat-item cat-item-291"><a href="https://herbsutter.com/category/apple/" >Apple</a>
</li>
	<li class="cat-item cat-item-49277"><a href="https://herbsutter.com/category/c-net/" >C# / .NET</a>
</li>
	<li class="cat-item cat-item-2426"><a href="https://herbsutter.com/category/c/" >C++</a>
</li>
	<li class="cat-item cat-item-69816"><a href="https://herbsutter.com/category/cloud/" >Cloud</a>
</li>
	<li class="cat-item cat-item-214618"><a href="https://herbsutter.com/category/concurrency/" >Concurrency</a>
</li>
	<li class="cat-item cat-item-8259773"><a href="https://herbsutter.com/category/effective-concurrency/" >Effective Concurrency</a>
</li>
	<li class="cat-item cat-item-3696745"><a href="https://herbsutter.com/category/friday-thoughts/" >Friday Thoughts</a>
</li>
	<li class="cat-item cat-item-3867746"><a href="https://herbsutter.com/category/c/gotw/" >GotW</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://herbsutter.com/category/hardware/" >Hardware</a>
</li>
	<li class="cat-item cat-item-1017"><a href="https://herbsutter.com/category/java/" >Java</a>
</li>
	<li class="cat-item cat-item-637"><a href="https://herbsutter.com/category/microsoft/" >Microsoft</a>
</li>
	<li class="cat-item cat-item-420845"><a href="https://herbsutter.com/category/opinion-editorial/" >Opinion &amp; Editorial</a>
</li>
	<li class="cat-item cat-item-1633077"><a href="https://herbsutter.com/category/reader-qa/" >Reader Q&amp;A</a>
</li>
	<li class="cat-item cat-item-2301"><a href="https://herbsutter.com/category/software-development/" >Software Development</a>
</li>
	<li class="cat-item cat-item-393523"><a href="https://herbsutter.com/category/talks-events/" >Talks &amp; Events</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://herbsutter.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-151"><a href="https://herbsutter.com/category/web/" >Web</a>
</li>
		</ul>
			</li></ul>
</div><!-- end id:sidebar -->
</div><!-- end id:content -->
</div><!-- end id:container -->
<div id="footer">
	<div id="colophon">
		<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a></p>
		<p>WPThemes.</p>
		<br class="clear" />
	</div><!-- end #colophon-->
</div><!-- end #footer-->
<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201847y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-d6438991d6d292ab415d698d8345b942">
	</div>
	<div class="grofile-hash-map-cbf30a22f4780d66a41cbf13f4dbd170">
	</div>
	<div class="grofile-hash-map-c0700a8d328517621a8b22e2a9123219">
	</div>
	<div class="grofile-hash-map-9379f2b1faceba1fa58d7a1d65712213">
	</div>
	<div class="grofile-hash-map-31a1c40a45079decc7f5525d2a873481">
	</div>
	<div class="grofile-hash-map-db892012bc52cc6cbfd27db9d98acf8b">
	</div>
	<div class="grofile-hash-map-2d62de19319092e658a1b403adc6b03d">
	</div>
	<div class="grofile-hash-map-51d9c0f234a7029ac58358a6dc2053f5">
	</div>
	<div class="grofile-hash-map-68f403eb5e6fef229e3c19a5d5f7fea6">
	</div>
	<div class="grofile-hash-map-1cc4a77a8256c3049728728c6c45625b">
	</div>
	<div class="grofile-hash-map-ca391c038b300a739462dae91c5e8cbc">
	</div>
	<div class="grofile-hash-map-6ca9d3543f3286af11d61293e4dd5051">
	</div>
	<div class="grofile-hash-map-3e120959c00490731769ecac98a5aca0">
	</div>
	<div class="grofile-hash-map-ef95896d2a7b776c0c22f0039bd0bf4d">
	</div>
	<div class="grofile-hash-map-2d039d25f4b02b7ed314d399a2494a16">
	</div>
	<div class="grofile-hash-map-6ee93a20fbc2bbba29dd41c3497a05f6">
	</div>
	<div class="grofile-hash-map-c6d1c46e2968a7674186b73b819dbca4">
	</div>
	<div class="grofile-hash-map-6066ef169dd493f52b173af5014b8113">
	</div>
	<div class="grofile-hash-map-937b36681a56def2b41c438a00e12b46">
	</div>
	<div class="grofile-hash-map-048b60040ffdd00df1aa43d3caa5fceb">
	</div>
	<div class="grofile-hash-map-5343330f3c16a7c708767cc53e92bf27">
	</div>
	<div class="grofile-hash-map-8a63fb909fa27c62c81c623696cc9461">
	</div>
	<div class="grofile-hash-map-c690257f97b176c47405d4d01e4deada">
	</div>
	<div class="grofile-hash-map-95699dd56dd40227b4ef4d1768a28a9f">
	</div>
	<div class="grofile-hash-map-573cf6ef896d2680ba41fc7d9ac08c01">
	</div>
	<div class="grofile-hash-map-1cc4a77a8256c3049728728c6c45625b">
	</div>
	</div>
<script type='text/javascript' charset='UTF-8' id='polldaddyRatings'><!--//--><![CDATA[//><!--
PDRTJS_settings_468178_comm_10246={"id":468178,"unique_id":"wp-comment-10246","title":"I%26%23039%3Bm%20going%20to%20address%20one%20tiny%20part%20of%20this%20-%20the%20streaming.%20I%26%23039%3Bve%20always%20hated%20this%20form%20of%20implementing%20printing.%20I%20don%26%23039%3Bt%20mean%20the%20fact%20that%20it%20is%20a%20member%20vs%20non-member%20function.%20I%20mean%20the%20assu...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10246","item_id":"_comm_10246"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10246 == 'undefined' ){PDRTJS_468178_comm_10246 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10246 );}}PDRTJS_settings_468178_comm_10244={"id":468178,"unique_id":"wp-comment-10244","title":"Good%20interface%20design%20is%20an%20exercise%20in%20tradeoffs.%20There%20is%20no%20single%20meaning%20of%20something%20like%20easy%20to%20use%20correctly%2C%20hard%20to%20use%20incorrectly%20-%20like%20everything%20in%20life%2C%20it%20depends%20on%20context.%20Th...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10244","item_id":"_comm_10244"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10244 == 'undefined' ){PDRTJS_468178_comm_10244 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10244 );}}PDRTJS_settings_468178_comm_10243={"id":468178,"unique_id":"wp-comment-10243","title":"To%20those%20suggesting%20that%20the%20constructor%20be%20made%20explicit%2C%20it%26%23039%3Bs%20worth%20noting%20out%20that%20std%3A%3Acomplex%20has%20a%20constructor%20of%20the%20form%20%28note%20the%20lack%20of%20an%20%26quot%3Bexplicit%26quot%3B%20keyword%29%3A%26%23091%3Bcode%26%23093%3Bconstexpr%20complex%28d...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10243","item_id":"_comm_10243"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10243 == 'undefined' ){PDRTJS_468178_comm_10243 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10243 );}}PDRTJS_settings_468178_comm_10242={"id":468178,"unique_id":"wp-comment-10242","title":"%40Crazy%20EddieI%20disagree%20with%20your%20idea%20of%20adding%20getters%20to%20this%20class.A%20complex%20number%20can%20be%20defined%20in%20different%20ways%2C%20one%20of%20them%20being%20the%20sum%20of%20a%20and%20ib%2C%20as%20it%20is%20here.%20Another%20implementati...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10242","item_id":"_comm_10242"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10242 == 'undefined' ){PDRTJS_468178_comm_10242 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10242 );}}PDRTJS_settings_468178_comm_10203={"id":468178,"unique_id":"wp-comment-10203","title":"You%20also%20need%20to%20consider%20multi%20element%20initializer%20lists%20when%20making%20a%20constructor%20%26quot%3Bexplicit%26quot%3B%20%28see%20the%20tuple%20%26quot%3Bexplicit%26quot%3B%20constructor%29.The%20question%20becomes%2C%20do%20you%20want%20this%20to%20work%3F%20%20%20%20void%20f%20%28co...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10203","item_id":"_comm_10203"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10203 == 'undefined' ){PDRTJS_468178_comm_10203 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10203 );}}PDRTJS_settings_468178_comm_10202={"id":468178,"unique_id":"wp-comment-10202","title":"%26quot%3BJust%20focusing%20one%20issue%20I%20havent%20seen%20mentioned%20by%20others%20already%2C%20Id%20question%20the%20appropriateness%20of%20offering%20the%20increment%20operators%20at%20all.%26quot%3BI%20had%20a%20similar%20thought%20when%20I%20read%20the%20class%2C%20%26quot%3Bwha...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10202","item_id":"_comm_10202"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10202 == 'undefined' ){PDRTJS_468178_comm_10202 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10202 );}}PDRTJS_settings_468178_comm_10201={"id":468178,"unique_id":"wp-comment-10201","title":"To%20make%20an%20easy%20to%20use%20interface%3A1.%20Make%20it%20impossible%20or%20very%20hard%20to%20use%20incorrectly%20%28fail%20to%20compile%2C%20crashes%2C%20etc%20when%20used%20incorrectly%20-%20see%20std%3A%3Achrono%20as%20a%20simple%20example%29%20-%20this%20is%20the%20mo...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10201","item_id":"_comm_10201"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10201 == 'undefined' ){PDRTJS_468178_comm_10201 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10201 );}}PDRTJS_settings_468178_comm_10198={"id":468178,"unique_id":"wp-comment-10198","title":"Interfaces%20are%20easy%20to%20use%20correctly%20if%20they%20follow%20established%20conventions%20and%20best%20practices.%20%28Ideally%20your%20established%20conventions%20will%20reflect%20best%20practice%2C%20but%20best%20practice%20evolves%2C%20so%20the...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10198","item_id":"_comm_10198"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10198 == 'undefined' ){PDRTJS_468178_comm_10198 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10198 );}}PDRTJS_settings_468178_comm_10197={"id":468178,"unique_id":"wp-comment-10197","title":"Another%20thought%3A%20if%20we%20do%20not%20make%20it%20a%20template%20%28which%20we%20possibly%20do%20not%20want%29%20the%20whole%20class%20is%20actually%20better%20off%20being%20a%20constexpr%20class.%20It%20won%26%23039%3Bt%20hurt%2C%20it%26%23039%3Bll%20help%20in%20some%20cases%20and%20it%20is%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10197","item_id":"_comm_10197"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10197 == 'undefined' ){PDRTJS_468178_comm_10197 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10197 );}}PDRTJS_settings_468178_comm_10192={"id":468178,"unique_id":"wp-comment-10192","title":"Good%20points%20in%20the%20previous%20comments.One%20more%20thing%20which%20comes%20to%20mind%20--%20given%20that%20it%20makes%20sense%20for%20%26quot%3Bcomplex%26quot%3B%20to%20have%20value%20semantics%20%28as%20opposed%20to%20reference%20semantics%29%2C%20we%26%23039%3Bd%20probably%20want%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10192","item_id":"_comm_10192"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10192 == 'undefined' ){PDRTJS_468178_comm_10192 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10192 );}}PDRTJS_settings_468178_comm_10190={"id":468178,"unique_id":"wp-comment-10190","title":"Just%20focusing%20one%20issue%20I%20haven%26%23039%3Bt%20seen%20mentioned%20by%20others%20already%2C%20I%26%23039%3Bd%20question%20the%20appropriateness%20of%20offering%20the%20increment%20operators%20at%20all.The%20increment%20and%20decrement%20operators%20make%20intuitiv...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10190","item_id":"_comm_10190"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10190 == 'undefined' ){PDRTJS_468178_comm_10190 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10190 );}}PDRTJS_settings_468178_comm_10180={"id":468178,"unique_id":"wp-comment-10180","title":"1.%20What%20makes%20interfaces%20easy%20to%20use%20correctly%2C%20hard%20to%20use%20incorrectly%3FThe%20first%20answer%20coming%20to%20my%20mind%20is%20%26quot%3BDocumentation%26quot%3B.The%20standard%20classes%20are%20quite%20well%20documented%20-%20imagine%20how%20difficul...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10180","item_id":"_comm_10180"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10180 == 'undefined' ){PDRTJS_468178_comm_10180 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10180 );}}PDRTJS_settings_468178_comm_10177={"id":468178,"unique_id":"wp-comment-10177","title":"Just%20had%20to%20give%20it%20a%20final%20try.%26%23091%3Bcode%26%23093%3Bclass%20complex%20%7B%2F%2F%20allow%20access%20to%20private%20membersfriend%20ostream%26amp%3B%20operator%26lt%3B%26lt%3B%28%20ostream%26amp%3B%20os%2C%20const%20complex%26amp%3B%20c%20%29%3Bpublic%3A%2F%2F%20doubles%20as%20default%20c...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10177","item_id":"_comm_10177"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10177 == 'undefined' ){PDRTJS_468178_comm_10177 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10177 );}}PDRTJS_settings_468178_comm_10174={"id":468178,"unique_id":"wp-comment-10174","title":"Think%20I%20would%20as%20reviewer%20simply%20say%20use%20a%20std%3A%3A%20complex%20or%20other%20library%20and%20go%20off%20and%20have%20lunch%21But%20was%20never%20any%20good%20with%20made%20up%20exam%20questions....ps%20Unfortunately%20saw%20similar%20when%20someone...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10174","item_id":"_comm_10174"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10174 == 'undefined' ){PDRTJS_468178_comm_10174 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10174 );}}PDRTJS_settings_468178_comm_10171={"id":468178,"unique_id":"wp-comment-10171","title":"Sorry%2C%20%20forgot%20default%20ctor.%26%23091%3Bcode%26%23093%3Bclass%20complex%7B%20%20%20complex%28%29%20%3D%20default%3B%20%20%20complex%28%20const%20complex%26amp%3B%20other%29%20%3D%20default%3B%20%20%20complex%26amp%3B%20operator%20%3D%20%28const%20complex%26amp%3B%20other%29%20%3D%20default%3B%20%20%20%2F%2F%20other%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10171","item_id":"_comm_10171"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10171 == 'undefined' ){PDRTJS_468178_comm_10171 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10171 );}}PDRTJS_settings_468178_comm_10170={"id":468178,"unique_id":"wp-comment-10170","title":"%26%23091%3Bcode%26%23093%3Bclass%20complex%20%7Bpublic%3A%20%20%20constexpr%20explicit%20complex%28%20double%20r%2C%20double%20i%20%3D%200.0%20%29%20noexcept%20%20%20%20%20%20%20%20%3A%20real_%20%7B%20r%20%7D%20%20%20%20%20%20%20%2C%20imag_%20%7B%20i%20%7D%20%20%20%20%7B%20%7D%20%20%20constexpr%20complex%20operator%2B%20%28%20const%20complex%26amp%3B%20o...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10170","item_id":"_comm_10170"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10170 == 'undefined' ){PDRTJS_468178_comm_10170 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10170 );}}PDRTJS_settings_468178_comm_10169={"id":468178,"unique_id":"wp-comment-10169","title":"But%20made%20error%28s%29.%20So%2C%20back%20to%20work...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10169","item_id":"_comm_10169"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10169 == 'undefined' ){PDRTJS_468178_comm_10169 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10169 );}}PDRTJS_settings_468178_comm_10168={"id":468178,"unique_id":"wp-comment-10168","title":"Thought%20I%26%23039%3Bd%20give%20it%20a%20try%26%23091%3Bcode%26%23093%3Busing%20namespace%20std%3B%2F%2F%20IO%20operator%20cannot%20be%20a%20class%20member.%20%2F%2F%20Class%20member%20ops%20require%20the%20left%20operand%20to%20be%20a%20class%20objectostream%26amp%3B%20operator%26lt%3B%26lt%3B%28%20ostream...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10168","item_id":"_comm_10168"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10168 == 'undefined' ){PDRTJS_468178_comm_10168 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10168 );}}PDRTJS_settings_468178_comm_10167={"id":468178,"unique_id":"wp-comment-10167","title":"I%20figured%20using%20user%20literals%20would%20helps%20with%20syntax%20and%20avoid%20implicit%20cast%20problems%20from%20float%28i.e.%20was%20the%20float%20a%20real%20or%20imaginary%29.%20Ended%20up%20with%20a%20lot%20of%20code%20though.%26lt%3Bcode%26gt%3B%23include%20using%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10167","item_id":"_comm_10167"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10167 == 'undefined' ){PDRTJS_468178_comm_10167 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10167 );}}PDRTJS_settings_468178_comm_10165={"id":468178,"unique_id":"wp-comment-10165","title":"The%20notion%20of%20%26quot%3Beasy%20to%20use%20correctly%20and%20hard%20to%20use%20incorrectly%26quot%3B%20is%20generally%20a%20good%20idea%2C%20but%20not%20always.%20As%20an%20example%2C%20a%20simple%202D%20mutable%20%26lt%3Bcode%26gt%3BPoint%26lt%3B%2Fcode%26gt%3B%20class%20is%20easiest%20to%20use%20correctly...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10165","item_id":"_comm_10165"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10165 == 'undefined' ){PDRTJS_468178_comm_10165 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10165 );}}PDRTJS_settings_468178_comm_10163={"id":468178,"unique_id":"wp-comment-10163","title":"GregM%20%26quot%3BIt%20is%20when%20all%20but%20one%20of%20the%20parameters%20is%20defaulted.%26quot%3BAh%20I%20didn%26%23039%3Bt%20catch%20that%2C%20thanks....","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10163","item_id":"_comm_10163"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10163 == 'undefined' ){PDRTJS_468178_comm_10163 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10163 );}}PDRTJS_settings_468178_comm_10162={"id":468178,"unique_id":"wp-comment-10162","title":"Well%2C%20others%20have%20mentioned%20that%20the%20postfix%20%2B%2B%20should%20be%20based%20on%20prefix%20%2B%2B%20so%20I%20wont%20reiterate%20that.%20%20The%20problem%20with%20%26lt%3B%26lt%3B%20being%20part%20of%20the%20class%20likewise%20has%20been%20covered%2C%20but%20making%20it%20...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10162","item_id":"_comm_10162"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10162 == 'undefined' ){PDRTJS_468178_comm_10162 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10162 );}}PDRTJS_settings_468178_comm_10160={"id":468178,"unique_id":"wp-comment-10160","title":"Follow-up%3AMy%20bad.%20It%20is%20generally%20better%20to%20write%20operator%2B%20as%20a%20friend%20for%20classes%20with%20implicit%20constructors%3A%26%23091%3Bcode%26%23093%3B%2F%2F...%20inside%20the%20classfriend%20complex%20operator%2B%28const%20complex%26amp%3B%20lhv%2C%20const%20c...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10160","item_id":"_comm_10160"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10160 == 'undefined' ){PDRTJS_468178_comm_10160 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10160 );}}PDRTJS_settings_468178_comm_10159={"id":468178,"unique_id":"wp-comment-10159","title":"%26%23091%3Bcode%26%23093%3B%2F%2F%201.%20why%20not%20use%20std%3A%3Acomplex%3Fclass%20complex%20%7Bpublic%3A%20%20%20%20%2F%2F%202.%20where%26%23039%3Bs%20the%20default%2Fmove%2Fcopy%20constructor%3F%20%20%20%20complex%28%29%20%3D%20default%3B%20%20%20%20complex%28const%20complex%26amp%3B%29%20%3D%20default%3B%20%20%20%20%2F%2F%20the%200%20inste...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10159","item_id":"_comm_10159"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10159 == 'undefined' ){PDRTJS_468178_comm_10159 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10159 );}}PDRTJS_settings_468178_comm_10157={"id":468178,"unique_id":"wp-comment-10157","title":"Joe%20%26quot%3BI%20dont%20think%20explicit%20is%20necessary%20because%20implicit%20conversion%20isnt%20possible%20with%20multi-parameter%20constructors.%26quot%3BIt%20is%20when%20all%20but%20one%20of%20the%20parameters%20is%20defaulted....","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10157","item_id":"_comm_10157"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10157 == 'undefined' ){PDRTJS_468178_comm_10157 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10157 );}}PDRTJS_settings_468178_comm_10156={"id":468178,"unique_id":"wp-comment-10156","title":"%26%23091%3Bcode%26%23093%3Btemplate%26lt%3Btypename%20FloatType%20%3D%20double%26gt%3Bclass%20complex%20%7Bpublic%3A%20%20%20%20inline%20complex%28const%20FloatType%20r%20%3D%20FloatType%28%29%2Cconst%20FloatType%20i%20%3D%20FloatType%28%29%20%29%20%20%20%20%20%20%20%20%3A%20real%7Br%7D%2C%20imag%7Bi%7D%20%20%20%20%7B%20%7D%20%20%20%20%20co...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10156","item_id":"_comm_10156"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10156 == 'undefined' ){PDRTJS_468178_comm_10156 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10156 );}}PDRTJS_settings_468178_comm_10148={"id":468178,"unique_id":"wp-comment-10148","title":"0.%20implicit%20conversion%20constructor%20could%20be%20undesired1.%20missing%20includes%20iosfwd2.%20ostream%20not%20by%20reference3.%20operator%20%26lt%3B%26lt%3B%20wrong%20param%20ordering4.%20operator%20%26lt%3B%26lt%3B%20%26quot%3Bwrong%26quot%3B%20return%20ty...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10148","item_id":"_comm_10148"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10148 == 'undefined' ){PDRTJS_468178_comm_10148 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10148 );}}PDRTJS_settings_468178_comm_10147={"id":468178,"unique_id":"wp-comment-10147","title":"Something%20other%20people%20haven%26%23039%3Bt%20pointer%20out%3Aoperator%20%2B%20is%20actually%20operator%20%2B%3D.%20That%20is%2C%20the%20following%20code%3AComplex%20a%281%2C%200%29%2C%20b%280%2C%201%29%3Ba%20%2B%20b%3BActually%20changes%20the%20value%20of%20a.I%20would%20probably%20implemen...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10147","item_id":"_comm_10147"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10147 == 'undefined' ){PDRTJS_468178_comm_10147 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10147 );}}PDRTJS_settings_468178_comm_10145={"id":468178,"unique_id":"wp-comment-10145","title":"%26%23091%3Bcode%26%23093%3Bclass%20complex%20%7Bpublic%3A%20%20%20%20complex%28%20double%20r%2C%20double%20i%20%3D%200.0%20%29%20%20%20%20%20%20%20%20%3A%20real%28r%29%2C%20imag%28i%29%20%20%20%20%7B%20%7D%20%20%20%20complex%20operator%2B%20%28const%20complex%26amp%3B%20other%20%29%20const%20%7B%20%20%20%20%20%20%20%20return%20complex%28real%20%2B%20other.re...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10145","item_id":"_comm_10145"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10145 == 'undefined' ){PDRTJS_468178_comm_10145 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10145 );}}PDRTJS_settings_468178_comm_10144={"id":468178,"unique_id":"wp-comment-10144","title":"%40Kris%3AShould%20%60operator%2B%28%29%60%20and%20%60operator%2B%2B%28int%29%60%20return%20%60complex%60%20as%20%60const%60%20instead%3FI%20don%26%23039%3Bt%20think%20explicit%20is%20necessary%20because%20implicit%20conversion%20isn%26%23039%3Bt%20possible%20with%20multi-parameter%20constructo...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10144","item_id":"_comm_10144"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10144 == 'undefined' ){PDRTJS_468178_comm_10144 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10144 );}}PDRTJS_settings_468178_comm_10143={"id":468178,"unique_id":"wp-comment-10143","title":"operator%2B%20seems%20to%20be%20a%20typo%2C%20since%20it%20changes%20the%20object%20-%20it%20probably%20was%20intended%20to%20say%20operator%2B%3D.%20In%20that%20case%20a%20reference%20to%20%2Athis%20should%20be%20returned%2C%20rather%20than%20void.%20If%20it%20really%20is%20int...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10143","item_id":"_comm_10143"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10143 == 'undefined' ){PDRTJS_468178_comm_10143 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10143 );}}PDRTJS_settings_468178_comm_10142={"id":468178,"unique_id":"wp-comment-10142","title":"1.%20Operator%20%2B%20should%20take%20take%20the%20arg%20by%20const%20ref%20%28pointed%20out%20in%20the%20prior%20response%292.%20Pre-increment%20should%20return%20a%20reference.3.%20operator%26lt%3B%26lt%3B%20takes%20an%20ostream%20by%20value%20---%20change%20to%20ref%20%28...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10142","item_id":"_comm_10142"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10142 == 'undefined' ){PDRTJS_468178_comm_10142 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10142 );}}PDRTJS_settings_468178_comm_10138={"id":468178,"unique_id":"wp-comment-10138","title":"%2A%20first%20of%20all%20should%20have%20used%20%60std%3A%3Acomplex%26%23039%3B%20instead%20of%20implementing%20their%20own%2A%20constructor%20should%20be%20%60explicit%26%23039%3B%20to%20avoid%20implicid%20%28unexpected%29%20conversions%2A%20%60operator%2B%28%29%26%23039%3B%20should%20return%20%60complex...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10138","item_id":"_comm_10138"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10138 == 'undefined' ){PDRTJS_468178_comm_10138 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10138 );}}PDRTJS_settings_468178_comm_10135={"id":468178,"unique_id":"wp-comment-10135","title":"A%20few%20thoughts%20on%20first%20sight%3A-%20let%26%23039%3Bs%20wrap%20this%20in%20a%20namespace%2C%20we%20wouldn%26%23039%3Bt%20want%20a%20clash%20with%20some%20other%20class%20named%20%26quot%3Bcomplex%26quot%3B-%20let%26%23039%3Bs%20make%20it%20a%20class%20template%20instead%20of%20hard-coding%20the%20underlyin...","permalink":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/#comment-10135","item_id":"_comm_10135"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_10135 == 'undefined' ){PDRTJS_468178_comm_10135 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_10135 );}}
//--><!]]></script><script type='text/javascript' charset='UTF-8' src='https://polldaddy.com/js/rating/rating.js'></script><script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMAxpon2traGJkZGxiZGhskgUAFHlAaw=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s1.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"3379246","siteName":"Sutter\u2019s Mill","siteURL":"https:\/\/herbsutter.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/mistylook","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-4-class-mechanics-710%2F","themeURL":"","xhrURL":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"8fb9818ae2","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"4590924cc6\" \/>","referer":"https:\/\/herbsutter.com\/2013\/05\/16\/gotw-4-class-mechanics-710\/","canFollow":"1","feedID":"171936","statusMessage":"","customizeLink":"https:\/\/herbsutter.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbsutter.wordpress.com%2F2013%2F05%2F16%2Fgotw-4-class-mechanics-710%2F","postID":"1920","shortlink":"https:\/\/wp.me\/peb5Y-uY","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/herbsutter.com\/1920","statsLink":"https:\/\/wordpress.com\/stats\/post\/1920\/herbsutter.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: MistyLook","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 19,532 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F05%2F16%2Fgotw-4-class-mechanics-710%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVjcEOgjAQRH/IuoIYT8Zvqe2GLrQLdlvAv7ceJEYTEg+bTGbe7MA8KjNwQk7QCVicyOC47DvZwUcUshp9bokFPPUocM+Y0Wm2HuM3/CblwUkvjlrnyyWMv87GjraBWN10hKCloEWpYcIYyZb91fvzQ4ra9LJVMokGfpVWVehruFSnujo0x+Zcd0+y+3Rn'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'3379246','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'3379246','v':'wpcom','tz':'-8','user_id':'0','post':'1920','subd':'herbsutter'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d1TjBELytHc0k/MXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sNGtvK0phaSVQRzVpTk58eltoaSZkdG9XaVkudTNYTU4xW1NOMnZOeGpaaXRRLHxuLnZtOVlnTiYuWXNPSitmOFY0MF10eDVpTzcuRDlbSyx5c2xEZF9OTTksckImMXRpUUtWQkJbQXFyb1FobTAwQTRVZEpwUXdJdlRbPVNlQ34/Jkd8UCtMdUpbM0RVZ0QtYzhyaSYwLHxpejdjZEMwLHJuNGp8Y2NdPUpZOWZxXy1VSTBTVnBQTzV2b01jQ0lrJXFmdH5N'}]);
_stq.push([ 'clickTrackerInit', '3379246', '1920' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>