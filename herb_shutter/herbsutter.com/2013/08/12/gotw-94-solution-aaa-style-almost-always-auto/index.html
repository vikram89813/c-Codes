<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>GotW #94 Solution: AAA Style (Almost Always Auto) | Sutter’s Mill</title>
<link rel="pingback" href="https://herbsutter.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"typekit":{"id":"eyo0tqd"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active #header h1{font-size:2.12em;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active body{font-size:89.7%;font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation{font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation ul li.search{font-size:1.06em}.wf-active #navigation ul li.search input#searchsubmit{font-size:1.06em}.wf-active #content .post-info, .wf-active #content .postmetadata{font-size:1.06em}.wf-active #sidebar{font-size:1.06em}.wf-active #footer p.right{font-size:1.06em}.wf-active .commentnum{font-size:1.77em}.wf-active .commentlist li .cmtinfo{font-size:1.18em}.wf-active .commentlist li .cmtinfo em{font-size:1.06em}.wf-active #respond label{font-size:11.8px}.wf-active #respond .required{font-size:11.8px}.wf-active #respond .subscribe-label{font-size:14.2px}.wf-active #respond .comment-notes{font-size:13px}.wf-active .wp-caption p.wp-caption-text{font-size:13px}.wf-active #content h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active #header h2{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active #content h3{font-size:1.65em;font-weight:400;font-style:normal}.wf-active #content h4{font-size:1.3em;font-style:normal;font-weight:400}.wf-active #content h5{font-size:1.18em;font-style:normal;font-weight:400}.wf-active #content .post h2{font-size:1.65em;font-weight:400;font-style:normal}.wf-active li.sidebox h2{font-weight:400;font-size:1.89em;font-style:normal}.wf-active .post h4{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active .post h4 em{font-style:normal;font-weight:400}</style>
		<script src='https://r-login.wordpress.com/remote-login.php?action=js&amp;host=herbsutter.com&amp;id=3379246&amp;t=1542965300&amp;back=https%3A%2F%2Fherbsutter.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//herbsutter.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Feed" href="https://herbsutter.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Comments Feed" href="https://herbsutter.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; GotW #94 Solution: AAA Style (Almost Always&nbsp;Auto) Comments Feed" href="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNkN1uwjAMhV9onsUG69W0Z0laE0zzp8QR6tvjUlUCwSpuonOS81knxkuGPkWhKBgaZN8cx4qeR6p4JsmmH+HmPvtaP/B1nOORI8uEcqKgYG4WA1eZfErjFtinQnofspE5EWhgQ15nRNnCQv5ZqVmetORmv0vWNFibC9UKegZuAZayT9wKuabWUnEwt0Tb2A9ofbotxBZTJpx/SE8DXi3hn+h9Rx4cSUVJGXKqqt5GaurZeGCNPJoFZoxJlsdVbE11lEB/aYRTfDBw9IbLFlpI9+NUOtTUnZ2hv/C7O+y/uu9uf+jOV8Xg7sY=?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyFztEKwjAMBdAfsquTiXsRv6XWOFKXtDbphn69HeiDMBQCgdzDJXZOBtmP5QJiQ517gfx4rybIxv4ChnDITqEh5A/2kRVYF0vxjCOYIpDdUG+16BpXXIqiBCIVraTfLyFPCPNfFkCT8zeTQfC5tJ7o2Hb9Yde3+24bXjRNW9I='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbsutter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Recommended reading: Why mobile web apps are slow (Drew&nbsp;Crawford)' href='https://herbsutter.com/2013/07/09/recommended-reading-why-mobile-web-apps-are-slow-drew-crawford/' />
<link rel='next' title='GotW #7a: Minimizing Compile-Time Dependencies, Part&nbsp;1' href='https://herbsutter.com/2013/08/12/gotw-7a-minimizing-compile-time-dependencies-part-1/' />
<meta name="generator" content="WordPress.com" />
<link rel="canonical" href="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/" />
<link rel='shortlink' href='https://wp.me/peb5Y-zY' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fherbsutter.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="GotW #94 Solution: AAA Style (Almost Always Auto)" />
<meta property="og:url" content="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/" />
<meta property="og:description" content="Toward correct-by-default, efficient-by-default, and pitfall-free-by-default variable declarations, using &#8220;AAA style&#8221;… where &#8220;triple-A&#8221; is both a mnemonic and an evaluation …" />
<meta property="article:published_time" content="2013-08-12T19:42:37+00:00" />
<meta property="article:modified_time" content="2014-12-30T17:27:42+00:00" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=200&amp;ts=1542965300" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:text:title" content="GotW #94 Solution: AAA Style (Almost Always&nbsp;Auto)" />
<meta name="twitter:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=240" />
<meta name="twitter:card" content="summary" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=114" />
<link rel='openid.server' href='https://herbsutter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://herbsutter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<script type="text/javascript" id="webfont-output">
  
  WebFontConfig = {"typekit":{"id":"cjs1oxc"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Sutter’s Mill" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Herb Sutter on software development" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbsutter.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="Toward correct-by-default, efficient-by-default, and pitfall-free-by-default variable declarations, using &quot;AAA style&quot;… where &quot;triple-A&quot; is both a mnemonic and an evaluation of its value. Problem JG Questions 1. What does this code do? What would be a good name for some_function? template&lt;class Container, class Value&gt; void some_function( Container&amp; c, const Value&amp; v ) { if( find(begin(c), end(c),&hellip;" />
<style type="text/css">
			#header h1 a,
		#header h2 {
			color: #265E15 !important;
		}
				#headerimage {
			background: url('https://herbsutter.files.wordpress.com/2011/10/cropped-blog-header.jpg') no-repeat;
			height: 200px;
		}
	</style>
<link rel="amphtml" href="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/amp/"><style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s2.wp.com/?custom-css=1&#038;csblog=eb5Y&#038;cscache=6&#038;csrev=60" />
		</head>
<body id="section-index" class="post-template-default single single-post postid-2230 single-format-standard mp6 customizer-styles-applied highlander-enabled highlander-light">


<div id="navigation" class="clearfix">
		<div class="menu">
		<ul>
			<li ><a href="https://herbsutter.com/" title="Home">Home</a></li>
			<li class="page_item page-item-912"><a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the&nbsp;Jungle</a></li>
<li class="page_item page-item-864 page_item_has_children"><a href="https://herbsutter.com/gotw/">GotW</a></li>
<li class="page_item page-item-761"><a href="https://herbsutter.com/elements-of-modern-c-style/">Elements of Modern C++&nbsp;Style</a></li>
<li class="page_item page-item-2 page_item_has_children"><a href="https://herbsutter.com/about/">About</a></li>
									<li class="search"><form method="get" id="searchform" action="https://herbsutter.com"><input type="text" class="textbox" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></form></li>
					</ul>
	</div>
</div><!-- end id:navigation -->

<div id="container">

<div id="header">
<h1><a href="https://herbsutter.com/" title="Sutter’s Mill">Sutter’s Mill</a></h1>
<h2>Herb Sutter on software development</h2>
</div><!-- end id:header -->


	
		<div id="feedarea">
	<dl>
		<dt><strong>Feeds:</strong></dt>

			<dd><a href="https://herbsutter.com/feed/">Posts</a></dd>
	
			<dd><a href="https://herbsutter.com/comments/feed/">Comments</a></dd>
		</dl>
	</div><!-- end id:feedarea -->
	
	<div id="headerimage">
</div><!-- end id:headerimage -->

<div id="content">
<div id="content-main">

		
									<div class="postnav">
				<div class="alignleft">&laquo; <a href="https://herbsutter.com/2013/07/09/recommended-reading-why-mobile-web-apps-are-slow-drew-crawford/" rel="prev">Recommended reading: Why mobile web apps are slow (Drew&nbsp;Crawford)</a></div>
				<div class="alignright"><a href="https://herbsutter.com/2013/08/12/gotw-7a-minimizing-compile-time-dependencies-part-1/" rel="next">GotW #7a: Minimizing Compile-Time Dependencies, Part&nbsp;1</a> &raquo;</div>
			</div>
			
			<div class="post-2230 post type-post status-publish format-standard hentry category-gotw" id="post-2230">
				<div class="posttitle">
					<h2>GotW #94 Solution: AAA Style (Almost Always&nbsp;Auto)</h2>
					<p class="post-info">2013-08-12 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p><span style="color:#5a5a5a;"><em>Toward correct-by-default, efficient-by-default, and pitfall-free-by-default variable declarations, using &#8220;AAA style&#8221;… where &#8220;triple-A&#8221; is both a mnemonic and an evaluation of its value.<br />
</em></span></p>
<h1>Problem</h1>
<h2>JG Questions</h2>
<p>1. What does this code do? What would be a good name for <span style="color:#2e74b5;">some_function</span>?</p>
<pre><code>template&lt;class Container, class Value&gt;
void some_function( Container&amp; c, const Value&amp; v ) {
    if( find(begin(c), end(c), v) == end(c) )
        c.emplace_back(v); 
    assert( !c.empty() );
}
</code></pre>
<p>2. What does &#8220;write code against interfaces, not implementations&#8221; mean, and why is it generally beneficial?</p>
<h2>Guru Questions</h2>
<p>3. What are some popular concerns about using <span style="color:#2e74b5;">auto</span> to declare variables? Are they valid? Discuss.</p>
<p>4. When declaring a new local variable <span style="color:#2e74b5;">x</span>, what advantages are there to declaring it using <span style="color:#2e74b5;">auto</span> and one of the two following syntaxes:</p>
<p style="margin-left:36pt;">(a) <span style="color:#2e74b5;">auto x = init;</span> when you don&#8217;t need to commit to a specific type? (Note: The expression <span style="color:#2e74b5;">init</span> might include calling a helper that performs partial type adjustment, such as <span style="color:#2e74b5;">as_signed</span>, while still not committing to a specific type.)</p>
<p style="margin-left:36pt;">(b) <span style="color:#2e74b5;">auto x = type{ init };</span> when you do want to commit to a specific type by naming a <span style="color:#2e74b5;">type</span>?</p>
<p>List as many as you can. (Hint: Look back to GotW #93.)</p>
<p>5. Explain how using the style suggested in #4 is consistent with, or actively leverages, the following other C++ features:</p>
<p style="margin-left:36pt;">(a) Heap allocation syntax.</p>
<p style="margin-left:36pt;">(b) Literal suffixes, including user-defined literal operators.</p>
<p style="margin-left:36pt;">(c) Named lambda syntax.</p>
<p style="margin-left:36pt;">(d) Function declarations.</p>
<p style="margin-left:36pt;">(e) Template alias declarations.</p>
<p>6. Are there any cases where it is not possible to use the style in #4 to declare all local variables?</p>
<h1>Solution</h1>
<h2>1. What does this code do? What would be a good name for some_function?</h2>
<pre><code>template&lt;class Container, class Value&gt;
void <span style="background-color:yellow;">append_unique</span>( Container&amp; c, const Value&amp; v ) {
    if( find(begin(c), end(c), v) == end(c) )
        c.emplace_back(v); 
    assert( !c.empty() );
}
</code></pre>
<p>Let&#8217;s call this function <span style="color:#2e74b5;">append_unique</span>. First, it checks to see whether the value <span style="color:#2e74b5;">v</span> is already in the container. If not, it appends it at the end. Finally, it asserts that <span style="color:#2e74b5;">c</span> is not empty, since by now it must contain one copy of the value <span style="color:#2e74b5;">v</span>.</p>
<p>You probably thought this question was fairly easy.</p>
<p>Maybe <em>too</em> easy.</p>
<p>If so, good. That&#8217;s the point of the example. Hold the thought, and we&#8217;ll come back to this in Question 3.</p>
<h2>2. What does &#8220;write code against interfaces, not implementations&#8221; mean, and why is it generally beneficial?</h2>
<p>It means we should care principally about &#8220;what,&#8221; not &#8220;how.&#8221; This separation of concerns applies at all levels in high-quality modern software—hiding <em>code</em>, hiding <em>data</em>, and hiding <em>type</em>. Each increases encapsulation and reduces coupling, which are essential for large-scale and robust software.</p>
<p>Please indulge a little repetition in the following paragraphs. It&#8217;s there to make a point about similarity.</p>
<p><strong>Hiding code.</strong> With the invention of separately compiled functions and structured programming, we gained &#8220;encapsulation to <em>hide code.</em>&#8221; The caller knows the signature only—the function&#8217;s internal code is not his concern and not accessible programmatically, even if the function is <span style="color:#2e74b5;">inline</span> and the body happens to be visible in source code. We try hard not to inadvertently leak implementation details, such as internal data structure types. The point is that the caller does not, and should not, commit to knowledge of the current internal code; if he did, it would create interdependencies and make separately compiled libraries impossible.</p>
<p><strong>Hiding data (and code).</strong> With object oriented styles (OO), we gained two new manifestations of this separation. First, we got &#8220;more encapsulation to <em>hide both code and data.</em>&#8221; The caller knows the class name, bases, and member function signatures only—the class&#8217;s internal data and internal code are hidden and not accessible programmatically, even though the <span style="color:#2e74b5;">private</span> class members are lexically visible in the class definition and <span style="color:#2e74b5;">inline</span> function bodies may also be visible. (In turn, dynamic libraries and the potential future-C++ modules work aim to accomplish the same thing at a still larger scale.) Again we try hard not to inadvertently leak implementation details, and again the point is that the caller does not, and should not, commit to knowledge of the current internal data or code, which would make the class difficult to ever change or to ship on its own as a library.</p>
<p><strong>Hiding type (run-time polymorphism).</strong> Second, OO also gave us &#8220;separation of interfaces to <em>hide type.</em>&#8221; A base class or interface can delegate work to a concrete derived implementation via virtual functions. Now the interface the caller sees and the implementation are actually different types, and the caller knows the base type only—he doesn&#8217;t know or care about the concrete type, including even its size. The point, once again, is that the caller does not, and should not, commit to a single concrete type, which would make the caller&#8217;s code less general and less able to be reused with new types.</p>
<p><strong>Hiding type (compile-time polymorphism).</strong> With templates, we gained a new compile-time form of this separation—and it&#8217;s still &#8220;separation of interfaces to <em>hide type</em>.&#8221; The caller knows an ad-hoc &#8220;duck typed&#8221; set of operations he wants to perform using a type, and any type that supports those operations will do just fine. The contemplated future C++ concepts feature will allow making this stricter and less ad-hoc, but still avoids committing to a concrete type at all. The whole point is still is that the caller does not, and should not, commit to a single concrete type, which would make the caller&#8217;s code less generic and less able to be reused with new types.</p>
<h2>3. What are some popular concerns about using auto to declare variables? Are they valid? Discuss.</h2>
<p>In many languages, not just C++, there are several reasons people commonly give for why they are reluctant to use <span style="color:#2e74b5;">auto</span> to declare variables (or the equivalent in another language, such as <span style="color:#2e74b5;">var</span> or <span style="color:#2e74b5;">let</span>). We could summarize them as: <em>laziness</em>, <em>commitment</em>, and <em>readability</em>. Let&#8217;s take them in order.</p>
<h3>Laziness and commitment</h3>
<p>First, laziness: One common concern is that &#8220;writing <span style="color:#2e74b5;">auto</span> to declare a variable is primarily about saving typing.&#8221; However, this is just a misunderstanding of <span style="color:#2e74b5;">auto</span>. As we saw in GotW #92 and #93 and will see again below, the main reasons to declare variables using <span style="color:#2e74b5;">auto</span> are for correctness, performance, maintainability, and robustness—and, yes, convenience, but that&#8217;s in last place on the list.</p>
<blockquote><p><strong>Guideline:</strong> Remember that preferring <strong>auto</strong> variables is motivated primarily by correctness, performance, maintainability, and robustness—and only lastly about typing convenience.</p></blockquote>
<p>Second, commitment: &#8220;But in some cases I do want to commit to a specific type, not automatically deduce it, so I can&#8217;t use <span style="color:#2e74b5;">auto</span>.&#8221; It&#8217;s true that sometimes you do want to commit to a specific type, but you can still use <span style="color:#2e74b5;">auto</span>. As demonstrated in GotW #92 and #93, not only can you still write declarations of the form <span style="color:#2e74b5;">auto x = type{ init };</span> (instead of <span style="color:#2e74b5;">type x{init};</span>) to commit to a specific type, but there are good reasons for doing so, such as that saying <span style="color:#2e74b5;">auto</span> means you can&#8217;t possibly forget to initialize the variable.</p>
<blockquote><p><strong>Guideline:</strong> Consider declaring local variables <strong>auto x = type{ expr };</strong> when you do want to explicitly commit to a type. It is self-documenting to show that the code is explicitly requesting a conversion, it guarantees the variable will be initialized, and it won&#8217;t allow an accidental implicit narrowing conversion. Only when you do want explicit narrowing, use <strong>( )</strong> instead of <strong>{ }</strong>.</p></blockquote>
<h3>(Un)readability?</h3>
<p>The third and most common argument concerns readability: &#8220;My code gets unreadable quickly when I don&#8217;t know what exact type my variable is without hunting around to see what that function or expression returns, so I can&#8217;t just use <span style="color:#2e74b5;">auto</span> all the time.&#8221; There is truth to this, including losing the ability to search for occurrences of specific types when using the non-typed syntax <em>auto x = expr;</em> in 4(a) below, so this appears at first to be a strong argument. And it&#8217;s true that any feature can be overused. However, I think this argument is actually weaker than it first seems for four reasons, two minor and two major.</p>
<p>The two minor counterarguments are:</p>
<ul>
<li>The &#8220;can&#8217;t use <span style="color:#2e74b5;">auto</span>&#8221; part isn&#8217;t actually true, because as we just saw above you can be explicit about your type and still use <span style="color:#2e74b5;">auto</span>, with good benefit.</li>
<li>The argument doesn&#8217;t apply when you&#8217;re using an IDE, because you can always tell the exact type, for example by hovering over the variable. Granted, this mitigation goes away when you leave the IDE, such as if you print the code.</li>
</ul>
<p>But we should focus on the two major counterarguments:</p>
<ul>
<li>It reflects a bias to code against implementations, not interfaces. Overcommitting to explicit types makes code less generic and more interdependent, and therefore more brittle and limited. It runs counter to the excellent reasons to &#8220;write code against interfaces, not implementations&#8221; we saw in Question 2.</li>
<li><strong>We (meaning <em>you</em>) already ignore actual types all the time…<br />
</strong></li>
</ul>
<p>&#8220;… Wait, what? I do not ignore types all the time,&#8221; someone might say. Actually, not only do you do it, but you&#8217;re so comfortable and cavalier about it that you may not even realize you&#8217;re doing it. Let&#8217;s go back to that code in Question 1:</p>
<pre><code>template&lt;class Container, class Value&gt;
void append_unique( Container&amp; c, const Value&amp; v ) {
    if( find(begin(c), end(c), v) == end(c) )
        c.emplace_back(v); 
    assert( !c.empty() );
}
</code></pre>
<p><em>Quick quiz:</em> How many specific types are mentioned in that function? Name as many as you can.</p>
<p>Take a moment to consider that before reading on…</p>
<p>… We can see pretty quickly that the answer is a nice round number: Zero. Zilch. (Pedantic mode: Yes, there&#8217;s <span style="color:#2e74b5;">void</span>, but I&#8217;m going to declare that <span style="color:#2e74b5;">void</span> doesn&#8217;t count because it&#8217;s to denote &#8220;no type,&#8221; it&#8217;s not a meaningful type.)</p>
<p>Not a single specific type appears anywhere in this code, and the lack of exact types makes it much more powerful and doesn&#8217;t significantly harm its readability. Like most people, you probably thought Question 1 felt &#8220;easy&#8221; when we did it in isolation. Granted, this is generic code, and not all your code will be templates—but the point is that the code isn&#8217;t unreadable even though it doesn&#8217;t mention specific types, and in fact auto gives you the ability to write generic code even when <em>not</em> writing a template.</p>
<p>So starting with the cases illustrated in this short example, let&#8217;s consider some places where we routinely ignore exact types. First, function template parameters:</p>
<ul>
<li>What exact type is <span style="color:#2e74b5;">Container</span>? We have no idea, and that&#8217;s great… anything we can call <span style="color:#2e74b5;">begin</span>, <span style="color:#2e74b5;">end</span>, <span style="color:#2e74b5;">emplace_back</span> and <span style="color:#2e74b5;">empty</span> on and otherwise use as needed by this code will do just fine. In fact, we&#8217;re glad we don&#8217;t know anything about the exact type, because it means we&#8217;re following the Open/Closed Principle and staying open for extension— this <span style="color:#2e74b5;">append_unique</span> will work fine with a type that won&#8217;t be written until years from now. Interestingly, the concepts feature currently being proposed for ISO C++ to express template parameter constraints doesn&#8217;t change how this works at all, it only makes it more convenient to express and check the requirements. Note how much more powerful this is compared to OO style frameworks: In OO frameworks where containers have to inherit from a base class or interface, that&#8217;s already inducing coupling and limiting the ability to just plug in and use arbitrary suitable types. It is important that we can know nothing at all about the type here besides its necessary interface, not even restricting it by as much as limiting it to types in a particular inheritance hierarchy. We should strongly resist compromising this wonderful and powerful &#8220;strictly typed but loosely coupled&#8221; genericity.</li>
<li>What exact type is <span style="color:#2e74b5;">Value</span>? Again, we don&#8217;t know, and we don&#8217;t want to know… anything we can pass to <span style="color:#2e74b5;">find</span> and <span style="color:#2e74b5;">emplace_back</span> is just dandy. At this point some of you may be thinking: &#8220;Oh yes we know what type it is, it&#8217;s the container&#8217;s value type!&#8221; No, it doesn&#8217;t have to be that, it just has to be convertible, and that&#8217;s important. For example, we want <span style="color:#2e74b5;">vector&lt;string&gt; vec; append_unique(vec, &#8220;xyzzy&#8221;);</span> to work, and <span style="color:#2e74b5;">&#8220;xyzzy&#8221;</span> is a <span style="color:#2e74b5;">const char[6]</span>, not a <span style="color:#2e74b5;">string</span>.</li>
</ul>
<p>Second, function return values:</p>
<ul>
<li>What type does <span style="color:#2e74b5;">find</span> return? Some iterator type, the same as <span style="color:#2e74b5;">begin(c)</span> coughed up, but we don&#8217;t know specifically what type it is just from reading this code, and it doesn&#8217;t matter. We can look up the signature if we&#8217;re feeling really curious, but nobody bothers doing that because anything that&#8217;s comparable to <span style="color:#2e74b5;">end(c)</span> will do.</li>
<li>What type does <span style="color:#2e74b5;">empty</span> return? We don&#8217;t even think twice about it. Something testable like a <span style="color:#2e74b5;">bool</span>… we don&#8217;t care much what exactly as long as we can &#8220;not&#8221; it.</li>
</ul>
<p>Third, many function parameters:</p>
<ul>
<li>What specific type does <span style="color:#2e74b5;">emplace_back</span> take? Don&#8217;t know; might be the same as <span style="color:#2e74b5;">v</span>, might not. Really don&#8217;t care. Can we pass <span style="color:#2e74b5;">v</span> to it? Yes? Groovy.</li>
</ul>
<p>And that&#8217;s just in this example. We routinely and desirably ignore types in many other places, such as:</p>
<ul>
<li>Fourth, any temporary object: We never get to name the object, much less name its type, and we may know what the type is but we don&#8217;t care about actually spelling out either name in our code.</li>
<li>Fifth, any use of a base class: We don&#8217;t know the dynamic concrete type we&#8217;re actually using, and that&#8217;s a benefit, not a bug.</li>
<li>Sixth, any call to a virtual function: Ditto; plus on top of that if the virtual function return type itself could also be covariant for another layer of &#8220;we don&#8217;t know the dynamic concrete type&#8221; since in the presence of covariance we don&#8217;t know what type we&#8217;re actually getting back.</li>
<li>Seventh, any use of <span style="color:#2e74b5;">function&lt;&gt;</span>, <span style="color:#2e74b5;">bind</span>, or other type erasure: Just think about how little we actually know, and how happy it makes us. For example, given a <span style="color:#2e74b5;">function&lt;int(string)&gt;</span>, not only don&#8217;t we know what specific function or object it&#8217;s bound to, we don&#8217;t even know that thing&#8217;s signature—it might not actually even take a <span style="color:#2e74b5;">string</span> or return an <span style="color:#2e74b5;">int</span>, because conversions are allowed in both directions, so it only has to take something a <span style="color:#2e74b5;">string</span> can be converted to, and return something that can be converted to an <span style="color:#2e74b5;">int</span>. All we know is that it&#8217;s something that we can invoke with a <span style="color:#2e74b5;">string</span> and that gives us back something we can use as an <span style="color:#2e74b5;">int</span>. Ignorance is bliss.</li>
<li>Eighth, Any use of a C++14 generic lambda function: A generic lambda just means the function call operator is a template, after all, and like any function template it gets stamped out individually for whatever actual argument types you pass each time you use it.</li>
</ul>
<p>There are probably more.</p>
<p>Although lack of commitment may be a bad thing in other areas of life, not committing to a specific type is often desirable by default in reusable code.</p>
<h2>4. When declaring a new local variable x, what advantages are there to declaring it using auto and one of the two following syntaxes:</h2>
<p>Let&#8217;s consider the base case first, which has by far the strongest arguments in its favor and is gaining quite a bit of traction in the C++ community.</p>
<h3>(a) auto x = init; when you don&#8217;t need to commit to a specific type?</h3>
<p>GotW #93 offered many concrete examples to support habitually declaring local variables using <span style="color:#2e74b5;">auto x = expr;</span> when you don&#8217;t need to explicitly commit to a type. The advantages include:</p>
<ul>
<li>It guarantees the variable will be initialized. Uninitialized variables are impossible because once you start by saying <span style="color:#2e74b5;">auto</span> the <span style="color:#2e74b5;">=</span> is required and cannot be forgotten.</li>
<li>It is efficient by default and guarantees that no implicit conversions (including narrowing conversions), temporary objects, or wrapper indirections will occur. In particular, prefer using <span style="color:#2e74b5;">auto</span> instead of <span style="color:#2e74b5;">function&lt;&gt;</span> to name lambdas unless you need the type erasure and indirection.</li>
<li>It guarantees that you will use the correct exact type now.</li>
<li>It guarantees that you will continue to use the correct exact type under maintenance as the code changes, and the variable&#8217;s type automatically tracks other functions&#8217; and expressions&#8217; types unless you explicitly said otherwise.</li>
<li>It is the simplest way to portably spell the implementation-specific type of arithmetic operations on built-in types, which vary by platform, and ensure that you cannot accidentally get lossy narrowing conversions when storing the result.</li>
<li>It is the only good option for hard-to-spell and impossible-to-spell types such as lambdas, binders, <span style="color:#2e74b5;">detail::</span> helpers, and template helpers (including expression templates when they should stay unevaluated for performance), short of resorting to repetitive <span style="color:#2e74b5;">decltype</span> expressions or more-expensive indirections like <span style="color:#2e74b5;">function&lt;&gt;</span>.</li>
<li>It is more symmetric and consistent with other parts of modern C++ (see Question 5).</li>
<li>And yes, it is just generally simpler and less typing.</li>
</ul>
<p>See GotW #93 for concrete examples of these cases, where using <span style="color:#2e74b5;">auto</span> helps eliminate correctness bugs, performance bugs, and silently nonportable code.</p>
<p>As noted in the questions, the expression <span style="color:#2e74b5;">init</span> might include calling a helper that performs partial type adjustment, such as <span style="color:#2e74b5;">as_signed</span>, while still not committing to a specific type. As shown in GotW #93, prefer to use <span style="color:#2e74b5;">auto x = as_signed(integer_expr);</span> or <span style="color:#2e74b5;">auto x = as_unsigned(integer_expr);</span> to store the result of an integer computation that should be signed or unsigned—these should be viewed as &#8220;casts that preserve width,&#8221; so we are not casting to a specific type but rather casting an attribute of the type while correctly preserving the other basic characteristics of the type, notably by not forcing it to commit to a particular size.</p>
<p>Using <span style="color:#2e74b5;">auto</span> together with <span style="color:#2e74b5;">as_signed</span> or <span style="color:#2e74b5;">as_unsigned</span> makes code more portable: the variable will both be large enough (thanks to <span style="color:#2e74b5;">auto</span>) and preserve the required signedness on all platforms. Note that signed/unsigned conversions within <span style="color:#2e74b5;">integer_expr</span> may still occur and so you may need additional finer-grained <span style="color:#2e74b5;">as_signed</span>/<span style="color:#2e74b5;">as_unsigned</span> casts within the expression for full portability.</p>
<h3>(b) auto x = type{ init }; when you do want to commit to a specific type by naming a type?</h3>
<p>This is the explicitly typed form, and it still has advantages but they are not as clearly strong as implicitly typed form. The jury is still out on whether to recommend this one wholesale, as we&#8217;re still trying it out, but it does offer some advantages and I suggest you try it out for a while and see if it works well for you.</p>
<p>So here&#8217;s the recommendation to consider trying out for yourself: Consider declaring local variables <span style="color:#2e74b5;">auto x = type{ expr };</span> when you do want to explicitly commit to a type. (Only when you do want to allow explicit narrowing, use <span style="color:#2e74b5;">( )</span> instead of <span style="color:#2e74b5;">{ }</span>.) The advantages of this typed <span style="color:#2e74b5;">auto</span> declaration style include:</p>
<ul>
<li>It guarantees the variable will be initialized; you can&#8217;t forget.</li>
<li>It is self-documenting to show that the code is explicitly requesting a conversion.</li>
<li>It won&#8217;t allow an accidental implicit narrowing conversion.</li>
<li>It is more symmetric and consistent, both with the basic <span style="color:#2e74b5;">auto x = init;</span> form and with other parts of C++…</li>
</ul>
<p>… which brings us to Question 5.</p>
<h2>5. Explain how using the style suggested in #4 is consistent with, or actively leverages, the following other C++ features:</h2>
<p>Let&#8217;s start off this question with some side-by-side examples that give us a taste of the symmetry we gain when we habitually declare variables using modern <span style="color:#2e74b5;">auto</span> style. Starting with two examples where we don&#8217;t need to commit to a type and then two where we do, we see that the right-hand style is not only more robust and maintainable for the reasons already given, but also arguably cleaner and more regular with the type consistently on the right when it is mentioned:</p>
<pre><code>// Classic C++ declaration order     // Modern C++ style

const char* s = "Hello";             <strong>auto</strong> s = "Hello";
widget w = get_widget();             <strong>auto</strong> w = get_widget();

employee e{ empid };                 <strong>auto</strong> e = <strong>employee</strong>{ empid };
widget w{ 12, 34 };                  <strong>auto</strong> w = <strong>widget</strong>{ 12, 34 };
</code></pre>
<p>Now consider the (dare we say elegant) symmetry with each of the following.</p>
<h3>(a) Heap allocation syntax.</h3>
<p>When allocating heap variables, did you notice that the type name is already on the right naturally anyway? And since it&#8217;s there, we don&#8217;t want to have to repeat it. (I&#8217;ll show the raw &#8220;<span style="color:#2e74b5;">new</span>&#8221; form for completeness, but prefer <span style="color:#2e74b5;">make_unique</span> and <span style="color:#2e74b5;">make_shared</span> in that order for allocation in modern code, resorting to raw <span style="color:#2e74b5;">new</span> only well-encapsulated inside the implementation of low-level data structures.)</p>
<pre><code>// Classic C++ declaration order     // Modern C++ style

widget* w = new widget{};            /* <strong>auto</strong> w = new <strong>widget</strong>{}; */
unique_ptr&lt;widget&gt; w                 <strong>auto</strong> w = make_unique&lt;<strong>widget</strong>&gt;();
  = make_unique&lt;widget&gt;();
</code></pre>
<h3>(b) Literal suffixes, including user-defined literal operators.</h3>
<p>Using <span style="color:#2e74b5;">auto</span> declaration style doesn&#8217;t merely work naturally with built-in literal suffixes like <span style="color:#2e74b5;">ul</span> for <span style="color:#2e74b5;">unsigned long</span>, plus user-defined literals including standard ones now in draft C++14, but it actively encourages using them:</p>
<pre><code>// Classic C++ declaration order     // Modern C++ style

int x = 42;                          <strong>auto</strong> x = 42;
float x = 42.;                       <strong>auto</strong> x = 42.<strong>f</strong>;
unsigned long x = 42;                <strong>auto</strong> x = 42<strong>ul</strong>;
std::string x = "42";                <strong>auto</strong> x = "42"<strong>s</strong>;   // C++14
chrono::nanoseconds x{ 42 };         <strong>auto</strong> x = 42<strong>ns</strong>;    // C++14
</code></pre>
<p>Based on the examples so far, which do you think is more regular? But wait, there&#8217;s more…</p>
<h3>(c) Named lambda syntax.<br />
(d) Function declarations.</h3>
<p>Lambdas have unutterable types, and <span style="color:#2e74b5;">auto</span> is the best way to capture them exactly and efficiently. But because their declarations are now so similar, let&#8217;s consider lambdas and (other) functions together, and in the last two lines of this example also use C++14 return type deduction:</p>
<pre><code>// Classic C++ declaration order     // Modern C++ style

int f( double );                     <strong>auto</strong> f <strong>(double) -&gt; int</strong>;
…                                    <strong>auto</strong> f <strong>(double)</strong> { /*...*/ };
…                                    <strong>auto</strong> f = [=]<strong>(double)</strong> { /*...*/ };
</code></pre>
<h3>(e) Template alias declarations.</h3>
<p>Modern C++ frees us from the tyranny of un-template-able <span style="color:#2e74b5;">typedef</span>:</p>
<pre><code>// Classic C++ workaround            // Modern C++ style

typedef set&lt;string&gt; dict;            <strong>using</strong> dict = <strong>set&lt;string&gt;</strong>;

template&lt;class T&gt; struct myvec {     template&lt;class T&gt;
  typedef vector&lt;T,myalloc&gt; type;    <strong>using</strong> myvec = <strong>vector&lt;T,myalloc&gt;</strong>;
};
</code></pre>
<h3>An observation</h3>
<p>Have you noticed that the C++ world is moving to a left-to-right declaration style everywhere, of the form</p>
<p style="text-align:center;"><strong>category</strong> name = <strong>type</strong> and/or initializer ;</p>
<p>where &#8220;category&#8221; can be <span style="color:#2e74b5;">auto</span> or <span style="color:#2e74b5;">using</span>?</p>
<p>Take a moment to re-skim the two columns of examples above. Even ignoring correctness and performance advantages, do you find the right-hand column to be most consistent, and most readable?</p>
<h2>6. Are there any cases where it is not possible to use the style in #4 to declare all local variables?</h2>
<p>There is one case I know of where this style cannot be followed, and it applies to the type-specific <span style="color:#2e74b5;">auto x = type{ init };</span> form. In that form, <span style="color:#2e74b5;">type</span> has to be moveable (even though the move operation will be routinely elided by compilers), so these won&#8217;t work:</p>
<pre><code>auto lock <strong>=</strong> lock_guard&lt;mutex&gt;{ m };  // error, not moveable
auto ai   <strong>=</strong> atomic&lt;int&gt;{};           // error, not moveable
</code></pre>
<p>(Aside: For at least some of these cases, an argument could be made that this is actually more of a defect in the type itself, in particular that perhaps <span style="color:#2e74b5;">atomic&lt;int&gt;</span> should be moveable.)</p>
<p>Having said that, there are three other cases I know of that you might encounter that may at first look like they don&#8217;t work with this <span style="color:#2e74b5;">auto</span> style, but actually do. Let&#8217;s consider those for completeness.</p>
<p>First, the basic form <span style="color:#2e74b5;">auto x = init;</span> will exactly capture an <span style="color:#2e74b5;">initializer_list</span> or a proxy type, such as an expression template. This is a feature, not a bug, because you have a convenient way to spell both &#8220;capture the list or proxy&#8221; and &#8220;resolve the computation&#8221; depending which you mean, and the default syntax goes to the more efficient one: If you want to efficiently capture the list or proxy, use the basic form which gives you performance by default, and if you mean to force the proxy to resolve the computation, specify the explicit type to ask for the conversion you want. For example:</p>
<pre><code>auto i1 = { 1 };                       // initializer_list&lt;int&gt;
auto i2 = 1;                           // int

auto a = matrix{...}, b = matrix{...}; // some type that does lazy eval
auto ab = a * b;                       // to capture the lazy-eval proxy
auto c = matrix{ a * b };              // to force computation

</code></pre>
<p>Second, here is a rare case that you may discover now that we have <span style="color:#2e74b5;">auto</span>: Due to the mechanics of the C++ grammar, you can&#8217;t legally write a multi-word type like <span style="color:#2e74b5;">long long</span> or <span style="color:#2e74b5;">class widget</span> in the place where <span style="color:#2e74b5;">type</span> goes in the <span style="color:#2e74b5;">auto x = type{ init };</span> form. However, note that this affects only those two cases:</p>
<ul>
<li>The multi-word built-in types like <span style="color:#2e74b5;">long long</span>, where you&#8217;re better off anyway writing a known-width type alias or using a literal.</li>
<li>Elaborated type specifiers like <span style="color:#2e74b5;">class widget</span>, where the &#8220;<span style="color:#2e74b5;">class</span>&#8221; part is already redundant. The &#8220;<span style="color:#2e74b5;">class widget</span>&#8221; syntax is allowed as a compatibility holdover from C which liked seeing <span style="color:#2e74b5;">struct widget</span> everywhere unless you <span style="color:#2e74b5;">typedef</span>&#8216;d the <span style="color:#2e74b5;">struct</span> part away.</li>
</ul>
<p>So just avoid the multi-word form and use the better alternative instead:</p>
<pre><code>auto x = long long{ 42 };            // error
auto x = int64_t{ 42 };              // ok, better 
auto x = 42LL;                       // ok, better 

auto y = class X{1,2,3};             // error
auto y = X{1,2,3};                   // ok
</code></pre>
<h2>Summary</h2>
<p>We already ignore explicit and exact types much of the time, including with temporary objects, virtual functions, templates, and more. This is a feature, not a bug, because it makes our code less tightly coupled, and more generic, flexible, reusable, and future-proof.</p>
<p>Declaring variables using <span style="color:#2e74b5;">auto</span>, whether or not we want to commit to a type, offers advantages for correctness, performance, maintainability, and robustness, as well as typing convenience. Furthermore, it is an example of how the C++ world is moving to a left-to-right declaration style everywhere, of the form</p>
<p style="text-align:center;"><strong>category</strong> name = <strong>type</strong> and/or initializer ;</p>
<p>where &#8220;category&#8221; can be <span style="color:#2e74b5;">auto</span> or <span style="color:#2e74b5;">using</span>, and we can get not only correctness and performance but also consistency benefits by using the style to consistently declare local variables (including using literals and user-defined literals), function declarations, named lambdas, aliases, template aliases, and more.</p>
<h2>Acknowledgments</h2>
<p>Thanks in particular to Scott Meyers and Andrei Alexandrescu for their time and insights in reviewing and discussing drafts of this material. Both helped generate candidate names for this idiom; it was Alexandrescu who suggested the name &#8220;AAA (almost always auto)&#8221; which I merged with the best names I&#8217;d thought of to that point (&#8220;auto style&#8221; or &#8220;auto (+type) style&#8221;) to get &#8220;AAA Style (almost always auto).&#8221; Thanks also to the following for their feedback to improve this article: Adrian, avjewe, mttpd, ned, zadecn, noniussenior, Marcel Wid, J Guy Davidson, Mark Garcia, Jonathan Wakely, &#8220;x y.&#8221;</p>
									</div>

				<p class="postmetadata">
					Posted in <a href="https://herbsutter.com/category/c/gotw/" rel="category tag">GotW</a> | 											67 Comments									</p>
				
<!-- You can start editing here. -->

<h3 id="comments">67 Responses</h3>

	<ol class="commentlist">
			<li class="pingback even thread-even depth-1 highlander-comment" id="comment-36460">
		<div id="div-comment-36460">
		<div class="cmtinfo"><em> on <a href="#comment-36460" title="">2015-02-24 at 6:49 pm</a></em>  <cite><a href='http://www.52sourcecode.com/post-125182.html' rel='external nofollow' class='url'>Auto and copy elision | 我爱源码网</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_36460"></div><p>[&#8230;] What exactly are the rules for copy elision when one is using auto and commits to a specific type ? (see: GotW &#8211; Almost always auto). [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-35596">
		<div id="div-comment-35596">
		<div class="cmtinfo"><em> on <a href="#comment-35596" title="">2015-01-17 at 11:03 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/d04928669a8bbc0ea67c70f4feee7097?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>thila</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_35596"></div><p>@herb: Perhaps this may be irrelevant here (Sorry!), I couldn&#8217;t find any other relevant place to comment on this. When will the GotWs 8 &#8211; 88 be available? I read this article series with in the past few days and learned a lot about C++ !! Hope the other GotWs will be available soon. Thanks for your great work.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-35151">
		<div id="div-comment-35151">
		<div class="cmtinfo"><em> on <a href="#comment-35151" title="">2015-01-10 at 3:44 am</a></em>  <cite><a href='http://iust.pp.ua/2015/01/10/answer-how-to-implement-classic-sorting-algorithms-in-modern-c-fix-development-computers/' rel='external nofollow' class='url'>Answer: How to implement classic sorting algorithms in modern C++? #fix #development #computers | IT Info</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_35151"></div><p>[&#8230;] Sutter&#8217;s &#8220;Almost Always Auto&#8221; and Scott Meyers&#8217;s &#8220;Prefer auto to specific type declarations&#8221; recommendation, [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-34557">
		<div id="div-comment-34557">
		<div class="cmtinfo"><em> on <a href="#comment-34557" title="">2014-12-30 at 7:12 pm</a></em>  <cite><a href='http://goodanswer.biz/2014/12/31/fixed-how-to-implement-classic-sorting-algorithms-in-modern-c-development-dev-programming/' rel='external nofollow' class='url'>Fixed: How to implement classic sorting algorithms in modern C++? #development #dev #programming | Good Answer</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_34557"></div><p>[&#8230;] Sutter&#8217;s &#8220;Almost Always Auto&#8221; and Scott Meyers&#8217;s &#8220;Prefer auto to specific type declarations&#8221; recommendation, [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor even thread-even depth-1 highlander-comment" id="comment-34543">
		<div id="div-comment-34543">
		<div class="cmtinfo"><em> on <a href="#comment-34543" title="">2014-12-30 at 9:29 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_34543"></div><p>@x y: I think I had in mind that the auto version deduced an array, which it doesn&#8217;t. If I had something else in mind, I&#8217;ve forgotten it now, so I&#8217;ve removed that phrase and added your moniker to the Acknowledgments. Thanks for the feedback!</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-34469">
		<div id="div-comment-34469">
		<div class="cmtinfo"><em> on <a href="#comment-34469" title="">2014-12-29 at 1:59 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/f07915dbc604d80a29ce2143fd69225e?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>x y</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_34469"></div><p>What do you think is the &#8220;subtle difference in the type of s, where the auto style is more correct&#8221;? See <a href="https://stackoverflow.com/q/27550539" rel="nofollow">https://stackoverflow.com/q/27550539</a></p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-33404">
		<div id="div-comment-33404">
		<div class="cmtinfo"><em> on <a href="#comment-33404" title="">2014-12-08 at 2:00 am</a></em>  <cite><a href='http://sevennet.org/2014/12/08/how-to-how-to-implement-classic-sorting-algorithms-in-modern-c/' rel='external nofollow' class='url'>How to: How to implement classic sorting algorithms in modern C++? | SevenNet</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_33404"></div><p>[&#8230;] Sutter&#8217;s &#8220;Almost Always Auto&#8221; and Scott Meyers&#8217;s &#8220;Prefer auto to specific type declarations&#8221; recommendation, [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-31601">
		<div id="div-comment-31601">
		<div class="cmtinfo"><em> on <a href="#comment-31601" title="">2014-11-08 at 11:01 pm</a></em> <img alt='' src='https://i1.wp.com/graph.facebook.com/100001581632206/picture?q=type%3Dlarge%26_md5%3Db9d77d7075df427684047a5068b83f65&#038;resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='https://www.facebook.com/1czajnik' rel='external nofollow' class='url'>Krzysztof Czaiński</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_31601"></div><p>I am referring to this:</p>
<p>auto a = matrix{&#8230;}, b = matrix{&#8230;}; // some type that does lazy eval<br />
auto ab = a * b;                       // to capture the lazy-eval proxy<br />
auto c = matrix{ a * b };              // to force computation</p>
<p>I am surprised, that nobody pointed out, that the third line is a *hidden* static_cast. Consider:</p>
<p>auto a = matrix{&#8230;};<br />
auto x = 3;<br />
auto da = a.size();<br />
auto c = matrix{ x * da }; // oops, ment { x * a }</p>
<p>In this example, the code will compile, assuming matrix has an explicit constructor matrix(size_t). In contrast, the following uses only implicit casting, so the error will be caught by the compiler.</p>
<p>matrix c = x * da;</p>
<p>I think it is good practice to use the weakest cast that is suitable. Using auto in this example not only conflicts with this, but also hides the static_cast.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-christianhacklaustria even thread-even depth-1 highlander-comment" id="comment-29634">
		<div id="div-comment-29634">
		<div class="cmtinfo"><em> on <a href="#comment-29634" title="">2014-10-11 at 1:09 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/be2ad8c4d8ff3e745d83767c6ab1bd79?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Christian Hackl</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_29634"></div><p>I have tried to use AAA for a while and cannot say I feel entirely comfortable with it. I am leaning towards using </p>
<pre class="brush: plain; title: ; notranslate" title="">auto</pre>
<p> only in certain situations, as it otherwise does reduce my code&#8217;s readability. At least in my eyes. Then again, I think it is unfair to judge this feature as long as it has not been used widely, in huge projects, over the course of many years. I think it will show its true virtues (or the lack thereof) when it will be subject to code maintenance.</p>
<p>One fear I have is that AAA style may inadvertently cause a revival of Hungarian Notation. It would not surprise me if many people started to actually write stuff like </p>
<pre class="brush: plain; title: ; notranslate" title="">auto intCount = 0;</pre>
<p> or </p>
<pre class="brush: plain; title: ; notranslate" title="">auto strName = GetName();</pre>
<p> (or </p>
<pre class="brush: plain; title: ; notranslate" title="">auto dwRet = SomeWinApiFunction();</pre>
<p> :)), completely defeating the purpose of </p>
<pre class="brush: plain; title: ; notranslate" title="">auto</pre>
<p> in the first place.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-28433">
		<div id="div-comment-28433">
		<div class="cmtinfo"><em> on <a href="#comment-28433" title="">2014-09-26 at 5:23 am</a></em>  <cite><a href='http://feherenfekete.wordpress.com/2014/09/26/using-auto-for-declaring-variables-of-move-only-types/' rel='external nofollow' class='url'>Using auto for declaring variables of move-only types. | Feheren Fekete</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_28433"></div><p>[&#8230;] in this case) has a deleted copy constructor. Luckily, all is not lost on our quest for Almost Always Auto. The solution is to use Universal [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-28295">
		<div id="div-comment-28295">
		<div class="cmtinfo"><em> on <a href="#comment-28295" title="">2014-09-25 at 6:15 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/be5117e2fa63976c3c189465dccbc88e?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Tyson Nottingham</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_28295"></div><p>I&#8217;m wondering what downsides there are to using const auto&amp; wherever const auto would be appropriate (except in cases where you specifically want to copy the right hand side). Like auto in general, this protects you in the event that the right hand side changes.</p>
<p>For example, you might write be tempted to write&#8230;</p>
<pre class="brush: plain; title: ; notranslate" title="">const auto x = widget.foo();</pre>
<p>&#8230;if you know that widget.foo() returns a value, because using const auto&amp; here is superfluous. But if widget.foo() is changed to return a reference, then you&#8217;d be making a copy/move where you probably didn&#8217;t need one. Since you wanted a const object, it is unlikely that you wanted a copy anyway.</p>
<p>Another example &#8212; you might decide to change&#8230;</p>
<pre class="brush: plain; title: ; notranslate" title="">const auto x = get_raw_ptr();</pre>
<p>&#8230;to&#8230;</p>
<pre class="brush: plain; title: ; notranslate" title="">const auto x = *get_raw_ptr();</pre>
<p>&#8230;without changing to const auto&amp;. Now you&#8217;ve inadvertently copied/moved the right hand side. This type of change might not be likely, and will typically require modification to surrounding code, giving you an opportunity to re-evaluate your const auto declaration. Still, it could slip by.</p>
<p>Instead, if you had changed&#8230;</p>
<pre class="brush: plain; title: ; notranslate" title="">const auto&amp; x = get_raw_ptr();</pre>
<p>&#8230;to&#8230;</p>
<pre class="brush: plain; title: ; notranslate" title="">const auto&amp; x = *get_raw_ptr();</pre>
<p>&#8230;then no inadvertent copy would be introduced.</p>
<p>(The above example doesn&#8217;t make sense if the function is get_unique_ptr(), because <code>const auto x = *get_unique_ptr()</code> is probably wrong (unnecessary copy/move), and <code>const auto&amp; x = *get_unique_ptr();</code> is always wrong (referring to an object that is about to be destroyed).)</p>
<p>Are these good enough reasons to prefer const auto&amp; even where const auto makes sense? Are there cases where using const auto&amp; in favor of const auto would backfire?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-24845">
		<div id="div-comment-24845">
		<div class="cmtinfo"><em> on <a href="#comment-24845" title="">2014-08-19 at 7:42 pm</a></em>  <cite><a href='http://thenewcpp.wordpress.com/2014/08/20/auto-considered-awesome/' rel='external nofollow' class='url'>auto considered awesome | The New C++</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_24845"></div><p>[&#8230;] think you shouldn&#8217;t use it. In fact I think you should almost always use it, as suggested in <a href="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/" rel="nofollow">https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/</a> However, like everything in C++, you should know what you are doing, because if you don&#8217;t, [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-24621">
		<div id="div-comment-24621">
		<div class="cmtinfo"><em> on <a href="#comment-24621" title="">2014-08-15 at 10:38 am</a></em>  <cite><a href='http://www.zescience.com/confusion-with-auto-assignment-with-list-initialization-syntax-83543' rel='external nofollow' class='url'>Confusion with auto assignment with list initialization syntax</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_24621"></div><p>[&#8230;] just now able to use C++11 for the first time at my job and I&#8217;m learning as I go. I have read GotW #94 and I&#8217;m trying to adopt his recommendation for using auto when declaring local variables [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-24084">
		<div id="div-comment-24084">
		<div class="cmtinfo"><em> on <a href="#comment-24084" title="">2014-08-03 at 11:22 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/e97f77058594da9251502e482730974c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Peter Maxwell</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_24084"></div><p>@Richard:</p>
<p>Firstly, I&#8217;m not concerned whether the library is efficiently returning types; I&#8217;m concerned whether any given variable that is being passed round through assignment, parameters, etc is intrinsic type, object-by-value, reference, smart pointer, or raw pointer. Without understanding which of these you&#8217;re dealing with, your understanding of what&#8217;s going on is necessarily limited.</p>
<p>Secondly, you are not understanding me correctly. I am not and have never been talking about</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto x = y();
</pre>
<p>and conversion operators.</p>
<p>I am talking about understanding the more fundamental</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto x = y;
</pre>
<p>and knowing whether your assignment operator is plausibly overloaded and thus may throw.</p>
<p>Finally, when you are working with an existing codebase, you cannot guarantee that it is exception-safe, or even that RAII was used. Both the age of the codebase and the understanding of the programmer factor into these. Incidentally, RAII alone does not guarantee strong exception-safety (you also need to consider patterns such as copy-and-swap).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-24058">
		<div id="div-comment-24058">
		<div class="cmtinfo"><em> on <a href="#comment-24058" title="">2014-08-03 at 1:53 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/ef95896d2a7b776c0c22f0039bd0bf4d?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Brian M</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_24058"></div><p>@peter<br />
Unfortunately every new feature is something else open to abuse/misuse, not totally sure a lot of new features are either warranted or sensible, auto being one of them, just more to go wrong and less compatible c++ code! Perhaps the working committees need to perhaps consider reducing the breadth of C++ rather than making it even more complex?</p>
<p>All that was really required was a good auto pointer, parallel/task support and some extras in STL!</p>
<p>Have to admit did like the idea of auto, but now realising it&#8217;s folly in most circumstances, it&#8217;s like maintaining with a blindfold on or at least running around to see what&#8217;s going on! Your input has made me think!</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-24057">
		<div id="div-comment-24057">
		<div class="cmtinfo"><em> on <a href="#comment-24057" title="">2014-08-03 at 1:44 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='https://www.facebook.com/hodges.r' rel='external nofollow' class='url'>Richard Hodges</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_24057"></div><p>@Peter I hear you. I have been in the business for a long time too and I have seen my fair share of horrid upstream interfaces.<br />
It seems to me that you are concerned about two things:<br />
1) is my library efficiently returning types? Can I increase the efficiency in client code?<br />
2) will it throw exceptions?</p>
<p>I would argue that (1) is intractable. Reading the documentation (or at least the interface declarations) of the library will tell you what types are being returned, whether they are intrinsic types, references or copies.<br />
At this point whether you write auto or name a type in the client code is irrelevant unless you are planning to perform a conversion on the returned type. If I understand you correctly, you are considering a case like this:</p>
<pre class="brush: plain; title: ; notranslate" title="">
  // declaration:
  thing get_a_thing();

  // user code
  part_of_a_thing mything = get_a_thing();  // conversion constructor called
</pre>
<p>this can be expressed succinctly using auto</p>
<pre class="brush: plain; title: ; notranslate" title="">
  // user code
  auto mything = part_of_a_thing { get_a_thing() };
</pre>
<p>In fact, I would argue that the auto version is explicitly stating that a conversion constructor is being called and is therefore more easily understood and debugged.</p>
<p>regarding point 2, I am not sure I understand there to be a problem. The interface of get_a_thing() will indicate wether or not exceptions can be thrown. In any case, all your user code will be written in terms of RAII so it will at least be exception-safe. Any objects you use from the _thing_ library that do not use RAII can be wrapped in a unique_ptr (or shared_ptr) with a custom deleter, so they will be exception safe too.</p>
<p>example:</p>
<pre class="brush: plain; title: ; notranslate" title="">
  // declarations
  thing* make_thing();
  void dispose_of_thing(thing*);

  // my user code
  {
    auto mything = std::shared_ptr&lt;thing&gt; { make_a_thing(), dispose_of_thing };
    // do things that may throw exceptions...
    ...
    // dispose_of_thing() called here upon destruction of the shared_ptr
  }

  // or maybe this is better
  // define my own safe factory function to wrap the unsafe library:
  std::shared_ptr&lt;thing&gt; my_safe_make_a_thing()  // lack of noexcept indicates that this may throw
  { 
    return { make_a_thing(), dispose_of_thing 
    }; 
  }

  // my user code:
  auto mything = my_safe_make_a_thing();
</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-24052">
		<div id="div-comment-24052">
		<div class="cmtinfo"><em> on <a href="#comment-24052" title="">2014-08-03 at 12:24 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/e97f77058594da9251502e482730974c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Peter Maxwell</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_24052"></div><p>@Richard:</p>
<p>We appear to be talking fundamentally at cross purposes.</p>
<p>I am not discussing the choices made by the person who wrote the code. I am discussing a much more common scenario: the developer who has to read and understand the code. </p>
<p>By the time you are maintaining the code, it is in some senses too late, as the dumb decisions have already been made. Certainly the compiler will try to ensure that</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto x = y();
</pre>
<p>is efficient. (Though, please note I was *not* discussing the efficiency of that line at any point, only the line subsequent.) The compiler will not however be able to work out that the entire design is unreasonable, that the whole object is being passed back when subsequent use of it relies only on reading one flag. It will not warn you on occasions when an aliased shared pointer is being used as a parameter unsafely. There are many, many situations where the code you are reading is suboptimal, and you need to work out whether it is okay to be a little suboptimal here, or whether it is suboptimal in a way likely to prevent your new additions scaling well, or whether it is actually also unsafe. And, importantly, auto will do very little to help that code be more optimal. Certainly, it may stop some dumb conversions being made, but these represent only a very tiny fraction of bugs &#8211; and arguably, when the programmer stops thinking about types very hard, it frees them up to more easily make mistakes like writing a for loop that doesn&#8217;t terminate because of overflow errors.</p>
<p>The example I actually gave you:</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto previous = result;
</pre>
<p>could well throw. If it&#8217;s an intrinsic type it won&#8217;t. If it&#8217;s a type you know well, you can probably hazard a guess as to whether it&#8217;s likely to. If it is a type you haven&#8217;t encountered before in this codebase, you either hope it doesn&#8217;t and hope you don&#8217;t get bitten later, or invest the time in finding out. But whether it throws or not may well change whether the function is strongly exception safe, or even exception safe at all. It&#8217;s important.</p>
<p>C++ is a language of a myriad subtleties. Auto disguises some of them. In any context save toy problems, this is an issue. It is, I contend, hugely unwise to recommend its use by default. There are obvious situations where it can aid clarity. There are also situations where it will obscure useful details. Within the next ten years, I suspect we&#8217;ll all have had our fill of the latter.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-23923">
		<div id="div-comment-23923">
		<div class="cmtinfo"><em> on <a href="#comment-23923" title="">2014-08-01 at 10:28 am</a></em> <img alt='' src='https://i1.wp.com/graph.facebook.com/640456922/picture?q=type%3Dlarge&#038;resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='https://www.facebook.com/hodges.r' rel='external nofollow' class='url'>Richard Hodges</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23923"></div><p>Let&#8217;s assume we agree on the following principles:<br />
1. early optimisation is evil (don&#8217;t make programs untidy)<br />
2. early pessimisation is evil (don&#8217;t prevent the compiler from doing RVO etc)<br />
3. write for clarity, good optimisation begins with logically efficient algorithms</p>
<p>I would argue that a software team which adheres to these principles will rarely be able to do better than the compiler for code such as</p>
<pre class="brush: plain; title: ; notranslate" title="">
    auto x = y();
</pre>
<p>Since the compiler will have optimised the construction of the return value by constructing it in-place or calling the move constructor (see 2).</p>
<p>y() is free to return whichever type is most logically appropriate, and there will be no performance cost.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-23918">
		<div id="div-comment-23918">
		<div class="cmtinfo"><em> on <a href="#comment-23918" title="">2014-08-01 at 8:20 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/e97f77058594da9251502e482730974c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Peter Maxwell</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23918"></div><p>@red1939:</p>
<p>I would entirely agree that it is possible that “Speed previous = result;” is actually surprisingly efficient, particularly given the brutalisations made possible with typedef. However, when you see float, you have a wealth of information to reason with. It is fast to copy. You are likely to be able to assume assignment is atomic, depending on your architecture. Numerical comparisons done with it require a little care. There&#8217;s much more.</p>
<p>Beyond that, we can reason about standard types. Shared pointers, std::strings, container classes &#8211; we feel able to make certain expectations when we see them. Are you not nervous to see someone has implemented their own linked list class precisely because it is unknown?</p>
<p>The C++ language already makes it hard to reason about a wealth of things, and you will often be in unknown territory. Often this doesn&#8217;t matter. Sometimes it does. Features which can easily be used to hide the fact you are actually in known territory are potentially dangerous features, and features that should be used with caution.</p>
<p>Thinking you understand an algorithm without understanding the data representation is, I submit, potentially folly. Algorithms that are excellent when you&#8217;re working with a vector are idiocy when working with a linked list. And, if you&#8217;re at the point you don&#8217;t care about performance, there&#8217;s no point in spending your time on C++; go off and work in Python and make your life easier.</p>
<p>I happen to agree that absurdly long types with nested namespaces are clumsy, hard on both writer and reader, and there are places where auto can only improve readability. (I suspect that the problem here originates with the way such namespaces grow up, but we are often in a position where we have to live with it now.) My concern is that there are also a great many places where it will be practically hazardous, where types being returned are not as the reader expects, and it will prove to be a particularly devastating weapon in the hands of the novice and the lazy coder.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-red1939 odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-23913">
		<div id="div-comment-23913">
		<div class="cmtinfo"><em> on <a href="#comment-23913" title="">2014-08-01 at 6:05 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/01776284b7d24ba518a3811876e7fcd5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://code4thought.wordpress.com' rel='external nofollow' class='url'>red1939</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23913"></div><p>@Peter Maxwell</p>
<p>In my opinion if anyone is writing such &#8220;careless&#8221; assignment he has to understand whether or not it&#8217;s costly, or not, or maybe even required, no matter the cost. Let&#8217;s assume you see something like &#8220;Speed previous = result;&#8221; and &#8220;float previous = result;&#8221;. Of course, knowing that the cost of copying a whole struct can be expensive, and a single float can be easily put into helper register, you assume that the first example is costly. That can be misleading as if Speed is defined as &#8220;class Speed : public Wrapper {&#8230;}&#8221; (for strong typing) and compiler will have slightly more work to optimize it.</p>
<p>You said that &#8220;code itself is opaque without the benefit of additional information&#8221;. For me the code becomes _more_ readable as you focus only on the structure and algorithms of the code: here you iterate over all elements calling a method &#8220;foo()&#8221; on them and lastly you make a copy of a result obtained from &#8220;create()&#8221; method of some factory.</p>
<p>I don&#8217;t know what is your workflow but most of the time I have to quickly consume some block of code and decide to which class should I go and seek further. When a decent part of code is either &#8220;using x = &#8220;, &#8220;typedef &#8230;&#8221; or &#8220;my::very::nested::namespace::SomeFancy ret = x.create();&#8221; it&#8217;s truly harder to read, as you have to decode it, as &#8211; for me at least &#8211; that&#8217;s like forcing you always to do the next step (knowing the exact types).</p>
<p>That said I am strongly against putting auto in method/function declarations. Also when in some local scope you would like to cast from right hand or clearly show that you are changing &#8220;the mindset&#8221;/domain then feel free to use the explicit type. When the type of the left side shouldn&#8217;t be shocking to most of the people reading your code, then why make your life harder?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-23909">
		<div id="div-comment-23909">
		<div class="cmtinfo"><em> on <a href="#comment-23909" title="">2014-08-01 at 4:15 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/e97f77058594da9251502e482730974c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Peter Maxwell</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23909"></div><p>@Richard:</p>
<p>You&#8217;ve sort of touched on this, but when I asked what the performance implications were of</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto previous = result;
</pre>
<p>my point was that you don&#8217;t know whether you&#8217;re dealing with an intrinsic type or an object, whether you&#8217;re working with a reference or a pointer or doing a full fat copy (or indeed a type with a custom assignment operator which may do something unexpected). The code itself is opaque without the benefit of additional information. Auto is here actively making it harder to reason about the code.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-23830">
		<div id="div-comment-23830">
		<div class="cmtinfo"><em> on <a href="#comment-23830" title="">2014-07-31 at 9:23 am</a></em> <img alt='' src='https://i1.wp.com/graph.facebook.com/640456922/picture?q=type%3Dlarge&#038;resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='https://www.facebook.com/hodges.r' rel='external nofollow' class='url'>Richard Hodges</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23830"></div><p>@Peter The performance cost of</p>
<pre class="brush: plain; title: ; notranslate" title="">
    auto x = make_a_thing();
</pre>
<p>would normally be low because of return value optimisation. In any case the cost is the same as</p>
<pre class="brush: plain; title: ; notranslate" title="">
    thing x = make_a_thing();
</pre>
<p>Since we strive to produce code that is user-friendly, the author of &#8216;thing&#8217; and &#8216;make_a_thing&#8217; will seek to ensure that the object constructor and the function are efficient and that the function is a candidate for RVO.</p>
<p>Unnecessary (and possibly dangerous) copies will be generated with this code:</p>
<pre class="brush: plain; title: ; notranslate" title="">
    auto x = get_a_reference_to_a_thing();
</pre>
<p>which is of course cured with</p>
<pre class="brush: plain; title: ; notranslate" title="">
    auto&amp; x = get_a_reference_to_a_thing();
</pre>
<p>deleting the copy constructor and copy operator of &#8216;thing&#8217; catches that at compile time.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-23801">
		<div id="div-comment-23801">
		<div class="cmtinfo"><em> on <a href="#comment-23801" title="">2014-07-30 at 11:26 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/e97f77058594da9251502e482730974c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Peter Maxwell</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23801"></div><p>I fear I messed up my input and lost the code I was trying to include in the text paragraphs &#8211; the text should read:<br />
What are the performance implications of auto previous = result?<br />
and<br />
Certainly, all these questions can be cleared up, if you have an IDE instead of a text editor, by hovering over auto result.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-23768">
		<div id="div-comment-23768">
		<div class="cmtinfo"><em> on <a href="#comment-23768" title="">2014-07-30 at 1:01 pm</a></em> <img alt='' src='https://i1.wp.com/graph.facebook.com/640456922/picture?q=type%3Dlarge%26_md5%3D7cbca7727f97432cedca3fa218c9b3b1&#038;resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='https://www.facebook.com/hodges.r' rel='external nofollow' class='url'>Richard Hodges</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23768"></div><p>I&#8217;ve been using c++11 in production code for 18 months now. I find myself using auto when assigning return values from functions almost always &#8211; it seems to make it easier to code for intent rather than mechanics.</p>
<p>I do still find myself avoiding auto when declaring object variables, since many of my objects are deliberately non-copyable (often because they contain a mutex).</p>
<p>so I generally do things like this:</p>
<pre class="brush: plain; title: ; notranslate" title="">
    complex_thing x { ... };    // because I don't have to care whether there is a copy constructor
    
    auto thing_ptr = make_shared&lt;thing&gt;(...);

    auto result = do_or_make_something(...);
</pre>
<p>but&#8230;</p>
<pre class="brush: plain; title: ; notranslate" title="">
    weak_ptr&lt;thing&gt; weak_thing { thing_ptr };
</pre>
<p>&#8230;because there is no such thing as&#8230;</p>
<pre class="brush: plain; title: ; notranslate" title="">
    auto weak_thing = make_weak_ptr(thing_ptr);
</pre>
<p>&#8230; which is a shame.</p>
<p>in for loops:</p>
<pre class="brush: plain; title: ; notranslate" title="">
    for(const auto&amp; entry : some_container) { ... }
</pre>
<p>but</p>
<pre class="brush: plain; title: ; notranslate" title="">
    auto container_size = some_container.size();
    for(size_t i = 0 ; i &lt; container_size ; ++i) {
        // although I'm not completely happy with the mix here
    }
</pre>
<p>perhaps this might be reasonable in principle:</p>
<pre class="brush: plain; title: ; notranslate" title="">
    for(decltype(container_size) i = 0 ; ... ; ... )
</pre>
<p>but it looks horrid</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-23765">
		<div id="div-comment-23765">
		<div class="cmtinfo"><em> on <a href="#comment-23765" title="">2014-07-30 at 12:37 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/ef95896d2a7b776c0c22f0039bd0bf4d?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Brian M</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23765"></div><p>@peter have to admit did like the idea of auto, one of my pet hates is the horrible typing you have to do sometimes. Maybe the real answer is an IDE function to pickup on what auto really is referring to and substitute the full text definition once the right side is known. Better still the code would be backwards with earlier compilers!</p>
<p>Or perhaps auto could be reserved for when it&#8217;s really useful, but that requires self restraint by the programer, not a known characteristic of the species!</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-23751">
		<div id="div-comment-23751">
		<div class="cmtinfo"><em> on <a href="#comment-23751" title="">2014-07-30 at 6:56 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/e97f77058594da9251502e482730974c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Peter Maxwell</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_23751"></div><p>I feel wide use of auto is a mistake, and likely to lead to a maintainability nightmare in the future.</p>
<p>Firstly, before I produce any examples of my own, I note the previous article&#8217;s error in its original state:</p>
<pre class="brush: plain; title: ; notranslate" title="">
for(auto i = 0; i &lt; v.size(); i += 2) 
</pre>
<p>With an explicit int, the error becomes more immediately visible. With auto, having to think about the type is elided, dangerously. When a programmer of your calibre makes mistakes in the most trivial of sample code &#8211; an indexed for loop &#8211; while trying to show that it leads to safer practices, it is hard to resist the conclusion that the opposite may be the case in some circumstances.</p>
<p>Secondly, you&#8217;re far from tackling the real problems with readability. Maintenance programmers look at huge volumes of code. Understanding how safe it is, or isn&#8217;t, needs to be as instant as possible.</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto result = my_opaquely_named_function();
auto previous = result;
process(result);
</pre>
<p>What are the performance implications of ? Will it throw?<br />
What conclusions can we draw about the lifetime of result?<br />
If one of those lines does throw an exception, will we have a memory leak?</p>
<p>Certainly, all these questions can be cleared up, if you have an IDE instead of a text editor, by hovering over . But when you have a page full of autos, having to repeatedly do this to understand what is going on is a pain, a retrogressive step.</p>
<p>C++ is a big language, and people use it in very different ways. But if there&#8217;s a common thread to most development, it is that it takes place in contexts where people will have to read the code again for a long time to come. Const is valuable because the human reading the code can see the const and can rely on the const variable following a certain contract. Auto is the opposite, hiding details of variable contracts in small print. </p>
<p>And finally, it&#8217;s fine to say &#8220;it reflects a bias to code against implementations, not interfaces&#8221; &#8211; but implementations matter. Your interface to void * and a shared_ptr are identical in the example I&#8217;ve just given &#8211; you can initialize both, copy both, pass both as a parameter &#8211; but understanding enough of the implementation details to know what kind of contract they provide you is critical to writing code that is safe and performs well.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor even thread-even depth-1 highlander-comment" id="comment-22653">
		<div id="div-comment-22653">
		<div class="cmtinfo"><em> on <a href="#comment-22653" title="">2014-07-12 at 7:59 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_22653"></div><p>@sftrabbit: I&#8217;ll only push back on the word &#8220;incorrect&#8221; which is not compatible with &#8220;I’ll admit that this is entirely a matter of style&#8221;&#8230; Just sayin&#8217;. :)</p>
<p>I didn&#8217;t say it&#8217;s pitfall-free by default; any feature in any reasonable language can be abused. But it&#8217;s objectively true that declaring variables using auto prevents classes of errors (e.g., you can&#8217;t write an uninitialized variable), for example. Finally, opinions vary of course &#8212; as I&#8217;ve pointed out many times, whether/when to use &#8220;auto&#8221; or &#8220;var&#8221; or &#8220;let&#8221; is a perennial question also in other languages that offer such type deduction for local variables with debates going on for years with no sign of abating, so I don&#8217;t expect this discussion to end anytime soon.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-sftrabbit odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-22647">
		<div id="div-comment-22647">
		<div class="cmtinfo"><em> on <a href="#comment-22647" title="">2014-07-12 at 7:21 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://josephmansfield.uk/' rel='external nofollow' class='url'>sftrabbit</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_22647"></div><p>It&#8217;s a choice between using `auto` now and later constraining your declarations or using concrete types now and later relaxing your constraints. It is therefore a matter of weighing up the pros and cons of being overly relaxed against being overly strict, as long as we all agree to use concepts appropriately later.</p>
<p>I find that a number of your arguments for AAA are either incorrect (particularly about it being readable) or involve shoehorning `auto` into something that it&#8217;s not (such as treating it like a var keyword or using it to enforce initialisation). Saying it&#8217;s correct-by-default and pitfall-free-by-default is a stretch &#8211; only yesterday did a questioner on SO fall into such a pit (<a href="http://stackoverflow.com/q/24702953/150634" rel="nofollow">http://stackoverflow.com/q/24702953/150634</a>). On the point of readability, AAA requires that type information is moved into the name of a variable to ensure that the meaning of the variable is still clear, which I find to be an ugly practice &#8211; the compiler is unable to enforce this, so we have to trust the programmer&#8217;s naming abilities. Being overly specific does require more effort on behalf the programmer, but it&#8217;s certainly safer and easier to read.</p>
<p>I&#8217;ll admit that this is entirely a matter of style, but I feel like AAA has far too many cons to be suggesting it as the default approach for all C++ programmers (especially beginners). After all, the whole point of introducing concepts is to remove many of these problems from templates. Why would we introduce them to all of our variables?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor even thread-even depth-1 highlander-comment" id="comment-22645">
		<div id="div-comment-22645">
		<div class="cmtinfo"><em> on <a href="#comment-22645" title="">2014-07-12 at 6:43 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_22645"></div><p>Yes, &#8216;auto&#8217; is exactly equivalent to &#8216;typename T&#8217; by definition (modulo the one quirk that currently auto is allowed to deduce initializer_list).</p>
<p>As I wrote on the Reddit thread: Second, a huge amount of the discussion in this thread is of the form &#8220;but if we had concepts we would write &#8220;Conceptname x = &#8230;;&#8221;. That&#8217;s exactly true and I&#8217;m one of the ones pushing strongest for that &#8212; and it&#8217;s a reason to use &#8220;auto x = &#8230;;&#8221; today because it will mean the same thing, namely to deduce the type (not specify it exactly, no conversions, etc.), just adding the ability to check that the deduced type matches the concept. This is a direct (and intended) evolution of declaring with auto per AAA. If you like that, you&#8217;re in good company, and you should use auto today. Telling people to declare with concrete types today is not at all the same thing and puts you on a different path of committing to concrete types, which is the opposite of &#8220;Conceptname x = &#8230;;&#8221;.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-sftrabbit odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-22457">
		<div id="div-comment-22457">
		<div class="cmtinfo"><em> on <a href="#comment-22457" title="">2014-07-08 at 4:00 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://sftrabbit.co.uk/' rel='external nofollow' class='url'>sftrabbit</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_22457"></div><p>I&#8217;ve written an article (<a href="http://josephmansfield.uk/articles/dont-use-auto-unless-you-mean-it.html" rel="nofollow">http://josephmansfield.uk/articles/dont-use-auto-unless-you-mean-it.html</a>), which proposes an alternative convention for using <code>auto</code>. It makes some similar arguments, but has a very different result &#8211; I suggest using <code>auto</code> only when you want to impose no requirements on a variable. The intention is to unify variable declarations with template arguments, and how we will declare template arguments when concepts are available. I consider <code>auto</code> to be equivalent to writing <code>typename T</code> without any useful information about the requirements of the type. This is okay, but only in situations where you mean that the variable could be any type and behave correctly (such as the argument of <code>std::move</code>).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-18305">
		<div id="div-comment-18305">
		<div class="cmtinfo"><em> on <a href="#comment-18305" title="">2014-04-08 at 6:54 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/6c72b4625b8cad2c52de01f52558bd37?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>GregM</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_18305"></div><p>It&#8217;s an X.  When used to declare a variable, auto does not deduce to a reference.  You need to explicitly include the &amp;.  If you write it as auto &amp;, then you get X &amp;.  If myDeque were a const deque, then auto &amp; would result in X const &amp;.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-18127">
		<div id="div-comment-18127">
		<div class="cmtinfo"><em> on <a href="#comment-18127" title="">2014-04-04 at 6:22 am</a></em> <img alt='' src='https://i1.wp.com/graph.facebook.com/640456922/picture?q=type%3Dlarge%26_md5%3D7e8d2d5596d50fb9110b0fa724b8c0a8&#038;resize=48%2C48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='https://www.facebook.com/hodges.r' rel='external nofollow' class='url'>Richard Hodges</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_18127"></div><p>Hi Herb, thanks for the informative and well presented site.</p>
<p>C++11 question du jour:<br />
given:</p>
<pre class="brush: plain; title: ; notranslate" title="">
struct X { ... };
auto myDeque = std::deque&lt;X&gt; {};
myDequeue.emplace_back( X{} };
auto x = myDequeue.front()
</pre>
<p>question 1:<br />
What type is x?<br />
a) an X ?<br />
b) an X&amp; ?<br />
c) a const X&amp; ?</p>
<p>question 2:<br />
Where is the rule book on this?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-17278">
		<div id="div-comment-17278">
		<div class="cmtinfo"><em> on <a href="#comment-17278" title="">2014-03-19 at 9:56 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/ac5b75f2ba59f84ac69e71018275702b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>nh</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_17278"></div><p>@Norbert What I&#8217;d really like to see with auto return type detection would be the ability to return a local struct. This would nicely encapsulate &#8220;multiple return types&#8221;, where you currently have to pass things in by reference or return a tuple and use tie, which is icky.</p>
<pre class="brush: plain; title: ; notranslate" title="">

#include &lt;tuple&gt;

bool func1(int input, int&amp; output)
{
	output = input;

	return true;
}

std::tuple&lt;bool, int&gt; func2(int input)
{
	return std::make_tuple(true, input);
}


auto func3(int input) // Not actual C++
{
	struct ret { bool success; int output; };

	return ret{true, input};
}

int main()
{
	{
		int output;

		if (func1(5, output))
		{
			// ...
		}
	}

	{
		bool success;
		int output;

		std::tie(success, output) = func2(5);

		if (success)
		{
			// ...
		}
	}

	{
		auto data = func3(5);

		if (data.success) // :)
		{
			// ...
		}
	}
}

</pre>
<p>Perhaps the local struct could even have a bool conversion operator for success or inherit one from another class. IIRC there are currently limits on local classes (no template members) so this might open up a whole other can of worms.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-13971">
		<div id="div-comment-13971">
		<div class="cmtinfo"><em> on <a href="#comment-13971" title="">2013-12-31 at 5:57 am</a></em>  <cite><a href='http://feherenfekete.wordpress.com/2013/12/31/declaration-and-initialization-with-auto/' rel='external nofollow' class='url'>Declaration and initialization with auto | Feheren Fekete</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_13971"></div><p>[&#8230;] <a href="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/" rel="nofollow">https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/</a> [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-13890">
		<div id="div-comment-13890">
		<div class="cmtinfo"><em> on <a href="#comment-13890" title="">2013-12-20 at 2:46 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/ccf7a21b4785b718d866a9ec8634e664?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>void*</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_13890"></div><p>We have been trying to define a good strategy for the use of auto for a customer&#8217;s C++11 guidelines. Researching we found these nice three GotWs about auto. :) Thanks for those!</p>
<p>Trying to consequently use auto for local variables we ran into three situations where it does not work nicely:</p>
<pre class="brush: plain; title: ; notranslate" title="">
#include &lt;vector&gt;


class foo_t
{
public:
   foo_t() {}

   foo_t( const foo_t&amp; ) = delete;

   void bar() const {}
};


int main()
{
   // example 1: doesn't work for pointer types
   // auto i_ptr = int*{};

   // like this it's fine
   typedef int* int_ptr_t;
   auto i_ptr_2 = int_ptr_t{};


   // example 2: doesn't work for non-copyable classes
   // compiles with VS2013, but I think it shouldn't (g++ doesn't like it)
   //auto foo = foo_t{};


   // example 3: auto does worse than manually written code can
   std::vector&lt; foo_t* &gt; foo_ptrs;

   // foo is not as const as it could be (only foo_t* const, could be const foo_t* const)
   for( const auto foo : foo_ptrs )
   {
      foo-&gt;bar();
   }

   // better because it's &quot;more&quot; const
   for( const foo_t* const foo: foo_ptrs )
   {
      foo-&gt;bar();
   }
}
</pre>
<p>&#8211; The pointer example is an edge case. Probably don&#8217;t need this very much in C++-code (and there&#8217;s a work around).<br />
&#8211; Having non-copyable objects is more relevant though. I regularly see that&#8230;probably thanks to Scott Meyers (Effective C++, Item 6: Explicitly disallow the use of compiler-generated functions you do not want).<br />
&#8211; The third situations occurs quite often in legacy code and it just runs against Effective C++, Item 3: Use const whenever possible</p>
<p>Any thoughts/comments about these three cases?</p>
<p>Best regards<br />
Wolfgang Petroschka</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-13860">
		<div id="div-comment-13860">
		<div class="cmtinfo"><em> on <a href="#comment-13860" title="">2013-12-16 at 12:54 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/56a3197fc8e9cb830b916a4434139858?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>White Wolf</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_13860"></div><p>Does &#8220;AAA&#8221; come with a 12 step program?  I guess using &#8216;auto&#8217; is already means trusting a higher power&#8230; ;)</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-13785">
		<div id="div-comment-13785">
		<div class="cmtinfo"><em> on <a href="#comment-13785" title="">2013-12-10 at 10:01 pm</a></em> <img alt='' src='https://secure.gravatar.com/blavatar/2f62869fd50fe4feeece2c5e893e6ef3?s=48' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://bulldozer00.com/2013/12/11/c1y-automatic-type-deduction/' rel='external nofollow' class='url'>C++1y Automatic Type Deduction | Bulldozer00&#039;s Blog</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_13785"></div><p>[&#8230;] For a more in depth treatment of C++11&#8242;s automatic type deduction capability, check out Herb Sutter&#8217;s masterful post on the new AAA (Almost Always Auto) idiom. [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-13294">
		<div id="div-comment-13294">
		<div class="cmtinfo"><em> on <a href="#comment-13294" title="">2013-11-19 at 6:26 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/190b7d54fa9bbcc29622ebd09fab3a2c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://wyw.dcweb.cn/' rel='external nofollow' class='url'>Yongwei Wu</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_13294"></div><p>People already mentioned searchability, but that is only part of tool support. There are others. For example, ctags is a popular tool used with editors like Vim: I bet it does not support the new syntax well. Even compilers like VC 2012, which I currently use, do not support all the needed language features.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-13210">
		<div id="div-comment-13210">
		<div class="cmtinfo"><em> on <a href="#comment-13210" title="">2013-11-12 at 11:07 am</a></em>  <cite><a href='http://backwardsincompatibilities.wordpress.com/2013/11/12/automatically-made-weak/' rel='external nofollow' class='url'>Automatically Made Weak | Backwards Incompatibilities</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_13210"></div><p>[&#8230;] been experimenting with the new “auto everything” style in C++. I also make regular use of std::weak_ptr, often when passing a lambda to be evaluated [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12334">
		<div id="div-comment-12334">
		<div class="cmtinfo"><em> on <a href="#comment-12334" title="">2013-08-30 at 7:55 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/1867df5b7844d8b7f438ee55bb147ed8?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Gabor Fekete</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12334"></div><p>@Ralph Tandetzky: You can also say &#8220;for (auto i = 0u; i &lt; v.size(); ++i) {}&quot;. Notice the &quot;u&quot; after the &quot;0&quot;!</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1 highlander-comment" id="comment-12227">
		<div id="div-comment-12227">
		<div class="cmtinfo"><em> on <a href="#comment-12227" title="">2013-08-18 at 11:53 pm</a></em>  <cite><a href='http://musingstudio.com/2013/08/19/herb-sutter-gotw94-aaa-style-almost-always-auto/' rel='external nofollow' class='url'>Herb Sutter GotW94: AAA Style (Almost Always Auto) | musingstudio</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12227"></div><p>[&#8230;] Sutter&#8217;s Guru of the Week article on Almost Always Auto is a tour de force covering everything you always wanted to know about [&#8230;]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12196">
		<div id="div-comment-12196">
		<div class="cmtinfo"><em> on <a href="#comment-12196" title="">2013-08-16 at 1:05 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/0400152746a64b153a4bc543bf3cf76c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Ralph Tandetzky</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12196"></div><p>Some feedback from the trenches: I love auto. I use it all the time. It&#8217;s convenient. It simplifies refactoring. It&#8217;s useful in templated and non-templated code as well. Im using the <code> auto x = init; </code> type of initialization all the time. However, I tried the <code> auto x = type{init}; </code> syntax for a while and find it slightly less convenient compared to <code> type x = init </code>. I find it more pragmatic to use this in order to say &#8220;I wanna commit to a specific type&#8221; while possibly getting a conversion operation there. It avoids the restriction to use movable types only (which can be quite a challenge outside the standard library). Whenever I do not need to commit to a specific type I **prefer** to use <code> auto </code>. I&#8217;m not a great fan of saying &#8220;always&#8221; here. </p>
<p>Most of the time I use <code> auto </code>, I&#8217;m actually using <code> const auto </code> which gives me a bunch of single static assignments in my code. This is nice, because I can use a const variable as an equivalent to the expression on the right hand side and it makes the code very easy to reason about. At the same time I don&#8217;t need to care about the type of the right hand side. These two keywords are an awesome combination!</p>
<p>One more thing: I found it quite annoying to get compiler warnings when I write stuff like this:</p>
<pre class="brush: plain; title: ; notranslate" title=""> for ( auto i = 0; i &lt; v.size(); ++i ) {...} </pre>
<p>It warns me that I get a comparison between a signed and an unsigned type. This is one of the places where I prefer to write <code> size_t </code> instead of <code> auto </code>. </p>
<p>Thanks for the many insightful posts. Keep it up!</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12194">
		<div id="div-comment-12194">
		<div class="cmtinfo"><em> on <a href="#comment-12194" title="">2013-08-15 at 10:02 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/40ef1961cbcd6bd21b787050ba7a7344?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Cassio Neri</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12194"></div><p>On &#8220;auto x = init; [&#8230;] It [&#8230;] guarantees that no implicit conversions [&#8230;] will occur.&#8221; Well, array-to-pointer and function-to-pointer conversions might occur. These conversions are, surely, efficient (loosely speaking they are &#8220;compile-time conversions&#8221;) and, I believe, no other conversion might occur.</p>
<pre class="brush: plain; title: ; notranslate" title="">

  int a[3] = {};
  a = nullptr; // invalid: type of a is int[3] 
  
  auto b = a;
  b = nullptr; // OK     : type of b is int*
  
  auto&amp; c = a;
  c = nullptr; // invalid: type of c is int(&amp;)[3]

  // ...
  
  void f();
  f = nullptr; // invalid: type of f is void()
  
  auto g = f;
  g = nullptr; // OK     : type of g is void(*)()
  
  auto&amp; h = f;
  h = nullptr; // invalid: type of h is void(&amp;)() 

</pre>
<p>I think it&#8217;s also worth mentionning that qualifications are not preserved (especially because they are often mistaken as conversions):</p>
<pre class="brush: plain; title: ; notranslate" title="">

  int const i = 0; // or &quot;auto const i = 0;&quot; :-)
  i = 1;       // invalid: i is const
  
  auto j = i;
  j = 1;       // OK     : j is not const
  
  auto const k = i;
  k = 1:       // invalid: k is const

</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12191">
		<div id="div-comment-12191">
		<div class="cmtinfo"><em> on <a href="#comment-12191" title="">2013-08-15 at 2:17 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/461f0ade50a01275172668e11ef5bd42?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/iamgentoofun' rel='external nofollow' class='url'>Alex Turbov</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12191"></div><p>I&#8217;m curious, how it is supposed to use auto for classes w/o copy/move constructors? For example if it contains std::atomic type and the only constructor with some parameters.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12190">
		<div id="div-comment-12190">
		<div class="cmtinfo"><em> on <a href="#comment-12190" title="">2013-08-15 at 9:42 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/01776284b7d24ba518a3811876e7fcd5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Bartosz Bielecki</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12190"></div><p>@ned I believe the non-searchability isn&#8217;t that bad if you consider that at least the interfaces of the classes/functions will have to explicitly state the type. Because of that I am not a big fan of the auto-deduced type of non-template functions. Also if you use the &#8220;auto f = Foo{ sth. }&#8221; you will still be able to find the usages of your class in your codebase.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12189">
		<div id="div-comment-12189">
		<div class="cmtinfo"><em> on <a href="#comment-12189" title="">2013-08-15 at 7:29 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12189"></div><p>@J Guy Davidson: Actually, I also noticed that the example isn&#8217;t really relevant because it has nothing to do with auto &#8212; taking the address of an overloaded function and storing it directly in function is problematic with or without the auto style syntax, so I’ve removed the example.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12186">
		<div id="div-comment-12186">
		<div class="cmtinfo"><em> on <a href="#comment-12186" title="">2013-08-15 at 2:36 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/56eb8367539a955ed8433201230eb28d?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Chris Vine</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12186"></div><p>I doubt the &#8216;auto x = type{ init };&#8217; style, in place of the standard &#8216;type x{init};&#8217;, is going to catch on.  This is because, as noted, it cannot be used with types which are neither copyable nor movable, so it cannot be used universally.  I discount the fact that (to me) it looks plain odd, because that can pass with usage and familiarity.</p>
<p>The standard C++ library tries hard to make as many aggregate types as are reasonable movable, but in user code I commonly come across, and write, there are often types which are neither copyable nor movable.  There are a number of reasons for this: two types may be closely coupled as part of a single implementation, so objects of those types may hold references to each other.  Trying to track which object happens to own some movable resource in such cases is often far more trouble (and introduces more inefficiency) than it is worth.  Efficient movability also implies constructing the internal implementation data of aggregates on free store so the data can easily be moved by swapping pointers.  However where efficiency is at a premium for objects likely to be constructed on the stack and unlikely to be moved, constructing things like arrays with known sizes at compile time may be desirable, and member arrays of aggregates (or std::array objects) can only be copied in linear time and not moved.  In those cases you may want to prohibit copying/moving entirely.  Users who in a particular case want to move and are willing to take the hit of allocation can call make_unique() for the unmovable type in user code where they really want to.</p>
<p>Lastly of course, prohibiting moving and copying may be necessary to enforce the thread-safe use of some objects at reasonable cost.  And some objects cannot semantically properly support moving (the article mentions locks, but there are many others).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12185">
		<div id="div-comment-12185">
		<div class="cmtinfo"><em> on <a href="#comment-12185" title="">2013-08-15 at 1:52 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/bf75e2309993a00e88c149785002c4be?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://elguido01.wordpress.com/' rel='external nofollow' class='url'>J Guy Davidson</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12185"></div><p>Excellent arguments.  However, unless I don&#8217;t understand std::function or these chaps <a href="http://en.cppreference.com/w/cpp/utility/functional/function" rel="nofollow">http://en.cppreference.com/w/cpp/utility/functional/function</a> have got it wrong, there&#8217;s a misspelling in the last line of your third code block in section 6.</p>
<pre class="brush: plain; title: ; notranslate" title="">auto f = function&lt;int()&gt;{ &amp;func };   // ok</pre>
<p>should be </p>
<pre class="brush: plain; title: ; notranslate" title="">auto f = function&lt;void(int)&gt;{ &amp;func };   // ok</pre>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12174">
		<div id="div-comment-12174">
		<div class="cmtinfo"><em> on <a href="#comment-12174" title="">2013-08-13 at 11:55 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/bd94e42efcd0a663a19a1fc252cec592?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Mark Garcia</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12174"></div><p>With all the issues about the readability of the type of an &#8220;autoed&#8221; variable, we must see that what is more important is not the variable itself, but instead its initializer. Consider this somehow innocuous piece of code</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto result = make_something();
result.do_something();
send_something(result);
</pre>
<p>Long story short, by using auto, we are emphasizing the initializer, as the initializer is the one who gives the actual type of its result. By emphasizing the initializer, we are emphasizing the operation(s) involved in the initializer. In the above code, make_something() is actually the one who is more important. It is a clear statement that &#8220;we are making something, then return some result&#8221;. But this is just for the functional programming part&#8230;</p>
<p>Now you may (and you will) argue &#8220;Hey! We are now in an OOP world! result there would almost always be an instance of some class. make_something() wouldn&#8217;t matter if doesn&#8217;t clearly know what we can do with result.&#8221;</p>
<p>&#8220;what we can do&#8221;<br />
&#8220;can&#8221;</p>
<p>What should you do? &#8220;Where do you want to go today?&#8221; not &#8220;Where can I go today?&#8221;. &#8220;What operations should I do?&#8221; not &#8220;What operations can I do?&#8221;. A good thing with OOP is that we are encapsulating data with operations. The operations that we do is what matters. But what matters most is what operations we _should_ do. (You may see that it&#8217;s analogous to test-driven development.)</p>
<p>With the line <code>result.do_something();</code>, we are not focusing on what result is (i.e. what&#8217;s its exact type), but instead, we focus more on the operation. Sometimes we think it the wrong way with OOP. With its syntax we often we read that line as &#8220;result, do_something()&#8221; (emphasis on the object) where instead it should be &#8220;do_something() with result&#8221; (emphasis on the operation). Now you are seeing some reasoning template library authors usually have. These are the properties of templates, of generic code. And now, we can enjoy it in non-template, &#8220;daily&#8221; code.</p>
<p>My own sentiment with auto is a very positive one. As said, it brings much generic code goodies without writing inside a template at all. Most importantly, it makes your code emphasize more on the operations, something we&#8217;ve been taking for granted for the past few years.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12170">
		<div id="div-comment-12170">
		<div class="cmtinfo"><em> on <a href="#comment-12170" title="">2013-08-13 at 6:16 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/2f91e7ffad34f35c3d035838acf156ac?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Jon</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12170"></div><p>I didn&#8217;t quite follow why &#8220;auto e = employee{empid};&#8221; is better than &#8220;employee e{empid};&#8221;. It&#8217;s more typing which is a (tiny) negative. Is it just for consistency with other declarations?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-jlehrer even thread-even depth-1 highlander-comment" id="comment-12168">
		<div id="div-comment-12168">
		<div class="cmtinfo"><em> on <a href="#comment-12168" title="">2013-08-13 at 10:05 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c6ad1c1c64ff7192f4dac3c4c3eb1c0f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.lehrerfamily.com/' rel='external nofollow' class='url'>jlehrer</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12168"></div><p>WRT &#8220;void&#8221; being a type, I&#8217;ve always wished that C++ would define &#8220;void&#8221; as the base class for all types.  This would permit all of the following:</p>
<p><code><br />
void * p = new string("hello"); //already valid<br />
const void &amp; r = string("hello");</p>
<p>void func(const void &amp;);<br />
func(3);<br />
func(string("Hello"));<br />
</code></p>
<p>etc&#8230;</p>
<p>-J</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12167">
		<div id="div-comment-12167">
		<div class="cmtinfo"><em> on <a href="#comment-12167" title="">2013-08-13 at 9:50 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.herbsutter.com' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12167"></div><p>@avjewe: I’m taking my own advice and trying it out. I still forget sometimes, but so far the more I use it the more I like it.</p>
<p>@mttpd: Thanks, open/closed noted. Re decltype(auto): That’s for something else. :) That’s deducing a decltype expression, but it’s still decltype, whose uses are different from auto.</p>
<p>@ned: Searchability is a valid objection too. Noted, thanks.</p>
<p>@Nemanja: If it helps, to clarify I’ve added this: “Granted, this is generic code, and not all your code will be templates—but the point is that the code isn’t unreadable even though it doesn’t mention specific types.”</p>
<p>@Jeffrey: If the expression templates return proxies that refer to UDL-generated temporary objects, that sounds like a pitfall inherent in the expression template library that will trip people up in lots of cases, not just with auto. This reminds me of a sort-of related tiny example that illustrates this class of design problem (and it is a design problem, not an auto problem): Andrei Alexandrescu complains about std::min, which takes and returns a reference, so even simple auto-less code like “min(x,f()) = g();” can be problematic. (I think I got that example right.) This seems to be a library design problem regardless of auto, not a new problem or pitfall introduced by using auto.</p>
<p>@zadecn: Thanks. The vector&lt;bool&gt; part of the example was actually not a difference with auto &#8212; auto and bool do the same thing so there&#8217;s no auto-related issue here. I&#8217;ve removed the example.</p>
<p>@noniussenior: void? Sigh. C’mon, void isn’t a meangingful type. But okay, because technically it is, I added weasel-wording. Fixed.</p>
<p>@Petter: Just vector. And this is a known pitfall that bits in all sorts of cases; it’s not new with auto.</p>
<p>@gnzlbg: as_signed and as_unsigned were “shown in GotW #93.”</p>
<p>@Marcel: I thought I mentioned initializer_list but must have accidentally cut that (I did mention it in GotW #92). Re-added, thanks.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12163">
		<div id="div-comment-12163">
		<div class="cmtinfo"><em> on <a href="#comment-12163" title="">2013-08-13 at 8:56 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/ef95896d2a7b776c0c22f0039bd0bf4d?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Brian M</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12163"></div><p>Think some of the comments given here are perhaps the most valid reason for not using auto, and that is lack of transparency resulting in the unexpected. Never a good thing!</p>
<p>Using auto where the good old way would work seems pointless and doesn&#8217;t help readability or sanity checking. For example some legacy code returns a float you then auto the returned value and do a lot of maths work with it using auto, silently taking the penalty for using a float rather than a double.</p>
<p>Auto works for me when the type is complicated to work out or where I really should not care, which is of course what it&#8217;s meant for.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12160">
		<div id="div-comment-12160">
		<div class="cmtinfo"><em> on <a href="#comment-12160" title="">2013-08-13 at 5:50 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/7ac54dd1f64876196b262bd7689f2000?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Norbert Riedlin</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12160"></div><p>I really like one more in C++14 upcoming application of auto:<br />
Consider:</p>
<pre class="brush: plain; title: ; notranslate" title="">
class C {
private:
    // real internal things:
    // C++11:
    class Internal;
    Internal doSomething();
    
    // C++14:
    //auto doSomething();
};
</pre>
<p>In C++11 and before I have to name the return type of &#8220;doSomething()&#8221;. Although that can be done by forward declaring a local class, it feels even nicer not to have to mention that class in C++14. (At least that is how I understand N3638)</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-strandmark even thread-even depth-1 highlander-comment" id="comment-12158">
		<div id="div-comment-12158">
		<div class="cmtinfo"><em> on <a href="#comment-12158" title="">2013-08-13 at 5:06 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/dc5f7c3937e6844cb776d2004b903578?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://strandmark.wordpress.com' rel='external nofollow' class='url'>Petter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12158"></div><p>See e.g. <a href="http://eigen.tuxfamily.org/bz/show_bug.cgi?id=505" rel="nofollow">http://eigen.tuxfamily.org/bz/show_bug.cgi?id=505</a> for bugs/misunderstandings involving expression templates and auto.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12151">
		<div id="div-comment-12151">
		<div class="cmtinfo"><em> on <a href="#comment-12151" title="">2013-08-13 at 3:23 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/69f49a6f6d12844e9043c6916efe70d5?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Marcel Wid</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12151"></div><p>I personally prefer to use auto to declare local variables. But unfortunately there are some problems with auto and uniform initialization. Perhaps it is a good idea to shed some more light on these pitfalls:<br />
Always use copy-initialization for variables declared with auto, i.e. <code>auto x = expr;</code> where expr is an expression. The point is, that a braced-init-list is NOT an expression. A corollary of this guidline is: Never write something like</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto x = {1};
</pre>
<p>The type of x will most likely not what you expect: Here x will have type std::initializer_list!</p>
<p>For another example consider the following code:</p>
<pre class="brush: plain; title: ; notranslate" title="">
class X
{
public:
    X() : x_{0} {}
private:
    int x_;
};

double f() { return 4.2; }
double d{f()};
</pre>
<p>We teach people to use uniform initialization (in this case direct-list-initialization) for class members like: <code>x_{0};</code> or variables like: <code>double d{f()};</code> This avoids the &#8220;most vexing parse&#8221;:</p>
<pre class="brush: plain; title: ; notranslate" title="">
double d(f());
</pre>
<p>But if we write</p>
<p>auto d{4.2};<br />
{/code]<br />
then we get a variable d of type std::initializer_list, which again is most likely not what we want. There is a proposal (<a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3681.html" rel="nofollow">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3681.html</a>) which will solve many problems mentioned above.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12148">
		<div id="div-comment-12148">
		<div class="cmtinfo"><em> on <a href="#comment-12148" title="">2013-08-13 at 12:16 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/b08e83da5a83b24f103521ec7d5c6889?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>tr3w</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12148"></div><p>Because of what Jeffrey Bosboom said, I think the my_vector_bool is a really bad example, since the following two code does something really different (and because the vector specialization already considered as a mistake).</p>
<pre class="brush: plain; title: ; notranslate" title="">
auto b1 = my_vector_bool.back(); // to capture the proxy
b1 = true; // write into my_vector_bool

auto i1 = my_vector_int.back(); // No proxy
i1 = true; // NOT write into my_vector_int
</pre>
<p>[[HS: As noted above, this example was incorrect, auto and bool do exactly the same thing so there is no issue. Example removed.]]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12147">
		<div id="div-comment-12147">
		<div class="cmtinfo"><em> on <a href="#comment-12147" title="">2013-08-13 at 12:08 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/6bcbddbd9c7b31aaff8cf25a356bc96c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/gnzlbg' rel='external nofollow' class='url'>gnzlbg</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12147"></div><p>Do you have a reference to as_signed/as_unsigned ?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-strandmark even thread-even depth-1 highlander-comment" id="comment-12145">
		<div id="div-comment-12145">
		<div class="cmtinfo"><em> on <a href="#comment-12145" title="">2013-08-12 at 10:32 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/dc5f7c3937e6844cb776d2004b903578?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://strandmark.wordpress.com' rel='external nofollow' class='url'>Petter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12145"></div><p>I must say that the following is very error-prone:</p>
<pre class="brush: plain; title: ; notranslate" title=""> 
auto b1 = my_vector_bool.back();
// ...
b1 = true;  // Oops! my_vector_bool changed!
 </pre>
<p>compared to</p>
<pre class="brush: plain; title: ; notranslate" title=""> 
bool b1 = my_vector_bool.back();
// ...
b1 = true;  // vector not changed.
 </pre>
<p>In almost all cases, auto will give you a copy. vector is error-prone combined with auto.</p>
<p>[[HS: Note I was wrong about this example, writing &#8216;auto&#8217; and &#8216;bool&#8217; have exactly the same semantics here and so auto is not error-prone with vector&lt;bool&gt;. I&#8217;ve noted this below, and removed the (non-)example. Sorry for the distraction.]]</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12144">
		<div id="div-comment-12144">
		<div class="cmtinfo"><em> on <a href="#comment-12144" title="">2013-08-12 at 9:47 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/360fd7e1546ec89f2546e94cc125fe25?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/noniussenior' rel='external nofollow' class='url'>noniussenior</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12144"></div><p>&#8220;Quick quiz: How many specific types are mentioned in that function? Name as many as you can.<br />
&#8230;<br />
void some_function( Container&amp; c, const Value&amp; v )<br />
&#8230;&#8221;</p>
<p>Why is void not a specific type?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-zadecn even thread-even depth-1 highlander-comment" id="comment-12142">
		<div id="div-comment-12142">
		<div class="cmtinfo"><em> on <a href="#comment-12142" title="">2013-08-12 at 6:26 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/47f6c93c861ef45438c9b7d7f88a0ac2?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>zadecn</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12142"></div><p>The comments given below have a little bug:<br />
auto b1 = my_vector_bool.back();               // to capture the proxy<br />
b1 = true;                                     // write into my_vector</p>
<p>I think the correct is :<br />
auto b1 = my_vector_bool.back();               // to capture the proxy<br />
b1 = true;                                     // write into my_vector_bool</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12141">
		<div id="div-comment-12141">
		<div class="cmtinfo"><em> on <a href="#comment-12141" title="">2013-08-12 at 6:24 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/47f6c93c861ef45438c9b7d7f88a0ac2?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/zadecn' rel='external nofollow' class='url'>zadecn</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12141"></div><p>the codes and comments below have a little bug:</p>
<p>auto b1 = my_vector_bool.back();               // to capture the proxy<br />
b1 = true;                                     // write into my_vector</p>
<p>I think the right is :<br />
auto b1 = my_vector_bool.back();               // to capture the proxy<br />
b1 = true;                                     // write into my_vector_bool</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12136">
		<div id="div-comment-12136">
		<div class="cmtinfo"><em> on <a href="#comment-12136" title="">2013-08-12 at 3:45 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/7349581b85c8d503fe8d907b74d35e5c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://jeffreybosboom.com' rel='external nofollow' class='url'>Jeffrey Bosboom</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12136"></div><p>Two points about auto and expression templates:</p>
<p>&#8211;If you use &#8216;auto a = x * 5someliteral&#8217; where * returns an expression template, that template has a reference to a temporary object that will be destroyed at the end of the expression.  So you can use auto to hold an expression template object, but you can&#8217;t safely do much with it (in particular, evaluate it).  This feels like a trap, especially when combined with the next point.</p>
<p>&#8211;If you change an operator that used to return a Foo to return an expression template convertible to a Foo, any code that used to use auto can break as above because it gets an expression template.  Despite using auto, if you want the flexibility to introduce expression templates after-the-fact (say, after profiling shows you need them), you need to use the &#8216;auto a = Foo{expr}&#8217; form everywhere.  And because there&#8217;s no types, it&#8217;ll be hard to find the locations whose meaning changed, unless you have an IDE that can find all usages of e.g., operator*.  You might not even know about breakage if it&#8217;s in some template (and similarly the template author has to decide between &#8216;auto a =x*y&#8217; and &#8216;auto a = T{x*y}&#8217;).</p>
<p>I recall there being some consideration of an &#8216;operator auto()&#8217; to instruct the compiler what type to infer, and I&#8217;m not yet convinced it isn&#8217;t necessary.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12133">
		<div id="div-comment-12133">
		<div class="cmtinfo"><em> on <a href="#comment-12133" title="">2013-08-12 at 2:18 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/a10a71c01ea57ccf32fb7ff7959398ff?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://gravatar.com/ntrifunovic' rel='external nofollow' class='url'>Nemanja Trifunovic</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12133"></div><p>There is one major problem with your reasoning, and it can be nicely summed up in this sentence:</p>
<p>&#8220;Zilch. Not a single specific type appears anywhere in this code, and the lack of exact types makes it much more powerful and doesn’t significantly harm its readability.&#8221;</p>
<p>The code sample you gave is very non-typical. That is generic, template-based code usually written by library implementers. I write code like that in my open-source project, but never at work. Code I write at work is full of types and except in a few corner cases such as declarations of iterators explicit types do improve reliability and robustness of code.</p>
<p>In short, I think I agree with your advice to use &#8220;auto&#8221; as much as possible, but only for template libraries. For all other code, &#8220;auto&#8221; should be used only in very few cases.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-12132">
		<div id="div-comment-12132">
		<div class="cmtinfo"><em> on <a href="#comment-12132" title="">2013-08-12 at 2:11 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/14ba3be3f19d9bbcac3f40af54c4ca67?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>ned</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12132"></div><p>Another downside of using auto is search-ability &#8211; it makes it very hard to search a code base to find all the places that an object is used.  This can be an issue re-factoring an interface &#8211; they don&#8217;t always get written perfectly the 1st time.  In a smaller project, a good IDE can help here, but when a code base spreads across 10&#8217;s or 100&#8217;s of projects its hard to beat find-in-files.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-mttpd odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-12131">
		<div id="div-comment-12131">
		<div class="cmtinfo"><em> on <a href="#comment-12131" title="">2013-08-12 at 2:10 pm</a></em> <img alt='' src='https://1.gravatar.com/avatar/1cc4a77a8256c3049728728c6c45625b?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://mttpd.wordpress.com' rel='external nofollow' class='url'>mttpd</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12131"></div><p>A few extra thoughts and a question ;-)</p>
<p>* &#8220;Compile-time duck typing&#8221; is generally referred to as &#8220;structural typing&#8221; (or &#8220;property-based typing&#8221;):<br />
<a href="https://en.wikipedia.org/wiki/Structural_type_system" rel="nofollow">https://en.wikipedia.org/wiki/Structural_type_system</a></p>
<p>* In the &#8220;What exact type is Container?&#8221; paragraph, perhaps it&#8217;s also worth mentioning on how it helps with satisfying the open/closed principle?</p>
<p>* I would still advise against using auto for the loops&#8217; counting/indexing variables:<br />
&#8211; I happen to very much care about expressing the non-negativity intent via the type system (so sloppy and wrong &#8220;auto i = 0&#8221; is absolutely out),<br />
&#8211; I also care about automatically matching the right data model (register size) without having to worry about such low-level details as whether I&#8217;m compiling for the LLP64 data model or the LP64 data model or anything else (so contortions such as platform-dependent macros choosing between the suffix UL and the suffix ULL are most definitely out),<br />
&#8211; I also want zero-overhead portability (this is C++, after all), so committing to ULL (other than not being future-proof and generally violating the previous constraint), is out as well,<br />
&#8211; &#8220;for (auto i = std::size_t{0};&#8221;, &#8230;, really? :-)</p>
<p>This could have been solved if we only had the suffix for std::size_t (ZU anyone? ;]), but as of today I don&#8217;t really see any alternative.</p>
<p>* How does decltype(auto) fit into the big picture? :-)</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-avjewe even thread-even depth-1 highlander-comment" id="comment-12130">
		<div id="div-comment-12130">
		<div class="cmtinfo"><em> on <a href="#comment-12130" title="">2013-08-12 at 1:46 pm</a></em> <img alt='' src='https://2.gravatar.com/avatar/28512e7ea3e0cf283c0cc5423a0d164a?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>avjewe</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_12130"></div><p>What if you want to use the default constructor?<br />
Would you still advocate<br />
auto x = type{}<br />
rather than<br />
type x;<br />
?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<br />

  	<p class="nocomments">Comments are closed.</p>
  <div class="post-content">
<p>
</p>
</div>

			</div>

		
		<p align="center"></p>

	</div><!-- end id:content-main -->
<div id="sidebar">
<ul>
<li class="sidebox"><h2><label for="subscribe-field">Follow by email</label></h2>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
																	<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"/></p>
					
					<p>
						<input type="hidden" name="action" value="subscribe"/>
						<input type="hidden" name="blog_id" value="3379246"/>
						<input type="hidden" name="source" value="https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/"/>
						<input type="hidden" name="sub-type" value="widget"/>
						<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
						<input type="hidden" id="_wpnonce" name="_wpnonce" value="4590924cc6" />						<input type="submit" value="Subscribe" />
					</p>
				</form>
			
</li><li class="sidebox"><h2><a href='http://twitter.com/herbsutter'>Tweets</a></h2><ul class='tweets'></ul><a href="http://twitter.com/herbsutter"  class='twitter-follow-button' data-show-count='false' data-link-color='#265e15' data-text-color='#333333'>Follow @herbsutter</a></li><li class="sidebox"><h2>Popular</h2><ul>				<li>
										<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" class="bump-view" data-bump-view="tp">
						Trip report: Fall ISO C++ standards meeting (San Diego)					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/gotw/" class="bump-view" data-bump-view="tp">
						GotW					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" class="bump-view" data-bump-view="tp">
						Lifetime profile v1.0 posted					</a>
										</li>
				</ul></li><li class="sidebox"><h2>Categories</h2>		<ul>
				<li class="cat-item cat-item-291"><a href="https://herbsutter.com/category/apple/" >Apple</a>
</li>
	<li class="cat-item cat-item-49277"><a href="https://herbsutter.com/category/c-net/" >C# / .NET</a>
</li>
	<li class="cat-item cat-item-2426"><a href="https://herbsutter.com/category/c/" >C++</a>
</li>
	<li class="cat-item cat-item-69816"><a href="https://herbsutter.com/category/cloud/" >Cloud</a>
</li>
	<li class="cat-item cat-item-214618"><a href="https://herbsutter.com/category/concurrency/" >Concurrency</a>
</li>
	<li class="cat-item cat-item-8259773"><a href="https://herbsutter.com/category/effective-concurrency/" >Effective Concurrency</a>
</li>
	<li class="cat-item cat-item-3696745"><a href="https://herbsutter.com/category/friday-thoughts/" >Friday Thoughts</a>
</li>
	<li class="cat-item cat-item-3867746"><a href="https://herbsutter.com/category/c/gotw/" >GotW</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://herbsutter.com/category/hardware/" >Hardware</a>
</li>
	<li class="cat-item cat-item-1017"><a href="https://herbsutter.com/category/java/" >Java</a>
</li>
	<li class="cat-item cat-item-637"><a href="https://herbsutter.com/category/microsoft/" >Microsoft</a>
</li>
	<li class="cat-item cat-item-420845"><a href="https://herbsutter.com/category/opinion-editorial/" >Opinion &amp; Editorial</a>
</li>
	<li class="cat-item cat-item-1633077"><a href="https://herbsutter.com/category/reader-qa/" >Reader Q&amp;A</a>
</li>
	<li class="cat-item cat-item-2301"><a href="https://herbsutter.com/category/software-development/" >Software Development</a>
</li>
	<li class="cat-item cat-item-393523"><a href="https://herbsutter.com/category/talks-events/" >Talks &amp; Events</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://herbsutter.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-151"><a href="https://herbsutter.com/category/web/" >Web</a>
</li>
		</ul>
			</li></ul>
</div><!-- end id:sidebar -->
</div><!-- end id:content -->
</div><!-- end id:container -->
<div id="footer">
	<div id="colophon">
		<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a></p>
		<p>WPThemes.</p>
		<br class="clear" />
	</div><!-- end #colophon-->
</div><!-- end #footer-->
<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201847y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-d04928669a8bbc0ea67c70f4feee7097">
	</div>
	<div class="grofile-hash-map-c0ba56bfd231f8f04feb057728975181">
	</div>
	<div class="grofile-hash-map-f07915dbc604d80a29ce2143fd69225e">
	</div>
	<div class="grofile-hash-map-7a1a1f5ea070c61327b4a3984c33d70d">
	</div>
	<div class="grofile-hash-map-be2ad8c4d8ff3e745d83767c6ab1bd79">
	</div>
	<div class="grofile-hash-map-be5117e2fa63976c3c189465dccbc88e">
	</div>
	<div class="grofile-hash-map-e97f77058594da9251502e482730974c">
	</div>
	<div class="grofile-hash-map-ef95896d2a7b776c0c22f0039bd0bf4d">
	</div>
	<div class="grofile-hash-map-28571d6df35321850e78b1ebfd48e5b4">
	</div>
	<div class="grofile-hash-map-01776284b7d24ba518a3811876e7fcd5">
	</div>
	<div class="grofile-hash-map-9f438bc04462ee5af4132921a3474842">
	</div>
	<div class="grofile-hash-map-6c72b4625b8cad2c52de01f52558bd37">
	</div>
	<div class="grofile-hash-map-ac5b75f2ba59f84ac69e71018275702b">
	</div>
	<div class="grofile-hash-map-ccf7a21b4785b718d866a9ec8634e664">
	</div>
	<div class="grofile-hash-map-56a3197fc8e9cb830b916a4434139858">
	</div>
	<div class="grofile-hash-map-190b7d54fa9bbcc29622ebd09fab3a2c">
	</div>
	<div class="grofile-hash-map-1867df5b7844d8b7f438ee55bb147ed8">
	</div>
	<div class="grofile-hash-map-0400152746a64b153a4bc543bf3cf76c">
	</div>
	<div class="grofile-hash-map-40ef1961cbcd6bd21b787050ba7a7344">
	</div>
	<div class="grofile-hash-map-461f0ade50a01275172668e11ef5bd42">
	</div>
	<div class="grofile-hash-map-01776284b7d24ba518a3811876e7fcd5">
	</div>
	<div class="grofile-hash-map-56eb8367539a955ed8433201230eb28d">
	</div>
	<div class="grofile-hash-map-bf75e2309993a00e88c149785002c4be">
	</div>
	<div class="grofile-hash-map-bd94e42efcd0a663a19a1fc252cec592">
	</div>
	<div class="grofile-hash-map-2f91e7ffad34f35c3d035838acf156ac">
	</div>
	<div class="grofile-hash-map-c6ad1c1c64ff7192f4dac3c4c3eb1c0f">
	</div>
	<div class="grofile-hash-map-7ac54dd1f64876196b262bd7689f2000">
	</div>
	<div class="grofile-hash-map-dc5f7c3937e6844cb776d2004b903578">
	</div>
	<div class="grofile-hash-map-69f49a6f6d12844e9043c6916efe70d5">
	</div>
	<div class="grofile-hash-map-b08e83da5a83b24f103521ec7d5c6889">
	</div>
	<div class="grofile-hash-map-6bcbddbd9c7b31aaff8cf25a356bc96c">
	</div>
	<div class="grofile-hash-map-360fd7e1546ec89f2546e94cc125fe25">
	</div>
	<div class="grofile-hash-map-47f6c93c861ef45438c9b7d7f88a0ac2">
	</div>
	<div class="grofile-hash-map-47f6c93c861ef45438c9b7d7f88a0ac2">
	</div>
	<div class="grofile-hash-map-7349581b85c8d503fe8d907b74d35e5c">
	</div>
	<div class="grofile-hash-map-a10a71c01ea57ccf32fb7ff7959398ff">
	</div>
	<div class="grofile-hash-map-14ba3be3f19d9bbcac3f40af54c4ca67">
	</div>
	<div class="grofile-hash-map-1cc4a77a8256c3049728728c6c45625b">
	</div>
	<div class="grofile-hash-map-28512e7ea3e0cf283c0cc5423a0d164a">
	</div>
	</div>
<script type='text/javascript' charset='UTF-8' id='polldaddyRatings'><!--//--><![CDATA[//><!--
PDRTJS_settings_468178_comm_36460={"id":468178,"unique_id":"wp-comment-36460","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20What%20exactly%20are%20the%20rules%20for%20copy%20elision%20when%20one%20is%20using%20auto%20and%20commits%20to%20a%20specific%20type%20%3F%20%28see%3A%20GotW%20-%20Almost%20always%20auto%29.%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-36460","item_id":"_comm_36460"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_36460 == 'undefined' ){PDRTJS_468178_comm_36460 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_36460 );}}PDRTJS_settings_468178_comm_35596={"id":468178,"unique_id":"wp-comment-35596","title":"%40herb%3A%20Perhaps%20this%20may%20be%20irrelevant%20here%20%28Sorry%21%29%2C%20I%20couldn%26%23039%3Bt%20find%20any%20other%20relevant%20place%20to%20comment%20on%20this.%20When%20will%20the%20GotWs%208%20-%2088%20be%20available%3F%20I%20read%20this%20article%20series%20with%20in%20the%20p...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-35596","item_id":"_comm_35596"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_35596 == 'undefined' ){PDRTJS_468178_comm_35596 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_35596 );}}PDRTJS_settings_468178_comm_35151={"id":468178,"unique_id":"wp-comment-35151","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20Sutter%26%238217%3Bs%20%26%238220%3BAlmost%20Always%20Auto%26%238221%3B%20and%20Scott%20Meyers%26%238217%3Bs%20%26%238220%3BPrefer%20auto%20to%20specific%20type%20declarations%26%238221%3B%20recommendation%2C%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-35151","item_id":"_comm_35151"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_35151 == 'undefined' ){PDRTJS_468178_comm_35151 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_35151 );}}PDRTJS_settings_468178_comm_34557={"id":468178,"unique_id":"wp-comment-34557","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20Sutter%26%238217%3Bs%20%26%238220%3BAlmost%20Always%20Auto%26%238221%3B%20and%20Scott%20Meyers%26%238217%3Bs%20%26%238220%3BPrefer%20auto%20to%20specific%20type%20declarations%26%238221%3B%20recommendation%2C%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-34557","item_id":"_comm_34557"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_34557 == 'undefined' ){PDRTJS_468178_comm_34557 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_34557 );}}PDRTJS_settings_468178_comm_34543={"id":468178,"unique_id":"wp-comment-34543","title":"%40x%20y%3A%20I%20think%20I%20had%20in%20mind%20that%20the%20auto%20version%20deduced%20an%20array%2C%20which%20it%20doesn%26%23039%3Bt.%20If%20I%20had%20something%20else%20in%20mind%2C%20I%26%23039%3Bve%20forgotten%20it%20now%2C%20so%20I%26%23039%3Bve%20removed%20that%20phrase%20and%20added%20your%20moniker%20to...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-34543","item_id":"_comm_34543"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_34543 == 'undefined' ){PDRTJS_468178_comm_34543 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_34543 );}}PDRTJS_settings_468178_comm_34469={"id":468178,"unique_id":"wp-comment-34469","title":"What%20do%20you%20think%20is%20the%20%26quot%3Bsubtle%20difference%20in%20the%20type%20of%20s%2C%20where%20the%20auto%20style%20is%20more%20correct%26quot%3B%3F%20See%20https%3A%2F%2Fstackoverflow.com%2Fq%2F27550539...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-34469","item_id":"_comm_34469"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_34469 == 'undefined' ){PDRTJS_468178_comm_34469 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_34469 );}}PDRTJS_settings_468178_comm_33404={"id":468178,"unique_id":"wp-comment-33404","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20Sutter%26%238217%3Bs%20%26%238220%3BAlmost%20Always%20Auto%26%238221%3B%20and%20Scott%20Meyers%26%238217%3Bs%20%26%238220%3BPrefer%20auto%20to%20specific%20type%20declarations%26%238221%3B%20recommendation%2C%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-33404","item_id":"_comm_33404"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_33404 == 'undefined' ){PDRTJS_468178_comm_33404 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_33404 );}}PDRTJS_settings_468178_comm_31601={"id":468178,"unique_id":"wp-comment-31601","title":"I%20am%20referring%20to%20this%3A%26%23091%3Bcode%26%23093%3B%26%23091%3B%2Fcode%26%23093%3Bauto%20a%20%3D%20matrix%7B...%7D%2C%20b%20%3D%20matrix%7B...%7D%3B%20%2F%2F%20some%20type%20that%20does%20lazy%20evalauto%20ab%20%3D%20a%20%2A%20b%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20to%20capture%20the%20lazy-eval%20proxyauto%20c%20%3D%20matrix%7B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-31601","item_id":"_comm_31601"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_31601 == 'undefined' ){PDRTJS_468178_comm_31601 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_31601 );}}PDRTJS_settings_468178_comm_29634={"id":468178,"unique_id":"wp-comment-29634","title":"I%20have%20tried%20to%20use%20AAA%20for%20a%20while%20and%20cannot%20say%20I%20feel%20entirely%20comfortable%20with%20it.%20I%20am%20leaning%20towards%20using%20%26%23091%3Bcode%26%23093%3Bauto%26%23091%3B%2Fcode%26%23093%3B%20only%20in%20certain%20situations%2C%20as%20it%20otherwise%20does%20reduce%20my%20cod...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-29634","item_id":"_comm_29634"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_29634 == 'undefined' ){PDRTJS_468178_comm_29634 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_29634 );}}PDRTJS_settings_468178_comm_28433={"id":468178,"unique_id":"wp-comment-28433","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20in%20this%20case%29%20has%20a%20deleted%20copy%20constructor.%20Luckily%2C%20all%20is%20not%20lost%20on%20our%20quest%20for%20Almost%20Always%20Auto.%20The%20solution%20is%20to%20use%20Universal%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-28433","item_id":"_comm_28433"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_28433 == 'undefined' ){PDRTJS_468178_comm_28433 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_28433 );}}PDRTJS_settings_468178_comm_28295={"id":468178,"unique_id":"wp-comment-28295","title":"I%26%23039%3Bm%20wondering%20what%20downsides%20there%20are%20to%20using%20const%20auto%26amp%3B%20wherever%20const%20auto%20would%20be%20appropriate%20%28except%20in%20cases%20where%20you%20specifically%20want%20to%20copy%20the%20right%20hand%20side%29.%20Like%20auto%20in%20ge...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-28295","item_id":"_comm_28295"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_28295 == 'undefined' ){PDRTJS_468178_comm_28295 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_28295 );}}PDRTJS_settings_468178_comm_24845={"id":468178,"unique_id":"wp-comment-24845","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20think%20you%20shouldn%26%238217%3Bt%20use%20it.%20In%20fact%20I%20think%20you%20should%20almost%20always%20use%20it%2C%20as%20suggested%20in%20http%3A%2F%2Fherbsutter.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F%20Howeve...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-24845","item_id":"_comm_24845"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_24845 == 'undefined' ){PDRTJS_468178_comm_24845 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_24845 );}}PDRTJS_settings_468178_comm_24621={"id":468178,"unique_id":"wp-comment-24621","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20just%20now%20able%20to%20use%20C%2B%2B11%20for%20the%20first%20time%20at%20my%20job%20and%20I%26%238217%3Bm%20learning%20as%20I%20go.%20I%20have%20read%20GotW%20%2394%20and%20I%26%238217%3Bm%20trying%20to%20adopt%20his%20recommendation%20for%20using%20auto%20when%20declari...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-24621","item_id":"_comm_24621"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_24621 == 'undefined' ){PDRTJS_468178_comm_24621 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_24621 );}}PDRTJS_settings_468178_comm_24084={"id":468178,"unique_id":"wp-comment-24084","title":"%40Richard%3AFirstly%2C%20I%26%23039%3Bm%20not%20concerned%20whether%20the%20library%20is%20efficiently%20returning%20types%3B%20I%26%23039%3Bm%20concerned%20whether%20any%20given%20variable%20that%20is%20being%20passed%20round%20through%20assignment%2C%20parameters%2C%20etc%20is%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-24084","item_id":"_comm_24084"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_24084 == 'undefined' ){PDRTJS_468178_comm_24084 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_24084 );}}PDRTJS_settings_468178_comm_24058={"id":468178,"unique_id":"wp-comment-24058","title":"%40peterUnfortunately%20every%20new%20feature%20is%20something%20else%20open%20to%20abuse%2Fmisuse%2C%20not%20totally%20sure%20a%20lot%20of%20new%20features%20are%20either%20warranted%20or%20sensible%2C%20auto%20being%20one%20of%20them%2C%20just%20more%20to%20go%20wron...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-24058","item_id":"_comm_24058"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_24058 == 'undefined' ){PDRTJS_468178_comm_24058 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_24058 );}}PDRTJS_settings_468178_comm_24057={"id":468178,"unique_id":"wp-comment-24057","title":"%40Peter%20I%20hear%20you.%20I%20have%20been%20in%20the%20business%20for%20a%20long%20time%20too%20and%20I%20have%20seen%20my%20fair%20share%20of%20horrid%20upstream%20interfaces.It%20seems%20to%20me%20that%20you%20are%20concerned%20about%20two%20things%3A1%29%20is%20my%20libr...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-24057","item_id":"_comm_24057"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_24057 == 'undefined' ){PDRTJS_468178_comm_24057 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_24057 );}}PDRTJS_settings_468178_comm_24052={"id":468178,"unique_id":"wp-comment-24052","title":"%40Richard%3AWe%20appear%20to%20be%20talking%20fundamentally%20at%20cross%20purposes.I%20am%20not%20discussing%20the%20choices%20made%20by%20the%20person%20who%20wrote%20the%20code.%20I%20am%20discussing%20a%20much%20more%20common%20scenario%3A%20the%20developer%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-24052","item_id":"_comm_24052"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_24052 == 'undefined' ){PDRTJS_468178_comm_24052 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_24052 );}}PDRTJS_settings_468178_comm_23923={"id":468178,"unique_id":"wp-comment-23923","title":"Let%26%23039%3Bs%20assume%20we%20agree%20on%20the%20following%20principles%3A1.%20early%20optimisation%20is%20evil%20%28don%26%23039%3Bt%20make%20programs%20untidy%292.%20early%20pessimisation%20is%20evil%20%28don%26%23039%3Bt%20prevent%20the%20compiler%20from%20doing%20RVO%20etc%293.%20write%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23923","item_id":"_comm_23923"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23923 == 'undefined' ){PDRTJS_468178_comm_23923 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23923 );}}PDRTJS_settings_468178_comm_23918={"id":468178,"unique_id":"wp-comment-23918","title":"%40red1939%3AI%20would%20entirely%20agree%20that%20it%20is%20possible%20that%20Speed%20previous%20%3D%20result%3B%20is%20actually%20surprisingly%20efficient%2C%20particularly%20given%20the%20brutalisations%20made%20possible%20with%20typedef.%20However%2C%20wh...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23918","item_id":"_comm_23918"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23918 == 'undefined' ){PDRTJS_468178_comm_23918 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23918 );}}PDRTJS_settings_468178_comm_23913={"id":468178,"unique_id":"wp-comment-23913","title":"%40Peter%20MaxwellIn%20my%20opinion%20if%20anyone%20is%20writing%20such%20%26quot%3Bcareless%26quot%3B%20assignment%20he%20has%20to%20understand%20whether%20or%20not%20it%26%23039%3Bs%20costly%2C%20or%20not%2C%20or%20maybe%20even%20required%2C%20no%20matter%20the%20cost.%20Let%26%23039%3Bs%20assume%20you%20s...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23913","item_id":"_comm_23913"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23913 == 'undefined' ){PDRTJS_468178_comm_23913 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23913 );}}PDRTJS_settings_468178_comm_23909={"id":468178,"unique_id":"wp-comment-23909","title":"%40Richard%3AYou%26%23039%3Bve%20sort%20of%20touched%20on%20this%2C%20but%20when%20I%20asked%20what%20the%20performance%20implications%20were%20of%26%23091%3Bcode%26%23093%3Bauto%20previous%20%3D%20result%3B%26%23091%3B%2Fcode%26%23093%3Bmy%20point%20was%20that%20you%20don%26%23039%3Bt%20know%20whether%20you%26%23039%3Bre%20dealing%20with...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23909","item_id":"_comm_23909"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23909 == 'undefined' ){PDRTJS_468178_comm_23909 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23909 );}}PDRTJS_settings_468178_comm_23830={"id":468178,"unique_id":"wp-comment-23830","title":"%40Peter%20The%20performance%20cost%20of%26%23091%3Bcode%26%23093%3B%20%20%20%20auto%20x%20%3D%20make_a_thing%28%29%3B%26%23091%3B%2Fcode%26%23093%3Bwould%20normally%20be%20low%20because%20of%20return%20value%20optimisation.%20In%20any%20case%20the%20cost%20is%20the%20same%20as%26%23091%3Bcode%26%23093%3B%20%20%20%20thing%20x%20%3D%20make_a_th...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23830","item_id":"_comm_23830"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23830 == 'undefined' ){PDRTJS_468178_comm_23830 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23830 );}}PDRTJS_settings_468178_comm_23801={"id":468178,"unique_id":"wp-comment-23801","title":"I%20fear%20I%20messed%20up%20my%20input%20and%20lost%20the%20code%20I%20was%20trying%20to%20include%20in%20the%20text%20paragraphs%20-%20the%20text%20should%20read%3AWhat%20are%20the%20performance%20implications%20of%20auto%20previous%20%3D%20result%3FandCertainly%2C%20a...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23801","item_id":"_comm_23801"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23801 == 'undefined' ){PDRTJS_468178_comm_23801 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23801 );}}PDRTJS_settings_468178_comm_23768={"id":468178,"unique_id":"wp-comment-23768","title":"I%26%23039%3Bve%20been%20using%20c%2B%2B11%20in%20production%20code%20for%2018%20months%20now.%20I%20find%20myself%20using%20auto%20when%20assigning%20return%20values%20from%20functions%20almost%20always%20-%20it%20seems%20to%20make%20it%20easier%20to%20code%20for%20intent%20rath...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23768","item_id":"_comm_23768"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23768 == 'undefined' ){PDRTJS_468178_comm_23768 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23768 );}}PDRTJS_settings_468178_comm_23765={"id":468178,"unique_id":"wp-comment-23765","title":"%40peter%20have%20to%20admit%20did%20like%20the%20idea%20of%20auto%2C%20one%20of%20my%20pet%20hates%20is%20the%20horrible%20typing%20you%20have%20to%20do%20sometimes.%20Maybe%20the%20real%20answer%20is%20an%20IDE%20function%20to%20pickup%20on%20what%20auto%20really%20is%20refe...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23765","item_id":"_comm_23765"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23765 == 'undefined' ){PDRTJS_468178_comm_23765 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23765 );}}PDRTJS_settings_468178_comm_23751={"id":468178,"unique_id":"wp-comment-23751","title":"I%20feel%20wide%20use%20of%20auto%20is%20a%20mistake%2C%20and%20likely%20to%20lead%20to%20a%20maintainability%20nightmare%20in%20the%20future.Firstly%2C%20before%20I%20produce%20any%20examples%20of%20my%20own%2C%20I%20note%20the%20previous%20article%26%23039%3Bs%20error%20in%20its%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-23751","item_id":"_comm_23751"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_23751 == 'undefined' ){PDRTJS_468178_comm_23751 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_23751 );}}PDRTJS_settings_468178_comm_22653={"id":468178,"unique_id":"wp-comment-22653","title":"%40sftrabbit%3A%20I%26%23039%3Bll%20only%20push%20back%20on%20the%20word%20%26quot%3Bincorrect%26quot%3B%20which%20is%20not%20compatible%20with%20%26quot%3BIll%20admit%20that%20this%20is%20entirely%20a%20matter%20of%20style%26quot%3B...%20Just%20sayin%26%23039%3B.%20%3A%29I%20didn%26%23039%3Bt%20say%20it%26%23039%3Bs%20pitfall-free%20by%20defaul...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-22653","item_id":"_comm_22653"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_22653 == 'undefined' ){PDRTJS_468178_comm_22653 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_22653 );}}PDRTJS_settings_468178_comm_22647={"id":468178,"unique_id":"wp-comment-22647","title":"It%26%23039%3Bs%20a%20choice%20between%20using%20%60auto%60%20now%20and%20later%20constraining%20your%20declarations%20or%20using%20concrete%20types%20now%20and%20later%20relaxing%20your%20constraints.%20It%20is%20therefore%20a%20matter%20of%20weighing%20up%20the%20pros%20a...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-22647","item_id":"_comm_22647"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_22647 == 'undefined' ){PDRTJS_468178_comm_22647 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_22647 );}}PDRTJS_settings_468178_comm_22645={"id":468178,"unique_id":"wp-comment-22645","title":"Yes%2C%20%26%23039%3Bauto%26%23039%3B%20is%20exactly%20equivalent%20to%20%26%23039%3Btypename%20T%26%23039%3B%20by%20definition%20%28modulo%20the%20one%20quirk%20that%20currently%20auto%20is%20allowed%20to%20deduce%20initializer_list%29.As%20I%20wrote%20on%20the%20Reddit%20thread%3A%20Second%2C%20a%20huge%20am...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-22645","item_id":"_comm_22645"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_22645 == 'undefined' ){PDRTJS_468178_comm_22645 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_22645 );}}PDRTJS_settings_468178_comm_22457={"id":468178,"unique_id":"wp-comment-22457","title":"I%26%23039%3Bve%20written%20an%20article%20%28http%3A%2F%2Fjosephmansfield.uk%2Farticles%2Fdont-use-auto-unless-you-mean-it.html%29%2C%20which%20proposes%20an%20alternative%20convention%20for%20using%20%26lt%3Bcode%26gt%3Bauto%26lt%3B%2Fcode%26gt%3B.%20It%20makes%20some%20similar%20arg...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-22457","item_id":"_comm_22457"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_22457 == 'undefined' ){PDRTJS_468178_comm_22457 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_22457 );}}PDRTJS_settings_468178_comm_18305={"id":468178,"unique_id":"wp-comment-18305","title":"It%26%23039%3Bs%20an%20X.%20%20When%20used%20to%20declare%20a%20variable%2C%20auto%20does%20not%20deduce%20to%20a%20reference.%20%20You%20need%20to%20explicitly%20include%20the%20%26amp%3B.%20%20If%20you%20write%20it%20as%20auto%20%26amp%3B%2C%20then%20you%20get%20X%20%26amp%3B.%20%20If%20myDeque%20were...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-18305","item_id":"_comm_18305"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_18305 == 'undefined' ){PDRTJS_468178_comm_18305 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_18305 );}}PDRTJS_settings_468178_comm_18127={"id":468178,"unique_id":"wp-comment-18127","title":"Hi%20Herb%2C%20thanks%20for%20the%20informative%20and%20well%20presented%20site.C%2B%2B11%20question%20du%20jour%3Agiven%3A%26%23091%3Bcode%26%23093%3Bstruct%20X%20%7B%20...%20%7D%3Bauto%20myDeque%20%3D%20std%3A%3Adeque%26lt%3BX%26gt%3B%20%7B%7D%3BmyDequeue.emplace_back%28%20X%7B%7D%20%7D%3Bauto%20x%20%3D%20myDequ...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-18127","item_id":"_comm_18127"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_18127 == 'undefined' ){PDRTJS_468178_comm_18127 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_18127 );}}PDRTJS_settings_468178_comm_17278={"id":468178,"unique_id":"wp-comment-17278","title":"%40Norbert%20What%20I%26%23039%3Bd%20really%20like%20to%20see%20with%20auto%20return%20type%20detection%20would%20be%20the%20ability%20to%20return%20a%20local%20struct.%20This%20would%20nicely%20encapsulate%20%26quot%3Bmultiple%20return%20types%26quot%3B%2C%20where%20you%20currently%20have...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-17278","item_id":"_comm_17278"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_17278 == 'undefined' ){PDRTJS_468178_comm_17278 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_17278 );}}PDRTJS_settings_468178_comm_13971={"id":468178,"unique_id":"wp-comment-13971","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20http%3A%2F%2Fherbsutter.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-13971","item_id":"_comm_13971"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_13971 == 'undefined' ){PDRTJS_468178_comm_13971 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_13971 );}}PDRTJS_settings_468178_comm_13890={"id":468178,"unique_id":"wp-comment-13890","title":"We%20have%20been%20trying%20to%20define%20a%20good%20strategy%20for%20the%20use%20of%20auto%20for%20a%20customer%26%23039%3Bs%20C%2B%2B11%20guidelines.%20Researching%20we%20found%20these%20nice%20three%20GotWs%20about%20auto.%20%3A%29%20Thanks%20for%20those%21Trying%20to%20conseque...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-13890","item_id":"_comm_13890"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_13890 == 'undefined' ){PDRTJS_468178_comm_13890 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_13890 );}}PDRTJS_settings_468178_comm_13860={"id":468178,"unique_id":"wp-comment-13860","title":"Does%20%26quot%3BAAA%26quot%3B%20come%20with%20a%2012%20step%20program%3F%20%20I%20guess%20using%20%26%23039%3Bauto%26%23039%3B%20is%20already%20means%20trusting%20a%20higher%20power...%20%3B%29...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-13860","item_id":"_comm_13860"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_13860 == 'undefined' ){PDRTJS_468178_comm_13860 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_13860 );}}PDRTJS_settings_468178_comm_13785={"id":468178,"unique_id":"wp-comment-13785","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20For%20a%20more%20in%20depth%20treatment%20of%20C%2B%2B11%26%238242%3Bs%20automatic%20type%20deduction%20capability%2C%20check%20out%20Herb%20Sutter%26%238217%3Bs%20masterful%20post%20on%20the%20new%20AAA%20%28Almost%20Always%20Auto%29%20idiom.%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-13785","item_id":"_comm_13785"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_13785 == 'undefined' ){PDRTJS_468178_comm_13785 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_13785 );}}PDRTJS_settings_468178_comm_13294={"id":468178,"unique_id":"wp-comment-13294","title":"People%20already%20mentioned%20searchability%2C%20but%20that%20is%20only%20part%20of%20tool%20support.%20There%20are%20others.%20For%20example%2C%20ctags%20is%20a%20popular%20tool%20used%20with%20editors%20like%20Vim%3A%20I%20bet%20it%20does%20not%20support%20the%20new...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-13294","item_id":"_comm_13294"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_13294 == 'undefined' ){PDRTJS_468178_comm_13294 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_13294 );}}PDRTJS_settings_468178_comm_13210={"id":468178,"unique_id":"wp-comment-13210","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20been%20experimenting%20with%20the%20new%20auto%20everything%20style%20in%20C%2B%2B.%20I%20also%20make%20regular%20use%20of%20std%3A%3Aweak_ptr%2C%20often%20when%20passing%20a%20lambda%20to%20be%20evaluated%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-13210","item_id":"_comm_13210"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_13210 == 'undefined' ){PDRTJS_468178_comm_13210 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_13210 );}}PDRTJS_settings_468178_comm_12334={"id":468178,"unique_id":"wp-comment-12334","title":"%40Ralph%20Tandetzky%3A%20You%20can%20also%20say%20%26quot%3Bfor%20%28auto%20i%20%3D%200u%3B%20i%20%26lt%3B%20v.size%28%29%3B%20%2B%2Bi%29%20%7B%7D%26quot%3B.%20Notice%20the%20%26quot%3Bu%26quot%3B%20after%20the%20%26quot%3B0%26quot%3B%21...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12334","item_id":"_comm_12334"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12334 == 'undefined' ){PDRTJS_468178_comm_12334 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12334 );}}PDRTJS_settings_468178_comm_12227={"id":468178,"unique_id":"wp-comment-12227","title":"%26%23091%3B%26%238230%3B%26%23093%3B%20Sutter%26%238217%3Bs%20Guru%20of%20the%20Week%20article%20on%20Almost%20Always%20Auto%20is%20a%20tour%20de%20force%20covering%20everything%20you%20always%20wanted%20to%20know%20about%20%26%23091%3B%26%238230%3B%26%23093%3B...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12227","item_id":"_comm_12227"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12227 == 'undefined' ){PDRTJS_468178_comm_12227 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12227 );}}PDRTJS_settings_468178_comm_12196={"id":468178,"unique_id":"wp-comment-12196","title":"Some%20feedback%20from%20the%20trenches%3A%20I%20love%20auto.%20I%20use%20it%20all%20the%20time.%20It%26%23039%3Bs%20convenient.%20It%20simplifies%20refactoring.%20It%26%23039%3Bs%20useful%20in%20templated%20and%20non-templated%20code%20as%20well.%20Im%20using%20the%20%26lt%3Bcode%26gt%3B%20auto%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12196","item_id":"_comm_12196"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12196 == 'undefined' ){PDRTJS_468178_comm_12196 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12196 );}}PDRTJS_settings_468178_comm_12194={"id":468178,"unique_id":"wp-comment-12194","title":"On%20%26quot%3Bauto%20x%20%3D%20init%3B%20%26%23091%3B...%26%23093%3B%20It%20%26%23091%3B...%26%23093%3B%20guarantees%20that%20no%20implicit%20conversions%20%26%23091%3B...%26%23093%3B%20will%20occur.%26quot%3B%20Well%2C%20array-to-pointer%20and%20function-to-pointer%20conversions%20might%20occur.%20These%20conversions%20are%2C%20surely%2C...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12194","item_id":"_comm_12194"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12194 == 'undefined' ){PDRTJS_468178_comm_12194 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12194 );}}PDRTJS_settings_468178_comm_12191={"id":468178,"unique_id":"wp-comment-12191","title":"I%26%23039%3Bm%20curious%2C%20how%20it%20is%20supposed%20to%20use%20auto%20for%20classes%20w%2Fo%20copy%2Fmove%20constructors%3F%20For%20example%20if%20it%20contains%20std%3A%3Aatomic%20type%20and%20the%20only%20constructor%20with%20some%20parameters....","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12191","item_id":"_comm_12191"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12191 == 'undefined' ){PDRTJS_468178_comm_12191 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12191 );}}PDRTJS_settings_468178_comm_12190={"id":468178,"unique_id":"wp-comment-12190","title":"%40ned%20I%20believe%20the%20non-searchability%20isn%26%23039%3Bt%20that%20bad%20if%20you%20consider%20that%20at%20least%20the%20interfaces%20of%20the%20classes%2Ffunctions%20will%20have%20to%20explicitly%20state%20the%20type.%20Because%20of%20that%20I%20am%20not%20a%20big%20fa...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12190","item_id":"_comm_12190"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12190 == 'undefined' ){PDRTJS_468178_comm_12190 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12190 );}}PDRTJS_settings_468178_comm_12189={"id":468178,"unique_id":"wp-comment-12189","title":"%40J%20Guy%20Davidson%3A%20Actually%2C%20I%20also%20noticed%20that%20the%20example%20isn%26%23039%3Bt%20really%20relevant%20because%20it%20has%20nothing%20to%20do%20with%20auto%20--%20taking%20the%20address%20of%20an%20overloaded%20function%20and%20storing%20it%20directly%20in%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12189","item_id":"_comm_12189"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12189 == 'undefined' ){PDRTJS_468178_comm_12189 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12189 );}}PDRTJS_settings_468178_comm_12186={"id":468178,"unique_id":"wp-comment-12186","title":"I%20doubt%20the%20%26%23039%3Bauto%20x%20%3D%20type%7B%20init%20%7D%3B%26%23039%3B%20style%2C%20in%20place%20of%20the%20standard%20%26%23039%3Btype%20x%7Binit%7D%3B%26%23039%3B%2C%20is%20going%20to%20catch%20on.%20%20This%20is%20because%2C%20as%20noted%2C%20it%20cannot%20be%20used%20with%20types%20which%20are%20neither%20copyable%20nor...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12186","item_id":"_comm_12186"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12186 == 'undefined' ){PDRTJS_468178_comm_12186 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12186 );}}PDRTJS_settings_468178_comm_12185={"id":468178,"unique_id":"wp-comment-12185","title":"Excellent%20arguments.%20%20However%2C%20unless%20I%20don%26%23039%3Bt%20understand%20std%3A%3Afunction%20or%20these%20chaps%20http%3A%2F%2Fen.cppreference.com%2Fw%2Fcpp%2Futility%2Ffunctional%2Ffunction%20have%20got%20it%20wrong%2C%20there%26%23039%3Bs%20a%20misspelling%20in%20the%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12185","item_id":"_comm_12185"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12185 == 'undefined' ){PDRTJS_468178_comm_12185 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12185 );}}PDRTJS_settings_468178_comm_12174={"id":468178,"unique_id":"wp-comment-12174","title":"With%20all%20the%20issues%20about%20the%20readability%20of%20the%20type%20of%20an%20%26quot%3Bautoed%26quot%3B%20variable%2C%20we%20must%20see%20that%20what%20is%20more%20important%20is%20not%20the%20variable%20itself%2C%20but%20instead%20its%20initializer.%20Consider%20this%20someh...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12174","item_id":"_comm_12174"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12174 == 'undefined' ){PDRTJS_468178_comm_12174 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12174 );}}PDRTJS_settings_468178_comm_12170={"id":468178,"unique_id":"wp-comment-12170","title":"I%20didn%26%23039%3Bt%20quite%20follow%20why%20%26quot%3Bauto%20e%20%3D%20employee%7Bempid%7D%3B%26quot%3B%20is%20better%20than%20%26quot%3Bemployee%20e%7Bempid%7D%3B%26quot%3B.%20It%26%23039%3Bs%20more%20typing%20which%20is%20a%20%28tiny%29%20negative.%20Is%20it%20just%20for%20consistency%20with%20other%20declarations%3F...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12170","item_id":"_comm_12170"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12170 == 'undefined' ){PDRTJS_468178_comm_12170 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12170 );}}PDRTJS_settings_468178_comm_12168={"id":468178,"unique_id":"wp-comment-12168","title":"WRT%20%26quot%3Bvoid%26quot%3B%20being%20a%20type%2C%20I%26%23039%3Bve%20always%20wished%20that%20C%2B%2B%20would%20define%20%26quot%3Bvoid%26quot%3B%20as%20the%20base%20class%20for%20all%20types.%20%20This%20would%20permit%20all%20of%20the%20following%3A%26lt%3Bcode%26gt%3Bvoid%20%2A%20p%20%3D%20new%20string%28%26quot%3Bhello%26quot%3B%29%3B%20%2F%2Falready%20v...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12168","item_id":"_comm_12168"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12168 == 'undefined' ){PDRTJS_468178_comm_12168 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12168 );}}PDRTJS_settings_468178_comm_12167={"id":468178,"unique_id":"wp-comment-12167","title":"%40avjewe%3A%20Im%20taking%20my%20own%20advice%20and%20trying%20it%20out.%20I%20still%20forget%20sometimes%2C%20but%20so%20far%20the%20more%20I%20use%20it%20the%20more%20I%20like%20it.%40mttpd%3A%20Thanks%2C%20open%2Fclosed%20noted.%20Re%20decltype%28auto%29%3A%20Thats%20for%20somet...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12167","item_id":"_comm_12167"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12167 == 'undefined' ){PDRTJS_468178_comm_12167 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12167 );}}PDRTJS_settings_468178_comm_12163={"id":468178,"unique_id":"wp-comment-12163","title":"Think%20some%20of%20the%20comments%20given%20here%20are%20perhaps%20the%20most%20valid%20reason%20for%20not%20using%20auto%2C%20and%20that%20is%20lack%20of%20transparency%20resulting%20in%20the%20unexpected.%20Never%20a%20good%20thing%21Using%20auto%20where%20the%20g...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12163","item_id":"_comm_12163"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12163 == 'undefined' ){PDRTJS_468178_comm_12163 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12163 );}}PDRTJS_settings_468178_comm_12160={"id":468178,"unique_id":"wp-comment-12160","title":"I%20really%20like%20one%20more%20in%20C%2B%2B14%20upcoming%20application%20of%20auto%3AConsider%3A%26%23091%3Bcode%26%23093%3Bclass%20C%20%7Bprivate%3A%20%20%20%20%2F%2F%20real%20internal%20things%3A%20%20%20%20%2F%2F%20C%2B%2B11%3A%20%20%20%20class%20Internal%3B%20%20%20%20Internal%20doSomething%28%29%3B%20%20%20%20%20%20%20%20%2F%2F%20C%2B%2B1...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12160","item_id":"_comm_12160"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12160 == 'undefined' ){PDRTJS_468178_comm_12160 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12160 );}}PDRTJS_settings_468178_comm_12158={"id":468178,"unique_id":"wp-comment-12158","title":"See%20e.g.%20http%3A%2F%2Feigen.tuxfamily.org%2Fbz%2Fshow_bug.cgi%3Fid%3D505%20for%20bugs%2Fmisunderstandings%20involving%20expression%20templates%20and%20auto....","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12158","item_id":"_comm_12158"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12158 == 'undefined' ){PDRTJS_468178_comm_12158 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12158 );}}PDRTJS_settings_468178_comm_12151={"id":468178,"unique_id":"wp-comment-12151","title":"I%20personally%20prefer%20to%20use%20auto%20to%20declare%20local%20variables.%20But%20unfortunately%20there%20are%20some%20problems%20with%20auto%20and%20uniform%20initialization.%20Perhaps%20it%20is%20a%20good%20idea%20to%20shed%20some%20more%20light%20on%20th...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12151","item_id":"_comm_12151"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12151 == 'undefined' ){PDRTJS_468178_comm_12151 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12151 );}}PDRTJS_settings_468178_comm_12148={"id":468178,"unique_id":"wp-comment-12148","title":"Because%20of%20what%20Jeffrey%20Bosboom%20said%2C%20I%20think%20the%20my_vector_bool%20is%20a%20really%20bad%20example%2C%20since%20the%20following%20two%20code%20does%20something%20really%20different%20%28and%20because%20the%20vector%20specialization%20alrea...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12148","item_id":"_comm_12148"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12148 == 'undefined' ){PDRTJS_468178_comm_12148 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12148 );}}PDRTJS_settings_468178_comm_12147={"id":468178,"unique_id":"wp-comment-12147","title":"Do%20you%20have%20a%20reference%20to%20as_signed%2Fas_unsigned%20%3F...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12147","item_id":"_comm_12147"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12147 == 'undefined' ){PDRTJS_468178_comm_12147 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12147 );}}PDRTJS_settings_468178_comm_12145={"id":468178,"unique_id":"wp-comment-12145","title":"I%20must%20say%20that%20the%20following%20is%20very%20error-prone%3A%26%23091%3Bcode%26%23093%3B%20auto%20b1%20%3D%20my_vector_bool.back%28%29%3B%2F%2F%20...b1%20%3D%20true%3B%20%20%2F%2F%20Oops%21%20my_vector_bool%20changed%21%20%26%23091%3B%2Fcode%26%23093%3Bcompared%20to%20%26%23091%3Bcode%26%23093%3B%20bool%20b1%20%3D%20my_vector_bool.back...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12145","item_id":"_comm_12145"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12145 == 'undefined' ){PDRTJS_468178_comm_12145 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12145 );}}PDRTJS_settings_468178_comm_12144={"id":468178,"unique_id":"wp-comment-12144","title":"%26quot%3BQuick%20quiz%3A%20How%20many%20specific%20types%20are%20mentioned%20in%20that%20function%3F%20Name%20as%20many%20as%20you%20can....void%20some_function%28%20Container%26amp%3B%20c%2C%20const%20Value%26amp%3B%20v%20%29...%26quot%3BWhy%20is%20void%20not%20a%20specific%20type%3F...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12144","item_id":"_comm_12144"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12144 == 'undefined' ){PDRTJS_468178_comm_12144 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12144 );}}PDRTJS_settings_468178_comm_12142={"id":468178,"unique_id":"wp-comment-12142","title":"The%20comments%20given%20below%20have%20a%20little%20bug%3Aauto%20b1%20%3D%20my_vector_bool.back%28%29%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20to%20capture%20the%20proxyb1%20%3D%20true%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20write%20into%20my_vectorI%20think%20the%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12142","item_id":"_comm_12142"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12142 == 'undefined' ){PDRTJS_468178_comm_12142 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12142 );}}PDRTJS_settings_468178_comm_12141={"id":468178,"unique_id":"wp-comment-12141","title":"the%20codes%20and%20comments%20below%20have%20a%20little%20bug%3Aauto%20b1%20%3D%20my_vector_bool.back%28%29%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20to%20capture%20the%20proxyb1%20%3D%20true%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20write%20into%20my_vectorI%20think%20...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12141","item_id":"_comm_12141"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12141 == 'undefined' ){PDRTJS_468178_comm_12141 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12141 );}}PDRTJS_settings_468178_comm_12136={"id":468178,"unique_id":"wp-comment-12136","title":"Two%20points%20about%20auto%20and%20expression%20templates%3A--If%20you%20use%20%26%23039%3Bauto%20a%20%3D%20x%20%2A%205someliteral%26%23039%3B%20where%20%2A%20returns%20an%20expression%20template%2C%20that%20template%20has%20a%20reference%20to%20a%20temporary%20object%20that%20will%20be%20de...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12136","item_id":"_comm_12136"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12136 == 'undefined' ){PDRTJS_468178_comm_12136 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12136 );}}PDRTJS_settings_468178_comm_12133={"id":468178,"unique_id":"wp-comment-12133","title":"There%20is%20one%20major%20problem%20with%20your%20reasoning%2C%20and%20it%20can%20be%20nicely%20summed%20up%20in%20this%20sentence%3A%26quot%3BZilch.%20Not%20a%20single%20specific%20type%20appears%20anywhere%20in%20this%20code%2C%20and%20the%20lack%20of%20exact%20types%20makes...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12133","item_id":"_comm_12133"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12133 == 'undefined' ){PDRTJS_468178_comm_12133 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12133 );}}PDRTJS_settings_468178_comm_12132={"id":468178,"unique_id":"wp-comment-12132","title":"Another%20downside%20of%20using%20auto%20is%20search-ability%20-%20it%20makes%20it%20very%20hard%20to%20search%20a%20code%20base%20to%20find%20all%20the%20places%20that%20an%20object%20is%20used.%20%20This%20can%20be%20an%20issue%20re-factoring%20an%20interface%20-%20the...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12132","item_id":"_comm_12132"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12132 == 'undefined' ){PDRTJS_468178_comm_12132 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12132 );}}PDRTJS_settings_468178_comm_12131={"id":468178,"unique_id":"wp-comment-12131","title":"A%20few%20extra%20thoughts%20and%20a%20question%20%3B-%29%2A%20%26quot%3BCompile-time%20duck%20typing%26quot%3B%20is%20generally%20referred%20to%20as%20%26quot%3Bstructural%20typing%26quot%3B%20%28or%20%26quot%3Bproperty-based%20typing%26quot%3B%29%3Ahttps%3A%2F%2Fen.wikipedia.org%2Fwiki%2FStructural_type_syst...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12131","item_id":"_comm_12131"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12131 == 'undefined' ){PDRTJS_468178_comm_12131 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12131 );}}PDRTJS_settings_468178_comm_12130={"id":468178,"unique_id":"wp-comment-12130","title":"What%20if%20you%20want%20to%20use%20the%20default%20constructor%3FWould%20you%20still%20advocate%20auto%20x%20%3D%20type%7B%7Drather%20thantype%20x%3B%3F...","permalink":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/#comment-12130","item_id":"_comm_12130"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_12130 == 'undefined' ){PDRTJS_468178_comm_12130 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_12130 );}}
//--><!]]></script><script type='text/javascript' charset='UTF-8' src='https://polldaddy.com/js/rating/rating.js'></script><script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgjISczMAxpon2traGJkZGxiZGhskgUAFHlAaw=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s1.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"3379246","siteName":"Sutter\u2019s Mill","siteURL":"https:\/\/herbsutter.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/mistylook","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F","themeURL":"","xhrURL":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"8fb9818ae2","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"4590924cc6\" \/>","referer":"https:\/\/herbsutter.com\/2013\/08\/12\/gotw-94-solution-aaa-style-almost-always-auto\/","canFollow":"1","feedID":"171936","statusMessage":"","customizeLink":"https:\/\/herbsutter.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbsutter.wordpress.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F","postID":"2230","shortlink":"https:\/\/wp.me\/peb5Y-zY","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/herbsutter.com\/2230","statsLink":"https:\/\/wordpress.com\/stats\/post\/2230\/herbsutter.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: MistyLook","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 19,532 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2013%2F08%2F12%2Fgotw-94-solution-aaa-style-almost-always-auto%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVjcEOgjAQRH/IuoIYT8Zvqe2GLrQLdlvAv7ceJEYTEg+bTGbe7MA8KjNwQk7QCVicyOC47DvZwUcUshp9bokFPPUocM+Y0Wm2HuM3/CblwUkvjlrnyyWMv87GjraBWN10hKCloEWpYcIYyZb91fvzQ4ra9LJVMokGfpVWVehruFSnujo0x+Zcd0+y+3Rn'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'3379246','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'3379246','v':'wpcom','tz':'-8','user_id':'0','post':'2230','subd':'herbsutter'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d1TjBELytHc0k/MXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sNGpvZT1CP1o0ZitNdCU9TmRMYWw3TC1pb0JIcHdOfkNBOSZoeXBnaUIrcHVSWUlhbzVSTUlEW0E9NkR3OHNjeCt5YmtialBvZi1jVn4wLElKSUssSnF3P2gtaklHWGN+V19tLkpLTTI5YUFOV1BNV19EPUo9P21NRGFiRHl8aHxRTXxweFt2VHVYSDV0MnBKUFdVWjZDMXBGNkYzb1dZSV9vLi05d2s4WTU2LUlGVGEvTiVjXUYrUT9YbEI1M1FFLlVJTSx5dA=='}]);
_stq.push([ 'clickTrackerInit', '3379246', '2230' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>