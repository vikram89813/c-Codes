<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	
	>
<channel>
	<title>
	Comments on: Reader Q&#038;A: How to write a CAS loop using std::atomics	</title>
	<atom:link href="https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/feed/" rel="self" type="application/rss+xml" />
	<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/</link>
	<description>Herb Sutter on software development</description>
	<lastBuildDate>
	Mon, 19 Nov 2018 23:08:15 +0000	</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
			<item>
				<title>
				By: Vladimir Batov				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-18691</link>
		<dc:creator><![CDATA[Vladimir Batov]]></dc:creator>
		<pubDate>Fri, 18 Apr 2014 03:44:39 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-18691</guid>
					<description><![CDATA[Herb, feel free to ignore my previous comment. Found the place (that I missed the first time around, apologies) where you clearly state that for unique_ptr &quot;You still need to write the visible class’ destructor yourself&quot;... and, I believe, it is equally applicable for copy constructor and op=(). So, with that &quot;hassle&quot; I personally find unique_ptr usefullness quite questionale in the context of pimpl. But that&#039;s quite another matter. All the best,
Vladimir.]]></description>
		<content:encoded><![CDATA[<p>Herb, feel free to ignore my previous comment. Found the place (that I missed the first time around, apologies) where you clearly state that for unique_ptr &#8220;You still need to write the visible class’ destructor yourself&#8221;&#8230; and, I believe, it is equally applicable for copy constructor and op=(). So, with that &#8220;hassle&#8221; I personally find unique_ptr usefullness quite questionale in the context of pimpl. But that&#8217;s quite another matter. All the best,<br />
Vladimir.</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Vladimir Batov				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-18690</link>
		<dc:creator><![CDATA[Vladimir Batov]]></dc:creator>
		<pubDate>Fri, 18 Apr 2014 02:24:58 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-18690</guid>
					<description><![CDATA[Herb, &#039;ve come across your updated Pimpl-related GotW#100. There it says that &quot;the most appropriate choice is to hold the Pimpl object by unique_ptr&quot;. Very tempting indeed. However, I am under strong suspicion it won&#039;t work. Unlike shared_ptr, unique_ptr does not implement the incomplete-type management technique (for efficiency reasons) and, consequently, requires the internal implementation class to be a complete/visible/known type, i.e. it won&#039;t compile with only a forward declaration... that IMO beats the whole purpose of Pimpl, i.e. implementation hiding. I&#039;d love to be wrong but gcc-4.8 only confirmed my expectations.

Regards,
Vladimir.]]></description>
		<content:encoded><![CDATA[<p>Herb, &#8216;ve come across your updated Pimpl-related GotW#100. There it says that &#8220;the most appropriate choice is to hold the Pimpl object by unique_ptr&#8221;. Very tempting indeed. However, I am under strong suspicion it won&#8217;t work. Unlike shared_ptr, unique_ptr does not implement the incomplete-type management technique (for efficiency reasons) and, consequently, requires the internal implementation class to be a complete/visible/known type, i.e. it won&#8217;t compile with only a forward declaration&#8230; that IMO beats the whole purpose of Pimpl, i.e. implementation hiding. I&#8217;d love to be wrong but gcc-4.8 only confirmed my expectations.</p>
<p>Regards,<br />
Vladimir.</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Reader Q&#38;A: Is std::atomic_compare_exchange_* implementable?Main FunctionMain Function				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-18420</link>
		<dc:creator><![CDATA[Reader Q&#38;A: Is std::atomic_compare_exchange_* implementable?Main FunctionMain Function]]></dc:creator>
		<pubDate>Sat, 12 Apr 2014 07:57:17 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-18420</guid>
					<description><![CDATA[[&#8230;] bool compare_exchange_???(T&#038; expected, T desired, &#8230;);I notice you have mentioned (here reader-qa-how-to-write-a-cas-loop-using-stdatomics) that the committee had doubts whether it was a good idea. Your quote [&#8230;]]]></description>
		<content:encoded><![CDATA[<p>[&#8230;] bool compare_exchange_???(T&amp; expected, T desired, &#8230;);I notice you have mentioned (here reader-qa-how-to-write-a-cas-loop-using-stdatomics) that the committee had doubts whether it was a good idea. Your quote [&#8230;]</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Reader Q&#38;A: Is std::atomic_compare_exchange_* implementable? &#124; 51Main				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-18101</link>
		<dc:creator><![CDATA[Reader Q&#38;A: Is std::atomic_compare_exchange_* implementable? &#124; 51Main]]></dc:creator>
		<pubDate>Fri, 04 Apr 2014 03:56:14 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-18101</guid>
					<description><![CDATA[[&#8230;] bool compare_exchange_???(T&#038; expected, T desired, &#8230;);I notice you have mentioned (here reader-qa-how-to-write-a-cas-loop-using-stdatomics) that the committee had doubts whether it was a good idea. Your quote [&#8230;]]]></description>
		<content:encoded><![CDATA[<p>[&#8230;] bool compare_exchange_???(T&amp; expected, T desired, &#8230;);I notice you have mentioned (here reader-qa-how-to-write-a-cas-loop-using-stdatomics) that the committee had doubts whether it was a good idea. Your quote [&#8230;]</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Reader Q&#38;A: Is std::atomic_compare_exchange_* implementable? &#124; Sutter’s Mill				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-15454</link>
		<dc:creator><![CDATA[Reader Q&#38;A: Is std::atomic_compare_exchange_* implementable? &#124; Sutter’s Mill]]></dc:creator>
		<pubDate>Wed, 19 Feb 2014 18:31:59 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-15454</guid>
					<description><![CDATA[[&#8230;] bool compare_exchange_???(T&#038; expected, T desired, &#8230;);I notice you have mentioned (here reader-qa-how-to-write-a-cas-loop-using-stdatomics) that the committee had doubts whether it was a good idea. Your quote [&#8230;]]]></description>
		<content:encoded><![CDATA[<p>[&#8230;] bool compare_exchange_???(T&amp; expected, T desired, &#8230;);I notice you have mentioned (here reader-qa-how-to-write-a-cas-loop-using-stdatomics) that the committee had doubts whether it was a good idea. Your quote [&#8230;]</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Paul Coccoli				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-6028</link>
		<dc:creator><![CDATA[Paul Coccoli]]></dc:creator>
		<pubDate>Thu, 06 Sep 2012 00:20:56 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-6028</guid>
					<description><![CDATA[Am I right in that the behavior of the &#039;expected&#039; argument to compare_exchange is analogous to the behavior of the GCC intrinsic __sync_val_compare_and_swap()?  That intrinsic returns the value it found at the memory location, instead of a boolean, and therefore makes an explicit reload unnecessary, IIUC.]]></description>
		<content:encoded><![CDATA[<p>Am I right in that the behavior of the &#8216;expected&#8217; argument to compare_exchange is analogous to the behavior of the GCC intrinsic __sync_val_compare_and_swap()?  That intrinsic returns the value it found at the memory location, instead of a boolean, and therefore makes an explicit reload unnecessary, IIUC.</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Joe				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-6027</link>
		<dc:creator><![CDATA[Joe]]></dc:creator>
		<pubDate>Wed, 05 Sep 2012 23:39:01 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-6027</guid>
					<description><![CDATA[Would it be even better to do the initial load using a.load(std::memory_order_relaxed) ?  That would probably be most equivalent to the original implementation, wouldn&#039;t it?  It would also save you from the unnecessary synchronization on the load, and just rely on the CAS to keeps things atomic.]]></description>
		<content:encoded><![CDATA[<p>Would it be even better to do the initial load using a.load(std::memory_order_relaxed) ?  That would probably be most equivalent to the original implementation, wouldn&#8217;t it?  It would also save you from the unnecessary synchronization on the load, and just rely on the CAS to keeps things atomic.</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Javier Estrada				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-6011</link>
		<dc:creator><![CDATA[Javier Estrada]]></dc:creator>
		<pubDate>Tue, 04 Sep 2012 14:16:33 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-6011</guid>
					<description><![CDATA[Herb, where&#039;s the book ;-)

With the amount of work in my plate I rather read this emerging good advice and good practices in book form.

Cheers,
--Javier]]></description>
		<content:encoded><![CDATA[<p>Herb, where&#8217;s the book ;-)</p>
<p>With the amount of work in my plate I rather read this emerging good advice and good practices in book form.</p>
<p>Cheers,<br />
&#8211;Javier</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Herb Sutter				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-6001</link>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
		<pubDate>Mon, 03 Sep 2012 16:29:00 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-6001</guid>
					<description><![CDATA[@Amir: It must have taken time to refresh the front page -- it looks okay to me now.

@Pizer: The operation is a RMW (read-modify-write). So you have to do an initial load (which is atomic in itself), then the work (in this case a test since we need do nothing if the value is less than 0), then the update write (which is also atomic) -- and to make it all atomic, the update write has to test that the value hasn&#039;t changed, and if it has then do nothing (we&#039;re not atomic) and retry (until the whole transaction is atomic, not interleaved with something else). Note that, as the commentary says, the compare_exchange will again reload the current value on failure so you don&#039;t have to write an explicit equivalent &quot;old = a;&quot; inside the loop -- this is kind of subtle, but it&#039;s the way it was specified because it gives a slight performance advantage.]]></description>
		<content:encoded><![CDATA[<p>@Amir: It must have taken time to refresh the front page &#8212; it looks okay to me now.</p>
<p>@Pizer: The operation is a RMW (read-modify-write). So you have to do an initial load (which is atomic in itself), then the work (in this case a test since we need do nothing if the value is less than 0), then the update write (which is also atomic) &#8212; and to make it all atomic, the update write has to test that the value hasn&#8217;t changed, and if it has then do nothing (we&#8217;re not atomic) and retry (until the whole transaction is atomic, not interleaved with something else). Note that, as the commentary says, the compare_exchange will again reload the current value on failure so you don&#8217;t have to write an explicit equivalent &#8220;old = a;&#8221; inside the loop &#8212; this is kind of subtle, but it&#8217;s the way it was specified because it gives a slight performance advantage.</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Amir				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-5996</link>
		<dc:creator><![CDATA[Amir]]></dc:creator>
		<pubDate>Mon, 03 Sep 2012 08:34:35 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-5996</guid>
					<description><![CDATA[In the version that appears on the front page, you still have the  &quot;if( old &#062;= 0 ) break&quot; condition.
Sigh...I thought I was be the first one who noticed the bug :-)]]></description>
		<content:encoded><![CDATA[<p>In the version that appears on the front page, you still have the  &#8220;if( old &gt;= 0 ) break&#8221; condition.<br />
Sigh&#8230;I thought I was be the first one who noticed the bug :-)</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: pizer				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-5995</link>
		<dc:creator><![CDATA[pizer]]></dc:creator>
		<pubDate>Mon, 03 Sep 2012 07:38:48 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-5995</guid>
					<description><![CDATA[I don&#039;t understand why you put the old=a assignment out of the loop. Could you shed some more light on this, please? To me, it seems that it breaks the &quot;atomicity&quot; of the operation.]]></description>
		<content:encoded><![CDATA[<p>I don&#8217;t understand why you put the old=a assignment out of the loop. Could you shed some more light on this, please? To me, it seems that it breaks the &#8220;atomicity&#8221; of the operation.</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: Herb Sutter				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-5992</link>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
		<pubDate>Sun, 02 Sep 2012 14:35:16 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-5992</guid>
					<description><![CDATA[@MF: You&#039;re right. Fixed, thanks.]]></description>
		<content:encoded><![CDATA[<p>@MF: You&#8217;re right. Fixed, thanks.</p>
]]></content:encoded>
					</item>
						<item>
				<title>
				By: MF				</title>
				<link>https://herbsutter.com/2012/08/31/reader-qa-how-to-write-a-cas-loop-using-stdatomics/#comment-5989</link>
		<dc:creator><![CDATA[MF]]></dc:creator>
		<pubDate>Sun, 02 Sep 2012 08:30:27 +0000</pubDate>
		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1599#comment-5989</guid>
					<description><![CDATA[I hate to disappoint you on your holiday, but I think you have reversed the &#039;old &#062;= 0&#039; test between the second to last and the last version.]]></description>
		<content:encoded><![CDATA[<p>I hate to disappoint you on your holiday, but I think you have reversed the &#8216;old &gt;= 0&#8217; test between the second to last and the last version.</p>
]]></content:encoded>
					</item>
			</channel>
</rss>
