<!doctype html>
<html amp lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Trip report: Winter ISO C++ standards meeting (Jacksonville)" />
<meta property="og:url" content="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/" />
<meta property="og:description" content="[Edited to add C++20 schedule at end] On Saturday March 17, the ISO C++ committee completed its winter meeting in Jacksonville, Florida, USA, hosted with thanks by the Standard C++ Foundation and P…" />
<meta property="article:published_time" content="2018-04-03T02:06:02+00:00" />
<meta property="article:modified_time" content="2018-04-03T11:32:02+00:00" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png" />
<meta property="og:image:width" content="1357" />
<meta property="og:image:height" content="678" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:creator" content="@herbsutter" />
<meta name="twitter:site" content="@herbsutter" />
<meta name="twitter:text:title" content="Trip report: Winter ISO C++ standards meeting (Jacksonville)" />
<meta name="twitter:card" content="summary" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />

<!-- End Jetpack Open Graph Tags -->
	<title>Trip report: Winter ISO C++ standards meeting (Jacksonville) &#8211; Sutter’s Mill</title>
		<link rel="canonical" href="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/" />
	<script src="https://cdn.ampproject.org/v0.js" async></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic">	<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
		<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"BlogPosting","mainEntityOfPage":"https:\/\/herbsutter.com\/2018\/04\/02\/trip-report-winter-iso-c-standards-meeting-jacksonville\/","publisher":{"@type":"Organization","name":"Sutter\u2019s Mill","logo":{"@type":"ImageObject","url":"https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=60&d=https%3A%2F%2Fs0.wp.com%2Fi%2Ffavicons%2Fapple-touch-icon-60x60.png","width":60,"height":60}},"headline":"Trip report: Winter ISO C++ standards meeting (Jacksonville)","datePublished":"2018-04-02T18:06:02+00:00","dateModified":"2018-04-03T03:32:02+00:00","author":{"@type":"Person","name":"Herb Sutter"},"image":{"@type":"ImageObject","url":"https:\/\/herbsutter.files.wordpress.com\/2018\/04\/cpp11147020-201803.png","width":500,"height":250}}</script>
	<meta name="generator" content="AMP Plugin v0.6.2" />	<style amp-custom>
		/* Generic WP styling */

.alignright {
	float: right;
}

.alignleft {
	float: left;
}

.aligncenter {
	display: block;
	margin-left: auto;
	margin-right: auto;
}

.amp-wp-enforced-sizes {
	/** Our sizes fallback is 100vw, and we have a padding on the container; the max-width here prevents the element from overflowing. **/
	max-width: 100%;
	margin: 0 auto;
}

.amp-wp-unknown-size img {
	/** Worst case scenario when we can't figure out dimensions for an image. **/
	/** Force the image into a box of fixed dimensions and use object-fit to scale. **/
	object-fit: contain;
}

/* Template Styles */

.amp-wp-content,
.amp-wp-title-bar div {
		margin: 0 auto;
	max-width: 500px;
	}

html {
	background: #0a89c0;
}

body {
	background: #fff;
	color: #353535;
	font-family: 'Merriweather', 'Times New Roman', Times, Serif;
	font-weight: 300;
	line-height: 1.75em;
}

p,
ol,
ul,
figure {
	margin: 0 0 1em;
	padding: 0;
}

a,
a:visited {
	color: #0a89c0;
}

a:hover,
a:active,
a:focus {
	color: #353535;
}

/* Quotes */

blockquote {
	color: #353535;
	background: rgba(127,127,127,.125);
	border-left: 2px solid #0a89c0;
	margin: 8px 0 24px 0;
	padding: 16px;
}

blockquote p:last-child {
	margin-bottom: 0;
}

/* UI Fonts */

.amp-wp-meta,
.amp-wp-header div,
.amp-wp-title,
.wp-caption-text,
.amp-wp-tax-category,
.amp-wp-tax-tag,
.amp-wp-comments-link,
.amp-wp-footer p,
.back-to-top {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue", sans-serif;
}

/* Header */

.amp-wp-header {
	background-color: #0a89c0;
}

.amp-wp-header div {
	color: #fff;
	font-size: 1em;
	font-weight: 400;
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: .875em 16px;
	position: relative;
}

.amp-wp-header a {
	color: #fff;
	text-decoration: none;
}

/* Site Icon */

.amp-wp-header .amp-wp-site-icon {
	/** site icon is 32px **/
	background-color: #fff;
	border: 1px solid #fff;
	border-radius: 50%;
	position: absolute;
	right: 18px;
	top: 10px;
}

/* Article */

.amp-wp-article {
	color: #353535;
	font-weight: 400;
	margin: 1.5em auto;
	max-width: 840px;
	overflow-wrap: break-word;
	word-wrap: break-word;
}

/* Article Header */

.amp-wp-article-header {
	align-items: center;
	align-content: stretch;
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
	margin: 1.5em 16px 0;
}

.amp-wp-title {
	color: #353535;
	display: block;
	flex: 1 0 100%;
	font-weight: 900;
	margin: 0 0 .625em;
	width: 100%;
}

/* Article Meta */

.amp-wp-meta {
	color: #696969;
	display: inline-block;
	flex: 2 1 50%;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0 0 1.5em;
	padding: 0;
}

.amp-wp-article-header .amp-wp-meta:last-of-type {
	text-align: right;
}

.amp-wp-article-header .amp-wp-meta:first-of-type {
	text-align: left;
}

.amp-wp-byline amp-img,
.amp-wp-byline .amp-wp-author {
	display: inline-block;
	vertical-align: middle;
}

.amp-wp-byline amp-img {
	border: 1px solid #0a89c0;
	border-radius: 50%;
	position: relative;
	margin-right: 6px;
}

.amp-wp-posted-on {
	text-align: right;
}

/* Featured image */

.amp-wp-article-featured-image {
	margin: 0 0 1em;
}
.amp-wp-article-featured-image amp-img {
	margin: 0 auto;
}
.amp-wp-article-featured-image.wp-caption .wp-caption-text {
	margin: 0 18px;
}

/* Article Content */

.amp-wp-article-content {
	margin: 0 16px;
}

.amp-wp-article-content ul,
.amp-wp-article-content ol {
	margin-left: 1em;
}

.amp-wp-article-content amp-img {
	margin: 0 auto;
}

.amp-wp-article-content amp-img.alignright {
	margin: 0 0 1em 16px;
}

.amp-wp-article-content amp-img.alignleft {
	margin: 0 16px 1em 0;
}

/* Captions */

.wp-caption {
	padding: 0;
}

.wp-caption.alignleft {
	margin-right: 16px;
}

.wp-caption.alignright {
	margin-left: 16px;
}

.wp-caption .wp-caption-text {
	border-bottom: 1px solid #c2c2c2;
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0;
	padding: .66em 10px .75em;
}

/* AMP Media */

amp-carousel {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}
amp-iframe,
amp-youtube,
amp-instagram,
amp-vine {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}

.amp-wp-article-content amp-carousel amp-img {
	border: none;
}

amp-carousel > amp-img > img {
	object-fit: contain;
}

.amp-wp-iframe-placeholder {
	background: #c2c2c2 url( https://s2.wp.com/wp-content/plugins/amp/assets/images/placeholder-icon.png ) no-repeat center 40%;
	background-size: 48px 48px;
	min-height: 48px;
}

/* Article Footer Meta */

.amp-wp-article-footer .amp-wp-meta {
	display: block;
}

.amp-wp-tax-category,
.amp-wp-tax-tag {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 1.5em 16px;
}

.amp-wp-comments-link {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	text-align: center;
	margin: 2.25em 0 1.5em;
}

.amp-wp-comments-link a {
	border-style: solid;
	border-color: #c2c2c2;
	border-width: 1px 1px 2px;
	border-radius: 4px;
	background-color: transparent;
	color: #0a89c0;
	cursor: pointer;
	display: block;
	font-size: 14px;
	font-weight: 600;
	line-height: 18px;
	margin: 0 auto;
	max-width: 200px;
	padding: 11px 16px;
	text-decoration: none;
	width: 50%;
	-webkit-transition: background-color 0.2s ease;
			transition: background-color 0.2s ease;
}

/* AMP Footer */

.amp-wp-footer {
	border-top: 1px solid #c2c2c2;
	margin: calc(1.5em - 1px) 0 0;
}

.amp-wp-footer div {
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: 1.25em 16px 1.25em;
	position: relative;
}

.amp-wp-footer h2 {
	font-size: 1em;
	line-height: 1.375em;
	margin: 0 0 .5em;
}

.amp-wp-footer p {
	color: #696969;
	font-size: .8em;
	line-height: 1.5em;
	margin: 0 85px 0 0;
}

.amp-wp-footer a {
	text-decoration: none;
}

.back-to-top {
	bottom: 1.275em;
	font-size: .8em;
	font-weight: 600;
	line-height: 2em;
	position: absolute;
	right: 16px;
}
		/* Inline styles */
.amp-wp-inline-a6ec8840dd8107f0c4f9cbd7d00cece0{text-align:center;}.amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02{color:#339966;}	</style>
</head>

<body class="">

<header id="top" class="amp-wp-header">
	<div>
		<a href="https://herbsutter.com">
									<span class="amp-site-title">
				Sutter’s Mill			</span>
		</a>
	</div>
</header>

<article class="amp-wp-article">
	<header class="amp-wp-article-header">
		<h1 class="amp-wp-title">Trip report: Winter ISO C++ standards meeting (Jacksonville)</h1>
			<div class="amp-wp-meta amp-wp-byline">
					<amp-img src="https://secure.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=24&#038;d=identicon&#038;r=g" width="24" height="24" layout="fixed"></amp-img>
				<span class="amp-wp-author author vcard">Herb Sutter</span>
	</div>
<div class="amp-wp-meta amp-wp-posted-on">
	<time datetime="2018-04-02T18:06:02+00:00">
		8 months ago	</time>
</div>
	</header>

	
	<div class="amp-wp-article-content">
		<p><em>[Edited to add C++20 schedule at end]</em></p><p>On Saturday March 17, the ISO C++ committee completed its winter meeting in Jacksonville, Florida, USA, hosted with thanks by the <a href="http://isocpp.org/about">Standard C++ Foundation</a> and <a href="https://peren.com/">Perennial</a>. We had some 140 people at the meeting, representing 8 national bodies. As usual, we met for six days Monday through Saturday, including all evenings.</p><p>A special highlight was on Thursday evening (the only non-officially-working evening) when Bjarne Stroustrup personally hosted the entire committee for a celebratory dinner to share the <a href="https://isocpp.org/blog/2018/02/bjarne-stroustrup-receives-draper-prize-engineerings-top-u.s.-honor">2018 Charles Stark Draper Prize</a>, the U.S.’s top engineering honor, which this year was awarded for a programming language for only the second time in its history. Although the prize was awarded to Bjarne personally, he made it clear that he considered this an award for the whole C++ community, without whom C++ would never have been successful, and so he hosted the dinner for the committee as a representative proxy for the entire worldwide C++ community. — So to all C++ programmers and contributors who are reading this: Thank you, from Bjarne and from us, for your support, and consider yourselves part of this year’s Draper Prize.</p><p>The following are some highlights of what we achieved this week. You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>. The main things to note are:</p><ul><li>“IS” means “international standard.” In our case, it’s the core C++ standard itself. Think of this as “trunk.”</li>
<li>“TS” means “technical specification,” a document separate from the main standard where we can gain experience with new features before putting them into the IS. We have several of these, summarized on the <a href="http://isocpp.org/std/status">status page</a>. Think of these as “beta branches.”</li>
</ul><h2>Leading up to this meeting</h2><p>As I reported in my <a href="https://herbsutter.com/2017/11/11/trip-report-fall-iso-c-standards-meeting-albuquerque/">previous trip report</a> for the fall meeting (Albuquerque 2017), last time we almost completed addressing the comments received from national bodies in the Modules comment ballot that ran last summer. The rest were addressed in a series of teleconferences between meetings, and the <strong>Modules TS</strong> was finalized and shipped to ISO at the end of January.</p><p>One of the highlights in the pre-meeting mailing was <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0939r0.pdf"><strong>“Direction for ISO C++” (Beman Dawes, Howard Hinnant, Bjarne Stroustrup, Daveed Vandevoorde, Michael Wong)</strong></a>. Although non-binding, it’s the first set of recommendations from our recently created advisory Direction Group, a small subgroup of respected long-time participants that currently consists of those paper authors and is chaired this year by Bjarne Stroustrup.</p><h2>Features adopted for C++20</h2><p>We adopted several new features into the draft standard.</p><p><a href="https://wg21.link/p0840"><strong><em>[[no_unique_address]]</em> (Richard Smith).</strong></a> You know the empty base optimization (EBO)? If you do, can you remember the (probably many) times you’ve artificially made another class a base of your class, instead of just a data member, just so you could get EBO? And, every time that happened, you wished C++ had the empty member optimization (let’s call it “EMO”)? In C++20, it does, and you opt in via <em>[[no_unique_address]]</em>. Here’s an example from the paper:</p><pre>template&lt;typename Key, typename Value,
         typename Hash, typename Pred, typename Allocator&gt;
class hash_map {
<span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">  [[no_unique_address]]</span> Hash hasher;         // EMOji
<span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">  [[no_unique_address]]</span> Pred pred;           // EMOji
<span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">  [[no_unique_address]]</span> Allocator alloc;     // EMOji
  Bucket *buckets;
  // ...
public:
  // ...
};</pre><p><a href="https://wg21.link/p0479r2"><strong><em>[[likely]]</em> and </strong><strong><em>[[unlikely]]</em> (Clay Trychta).</strong></a> (The link is to R2 of the paper, which contains more description. The R4 version is the one that was adopted.) Many compilers already allow you to “hint” whether a branch is likely or unlikely to be true, which can help optimizations. This standardizes that. Here’s an example from the paper:</p><pre>if (foo()) <span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">[[unlikely]]</span> return false;
if (bar()) <span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">[[unlikely]]</span> return false;
baz();</pre><p>Major disclaimer: This feature comes with the same warning label as the existing compiler extensions, which is “measure, measure, measure!” Compilers already know which branches are likely, usually better than you do (especially with profile-guided optimization, aka PGO). A major reason to use this feature is not actually to optimize (though it can help if you don’t have PGO), but to control which path gets optimized for other reasons. For example, for some code it is essential to make the <em>uncommon</em> path faster so that it is faster when you do hit it — and in such cases you would actually use this attribute in the inverted sense, so please also write a comment nearby to document that intent otherwise some hapless reader (more than likely your future self) will be temporarily confused.</p><p><a href="https://wg21.link/p0355r7"><strong>Extending </strong><strong><em>&lt;chrono&gt;</em> to calendars and time zones (Howard Hinnant, Tomasz Kamiński).</strong></a> This is a much-loved (and huger-than-you-think) library addition that will help a lot of users, and really exercises modern C++ features like user-defined literals.</p><p><a href="https://wg21.link/p0122r7"><strong><em>span</em>: Bounds-safe views for sequences of objects (Neil MacIntosh, Stephan T. Lavavej).</strong></a> This one comes directly from the C++ Core Guidelines’ Guideline Support Library (GSL), and is intended to be a replacement especially for unsafe C-style (pointer,length) parameter pairs. We expect to be used pervasively as a vocabulary type for function parameters in particular.</p><h2>Cleanup adopted for C++20</h2><p>We also made some improvements to existing features.</p><p><a href="https://wg21.link/p0634"><strong>“Down with </strong><strong><em>typename</em>!” (Nina Ranns, Daveed Vandevoorde).</strong></a> Are you tired of writing <em>typename</em> redundantly in places where the compiler should know only a type was possible? So were the proposal authors. Now <em>typename</em> is required in fewer places.</p><p><a href="https://wg21.link/p0780"><strong>Lambda capture initializers can now expand variadic parameter packs (Barry Revzin).</strong></a> An example, taken from the paper:</p><pre>template&lt;class F, class... Args&gt;
auto delay_invoke(F f, Args... args) {
    return [f=std::move(f), <span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">...args=std::move(args)</span>]() -&gt; decltype(auto) {
        return std::invoke(f, args...);
    };
}</pre><p>The now-allowed expansion is the one in the third line.</p><p><a href="https://wg21.link/p0962"><strong>Consistent <em>begin</em>/<em>end</em> for range-<em>for</em> (Ville Voutilainen).</strong></a> The range-based <em>for</em> loop is already customizable, and can handle ranges that have both member <em>rng.begin()</em>/<em>rng.end()</em> functions or ones that have non-member <em>begin(rng)</em>/<em>end(rng)</em> functions. But what if it relies on the non-member functions, but happens to also have one member named either <em>begin</em> or <em>end</em> (such as, say, <em>end</em> in <em>ios_base</em>)? That’s now legal, we ignore the one-off member and use the non-member pair. Here’s an example from the paper that is not legal in C++17 but now works in C++20:</p><pre>struct X : std::stringstream { /*...*/ };

std::istream_iterator&lt;char&gt; begin(X&amp; x)
  { return std::istream_iterator&lt;char&gt;(x); }

std::istream_iterator&lt;char&gt; end(X&amp; x)
  { return std::istream_iterator&lt;char&gt;(); }

int main() {
    X x;
<span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">    for (auto&amp;&amp; i : x) {   // works in C++20
</span>      // ...
    }
}</pre><p>Interesting tidbit: This is one of those “new functionality” features created by removing wording in the standard, namely removing a restriction. The entire wording change was to change “either (or both) finds” to “both find” in one place.</p><p><a href="https://wg21.link/p0969"><strong>Structured bindings can access accessible members (Timur Doumler).</strong></a> In C++17, you could use structured bindings to bind to class members as long as they were public. But what if you’re inside a member or friend of the class? Shouldn’t you be able to use structured bindings on members, which are visible (i.e., accessible) to you even if they aren’t public to everyone, just like we can do any other normal thing with those members? In C++17 that didn’t work, but it was an oversight and now we can do that:</p><pre>class X {
    int i;
    int j;
public:
    friend void f();
};

void f() {
    X x;
<span class="amp-wp-inline-8dff6cec9d7069536b1f8297fd4c1b02">    auto [myi, myj] = x;   // now ok</span>
}</pre><p>We also adopted some other fixes, including:</p><ul><li><a href="https://wg21.link/p0961"><strong>Structured bindings </strong><strong><em>get&lt;&gt;</em> lookup relaxations (Ville Voutilainen)</strong></a> to make the <em>get&lt;&gt;</em> customization point a little more general and easier to use, such as for types that happens to also have an unrelated member non-template <em>.get()</em> (like smart pointers).</li>
<li><a href="https://wg21.link/p0905r1"><strong>Symmetry for spaceship (Tomasz Kamiński, Herb Sutter, Richard Smith)</strong></a> to make <em>&lt;=&gt;</em> itself symmetric the way <em>&lt;=&gt;</em> already made the two-way comparisons symmetric.</li>
<li><a href="https://wg21.link/p0551r3"><strong>Thou shalt not specialize </strong><strong><em>std</em> function templates! (Walter E. Brown)</strong></a>, which should be read with the addendum “or take their addresses” (that last part continues to be discussed).</li>
<li><a href="https://wg21.link/p0754r2"><strong><em>&lt;version&gt;</em> (Alan Talbot)</strong></a> described as “for those people who dislike <em>&lt;iso646&gt;</em>.”</li>
</ul><p>… and a few more including a couple of small extensions to <strong>coroutines</strong> and <strong>networking</strong>. Note that those two TSes were already published, and are not yet merged into the C++ draft standard, but we are still maintaining those experimental TS “branches” with fixes and updates, so that those will be done and ready once we are ready to merge those TS branches into the C++ “trunk” project itself.</p><h2>Other major full committee approvals</h2><p>We approved <strong>Parallelism TS 2</strong> to be extended with the (huge) extensions in <a href="https://wg21.link/p0214r9"><strong>Data-parallel vector types and operations (Matthias Kretz)</strong></a> and declared it <strong>feature-complete</strong>: It is now being sent out for its main ISO comment ballot.</p><p>We also decided to officially open a <strong>Reflection TS</strong> work item, which means that the committee as a whole is taking ownership of the proposal and intends to progress it as a TS. The initial content is from the paper <a href="https://wg21.link/p0194r6"><strong>“Static reflection” (Matúš Chochlík, Axel Naumann, David Sankel)</strong></a> but everyone should understand that the surface syntax will change. The primary point of the TS is in the underlying “engine” and functionality, and the intention is to replace the placeholder template-metaprogramming-like <em>reflexpr</em> syntax with an object-like model that looks like “more <em>constexpr</em> code” — regular C++ code that is able to be run at compile time.</p><h2>Language/library evolution subgroup approvals</h2><p>Here is a list of proposals that achieved Evolution or Library Evolution working group (EWG or LEWG) design approval. This means that the subgroup responsible for approving the design has done so (sometimes provisionally, with a few “revision is expected” notes below), and the next step is that they now enter wording review in the Core or Library working group (CWG or LWG), and are slated to be proposed for formal adoption in C++20 at a future meeting. Thanks to Olivier Giroux, Ville Voutilainen, Titus Winters for their notes that contributed to this summary.</p><p>For <strong>contracts</strong>, EWG discussed a clarification to what the result of observable side-effects in contract pre/post-conditions is, and the guidance is that it’s undefined behavior.</p><p>For <strong>reflection</strong> and related facilities, EWG approved some papers that are significant milestones for compile-time programming:</p><ul><li><a href="https://wg21.link/p0670"><strong>“Static reflection of functions” (Matúš Chochlík, Axel Naumann, David Sankel)</strong></a>, which would extend the reflection proposal to functions and parameters.</li>
<li><a href="https://wg21.link/p0784"><strong>“Standard containers and </strong><strong><em>constexpr</em>” (Louis Dionne, Richard Smith, Nina Ranns, Daveed Vandevoorde)</strong></a> which would permit <em>constexpr</em> objects to have destructors and use dynamic memory allocation — stop, pause, and reflect[sic] on just what those two features imply: compile-time resource-managing types like <em>constexpr vector&lt;std::metainfo&gt;</em>. Sends shivers down your spine (in a good way), doesn’t it?</li>
<li><a href="https://wg21.link/p0732"><strong>“Class types in non-type template parameters” (Jeff Snyder)</strong></a>, which would permit template non-type parameters of user-defined type, and enables instantiating templates with values such as compile-time strings.</li>
</ul><p>EWG also approved:</p><ul><li><a href="https://wg21.link/p0482"><strong>“</strong><strong><em>char8_t</em>: A type for UTF-8 characters and strings” (Tom Honermann)</strong></a></li>
<li><a href="https://wg21.link/p0892"><strong>“</strong><strong><em>explicit(bool)</em>” (Barry Revzin)</strong></a></li>
<li><a href="https://wg21.link/p0929"><strong>“Checking for abstract class types” (Jens Maurer)</strong></a></li>
</ul><p>We also decided to pursue putting in writing two statements about <strong>how we evolve C++</strong>:</p><ul><li>EWG decided to pursue turning <a href="https://wg21.link/p0684"><strong>“C++ Stability, Velocity, and Deployment Plans” (Titus Winters)</strong></a> into a Standing Document, with the expectation is that the document will be revised and reviewed again. Titus Winters will be the main author, and Gabriel Dos Reis, Bjarne Stroustrup, and Mike Spertus will assist.</li>
<li>EWG also supports turning <a href="https://wg21.link/p0921"><strong>“Standard library compatibility promises” (Titus Winters)</strong></a> into a Standing Document, and to add the promises also to the standard’s own Library Introduction clause. Titus Winters will be the main author, with help from Ashley Hedberg, Nevin Liber, Bjarne Stroustrup, James Dennett, Walter E. Brown, Gor Nishanov, Alisdair Meredith, Mike Spertus, Robert Steagall and Daveed Vandevoorde.</li>
</ul><p>We decided to launch a systematic effort to drive out the remaining uses of <strong>macros</strong> by providing replacements for those uses. We requested an analysis paper listing all the remaining use cases for macros are, a description of the status of the non-macro solutions for those problems, and possible solutions. This paper will be led by Ville Voutilainen, assisted by Bjarne Stroustrup, Gabriel Dos Reis, James Dennett, and Vittorio Romeo.</p><p>Somewhat stunningly (to me), we decided to pursue some <strong>cleanup to the C fundamental types</strong> that would be a breaking change to certain kinds of C and C++17 code. It came up via the discussion of <a href="https://wg21.link/p0946"><strong>“Towards consistency between </strong><strong><em>&lt;=&gt;</em> and other comparison operators” (Richard Smith)</strong></a>, which observed that when we added <em>&lt;=&gt;</em> to C++20, in <em>&lt;=&gt;</em> only we deliberately decided not to repeat the well-known issues that we did not want to perpetuate with C’s two-way comparisons for fundamental types (e.g., signed-unsigned comparison surprises like <em>-1 &lt; 0u</em> giving the “wrong” answer)… which naturally meant that we now have inconsistencies between the preexisting two-way comparison operators and the shiny new three-way <em>&lt;=&gt;</em> operator. When faced with this, the subgroup discovered that we had a consensus in the room that enough really was enough, and we decided to seriously investigate doing some housecleaning and fix those things even though that would include breaking changes to (mostly ill-behaved) C and C++17 code. For example, we are now on a path to pursue deprecating or outright removing the ability to compare two unrelated enumerations (which is just plain suspicious code), and to require <em>-1 &lt; 0u</em> to give the mathematically correct answer even when in the worst case that means generating two comparison machine instructions instead of just one (any code that does such ill-advised things would change from being a correctness problem into “just” a one-extra-instruction performance problem). — We have made no decisions about actually doing this or the ship vehicle for such changes, which likely would have to be rolled out in stages via deprecation followed by removel, and we expect more data to be gathered before Rapperswil regarding how much code could be affected. But as far as I can recall, this is the most breaking-change cleanup to C’s fundamental types that we have ever been willing to seriously consider.</p><p>LEWG approved <a href="https://wg21.link/p0898"><strong>Standard library concepts (Casey Carter)</strong></a>. This is the first part of the Ranges TS to be on track for merging into C++20 at an upcoming meeting, and contains the core concepts from the Ranges TS. It is also the first appearance of the <strong>concepts</strong> language feature in the standard library.</p><h2>Other progress</h2><p>Also for <strong>concepts</strong>, at this meeting EWG approved pursuing a direction based on my paper <a href="https://wg21.link/p0745"><strong>“Concepts in-place syntax” (Herb Sutter)</strong></a> to have a shorthand syntax for declaring constrained templates.</p><p>At this meeting, we considered further improvements to the <strong>modules</strong> design, including a renewed proposal focusing on a bridge to help existing header-based code move toward a modules-enabled world. By the end of the meeting, the main participants had hammered out a plan to, over the next few meetings:</p><ul><li>move a core set of modules functionality into C++20 that is “clean” and uncompromised by legacy concerns; and</li>
<li>concurrently update the remaining modules TS with features specific to transitioning header-based code to modules, which might include support for macros.</li>
</ul><p>There’s a lot of work remaining, but we’ll know in the next few meetings how the objectives are progressing.</p><p>After several years of incubation, <strong>executors</strong> are now making strong progress and are on track to become a TS in the C++20 timeframe. (Let me explicitly say “<strong>thread pools</strong>” for the benefit of those who are Ctrl-F’ing to find out how C++ intends to support modern thread pools such as in Windows 10 and Grand Central Dispatch. You’re now in the right place: Modern thread pool support is coming as part of executors.)</p><p>Note that there is a dependency on executors before we can merge the <strong>networking</strong> TS and the future.then feature in the <strong>concurrency</strong> TS into the C++ draft standard, which means that all of those features are likely to be merged early in the C++23 cycle rather than in C++20.</p><p>We are going to try to ship <strong>coroutines</strong> in C++20.</p><p>We are opening a new work item for <strong>Library Fundamentals TS3</strong>, the third batch of library additions, even as we will soon be starting to fold in material from the recently-published Library Fundamentals TS2 into C++20.</p><p><strong>SG15 (Tooling) (Titus Winters)</strong> had its first meeting, and there is a shared belief that we need to take concrete steps toward enabling better support for tools for two things in particular: modules, and C++ library package managers. That coincided very nicely with the <a href="https://isocpp.org/blog/2018/03/results-summary-cpp-foundation-developer-survey-lite-2018-02">2018-02 isocpp.org survey</a>, where on the open-ended question 10, the #1 write-in answer was to request “dependencies / package manager” (15% of all write-ins mentioned that). Clearly there is interest in this area, and it will be interesting to see how this develops into proposals over the coming meetings.</p><p>We also created a new study group <strong>SG16 (Unicode)</strong> with Tom Honermann as the SG chair.</p><h2>What’s next</h2><p>Whew! Here is a cheat-sheet summary of our current expectations for some of the major pieces of work that are not already in draft C++20. Note that this is an estimate only.</p><p class="amp-wp-inline-a6ec8840dd8107f0c4f9cbd7d00cece0"><amp-img class="alignnone size-full wp-image-3665 amp-wp-enforced-sizes" src="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500" alt="cpp11147020 - 201803" srcset="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=768 768w" sizes="(min-width: 500px) 500px, 100vw" width="500" height="250"></amp-img></p><p>And here is an updated snapshot of where we are on the timeline for C++20 and the TSes that are completed, in flight, or expected to begin:</p><p class="amp-wp-inline-a6ec8840dd8107f0c4f9cbd7d00cece0"><amp-img class="alignnone size-full wp-image-3666 amp-wp-enforced-sizes" src="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500" alt="wg21-timeline-2018-03.png" srcset="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=768 768w" sizes="(min-width: 500px) 500px, 100vw" width="500" height="345"></amp-img></p><p>Finally, here is the schedule for the C++20 cycle approved by unanimous consent at this meeting:</p><p class="amp-wp-inline-a6ec8840dd8107f0c4f9cbd7d00cece0"><amp-img class="alignnone size-full wp-image-3671 amp-wp-enforced-sizes" src="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500" alt="wg21-schedule-2018-03" srcset="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=768 768w" sizes="(min-width: 500px) 500px, 100vw" width="500" height="275"></amp-img></p><p>Thank you again to the approximately 140 experts who attended this meeting, and the many more who participate in standardization through their national bodies! Have a good spring… we look forward now to our next meetings in June (Rapperswil, Switzerland) and November (San Diego, CA, USA).</p>	</div>

	<footer class="amp-wp-article-footer">
			<div class="amp-wp-meta amp-wp-tax-category">
		Categories: <a href="https://herbsutter.com/category/uncategorized/" rel="category tag">Uncategorized</a>	</div>

		<div class="amp-wp-meta amp-wp-comments-link">
		<a href="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/#comments">
			View Comments		</a>
	</div>
	</footer>
</article>

<footer class="amp-wp-footer">
	<div>
		<h2>Sutter’s Mill</h2>
		<p>
			<a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a>
		</p>
		<a href="#top" class="back-to-top">Back to top</a>
	</div>
</footer>


	<amp-pixel src="https://pixel.wp.com/b.gif?rand=RANDOM&#038;host=herbsutter.com&#038;ref=DOCUMENT_REFERRER&#038;amp=1&#038;blog=3379246&#038;v=wpcom&#038;tz=-8&#038;user_id=0&#038;post=3664&#038;subd=herbsutter"></amp-pixel>
	<amp-pixel src="https://pixel.wp.com/b.gif?rand=RANDOM&#038;v=wpcom-no-pv&#038;crypt=UE40eW5QN0p8M2Y%2FRE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29%2BSmw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8%2FMkNtblkvY1d1TjBELytHc0k%2FMXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sLnxYY2ZzcS9MM3N2cDh4Yk40dCZtMERWRHZldWt5LHprU2QlSU9QVFZRYS55UGRjL3BiVHptfjZoM3Y2QW1GQXNLWCVDUG4tOGlhUzYlQy9Wb1haM2tYMkltLE56MzQ5Nmp5XQ%3D%3D"></amp-pixel>
	
</body>
</html>
