<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Effective Concurrency: Eliminate False Sharing | Sutter’s Mill</title>
<link rel="pingback" href="https://herbsutter.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"typekit":{"id":"eyo0tqd"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active #header h1{font-size:2.12em;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active body{font-size:89.7%;font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation{font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation ul li.search{font-size:1.06em}.wf-active #navigation ul li.search input#searchsubmit{font-size:1.06em}.wf-active #content .post-info, .wf-active #content .postmetadata{font-size:1.06em}.wf-active #sidebar{font-size:1.06em}.wf-active #footer p.right{font-size:1.06em}.wf-active .commentnum{font-size:1.77em}.wf-active .commentlist li .cmtinfo{font-size:1.18em}.wf-active .commentlist li .cmtinfo em{font-size:1.06em}.wf-active #respond label{font-size:11.8px}.wf-active #respond .required{font-size:11.8px}.wf-active #respond .subscribe-label{font-size:14.2px}.wf-active #respond .comment-notes{font-size:13px}.wf-active .wp-caption p.wp-caption-text{font-size:13px}.wf-active #content h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active #header h2{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active #content h3{font-size:1.65em;font-weight:400;font-style:normal}.wf-active #content h4{font-size:1.3em;font-style:normal;font-weight:400}.wf-active #content h5{font-size:1.18em;font-style:normal;font-weight:400}.wf-active #content .post h2{font-size:1.65em;font-weight:400;font-style:normal}.wf-active li.sidebox h2{font-weight:400;font-size:1.89em;font-style:normal}.wf-active .post h4{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active .post h4 em{font-style:normal;font-weight:400}</style>
		<script src='https://r-login.wordpress.com/remote-login.php?action=js&amp;host=herbsutter.com&amp;id=3379246&amp;t=1542966008&amp;back=https%3A%2F%2Fherbsutter.com%2F2009%2F05%2F15%2Feffective-concurrency-eliminate-false-sharing%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//herbsutter.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Feed" href="https://herbsutter.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Comments Feed" href="https://herbsutter.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Effective Concurrency: Eliminate False&nbsp;Sharing Comments Feed" href="https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNkN1uwjAMhV9onsUG69W0Z0laE0zzp8QR6tvjUlUCwSpuonOS81knxkuGPkWhKBgaZN8cx4qeR6p4JsmmH+HmPvtaP/B1nOORI8uEcqKgYG4WA1eZfErjFtinQnofspE5EWhgQ15nRNnCQv5ZqVmetORmv0vWNFibC9UKegZuAZayT9wKuabWUnEwt0Tb2A9ofbotxBZTJpx/SE8DXi3hn+h9Rx4cSUVJGXKqqt5GaurZeGCNPJoFZoxJlsdVbE11lEB/aYRTfDBw9IbLFlpI9+NUOtTUnZ2hv/C7O+y/uu9uf+jOV8Xg7sY=?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyFztEKwjAMBdAfsquTiXsRv6XWOFKXtDbphn69HeiDMBQCgdzDJXZOBtmP5QJiQ517gfx4rybIxv4ChnDITqEh5A/2kRVYF0vxjCOYIpDdUG+16BpXXIqiBCIVraTfLyFPCPNfFkCT8zeTQfC5tJ7o2Hb9Yde3+24bXjRNW9I='></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbsutter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='You Know When Your UI Needs Help&nbsp;When&hellip;' href='https://herbsutter.com/2009/05/01/you-know-when-your-ui-needs-help-when/' />
<link rel='next' title='VS2010 Beta 1 Now&nbsp;Available' href='https://herbsutter.com/2009/05/20/vs2010-beta-1-now-available/' />
<meta name="generator" content="WordPress.com" />
<link rel="canonical" href="https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/" />
<link rel='shortlink' href='https://wp.me/peb5Y-40' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/?format=json&amp;url=https%3A%2F%2Fherbsutter.com%2F2009%2F05%2F15%2Feffective-concurrency-eliminate-false-sharing%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/?format=xml&amp;url=https%3A%2F%2Fherbsutter.com%2F2009%2F05%2F15%2Feffective-concurrency-eliminate-false-sharing%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Effective Concurrency: Eliminate False Sharing" />
<meta property="og:url" content="https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/" />
<meta property="og:description" content="This month’s Effective Concurrency column, “Eliminate False Sharing”, is now live on DDJ’s website. People keep writing asking me about my previous mentions of false sharing, even debating whether …" />
<meta property="article:published_time" content="2009-05-15T18:51:38+00:00" />
<meta property="article:modified_time" content="2009-05-15T18:53:07+00:00" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=200&amp;ts=1542966008" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:text:title" content="Effective Concurrency: Eliminate False&nbsp;Sharing" />
<meta name="twitter:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=240" />
<meta name="twitter:card" content="summary" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=114" />
<link rel='openid.server' href='https://herbsutter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://herbsutter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<script type="text/javascript" id="webfont-output">
  
  WebFontConfig = {"typekit":{"id":"cjs1oxc"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Sutter’s Mill" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Herb Sutter on software development" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbsutter.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="This month’s Effective Concurrency column, “Eliminate False Sharing”, is now live on DDJ’s website. People keep writing asking me about my previous mentions of false sharing, even debating whether it’s really a problem. So this month I decided to treat it in depth, including: A compelling and realistic example where just changing a couple of&hellip;" />
<style type="text/css">
			#header h1 a,
		#header h2 {
			color: #265E15 !important;
		}
				#headerimage {
			background: url('https://herbsutter.files.wordpress.com/2011/10/cropped-blog-header.jpg') no-repeat;
			height: 200px;
		}
	</style>
<link rel="amphtml" href="https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/amp/"><style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s2.wp.com/?custom-css=1&#038;csblog=eb5Y&#038;cscache=6&#038;csrev=60" />
		</head>
<body id="section-index" class="post-template-default single single-post postid-248 single-format-standard mp6 customizer-styles-applied highlander-enabled highlander-light">


<div id="navigation" class="clearfix">
		<div class="menu">
		<ul>
			<li ><a href="https://herbsutter.com/" title="Home">Home</a></li>
			<li class="page_item page-item-912"><a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the&nbsp;Jungle</a></li>
<li class="page_item page-item-864 page_item_has_children"><a href="https://herbsutter.com/gotw/">GotW</a></li>
<li class="page_item page-item-761"><a href="https://herbsutter.com/elements-of-modern-c-style/">Elements of Modern C++&nbsp;Style</a></li>
<li class="page_item page-item-2 page_item_has_children"><a href="https://herbsutter.com/about/">About</a></li>
									<li class="search"><form method="get" id="searchform" action="https://herbsutter.com"><input type="text" class="textbox" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></form></li>
					</ul>
	</div>
</div><!-- end id:navigation -->

<div id="container">

<div id="header">
<h1><a href="https://herbsutter.com/" title="Sutter’s Mill">Sutter’s Mill</a></h1>
<h2>Herb Sutter on software development</h2>
</div><!-- end id:header -->


	
		<div id="feedarea">
	<dl>
		<dt><strong>Feeds:</strong></dt>

			<dd><a href="https://herbsutter.com/feed/">Posts</a></dd>
	
			<dd><a href="https://herbsutter.com/comments/feed/">Comments</a></dd>
		</dl>
	</div><!-- end id:feedarea -->
	
	<div id="headerimage">
</div><!-- end id:headerimage -->

<div id="content">
<div id="content-main">

		
									<div class="postnav">
				<div class="alignleft">&laquo; <a href="https://herbsutter.com/2009/05/01/you-know-when-your-ui-needs-help-when/" rel="prev">You Know When Your UI Needs Help&nbsp;When&hellip;</a></div>
				<div class="alignright"><a href="https://herbsutter.com/2009/05/20/vs2010-beta-1-now-available/" rel="next">VS2010 Beta 1 Now&nbsp;Available</a> &raquo;</div>
			</div>
			
			<div class="post-248 post type-post status-publish format-standard hentry category-c-net category-c category-concurrency category-hardware category-software-development" id="post-248">
				<div class="posttitle">
					<h2>Effective Concurrency: Eliminate False&nbsp;Sharing</h2>
					<p class="post-info">2009-05-15 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p>This month’s <strong>Effective Concurrency</strong> column, <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217500206">“Eliminate False Sharing”</a><strong></strong>, is now live on DDJ’s website.</p>
<p>People keep writing asking me about my previous mentions of false sharing, even debating whether it’s really a problem. So this month I decided to treat it in depth, including:</p>
<ul>
<li>A compelling and realistic example where just changing a couple of lines to remove false sharing takes an algorithm from zero scaling to perfect scaling – even when many threads are merely doing reads. Hopefully after this nobody will argue that false sharing isn’t a problem. :-)</li>
<li>How your performance monitoring and analysis tools do and/or don’t help you uncover the problem, and how to use them effectively to identify the culprit. Short answer: CPU activity monitors aren’t very helpful, but cycles-per-instruction (CPI) and cache miss rate measurements attributed to specific lines of source code are your friend.</li>
<li>The two ways to correct the code: Reduce the frequency of writes to the too-popular cache line, or add padding to move other data off the line.</li>
<li>Reusable code in C++ and C#, and a note about Java, that you can use to use padding (and alignment if available) to put frequently-updated objects on their own cache lines.</li>
</ul>
<p>From the article:</p>
<blockquote>
<p>In two previous articles I pointed out the performance issue of false sharing (aka cache line ping-ponging), where threads use different objects but those objects happen to be close enough in memory that they fall on the same cache line, and the cache system treats them as a single lump that is effectively protected by a hardware write lock that only one core can hold at a time. … It’s easy to see why the problem arises when multiple cores are writing to different parts of the same cache line… In practice, however, it can be even more common to encounter a reader thread using what it thinks is read-only data still getting throttled by a writer thread updating a different but nearby memory location…</p>
<p>A number of readers have asked for more information and examples on where false sharing arises and how to deal with it. … This month, let’s consider a concrete example that shows an algorithm <em>in extremis </em>due to false sharing distress, how to use tools to analyze the problem, and the two coding techniques we can use to eliminate false sharing trouble. …</p>
</blockquote>
<p>I hope you enjoy it. Finally, here are links to previous Effective Concurrency columns:</p>
<blockquote>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/200001985">The Pillars of Concurrency</a> (Aug 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/201202924">How Much Scalability Do You Have or Need?</a> (Sep 2007) </p>
<p><a href="http://ddj.com/cpp/201804238">Use Critical Sections (Preferably Locks) to Eliminate Races</a> (Oct 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/202401098">Apply Critical Sections Consistently</a> (Nov 2007) </p>
<p><a href="http://ddj.com/architect/202802983">Avoid Calling Unknown Code While Inside a Critical Section</a> (Dec 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/204801163">Use Lock Hierarchies to Avoid Deadlock</a> (Jan 2008) </p>
<p><a href="http://www.ddj.com/cpp/205900309">Break Amdahl’s Law!</a> (Feb 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206100542">Going Superlinear</a> (Mar 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206903306">Super Linearity and the Bigger Machine</a> (Apr 2008) </p>
<p><a href="http://ddj.com/architect/207100682">Interrupt Politely</a> (May 2008) </p>
<p><a href="http://ddj.com/architect/208200273">Maximize Locality, Minimize Contention</a> (Jun 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/208801371">Choose Concurrency-Friendly Data Structures</a> (Jul 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/209900973">The Many Faces of Deadlock</a> (Aug 2008) </p>
<p><a href="http://www.ddj.com/cpp/210600279">Lock-Free Code: A False Sense of Security</a> (Sep 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/210604448">Writing Lock-Free Code: A Corrected Queue</a> (Oct 2008) </p>
<p><a href="http://www.ddj.com/cpp/211601363">Writing a Generalized Concurrent Queue</a> (Nov 2008) </p>
<p><a href="http://www.ddj.com/cpp/211800538">Understanding Parallel Performance</a> (Dec 2008)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212201163">Measuring Parallel Performance: Optimizing a Concurrent Queue</a> (Jan 2009)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212701484">volatile vs. volatile</a> (Feb 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=214100002">Sharing Is the Root of All Contention</a> (Mar 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=215900465">Use Threads Correctly = Isolation + Asynchronous Messages</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=216500409">“Use Thread Pools Correctly: Keep Tasks Short and Nonblocking”</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217500206">“Eliminate False Sharing”</a> (May 2009)</p>
</blockquote>
									</div>

				<p class="postmetadata">
					Posted in <a href="https://herbsutter.com/category/c-net/" rel="category tag">C# / .NET</a>, <a href="https://herbsutter.com/category/c/" rel="category tag">C++</a>, <a href="https://herbsutter.com/category/concurrency/" rel="category tag">Concurrency</a>, <a href="https://herbsutter.com/category/hardware/" rel="category tag">Hardware</a>, <a href="https://herbsutter.com/category/software-development/" rel="category tag">Software Development</a> | 											10 Comments									</p>
				
<!-- You can start editing here. -->

<h3 id="comments">10 Responses</h3>

	<ol class="commentlist">
			<li class="comment even thread-even depth-1 highlander-comment" id="comment-1292">
		<div id="div-comment-1292">
		<div class="cmtinfo"><em> on <a href="#comment-1292" title="">2009-05-30 at 6:52 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/69ac745d2d90272605b1847ea5fe451f?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Vivek Rajan</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1292"></div><p>It appears that the &#8216;performance analyzer tool&#8217;  that could measure CPI and Cache miss rate provided critical clues to help find the cause.</p>
<p>Can you tell us which tool you used ?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-1281">
		<div id="div-comment-1281">
		<div class="cmtinfo"><em> on <a href="#comment-1281" title="">2009-05-27 at 10:14 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/9b1512905d41c008e9d39ec6fd241329?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>mheyman</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1281"></div><p>The final example in &#8220;Eliminate False Sharing&#8221; is a little unclear on the intent. The text says &#8220;we arbitrarily force half the workers to only perform reads from their result[p]&#8221; but it appears the code does a read on about half the threads when an element in the matrix is odd (good) and a read and write, &#8220;++result[p]&#8221;, for every thread when an element in the matrix is even (doh).</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-1264">
		<div id="div-comment-1264">
		<div class="cmtinfo"><em> on <a href="#comment-1264" title="">2009-05-22 at 3:26 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/3c01e7c61bd48145eadc94bde327c8f3?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://vadmyst.blogspot.com' rel='external nofollow' class='url'>Vadmyst</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1264"></div><p>There is a problem with C# sample class. Runtime does not allow you to instantiate generic type with explicit layout.</p>
<p>If type is not generic everything works fine, e.g</p>
<p>[StructLayout(LayoutKind.Explicit, Size = 2 * CACHE_LINE_SIZE)]<br />
    public struct CacheLineStorage<br />
    {<br />
        const int CACHE_LINE_SIZE = 512;</p>
<p>        [FieldOffset(CACHE_LINE_SIZE)]<br />
        public int data;<br />
    }<br />
CacheLineStorage test = default(CacheLineStorage);<br />
int size = Marshal.SizeOf(test);</p>
<p>Size var will be equal to 1024.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-herbsutter bypostauthor odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-1248">
		<div id="div-comment-1248">
		<div class="cmtinfo"><em> on <a href="#comment-1248" title="">2009-05-20 at 11:13 am</a></em> <img alt='' src='https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.gotw.ca' rel='external nofollow' class='url'>Herb Sutter</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1248"></div><p>Rob: No, we didn&#8217;t mean to say that.</p>
<p>Henrik: Thanks to Intel for their 4-proc x 6-core test machine. :-)</p>
<p>Ghita: Thanks. The article uses C++0x lambda syntax, which will be in Visual C++ 2010 (whose beta just went live incidentally, maybe I should blog about that [edit: <a href="https://herbsutter.wordpress.com/2009/05/20/vs2010-beta-1-now-available/" rel="nofollow">ok, here it is</a>]). You can do similar things in C# lambda syntax. In C or Java or a C++ implementation that doesn&#8217;t support lambdas, just write an out-of-line helper function or Runnable class or functor, respectively (they&#8217;re pretty much the same thing).</p>
<p>Michael: There have been experiments about automatically detecting false sharing and adding padding to remove the contention, particularly in managed environments that have more latitude to play with layout. But it&#8217;s problematic so far and I don&#8217;t know of a real-world product that can do this automatically. Does anyone else know of one?</p>
<p>Pizer: Excellent point. Score +1 bug report. I&#8217;ll see if they can fix it on the website, but it&#8217;ll be fixed in the book. The problem didn&#8217;t arise in my testing version because the test code was a little different.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-pizer even thread-even depth-1 highlander-comment" id="comment-1246">
		<div id="div-comment-1246">
		<div class="cmtinfo"><em> on <a href="#comment-1246" title="">2009-05-20 at 5:53 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/16b8a9971551c67422fea478a6e73bae?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://pizer.wordpress.com' rel='external nofollow' class='url'>pizer</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1246"></div><p>In all three examples the lambda object captures the variable &#8216;p&#8217; by reference due to [&amp;]. This is a serious bug. It should have been [&amp;,p] { &#8230; } instead.</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-1244">
		<div id="div-comment-1244">
		<div class="cmtinfo"><em> on <a href="#comment-1244" title="">2009-05-19 at 2:06 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/3f4c4ac846727f88b135de091adee62a?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>michael</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1244"></div><p>Hi Herb,</p>
<p>   Is there an effort to do the padding at runtime automatically to avoid false sharing?  If no, why not?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-1240">
		<div id="div-comment-1240">
		<div class="cmtinfo"><em> on <a href="#comment-1240" title="">2009-05-18 at 6:50 am</a></em> <img alt='' src='https://2.gravatar.com/avatar/8db2604afce7e3cc1f5fb796a39a2fab?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Ghita</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1240"></div><p>Very nice article Herb. One of the best ones !<br />
Does the example written (using lambda) run in a current C# language/library release or do we need to use Visual Studio CTP ? Because in case we have to use CTP we will not be able to use so many cores on virtual PC&#8230;</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-1237">
		<div id="div-comment-1237">
		<div class="cmtinfo"><em> on <a href="#comment-1237" title="">2009-05-17 at 1:57 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/dfeed0cb9f18492e11306e5b1acb497c?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://www.streamspace.com' rel='external nofollow' class='url'>Henrik Vallgren</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1237"></div><p>Hi Herb,<br />
Where do you get your computers? Do you have 24 cores on your netbook ;)<br />
Henrik</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 highlander-comment" id="comment-1236">
		<div id="div-comment-1236">
		<div class="cmtinfo"><em> on <a href="#comment-1236" title="">2009-05-16 at 11:44 pm</a></em> <img alt='' src='https://0.gravatar.com/avatar/37489712e5e7696f71e189a266904130?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite>Rob...</cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1236"></div><p>Hi Herb,<br />
in your article you mention new standard C++<br />
attribute syntax, [[align(32)]],<br />
but I&#8217;ve heard that Microsoft is refusing to implement it.<br />
Could You comment on this?</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1 highlander-comment" id="comment-1235">
		<div id="div-comment-1235">
		<div class="cmtinfo"><em> on <a href="#comment-1235" title="">2009-05-16 at 6:55 am</a></em> <img alt='' src='https://1.gravatar.com/avatar/de65ffb83446a31ef79dd4f69b8ba686?s=48&#038;d=identicon&#038;r=G' class='avatar avatar-48' height='48' width='48' /> <cite><a href='http://jpipes.com' rel='external nofollow' class='url'>Jay Pipes</a></cite></div>
						<div class="pd-rating" id="pd_rating_holder_468178_comm_1235"></div><p>Hi Herb,</p>
<p>Just a quick note to say thank you for all your great articles.  They have been enlightening for me in my work and I typically share them with the Drizzle contributor community as required reading.  Thanks, and keep up the great work!</p>
<p>Jay Pipes</p>
			<br style="clear: both" />
		</div>
</li><!-- #comment-## -->
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<br />

  	<p class="nocomments">Comments are closed.</p>
  <div class="post-content">
<p>
</p>
</div>

			</div>

		
		<p align="center"></p>

	</div><!-- end id:content-main -->
<div id="sidebar">
<ul>
<li class="sidebox"><h2><label for="subscribe-field">Follow by email</label></h2>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
																	<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"/></p>
					
					<p>
						<input type="hidden" name="action" value="subscribe"/>
						<input type="hidden" name="blog_id" value="3379246"/>
						<input type="hidden" name="source" value="https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/"/>
						<input type="hidden" name="sub-type" value="widget"/>
						<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
						<input type="hidden" id="_wpnonce" name="_wpnonce" value="4590924cc6" />						<input type="submit" value="Subscribe" />
					</p>
				</form>
			
</li><li class="sidebox"><h2><a href='http://twitter.com/herbsutter'>Tweets</a></h2><ul class='tweets'></ul><a href="http://twitter.com/herbsutter"  class='twitter-follow-button' data-show-count='false' data-link-color='#265e15' data-text-color='#333333'>Follow @herbsutter</a></li><li class="sidebox"><h2>Popular</h2><ul>				<li>
										<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" class="bump-view" data-bump-view="tp">
						Trip report: Fall ISO C++ standards meeting (San Diego)					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/gotw/" class="bump-view" data-bump-view="tp">
						GotW					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" class="bump-view" data-bump-view="tp">
						Lifetime profile v1.0 posted					</a>
										</li>
				</ul></li><li class="sidebox"><h2>Categories</h2>		<ul>
				<li class="cat-item cat-item-291"><a href="https://herbsutter.com/category/apple/" >Apple</a>
</li>
	<li class="cat-item cat-item-49277"><a href="https://herbsutter.com/category/c-net/" >C# / .NET</a>
</li>
	<li class="cat-item cat-item-2426"><a href="https://herbsutter.com/category/c/" >C++</a>
</li>
	<li class="cat-item cat-item-69816"><a href="https://herbsutter.com/category/cloud/" >Cloud</a>
</li>
	<li class="cat-item cat-item-214618"><a href="https://herbsutter.com/category/concurrency/" >Concurrency</a>
</li>
	<li class="cat-item cat-item-8259773"><a href="https://herbsutter.com/category/effective-concurrency/" >Effective Concurrency</a>
</li>
	<li class="cat-item cat-item-3696745"><a href="https://herbsutter.com/category/friday-thoughts/" >Friday Thoughts</a>
</li>
	<li class="cat-item cat-item-3867746"><a href="https://herbsutter.com/category/c/gotw/" >GotW</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://herbsutter.com/category/hardware/" >Hardware</a>
</li>
	<li class="cat-item cat-item-1017"><a href="https://herbsutter.com/category/java/" >Java</a>
</li>
	<li class="cat-item cat-item-637"><a href="https://herbsutter.com/category/microsoft/" >Microsoft</a>
</li>
	<li class="cat-item cat-item-420845"><a href="https://herbsutter.com/category/opinion-editorial/" >Opinion &amp; Editorial</a>
</li>
	<li class="cat-item cat-item-1633077"><a href="https://herbsutter.com/category/reader-qa/" >Reader Q&amp;A</a>
</li>
	<li class="cat-item cat-item-2301"><a href="https://herbsutter.com/category/software-development/" >Software Development</a>
</li>
	<li class="cat-item cat-item-393523"><a href="https://herbsutter.com/category/talks-events/" >Talks &amp; Events</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://herbsutter.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-151"><a href="https://herbsutter.com/category/web/" >Web</a>
</li>
		</ul>
			</li></ul>
</div><!-- end id:sidebar -->
</div><!-- end id:content -->
</div><!-- end id:container -->
<div id="footer">
	<div id="colophon">
		<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a></p>
		<p>WPThemes.</p>
		<br class="clear" />
	</div><!-- end #colophon-->
</div><!-- end #footer-->
<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201847y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-69ac745d2d90272605b1847ea5fe451f">
	</div>
	<div class="grofile-hash-map-9b1512905d41c008e9d39ec6fd241329">
	</div>
	<div class="grofile-hash-map-3c01e7c61bd48145eadc94bde327c8f3">
	</div>
	<div class="grofile-hash-map-c0ba56bfd231f8f04feb057728975181">
	</div>
	<div class="grofile-hash-map-16b8a9971551c67422fea478a6e73bae">
	</div>
	<div class="grofile-hash-map-3f4c4ac846727f88b135de091adee62a">
	</div>
	<div class="grofile-hash-map-8db2604afce7e3cc1f5fb796a39a2fab">
	</div>
	<div class="grofile-hash-map-dfeed0cb9f18492e11306e5b1acb497c">
	</div>
	<div class="grofile-hash-map-37489712e5e7696f71e189a266904130">
	</div>
	<div class="grofile-hash-map-de65ffb83446a31ef79dd4f69b8ba686">
	</div>
	</div>
<script type='text/javascript' charset='UTF-8' id='polldaddyRatings'><!--//--><![CDATA[//><!--
PDRTJS_settings_468178_comm_1292={"id":468178,"unique_id":"wp-comment-1292","title":"It%20appears%20that%20the%20%26%23039%3Bperformance%20analyzer%20tool%26%23039%3B%20%20that%20could%20measure%20CPI%20and%20Cache%20miss%20rate%20provided%20critical%20clues%20to%20help%20find%20the%20cause.Can%20you%20tell%20us%20which%20tool%20you%20used%20%3F...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1292","item_id":"_comm_1292"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1292 == 'undefined' ){PDRTJS_468178_comm_1292 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1292 );}}PDRTJS_settings_468178_comm_1281={"id":468178,"unique_id":"wp-comment-1281","title":"The%20final%20example%20in%20%26quot%3BEliminate%20False%20Sharing%26quot%3B%20is%20a%20little%20unclear%20on%20the%20intent.%20The%20text%20says%20%26quot%3Bwe%20arbitrarily%20force%20half%20the%20workers%20to%20only%20perform%20reads%20from%20their%20result%26%23091%3Bp%26%23093%3B%26quot%3B%20but%20it%20appears%20t...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1281","item_id":"_comm_1281"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1281 == 'undefined' ){PDRTJS_468178_comm_1281 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1281 );}}PDRTJS_settings_468178_comm_1264={"id":468178,"unique_id":"wp-comment-1264","title":"There%20is%20a%20problem%20with%20C%23%20sample%20class.%20Runtime%20does%20not%20allow%20you%20to%20instantiate%20generic%20type%20with%20explicit%20layout.If%20type%20is%20not%20generic%20everything%20works%20fine%2C%20e.g%26%23091%3BStructLayout%28LayoutKind.Expl...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1264","item_id":"_comm_1264"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1264 == 'undefined' ){PDRTJS_468178_comm_1264 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1264 );}}PDRTJS_settings_468178_comm_1248={"id":468178,"unique_id":"wp-comment-1248","title":"Rob%3A%20No%2C%20we%20didn%26%23039%3Bt%20mean%20to%20say%20that.Henrik%3A%20Thanks%20to%20Intel%20for%20their%204-proc%20x%206-core%20test%20machine.%20%3A-%29Ghita%3A%20Thanks.%20The%20article%20uses%20C%2B%2B0x%20lambda%20syntax%2C%20which%20will%20be%20in%20Visual%20C%2B%2B%202010%20%28whose...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1248","item_id":"_comm_1248"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1248 == 'undefined' ){PDRTJS_468178_comm_1248 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1248 );}}PDRTJS_settings_468178_comm_1246={"id":468178,"unique_id":"wp-comment-1246","title":"In%20all%20three%20examples%20the%20lambda%20object%20captures%20the%20variable%20%26%23039%3Bp%26%23039%3B%20by%20reference%20due%20to%20%26%23091%3B%26amp%3B%26%23093%3B.%20This%20is%20a%20serious%20bug.%20It%20should%20have%20been%20%26%23091%3B%26amp%3B%2Cp%26%23093%3B%20%7B%20...%20%7D%20instead....","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1246","item_id":"_comm_1246"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1246 == 'undefined' ){PDRTJS_468178_comm_1246 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1246 );}}PDRTJS_settings_468178_comm_1244={"id":468178,"unique_id":"wp-comment-1244","title":"Hi%20Herb%2C%20%20%20%20%20Is%20there%20an%20effort%20to%20do%20the%20padding%20at%20runtime%20automatically%20to%20avoid%20false%20sharing%3F%20%20If%20no%2C%20why%20not%3F...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1244","item_id":"_comm_1244"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1244 == 'undefined' ){PDRTJS_468178_comm_1244 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1244 );}}PDRTJS_settings_468178_comm_1240={"id":468178,"unique_id":"wp-comment-1240","title":"Very%20nice%20article%20Herb.%20One%20of%20the%20best%20ones%20%21Does%20the%20example%20written%20%28using%20lambda%29%20run%20in%20a%20current%20C%23%20language%2Flibrary%20release%20or%20do%20we%20need%20to%20use%20Visual%20Studio%20CTP%20%3F%20Because%20in%20case%20we%20have...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1240","item_id":"_comm_1240"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1240 == 'undefined' ){PDRTJS_468178_comm_1240 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1240 );}}PDRTJS_settings_468178_comm_1237={"id":468178,"unique_id":"wp-comment-1237","title":"Hi%20Herb%2CWhere%20do%20you%20get%20your%20computers%3F%20Do%20you%20have%2024%20cores%20on%20your%20netbook%20%3B%29Henrik...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1237","item_id":"_comm_1237"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1237 == 'undefined' ){PDRTJS_468178_comm_1237 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1237 );}}PDRTJS_settings_468178_comm_1236={"id":468178,"unique_id":"wp-comment-1236","title":"Hi%20Herb%2Cin%20your%20article%20you%20mention%20new%20standard%20C%2B%2Battribute%20syntax%2C%20%26%23091%3B%26%23091%3Balign%2832%29%26%23093%3B%26%23093%3B%2Cbut%20I%26%23039%3Bve%20heard%20that%20Microsoft%20is%20refusing%20to%20implement%20it.Could%20You%20comment%20on%20this%3F...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1236","item_id":"_comm_1236"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1236 == 'undefined' ){PDRTJS_468178_comm_1236 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1236 );}}PDRTJS_settings_468178_comm_1235={"id":468178,"unique_id":"wp-comment-1235","title":"Hi%20Herb%2CJust%20a%20quick%20note%20to%20say%20thank%20you%20for%20all%20your%20great%20articles.%20%20They%20have%20been%20enlightening%20for%20me%20in%20my%20work%20and%20I%20typically%20share%20them%20with%20the%20Drizzle%20contributor%20community%20as%20require...","permalink":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/#comment-1235","item_id":"_comm_1235"}; if ( typeof PDRTJS_RATING !== 'undefined' ){if ( typeof PDRTJS_468178_comm_1235 == 'undefined' ){PDRTJS_468178_comm_1235 = new PDRTJS_RATING( PDRTJS_settings_468178_comm_1235 );}}
//--><!]]></script><script type='text/javascript' charset='UTF-8' src='https://polldaddy.com/js/rating/rating.js'></script><script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"3379246","siteName":"Sutter\u2019s Mill","siteURL":"https:\/\/herbsutter.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/mistylook","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2009%2F05%2F15%2Feffective-concurrency-eliminate-false-sharing%2F","themeURL":"","xhrURL":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"8fb9818ae2","isSingular":"1","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"4590924cc6\" \/>","referer":"https:\/\/herbsutter.com\/2009\/05\/15\/effective-concurrency-eliminate-false-sharing\/","canFollow":"1","feedID":"171936","statusMessage":"","customizeLink":"https:\/\/herbsutter.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbsutter.wordpress.com%2F2009%2F05%2F15%2Feffective-concurrency-eliminate-false-sharing%2F","postID":"248","shortlink":"https:\/\/wp.me\/peb5Y-40","canEditPost":"","editLink":"https:\/\/wordpress.com\/post\/herbsutter.com\/248","statsLink":"https:\/\/wordpress.com\/stats\/post\/248\/herbsutter.com","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: MistyLook","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 19,532 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2009%2F05%2F15%2Feffective-concurrency-eliminate-false-sharing%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVjcEOgjAQRH/IuoIYT8Zvqe2GLrQLdlvAv7ceJEYTEg+bTGbe7MA8KjNwQk7QCVicyOC47DvZwUcUshp9bokFPPUocM+Y0Wm2HuM3/CblwUkvjlrnyyWMv87GjraBWN10hKCloEWpYcIYyZb91fvzQ4ra9LJVMokGfpVWVehruFSnujo0x+Zcd0+y+3Rn'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'3379246','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'3379246','v':'wpcom','tz':'-8','user_id':'0','post':'248','subd':'herbsutter'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d1TjBELytHc0k/MXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sQjdLZzRdeTl3OERpNWt3bCYsZ0dCaDdRaVNuVzNYcnlyQlh3ZGpPdmkvRkVJRkNZTS5OXUtaMjQzci09fk0uNkROMTJSSEhCM011bXc2JXpwVXx4amw2cXJvNWQxeWdmLnxNZVl5WkFdZT0mcHR2Rks3TGV+WG9pXUVSU3E/NEtTb0lnciVTOVdfLi5PM2V1SnV8TX5HfEhjMmU9TWpIWD9CRk1tQSVoRU84L0M1QkUrbFtGU1BULVJxTlNhZn49dSZYXWhGUw=='}]);
_stq.push([ 'clickTrackerInit', '3379246', '248' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>