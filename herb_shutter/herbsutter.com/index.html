<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Sutter’s Mill | Herb Sutter on software development</title>
<link rel="pingback" href="https://herbsutter.com/xmlrpc.php" />
<script type="text/javascript">
  WebFontConfig = {"typekit":{"id":"eyo0tqd"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = 'https://s0.wp.com/wp-content/plugins/custom-fonts/js/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style id="jetpack-custom-fonts-css">.wf-active #header h1{font-size:2.12em;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active body{font-size:89.7%;font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation{font-family:"ff-basic-gothic-web-pro-1","ff-basic-gothic-web-pro-2",sans-serif}.wf-active #navigation ul li.search{font-size:1.06em}.wf-active #navigation ul li.search input#searchsubmit{font-size:1.06em}.wf-active #content .post-info, .wf-active #content .postmetadata{font-size:1.06em}.wf-active #sidebar{font-size:1.06em}.wf-active #footer p.right{font-size:1.06em}.wf-active .commentnum{font-size:1.77em}.wf-active .commentlist li .cmtinfo{font-size:1.18em}.wf-active .commentlist li .cmtinfo em{font-size:1.06em}.wf-active #respond label{font-size:11.8px}.wf-active #respond .required{font-size:11.8px}.wf-active #respond .subscribe-label{font-size:14.2px}.wf-active #respond .comment-notes{font-size:13px}.wf-active .wp-caption p.wp-caption-text{font-size:13px}.wf-active #content h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active h5, .wf-active h6{font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal;font-weight:400}.wf-active #header h2{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active #content h3{font-size:1.65em;font-weight:400;font-style:normal}.wf-active #content h4{font-size:1.3em;font-style:normal;font-weight:400}.wf-active #content h5{font-size:1.18em;font-style:normal;font-weight:400}.wf-active #content .post h2{font-size:1.65em;font-weight:400;font-style:normal}.wf-active li.sidebox h2{font-weight:400;font-size:1.89em;font-style:normal}.wf-active .post h4{font-size:1.18em;font-weight:400;font-family:"ff-dagny-web-pro-1","ff-dagny-web-pro-2",sans-serif;font-style:normal}.wf-active .post h4 em{font-style:normal;font-weight:400}</style>
		<script src='https://r-login.wordpress.com/remote-login.php?action=js&amp;host=herbsutter.com&amp;id=3379246&amp;t=1542966150&amp;back=https%3A%2F%2Fherbsutter.com%2F' type="text/javascript"></script>
		<script type="text/javascript">
		/* <![CDATA[ */
			if ( 'function' === typeof WPRemoteLogin ) {
				document.cookie = "wordpress_test_cookie=test; path=/";
				if ( document.cookie.match( /(;|^)\s*wordpress_test_cookie\=/ ) ) {
					WPRemoteLogin();
				}
			}
		/* ]]> */
		</script>
		<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//herbsutter.wordpress.com' />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Feed" href="https://herbsutter.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Sutter’s Mill &raquo; Comments Feed" href="https://herbsutter.com/comments/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1532082729h&ver=4.9.8"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s0.wp.com/_static/??-eJyNkN1uwjAMhV9onrUN1qtpz5K0JpjmT4kj1LfHpeoEglXcROck53Ns4zlDn6JQFAwNsm+OY0XPI1U8kWTTj3B1732tb/g8zvHAkWX6Ey+F5UhBf8nNYuAqk09p3AL7VEjvQzYyJwINbMhrjShbWMjfKzXLo060Ocw5axqszYVqBT0DtwBLsw/cCrmm1lJxMHeJtrEf0Pp03Z4tpkw4T0gPBZ4t4Z/obY88OJKKkjLkVFW9jNTUs/HAGrk3C8wYkyyPq9iq6iiBTmmEU7wzcPCGyxZaSPfjVDrU1I2dod/w87HffXZf3W7fnS4bTgAo?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s2.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s2.wp.com/_static/??-eJyF0G0KwjAMBuAL2dXJxP0Rz1Lr60hdP2zaDT29FSYiVIVAIHkISeQcBDk95hNYmhLXjHhbUmN4JX8BYWmIKqGx5F5Ye5fg0tNaf6QRIjOiGkqtDDr7iguekwVzQZXu50rkJsL8lxmkoPRFRDDdUTuEw3vn7x9Y1MHu267fbfp2263NA675cvs='></script>
<link rel='stylesheet' id='all-css-0-2' href='https://s0.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1530132353h&cssminify=yes' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563h&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://herbsutter.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress.com" />
<link rel='shortlink' href='https://wp.me/eb5Y' />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Sutter’s Mill" />
<meta property="og:description" content="Herb Sutter on software development" />
<meta property="og:url" content="https://herbsutter.com/" />
<meta property="og:site_name" content="Sutter’s Mill" />
<meta property="og:image" content="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=200&amp;ts=1542966150" />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:creator" content="@herbsutter" />
<meta name="twitter:site" content="@herbsutter" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=32" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=114" />
<link rel='openid.server' href='https://herbsutter.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://herbsutter.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style id="wpcom-hotfix-masterbar-style">
			@media screen and (min-width: 783px) {
				#wpadminbar .quicklinks li#wp-admin-bar-my-account.with-avatar > a img {
					margin-top: 5px;
				}
			}
		</style>
		<script type="text/javascript" id="webfont-output">
  
  WebFontConfig = {"typekit":{"id":"cjs1oxc"}};
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
	})();
</script><style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Sutter’s Mill" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Herb Sutter on software development" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://herbsutter.com/feed/;icon-uri=https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=16" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s1.wp.com/i/favicon.ico" /><meta name="description" content="Herb Sutter on software development" />
<style type="text/css">
			#header h1 a,
		#header h2 {
			color: #265E15 !important;
		}
				#headerimage {
			background: url('https://herbsutter.files.wordpress.com/2011/10/cropped-blog-header.jpg') no-repeat;
			height: 200px;
		}
	</style>
<style type="text/css" id="syntaxhighlighteranchor"></style>
		<link rel="stylesheet" id="custom-css-css" type="text/css" href="https://s2.wp.com/?custom-css=1&#038;csblog=eb5Y&#038;cscache=6&#038;csrev=60" />
		</head>
<body id="section-index" class="home blog mp6 customizer-styles-applied highlander-enabled highlander-light infinite-scroll neverending">


<div id="navigation" class="clearfix">
		<div class="menu">
		<ul>
			<li class="current_page_item"><a href="https://herbsutter.com/" title="Home">Home</a></li>
			<li class="page_item page-item-912"><a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the&nbsp;Jungle</a></li>
<li class="page_item page-item-864 page_item_has_children"><a href="https://herbsutter.com/gotw/">GotW</a></li>
<li class="page_item page-item-761"><a href="https://herbsutter.com/elements-of-modern-c-style/">Elements of Modern C++&nbsp;Style</a></li>
<li class="page_item page-item-2 page_item_has_children"><a href="https://herbsutter.com/about/">About</a></li>
									<li class="search"><form method="get" id="searchform" action="https://herbsutter.com"><input type="text" class="textbox" value="" name="s" id="s" /><input type="submit" id="searchsubmit" value="Search" /></form></li>
					</ul>
	</div>
</div><!-- end id:navigation -->

<div id="container">

<div id="header">
<h1><a href="https://herbsutter.com/" title="Sutter’s Mill">Sutter’s Mill</a></h1>
<h2>Herb Sutter on software development</h2>
</div><!-- end id:header -->


	
		<div id="feedarea">
	<dl>
		<dt><strong>Feeds:</strong></dt>

			<dd><a href="https://herbsutter.com/feed/">Posts</a></dd>
	
			<dd><a href="https://herbsutter.com/comments/feed/">Comments</a></dd>
		</dl>
	</div><!-- end id:feedarea -->
	
	<div id="headerimage">
</div><!-- end id:headerimage -->

<div id="content">
<div id="content-main">
					<div class="post-3695 post type-post status-publish format-standard hentry category-uncategorized" id="post-3695">
				<div class="posttitle">
			<h2><a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" rel="bookmark">Trip report: Fall ISO C++ standards meeting (San&nbsp;Diego)</a></h2>
				<p class="postmetadata">2018-11-13 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p>On Saturday November 10, the ISO C++ committee completed its fall meeting in San Diego, California, USA, hosted with thanks by <strong><a href="https://www.qualcomm.com">Qualcomm</a></strong>. This was the biggest ISO C++ meeting in our 29-year history, with some 180 people at the meeting, representing 12 nations. For more details about our size increase, including how we adapted organizationally to handle the load, see <a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/">my “pre-trip report”</a> posted before the meeting began.</p>
<p>Because this is one of the last meetings for adding features to C++20, we gave priority to proposals that might make C++20, and we adopted a number of them for C++20. <strong>Thank you to all of the hundreds of people who participate in ISO C++</strong>, those who came to the meeting and still more who participated electronically, and who all helped with the design refinement and specification wording and organization. I want to at least try to recognize by name many of the authors of the proposals we adopted, but nobody succeeds with a proposal on their own. <strong>C++ is a team effort</strong> – this wouldn’t be possible without all of your help. So, thank you, and apologies for not being able to acknowledge everyone by name.</p>
<p>Notes:</p>
<ul>
<li>Some of the links below are to papers that will not be published until the post-meeting mailing at the end of this month, and so the links will become public at that time.</li>
<li>For more details, see also the <a href="https://www.reddit.com/r/cpp/comments/9vwvbz/2018_san_diego_iso_c_committee_trip_report_ranges/">Reddit trip report</a>.</li>
<li>You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>.</li>
</ul>
<h1>Prelude: Focus</h1>
<p>The committee is actively working to keep coherence and direction in the face of a tsunami of proposals and a huge number of enthusiastic people. Perhaps the most impactful record-setting number was the size of the pre-meeting mailing: 274 papers. For comparison, even excluding the biggest paper which was the updated C++ standard working draft which appears in every mailing, the pre-meeting mailing was enormous:</p>
<ul>
<li>By word count, it exceeded Shakespeare’s complete published works.</li>
<li>By paper count, it exceeded the previous pre-meeting papers record by about 65%, and started to approach the total number of technical papers to produce the first C++ standard (total of pre-meeting mailings from 1990-1997).</li>
</ul>
<p>We appreciate all the input, including that many of the papers are about bug fixes (always welcome) and rounding out existing features. However, a large number were proposals for new “good” features. And the trouble is that we can’t say yes to every feature that is “good” that benefits some users; we have to decide on a focused set, of at least coordinated features and ideally of general composable features, that fulfills the aim and mission of C++ and keeps the language adoptable and usable.</p>
<p>As I reminded in <a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/">my pre-trip report</a>, focus means saying no more often, and so we’ve taken several steps in recent meetings and at this meeting:</p>
<ul>
<li>About a year ago, we created the <strong>Direction Group (Bjarne Stroustrup, Daveed Vandevoorde, Michael Wong, Howard Hinnant, Roger Orr, and the recently retired Beman Dawes)</strong> which has created and maintains an advisory document <strong><a href="https://wg21.link/p0939">Direction for ISO C++ (P0939)</a></strong>.</li>
<li>In 2018, Pearson Education made free electronic copies of <strong><a href="http://www.stroustrup.com/dne.html">The Design and Evolution of C++ (Bjarne Stroustrup)</a></strong> available to all committee members. Not only does this help ensure that the newer people have access to this expected-to-be-read foundational work, which continues to be very current, but also having it in machine-readable and -searchable form makes it much easier to reference and quote from in our own papers.</li>
<li>At this meeting, we let EWG and LEWG continue to focus on near-term papers, and created <strong>SG17 (EWG Incubator, JF Bastien)</strong> and <strong>SG18 LEWG Incubator (Bryce Adelstein Lelbach)</strong> to help review and improve the papers that EWG and LEWG could not handle, to improve them and to prune them before they reach the main subgroup. Thank you to JF and Bryce for being willing to chair these new groups!</li>
</ul>
<h1>Two major features adopted for C++20: Ranges, and Concepts convenience notation</h1>
<p><strong><a href="https://wg21.link/P0896R3">Ranges (Eric Niebler, Casey Carter, Christopher Di Bella)</a></strong> was adopted for C++20. This was a tremendous amount of work by Casey Carter in particular (witness the recurring 3:00am editing update emails during the week). As Eric Niebler put it: “If you liked the Ranges TS, you’ll love C++20.”</p>
<p><strong><a href="https://wg21.link/P1141R1">Concepts “convenience” notation for constrained templates (Ville Voutilainen, Thomas Köppe, Andrew Sutton, Herb Sutter, Gabriel Dos Reis, Bjarne Stroustrup, Jason Merrill, Hubert Tong, Eric Niebler, Casey Carter, Tom Honermann, Erich Keane, Walter E. Brown, Michael Spertus)</a></strong> passed unanimously on Saturday. I highlighted this paper as a “we may have a winner here” in my last trip report, and indeed it sailed through and was adopted for C++20. Recall that we already added the concepts core feature to C++20 back in 2017, but without the convenience notation to write templates without the “template” or “requires” keywords; at this meeting we finally converged on a convenience syntax to write constrained templates that both addressed all the major problems people had identified in the Concepts TS convenience notation design, and was also acceptable to the primary concepts designers (hence the long list of coauthors). For the first time, besides the special case of generic lambdas, C++ will now let you write lots of generic functions without &#8220;template&#8221; or angle brackets, and that are concept-constrained and therefore much easier to use correctly than function templates have ever been before.</p>
<h1>More constexpr adopted for C++20: Ongoing concerted push toward general compile-time programming</h1>
<p>In the first part of my <a href="https://www.youtube.com/watch?v=4AfRAVcThyA">CppCon 2017 talk</a>, I emphasized that C++ is serious about first-class compile-time programming. That is a general theme to current C++ evolution, and is particularly important for being able to make effective use of compile-time reflection, and for building on that further in the future for compile-time code generation such as my <a href="https://wg21.link/P0707">metaclasses proposal</a> relies upon.</p>
<p>First-class compile-time programming in C++ has been building since we allowed simple one-liner constexpr functions in C++11, to constexpr functions with loops in C++14, to constexpr lambdas and “if constexpr” in C++17. This week, we have added still more as a coordinated set of additions to C++20:</p>
<ul>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1073r2.html">“consteval” immediate functions (Richard Smith, Andrew Sutton, Daveed Vandevoorde)</a></strong>, which came in part from Andrew’s and my <a href="https://wg21.link/P0707">metaclasses work</a>, allow writing functions that are guaranteed to run at compile time. This is essential for the kind of code generation that metaclasses rely on, and it’s great to see this now adopted as part of C++20!</li>
<li><strong><a href="https://wg21.link/P1330">constexpr union (Louis Dionne, Daveed Vandevoorde)</a></strong> lets you change the active member of a union during compile-time code.</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1002r0.pdf">constexpr try and catch (Louis Dionne)</a></strong> lets you write try/catch in constexpr code. However, note that it doesn’t actually let you throw exceptions at compile time.</li>
<li><strong><a href="https://wg21.link/P1327">constexpr dynamic_cast and typeid (Peter Dimov, Vassil Vassilev)</a></strong> lets you write dynamic_cast and typeid in compile-time expressions. Note that virtual function calls are already allowed in constant expressions (that was approved at our previous meeting).</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0595r1.html">std::is_constant_evaluated (also by Richard Smith, Andrew Sutton, Daveed Vandevoorde)</a></strong> lets you write conditional code that lets you write part of a function using code that is guaranteed to be executed at compile-time. Another way to think of it is that it’s similar in spirit to “if constexpr” except that it lets you combine “if constexpr” with an “else normal-if.”</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1006r1.pdf">constexpr std::pointer_traits (Louis Dionne)</a></strong> is an essential ingredient for enabling compile-time reflection and especially compile-time std::vector. (Compile-time std::vector will also need compile-time new, still under development.)</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1032r1.html">Miscellaneous constexpr library bits (Antony Polukhin)</a></strong> added still more constexpr within the standard library, which means making even more of the standard library available to compile-time code.</li>
</ul>
<p>We’re on track to making most “normal” C++ code available to run at compile time — and although C++20 won’t get quite all the way there, C++20 is a landmark release and a turning point where start to permanently leave behind the angle brackets and workarounds we’ve been using since the 1990s, with the near-complete birth of fully “natural” compile-time C++ code. Recall that we have already been adding support for user-defined types as template parameter types; soon (either before or after C++20’s feature freeze) we may be able to use strings as template arguments, and use containers like std::vector in compile-time code. Of course, there likely will be some limits; for example, supporting compile-time std::thread is possible, but less likely to be worth the effort.</p>
<p>Looking ahead to C++23 for a moment, where we expect still more of that plus (we hope) full static reflection in the standard, this marks a difficult-to-overstate landmark shift in C++ programming — not a course change, but really taking all the things that programmers have already been trying to do indirectly and giving it first-class natural support. The long-term results are likely to exceed our expectations in ways that we can’t fully anticipate yet. So fasten your seat belts, and stay tuned. C++ programming is likely to evolve more, and in better ways, in the upcoming 5 years than it already has in the past 20.</p>
<h1>Other changes approved for C++20</h1>
<p>A number of other smaller changes were adopted as well.</p>
<ul>
<li><strong><a href="https://wg21.link/p0668">Revising the C++ memory model (Hans-J. Boehm, Olivier Giroux, Viktor Vafeiades, et al.)</a></strong> makes several updates for weaker architectures including better support for GPU memory. <strong><a href="https://wg21.link/p0982">Weaken release sequences (Hans-J. Boehm, Olivier Giroux, Viktor Vafeiades)</a></strong>, a related paper forked from the main one, was also approved.</li>
<li><strong><a href="https://wg21.link/p1084">Today’s return-type-requirements are insufficient (Walter E. Brown, Casey Carter)</a></strong> tightens up Concept-constrained return type deduction.</li>
<li><strong><a href="https://wg21.link/p1289">Access control in contract conditions (J. Daniel Garcia, Ville Voutilainen)</a></strong> lets public functions’ preconditions and postconditions also access private members.</li>
<li><strong><a href="https://wg21.link/p0907">Signed integers are two’s complement (JF Bastien)</a></strong> is the result of a courtroom drama in both WG21 (C++) and WG14 (C). After intense prosecutorial cross-examination, the witness finally admitted in both courts that, yes, all known modern computers are two’s complement machines, and, no, we don’t really care about using C++ (or C) on the ones that aren’t. The C standard is likely to adopt the same change.</li>
<li><strong><a href="https://wg21.link/p0482">char8_t: A type for UTF-8 characters and strings (Tom Honermann)</a></strong> is another step toward broad Unicode support.</li>
<li><strong><a href="https://wg21.link/p1094">Nested inline namespaces (Alisdair Meredith)</a></strong> extends the new C++20 convenient nested namespace declaration syntax also for inline namespaces.</li>
<li><strong><a href="https://wg21.link/p1353">Missing feature test macros (John Spicer)</a></strong> adds support for missing macros that let code test for the presence of three features: destroying delete, three-way comparison (spaceship), and conditional explicit.</li>
<li>Several cleanup updates to std::optional, std::variant, std::function.</li>
<li><strong><a href="https://wg21.link/p0655">visit&lt;R&gt; (Michael Park, Agustín Bergé)</a></strong> allows specifying the return type when visiting variants.</li>
<li><strong><a href="https://wg21.link/p0357">reference_wrapper for incomplete types (Tomasz Kamiński, Stephan T. Lavavej, Alisdair Meredith)</a></strong> lets the wrapper work for forward-declared and abstract types.</li>
<li><strong><a href="https://wg21.link/p1007">assume_aligned (Timur Doumler, Chandler Carruth)</a></strong> enables portable code to express an alignment optimization hint to the compiler.</li>
<li><strong><a href="https://wg21.link/p1020">Smart pointer creation with default initialization (Glen Fernandes, Peter Dimov)</a></strong> adds allocate_shared_default_init, make_shared_default_init, and make_unique_default_init to perform default initialization.</li>
<li><strong><a href="https://wg21.link/p1085">Should span be Regular? (Tony Van Eerd)</a></strong> removes the comparison operators from std::span.</li>
<li><strong><a href="https://wg21.link/p0919">Heterogeneous lookup for unordered containers (Mateusz Pusz)</a></strong> enables indexing without creating a temporary key object.</li>
<li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0356r4.html"><strong>Simplified partial function application (Tomasz Kamiński)</strong></a> adds bind_front to the library.</li>
<li>Lots of smaller features and individual issues resolutions.</li>
</ul>
<h1>Other progress and decisions</h1>
<p><strong><a href="https://wg21.link/P1103">Modules (Richard Smith; and Gabriel Dos Reis)</a></strong> for the first time had a unified design approved targeting C++20. Wording specification work will continue over the holidays, and we expect to consider modules for C++20 at our next meeting in February.</p>
<p><strong>Executors</strong>: Thanks to progress between meetings and special meeting in September, we now are hopeful that an initial Executors design can make it for C++20. The feature was not merged at this meeting, but the design was approved for C++20 and we expect to consider adding the wording specification to C++20 at our next meeting.</p>
<p><strong>Coroutines</strong>: We continued to make progress on coroutines. At this meeting, EWG again recommended merging the <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/n4775.pdf"><strong>Coroutines TS (Gor Nishanov)</strong></a> into C++20, and this time EWG additionally explicitly included plans to incorporate features from the competing <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p1063r1.pdf"><strong>Core Coroutines proposal (Geoff Romer, James Dennett, Chandler Carruth)</strong></a>. As in Rapperswil, the vote to merge the Coroutines TS into C++20 fell just short numerically and was not adopted for C++20 at this meeting. The proposers, and new collaborators from Facebook and other companies, will continue to work on improving consensus over the winter by addressing remaining concerns, including doing further work to merge features from Core Coroutines into the TS approach, such as an upcoming paper <strong>“A unifying design for Executors, Sender/Receiver, coroutines, parallel algorithms and networking” by Lewis Baker</strong> of Facebook which is expected to appear in the post-meeting mailing. We expect coroutines to be proposed again for C++20 at our February meeting in Kona with this additional information, and with the national bodies having more time to absorb the large amount of new information that was presented at this meeting.</p>
<p><strong>Networking</strong>: This depends on Executors, and despite some discussion about decoupling the non-Executor parts, at this meeting we decided to target merging Networking into C++ for soon post-C++20 (i.e., targeting C++23). It also might depend on Coroutines, because some experts are still working through whether there is integration work to be done to merge Networking with Coroutines.</p>
<p><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/n4766.pdf">Reflection TS v1 (David Sankel)</a> ISO ballot continues:</strong> The Reflection TS international comment ballot was already in progress during the meeting and will conclude next month. As I mentioned in my last trip report, note again that the TS’s current template metaprogramming-based syntax is just a placeholder; the feedback being requested is on the core “guts” of the design, and the committee already knows it intends to replace the surface syntax with a simpler programming model that uses ordinary compile-time code and not &lt;&gt;-style metaprogramming. In San Diego, we began looking at a <strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1240r0.pdf">“next-generation” reflection proposal  P1240 (Andrew Sutton, Faisal Vali, Daveed Vandevoorde)</a></strong>.</p>
<p><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0267r8.pdf">2D Graphics (Michael B. McLaughlin, Herb Sutter, Jason Zink, Guy Davidson, Michael Kazakov)</a></strong><strong> sent back to SG13:</strong> The SG13 HMI (human-machine interface) study group was reopened with <strong>Roger Orr</strong> as chair and will be taking another look at next steps for the Graphics proposal in the coming months.</p>
<h1>Upcoming new work: Machine learning and education</h1>
<p>In addition to the two Incubator Study Groups I mentioned in <a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/">my pre-trip report</a>, we also formed two new domain-specific study groups:</p>
<p><strong>SG19: Machine Learning (Michael Wong).</strong> We feel we can leverage C++’s strengths in generic programming, optimization and acceleration, as well as code portability, for the specific domain of Machine Learning. The aim of SG19 is to address and improve on C++’s ability to support fast iteration, better support for array, matrix, linear algebra, in memory passing of data for computation, scaling, and graphing, as well as optimization for graph programming.</p>
<p><strong>SG20: Education (JC van Winkel).</strong> We feel we have an opportunity to improve the quality of C++ education, to help software developers correctly use our language and ecosystem to write correct, maintainable, and performing software. SG20 aims to create curriculum guidelines for various levels of expertise and application domains, and to stimulate WG21 paper writers to include advise on how to teach the new feature they are proposing to add to the standard.</p>
<p>Thank you to Michael and JC for volunteering as chairs!</p>
<h1>What’s next</h1>
<p>Whew! Here is a cheat-sheet summary of our current reasonable expectations for some of the major pieces of work. Note that this is an estimate only, and progress can end up being different than expected.</p>
<p><img data-attachment-id="3696" data-permalink="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/wg21-proposal-progress-2/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500" data-orig-size="1357,676" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-proposal-progress" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500?w=500" class="alignnone size-full wp-image-3696" src="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500" alt="wg21-proposal-progress" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>And here is an updated snapshot of where we are on the schedule for C++20, which can always be found in paper <a href="https://wg21.link/p1000">P1000</a>:</p>
<p><img data-attachment-id="3697" data-permalink="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/wg21-schedule/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500" data-orig-size="1479,814" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-schedule" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500?w=500" class="alignnone size-full wp-image-3697" src="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500" alt="wg21-schedule" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the approximately 180 experts who attended this meeting, and the many more who participate in standardization through their national bodies! Have a good winter… we look forward now to several interim telecons and potentially side meetings, and then our next regular WG21 meeting in February (Kona, HI, USA).</p>
									</div>

				<p class="post-info">
					Posted in <a href="https://herbsutter.com/category/uncategorized/" rel="category tag">Uncategorized</a> | 											<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/#comments">13 Comments &#187;</a>									</p>
							</div>
					<div class="post-3687 post type-post status-publish format-standard hentry category-uncategorized" id="post-3687">
				<div class="posttitle">
			<h2><a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/" rel="bookmark">Pre-trip report: Fall ISO C++ standards meeting (San&nbsp;Diego)</a></h2>
				<p class="postmetadata">2018-11-05 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p>In one hour, our fall meeting will begin. I&#8217;ll still write a trip report at the end with the results of the meeting, but because this is an unusually (and historically) large meeting we&#8217;ve had to make a few adjustments.</p>
<p>This post is combined from a couple of administrative emails I sent to the committee over the past few weeks. Note that they&#8217;re written with that audience in mind, so they end with guidance about how to work effectively in the new subgroups, but I thought that others who follow C++ standardization would find them interesting and useful too.</p>
<hr />
<h2>New Study Groups: EWG Incubator and LEWG Incubator</h2>
<p>As you may have noticed, we’ve been growing:</p>
<ul>
<li>Record #people: 173 unique names known so far for San Diego.</li>
<li>Record #papers: 274 in pre-San Diego.</li>
</ul>
<p>In the past we’ve had five main subgroups working during the week, but that doesn’t scale well to either the number of people (it’s not ideal to have ~170 in just five huge subgroups) or the number of papers (five subgroups will leave many papers unhandled). The following are some adjustments we’re making in order to scale organizationally.</p>
<p>Effective [October 19], we have formed two new Study Groups with the chairs shown below, both of which will meet in San Diego for three days each:</p>
<ul>
<li><strong>SG17 “EWG Incubator SG” (JF Bastien)</strong></li>
<li><strong>SG18 “LEWG Incubator SG” (Bryce Adelstein Lelbach)</strong></li>
</ul>
<p>Thank you very much to JF and Bryce for making themselves available to serve as chairs!</p>
<p>Notes:</p>
<ul>
<li>The “(L)EWG Incubator” SGs are not additional (L)EWG groups, they are (like all SGs) a pipeline stage in front of EWG and LEWG respectively.</li>
<li>As advertised in our agenda, in San Diego (L)EWG will again prioritize C++20-targetable material first, and the Incubator SGs’ primary agendas will be to schedule those papers that are not likely to fit in the main (L)EWG groups. The chairs are coordinating their agendas. Please consult the daily agendas that will be maintained on the wiki to see what topics are scheduled for each session, so that you don’t miss your favorite topic.</li>
<li>Although SGs typically forward work to (L)EWG, they can as needed forward work to each other too if they believe the proposal needs domain expert input from that SG before entering (L)EWG. Papers that are primarily about a topic that is owned by an active topic-specific SG should still go to that SG; for example, all other SGs normally redirect any stray concurrency-related papers they receive to SG1 instead.</li>
<li>Like most SGs, we should expect the Incubator SGs will forward only a subset of what they receive to (L)EWG, sometimes after first asking for significant changes. As with all SGs, any papers that these SGs refine and forward need to pass through (L)EWG as usual, including to meet the IS ship deadlines described in <a href="https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwg21.link%2Fp1000&amp;data=02%7C01%7Chsutter%40microsoft.com%7C8abce4edc0024dbe65a008d635dc4771%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636755617544126127&amp;sdata=dqjwKm57%2F5Ty7kKkXoMJPQKJ5J%2BpssmxTsWON6jwU3o%3D&amp;reserved=0">P1000</a>. As with all SGs[*], SG17 and SG18 never “pre-bless” proposals; if SG17/18 approves forwarding a proposal to (L)EWG, that just means it is ready to have an initial presentation in (L)EWG and begin its journey in those groups, not that it has any default positive standing in (L)EWG. There should never be an expectation of “well the SG blessed it, if we’d wanted to comment we should have been in the SG.”
<ul>
<li>[*] except for SG1 uniquely; proposals coming from SG1 do often have some advanced standing and trust because of SG1’s demonstrated expertise and history, but even SG1’s proposals get looked at by (L)EWG first and don’t skip (L)EWG entirely</li>
</ul>
</li>
<li>The quantity of work that we process into the standard is still gated by CWG and LWG bandwidth. Therefore a major function of the Incubator SGs is act as a selection pipeline stage to turn higher input volume into higher average quality, and avoid the status quo default of papers backing up in front of EWG/LEWG/CWG/LWG.</li>
</ul>
<p>We also have two expanded/reactivated Study Groups, both of which will meet in San Diego:</p>
<ul>
<li><strong>SG12 “UB, Undefined/Unspecifed Behavior” (Gabriel Dos Reis)</strong> is now regularly meeting for ~3 days, co-located again with our sister WG23 (Vulnerabilities) in San Diego. – So San Diego is again a combined WG21/WG23 meeting, not just WG21.</li>
<li><strong>SG13 “HMI, I/O” (Roger Orr)</strong> is now reactivated to handle the Graphics proposal that does not currently have consensus to proceed in LEWG but has a critical mass of people actively interested in working on it, so it makes sense to reactivate the SG. Also, that proposal is actually a group of some 5-6 sub-proposals, so it will be up to SG13 to decide whether to incubate them as a group or individually, and then feed them to appropriate other subgroups for consideration when ready. Thank you to Roger for being willing to chair the group!</li>
</ul>
<p>And we have a request for at least one new Study Group, though this will not be created until after San Diego:</p>
<ul>
<li>Several companies have approached me to actively pursue work in Machine Learning. No concrete announcement yet, but I’m penciling in an ‘<strong>SG19 (chair tbd)</strong>’ for that.</li>
</ul>
<p>So here’s an updated look at our current organization:</p>
<p><img data-attachment-id="3688" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-organization/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500" data-orig-size="1500,1058" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-organization" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500?w=500" class="alignnone size-full wp-image-3688" src="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500" alt="wg21-organization" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>The subgroups with heavy outlines are the ones that, starting in San Diego, will meet for multiple full days during our face-to-face meetings. You’ll notice there are now eight (8) of those, and so starting in San Diego our new standard meeting space requirement will be <strong>8 concurrent breakout rooms</strong> (was previously 6, with the 6<sup>th</sup> shared among SGs and usually lightly utilized). Here’s a summary of the breakout tracks in San Diego (and of course we’ll have plenary first thing Monday and on Saturday – a few subgroups may choose to also meet a little longer on Saturday after plenary, as usual, and that will be announced on Saturday):</p>
<p><img data-attachment-id="3689" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-breakouts/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500" data-orig-size="1500,843" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-breakouts" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500?w=500" class="alignnone size-full wp-image-3689" src="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500" alt="wg21-breakouts" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>(Insert your favorite &#8220;8-track&#8221; joke here, with <em>de rigueur</em> comment about C and C++ starting in the 1970s.)</p>
<h2>Perspective: Our history and trajectory</h2>
<p>I counted the #attendees (solid) and #papers (dashed) all the way back to my personal first meeting in July 1997. Here is the resulting graph.*</p>
<p><img data-attachment-id="3690" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-graph/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500" data-orig-size="1500,843" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-graph" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500?w=500" class="alignnone size-full wp-image-3690" src="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500" alt="wg21-graph" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Please go look at the <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/1997/">quaint 1997 papers page, when we completed C++98 standardization</a>. Fun facts:</p>
<ul>
<li>The highest paper number was N1148. So we had 1148 papers in the entire 8-year cycle to produce C++98.</li>
<li>Pre- and post-meeting mailings were typically of a similar size. So we had ~600 pre-meeting papers in the entire 8-year cycle to produce C++98.</li>
<li>Many of those were issues lists, a higher proportion than today. And the technical papers were typically shorter than today’s.</li>
</ul>
<p><strong>So our San Diego technical paper volume is within a close order of all the technical papers to produce C++98.</strong> And, as already noted, it’s more than Shakespeare’s lifetime published word count, even excluding the C++ working paper.</p>
<p>Also in 1997, two months before the first meeting shown in the above graph, there was a famous Q&amp;A session at WWDC that included the following quote:</p>
<blockquote><p><em>So we had to decide what are the fundamental directions we’re going in and what makes sense and what doesn’t. There were a bunch of things that didn’t, and microcosmically they might have made sense but macrocosmically they made no sense…</em></p>
<p><em>Focus is about saying no, and the result of that focus is going to be some really great products where the total is much greater than the sum of the parts.</em></p>
<p>— Some Guy, 1997  (and Bjarne Stroustrup, 2018, paraphrasing)</p></blockquote>
<h2><strong>What does “focus means saying no” mean to WG21?</strong></h2>
<p>We are a standards committee, not a design team. A design team can assign work (because it has employees), can make decisions without democratic vote (because it has a hopefully-benevolent dictator), and can just refuse to listen to ideas. A standards committee isn’t like that: In WG21, we are volunteers and we always review as many papers as we can (of course we assume the author/champion is present etc., see <a href="https://isocpp.org/std/standing-documents/sd-4-wg21-practices-and-procedures">SD-4</a>). For us, “saying no” doesn’t mean ignoring by fiat, it means deciding as a group to decline to go in that direction after first listening to it.</p>
<p>The way I think of this mailing’s papers is in five “buckets”, illustrated here:</p>
<p><img data-attachment-id="3691" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-focus/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500" data-orig-size="1500,843" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-focus" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500?w=500" class="alignnone size-full wp-image-3691" src="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500" alt="wg21-focus.png" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Yes, I can count. There’s a bucket 0 that’s not on the slide:</p>
<p>0. Thank you for your papers that used to be missing! In the past we’ve sometime had presentations and reflector mails without papers – aka “please write a paper,” and you did. Thank you for those.</p>
<p>1. Thank you for your bug-fix papers! We appreciate the many eyes to help our standard be better. We expect to take <strong>most</strong> of these (modulo agreeing on the right fix).</p>
<p>2. Thank you for your papers to improve an existing feature! We appreciate ways to remove limitations on our features (e.g., enable move-capture for lambdas). We expect to take <strong>some percentage</strong> of these (modulo agreeing on the right improvement).</p>
<p>3. Thank you for your new overlapping feature ideas! Sometimes there is a group of related narrower features where there is a lovable general feature struggling to hatch. We will try to <strong>merge-via-generalization</strong> N features into 1 general feature that can be orthogonal and composable with the rest of the language and library. Note that this frequently takes a number of meetings. Also, ideally it results in the ability to <strong>deprecate existing features by replacement-via-generalization</strong> (think how “using” subsumed “typedef”).</p>
<p>4. Thank you for still more new solo feature ideas! We will consider all of them, but for we expect to have a <strong>high bar for language proposals</strong> and require that they are composable with the rest of the language and clearly aligned with (a step in the direction of) where we want C++ to go in the next 10-30 years. And, over time, expect to see fewer of them, and to have them increasingly make existing features redundant (<strong>deprecate existing features by replacement-via-generalization</strong>, again).</p>
<p>Both #3’s merging and #4’s filtering procedures are aiming at the same goal: Producing a strong proposal that solves more than one problem.</p>
<h2><strong>What you can do (message to new subgroup participants)</strong></h2>
<p>Especially in #3 and #4, it’s unavoidable that the Incubator SGs will break hearts by saying &#8220;no.&#8221; So, please keep in mind the following tips.</p>
<p><strong>When you are an Incubator SG participant,</strong> you will participate in polls that break hearts – so be kind, and especially watch for features that are #3’s (related to others and potentially generalizable) or look for ways to help them become #3’s (invite specific overlapping proposals that may not exist yet, to help complement and round out this proposal into something general), don’t just assume they’re #4’s (facing a difficult bar as a partly-fledged solo feature).</p>
<p><strong>When you are an Incubator SG presenter,</strong> be prepared that not everyone may love your feature as much as you do, at least at first – but find ways to frame, and to evolve, your proposal to make it #3 instead of #4, especially by finding like-minded proposers of similar features that you can together turn into a #3 feature group and refine/complete/integrate together. Because it’ll be easier to succeed in #3 than in #4.</p>
<p>In general, we encourage all participants to consult:</p>
<ul>
<li><a href="https://wg21.link/p0939">P0939</a>, the Direction Group’s suggestions – people are not expected to necessarily agree with every part but we should be open to the well-informed advice therein.</li>
<li><a href="http://www.stroustrup.com/dne.html">D&amp;E</a>, which is available for free to committee members – contact Bjarne to get a copy.</li>
</ul>
<p>Although we can’t read all the mailing, we can read these two items.</p>
<p>&nbsp;</p>
<p><strong>Thank you</strong> to everyone, especially to the new subgroup chairs and the existing officers and chairs and upcoming meeting hosts, who have worked very hard at short notice, especially over the past few weeks, to help organize for our current growth.</p>
									</div>

				<p class="post-info">
					Posted in <a href="https://herbsutter.com/category/uncategorized/" rel="category tag">Uncategorized</a> | 											<a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/#comments">3 Comments &#187;</a>									</p>
							</div>
					<div class="post-3685 post type-post status-publish format-standard hentry category-uncategorized" id="post-3685">
				<div class="posttitle">
			<h2><a href="https://herbsutter.com/2018/09/30/my-cppcon-2018-talk-is-now-online/" rel="bookmark">My CppCon 2018 talk is now&nbsp;online</a></h2>
				<p class="postmetadata">2018-09-30 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p><a href="https://www.youtube.com/watch?v=80BZxujhY38">My Thursday talk is now online.</a> Thanks to Mark Bashian and his wonderful team at <a href="http://www.bashfilms.com/">Bash Films</a> for posting the plenary sessions so quickly&#8230; it was great to see each keynote posted the following morning, and the rest of the CppCon 2018 videos will be posted in the next few weeks as usual.</p>
<p>Thanks again to everyone who came! It was a great conference, and we are already looking forward to next year&#8217;s CppCon in our new location in Denver, CO, USA.</p>
									</div>

				<p class="post-info">
					Posted in <a href="https://herbsutter.com/category/uncategorized/" rel="category tag">Uncategorized</a> | 											<a href="https://herbsutter.com/2018/09/30/my-cppcon-2018-talk-is-now-online/#comments">4 Comments &#187;</a>									</p>
							</div>
					<div class="post-3683 post type-post status-publish format-standard hentry category-uncategorized" id="post-3683">
				<div class="posttitle">
			<h2><a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" rel="bookmark">Lifetime profile v1.0&nbsp;posted</a></h2>
				<p class="postmetadata">2018-09-20 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p>I love C++. I also love safe code and not having to worry about dangling pointers and iterators and views. So I’ve been doing some work to make my life less conflicted: As long promised, the <strong><a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/docs/Lifetime.pdf">Lifetime profile 1.0 paper</a></strong> is now posted in the C++ Core Guidelines repo. It aims to detect common local cases of dangling pointers/iterators/string_views/spans/etc. in C++ code, at compile time, efficiently enough to run during normal compilation and in IDE tooltips. And, best of all (IMO), leveraging the rich information that’s already in typical modern C++ code, especially code that uses RAII and STL, with little or no annotation (e.g., see section 2.6).</p>
<p>For a quick summary, section 1.1 is a readable 3-page overview. Or, if you prefer watching a talk video, you can also see <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA&amp;feature=youtu.be&amp;t=29m6s">my CppCon 2015 talk starting at 29:06</a>, where I first talked about this work; the approach is still the same. I’ll also be <a href="https://herbsutter.com/2018/09/14/my-cppcon-2018-talk-title-and-abstract/">giving an update on this work next week at CppCon</a> as one of the three major sections of my talk this year.</p>
<p>Many thanks to all of the people who contributed and gave feedback to help me flesh out this design over the past three years. I would like to especially thank <strong>Neil MacIntosh</strong> and <strong>Kyle Reed</strong> who did the bulk of the MSVC static analysis extension implementation work, and <strong>Matthias Gehre</strong> and <strong>Gábor Horváth</strong> who did the Clang-based implementation. Thank you! Those of you who’ll be at CppCon will see some of these folks on-stage showing their work in my talk, and be able to ask them questions at the conference.</p>
<p>… Did I say Clang? Yes, there’s now also a Clang-based implementation in addition to MSVC. Although I stress this work is still somewhat experimental and that both are partial implementations, both of them do already compile most of the examples in the paper and both already run efficiently enough to run during normal compilation (Clang) and in the IDE for live-squiggle diagnostics (MSVC) even though they have not been optimized yet. And, as you’d expect in 2018, the Clang-based implementation is available on Godbolt — in the paper, just search for “godbolt” to find over 30 links to live examples. Here are a few you might find interesting:</p>
<ul>
<li><a href="https://godbolt.org/z/szJjnH">godbolt.org/z/szJjnH</a> A simple starter dangling raw pointer example.</li>
<li><a href="https://godbolt.org/z/_midIP">godbolt.org/z/_midIP</a> This one’s simple but fun… quick, how is the pointer use on line 11 invalidated by the <em>following</em> line, line 12?</li>
<li><a href="https://godbolt.org/z/dymV_C">godbolt.org/z/dymV_C</a> From C++17: A dangling <em>string_view</em>, which is important because it turns out to be easy to convert a <em>std::string</em> to a <em>string_view</em>, so that dangling is almost the default behavior.</li>
<li><a href="https://godbolt.org/z/eqCRLx">godbolt.org/z/eqCRLx</a> From the very latest bleeding edge: A dangling <em>filter_view</em> from the Ranges TS that we’re about to see if we can merge into the standard in time for C++20. Those are non-owning indirections, so they can dangle too.</li>
<li><a href="https://godbolt.org/z/iq5Qja">godbolt.org/z/iq5Qja</a> From C++98 with a dash of C++11: You know how using <em>auto</em> to deduce a <em>vector&lt;bool&gt;</em> subscript <em>[]</em> operator actually captures a <em>vector&lt;bool&gt;::reference</em> proxy, which can dangle after a <em>push_back</em> or <em>reserve</em>? If you didn’t: Sorry to be the bearer of sad tidings, but here’s some good news about that example.</li>
<li><a href="https://godbolt.org/z/UE-Mb0">godbolt.org/z/UE-Mb0</a> This short example can take a few minutes to grok… take a cup of coffee to understand who owns what and points where, and why the pointers are dangling (or not), and what the compiler is understanding about our code in order to be able to tell us about the problems accurately.</li>
</ul>
<p>If you’re interested in preventing common cases of dangling pointers, iterators, string_views, spans, and more, efficiently at compile time with high quality diagnostics, check out the examples in the paper and play around with them on Godbolt.</p>
<p>If you find new examples that are correctly diagnosed that you think are particularly cool, feel free to distill them down to their essence (and sanitize them if they came from real code) and post them as new Godbolt links in the comments below — bonus points if you also briefly summarize what the problem is, and extra bonus points if they did come from real world code. I may add some of them to the paper, with attribution, and maybe even use one in next week’s talk.</p>
									</div>

				<p class="post-info">
					Posted in <a href="https://herbsutter.com/category/uncategorized/" rel="category tag">Uncategorized</a> | 											<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/#comments">10 Comments &#187;</a>									</p>
							</div>
					<div class="post-3680 post type-post status-publish format-standard hentry category-uncategorized" id="post-3680">
				<div class="posttitle">
			<h2><a href="https://herbsutter.com/2018/09/14/my-cppcon-2018-talk-title-and-abstract/" rel="bookmark">My CppCon 2018 talk title and&nbsp;abstract</a></h2>
				<p class="postmetadata">2018-09-14 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p>In just 10 days, we&#8217;ll be at <a href="http://www.cppcon.org">CppCon</a>! I can hardly wait for Bjarne&#8217;s new opening keynote and the 100+ other sessions&#8230; we have a really great lineup of speakers again this year.</p>
<p>I&#8217;ll be giving a talk as well, and here&#8217;s the title and abstract for what I&#8217;ll be covering this year. I hope to see many of you in sunny Bellevue, WA, USA soon.</p>
<p>&nbsp;</p>
<h2>Thoughts on a more powerful <em>and</em> simpler C++ (5 of N)</h2>
<p>Perhaps the most important thing we can do for C++ at this point in its evolution is to make sure we preserve its core strengths while also directing its evolution in ways that make it simpler to use. That is my own opinion at least, and so this talk starts with a perspective question: What “is C++,” really? The language continues to evolve and change; as it does so, how can we be sure we’re picking C++ evolutionary improvements that not only don’t lose its “C++-ic” qualities, but make it a better C++ than ever?</p>
<p>At recent CppCons, I’ve spoken about several of my own personal C++ evolution efforts and experiments, and why I think they’re potentially important directions to explore for making C++ both more powerful and also simpler to use. The bulk of the talk is updates on two of these:</p>
<p><strong>Lifetime and dangling.</strong> At CppCon 2015, Bjarne Stroustrup and I launched <a href="https://github.com/isocpp/CppCoreGuidelines"><em>The C++ Core Guidelines</em></a> in our plenary talks. In <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA&amp;feature=youtu.be&amp;t=29m6s">my part starting at 29:06</a>, I gave an early look at my work on the Guidelines “Lifetime” profile, an approach for diagnosing many common cases of pointer/iterator dangling at compile time, with demos in an early MSVC-based prototype. For this year’s CppCon, I’ll cover what’s new, including:</p>
<ul>
<li>use-after-move diagnoses</li>
<li>better support for the standard library out of the box without annotation</li>
<li>more complete implementations in two compilers: in MSVC as a static analysis extension, and in a Clang-based implementation that is efficient enough to run during normal compilation</li>
<li>the complete 1.0 Lifetime specification being released on the Guidelines&#8217; GitHub repo this month</li>
</ul>
<p>I’ll summarize the highlights but focus on what’s new, so I recommend <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA&amp;feature=youtu.be&amp;t=29m6s">rewatching that talk video</a> as a refresher for background for this year’s session.</p>
<p><strong>Metaclasses.</strong> In <a href="https://www.youtube.com/watch?v=4AfRAVcThyA&amp;vl=en">my CppCon 2017 talk</a>, I gave an early look at my “metaclasses” proposal to use compile-time reflection and compile-time generation to make authoring classes both more powerful and also simpler. In this case, “simpler” means not only eliminating a lot of tedious boilerplate, but also eliminating many common sources of errors and bugs. For this year, we’ll cover what’s new, including:</p>
<ul>
<li>an update on the Clang-based implementation, which now supports more use cases including function parameter lists</li>
<li>new examples, including from domains like concurrency</li>
<li>an updated P0707 paper, with more links to working examples live on Godbolt, being posted in the next few weeks for the pre-San Diego committee mailing</li>
</ul>
<p>&nbsp;</p>
									</div>

				<p class="post-info">
					Posted in <a href="https://herbsutter.com/category/uncategorized/" rel="category tag">Uncategorized</a> | 											<a href="https://herbsutter.com/2018/09/14/my-cppcon-2018-talk-title-and-abstract/#comments">6 Comments &#187;</a>									</p>
							</div>
					<div class="post-3673 post type-post status-publish format-standard hentry category-c" id="post-3673">
				<div class="posttitle">
			<h2><a href="https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/" rel="bookmark">Trip report: Summer ISO C++ standards meeting&nbsp;(Rapperswil)</a></h2>
				<p class="postmetadata">2018-07-02 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p>On Saturday June 9, the ISO C++ committee completed its summer meeting in beautiful Rapperswil, Switzerland, hosted with thanks by HSR Rapperswil, Zühlke, Netcetera, Bbv, SNV, Crealogix, Meeting C++, and BMW Car IT GmbH. We had some 140 people at the meeting, representing 11 national bodies. As usual, we met for six days Monday through Saturday, this time including all evenings.</p>
<p>Per our <a href="https://wg21.link/P1000">C++20 schedule</a>, this was the second-last meeting for merging major language features into C++20. So we gave priority to the major proposals that might make C++20 or otherwise could make solid progress, and we deferred other proposals to be considered at a future meeting — not at all as a comment on the proposals, but just for lack of time. We expect to get to these soon once C++20 is well in hand.</p>
<h1>Top news: Contracts adopted for C++20</h1>
<p><a href="https://wg21.link/p0542"><strong>Contracts (Gabriel Dos Reis, J. Daniel Garcia, John Lakos, Alisdair Meredith, Nathan Myers, Bjarne Stroustrup)</strong></a> was formally adopted for C++20.</p>
<p>Contracts allow preconditions, postconditions, and assertions to be expressed in code using a uniform syntax, with options to have different contract levels, custom violation handlers, and more.</p>
<p>Here are a few quick examples to get the flavor. Let’s start with perhaps the most familiar contract, <strong>assert</strong>:</p>
<pre>void f() {
    int x = g();
    int y = h();
<span style="color:#008000;"><strong>    [[assert: x+y &gt; 0]]</strong></span>
}</pre>
<p>“But wait,” someone might say, “C&#8217;s <strong>assert</strong> macro was good enough for my grandpappy, so shouldn’t it be good enough for me?” Never fear, you can still <strong>assert(x)</strong>, but if you respell it as <span style="color:#339966;"><strong>[[assert:x]]</strong></span> you get some benefits. For example:</p>
<ul>
<li>You’re not relying on a macro (unlike C assert). Yes, this matters, because macros are outside the language and routinely cause problems when using language features. For example, this was demonstrated again just a few days ago on Twitter by Nico Josuttis (HT: Alisdair Meredith), who pointed out that <strong>assert(c==std::complex&lt;float&gt;{0,0})</strong> does not compile; the reason is because macros don&#8217;t understand language commas, but <span style="color:#008000;"><strong>[[assert: c==std::complex&lt;float&gt;{0,0}]]</strong></span> works just fine without any surprises.</li>
<li>You get to install your own violation handler and ship a release build with the option of turning on enforcement at run time.</li>
<li>You get to express <span style="color:#008000;"><strong>audit</strong></span> to distinguish expensive checks to be run only when explicitly requested.</li>
<li>You get to express <span style="color:#008000;"><strong>axiom</strong></span> contracts that are intended to never generate run-time code but are available to static analysis tools.</li>
<li>Finally, you will likely get better performance, because contracts should enable compilers to perform more optimizations, more easily, than expressing them using assertions.</li>
</ul>
<p>But there’s more, because of course contracts are not just about assertions. They also include expects preconditions and ensures postconditions, which are part of the function declaration and so are visible at call sites:</p>
<pre>double sqrt(double x) <span style="color:#008000;"><strong>[[expects: x &gt;= 0]]</strong></span>;

void sort(vector&lt;emp&gt;&amp; v) <span style="color:#008000;"><strong>[[ensures audit: is_sorted(v)]]</strong></span>;
    // could be expensive, check only when audit is requested</pre>
<p>In addition to similar benefits as for assert, expects preconditions in particular deliver some enforcement benefits that are very desirable and difficult or impossible to get by hand:</p>
<ul>
<li>Preconditions are usually enforced at the call site, which is what we want most of the time because a precondition violation always means a programming bug in the calling code.</li>
<li>But preconditions can also be enforced in the callee, which can sometimes be necessary for pragmatic reasons, such as when the function is invoked through an opaque function pointer.</li>
<li>Preconditions and postconditions that are known at the call site also give the optimizer more information to potentially make your code fast.</li>
</ul>
<p>As a cheeky aside, if you noticed that I mentioned optimization several times, it’s for the usual reason: The simplest way to get C++ programmers to want a feature is to show that it can make their code faster, even if performance isn’t the only motivation or benefit.</p>
<h1>Why contracts are a big deal, and related Rapperswil progress</h1>
<p>In my opinion, contracts is the most impactful feature of C++20 so far, and arguably the most impactful feature we have added to C++ since C++11. That statement might surprise you, so let me elaborate why I think so.</p>
<p><strong>Having first-class contracts support it is the first major &#8220;step 1&#8221; of reforming error handling in C++</strong> and applying 30 years’ worth of learnings.</p>
<p><strong>Step 2 is to (gradually) migrate std:: standard library precondition violations in particular from exceptions (or error codes) to contracts.</strong> The programming world now broadly recognizes that programming bugs (e.g., out-of-bounds access, null dereference, and in general all pre/post/assert-condition violations) cause a corrupted state that cannot be recovered from programmatically, and so they should never be reported to the calling code as exceptions or error codes that code could somehow handle. Over the past three meetings (Albuquerque through Rapperswil), the Library Evolution Working Group (LEWG) voted unanimously to pursue <strong><a href="https://wg21.link/p0788r2">P0788R2 (Walter Brown)</a></strong> and relatedly in Rapperswil voted unanimously to pursue section 4.2 of <strong><a href="https://wg21.link/p0709">P0709 (my paper)</a></strong>, which includes pursuing a path of gradually migrating all standard library preconditions from exceptions toward contracts. (Note that in the near term, the idea is for implementations to be allowed, but not required, to use contracts. We are bringing the community forward gently here.)</p>
<p>Why is step 2 so important? Because it’s not just window dressing: Gradually switching precondition violations from exceptions to contracts promises to eventually remove a majority of all exceptions thrown by the standard library(!). This principle applies across programming languages; for examples, in Java and .NET some 90% of all exceptions are thrown for precondition violations (e.g., <strong>ArgumentNullException</strong>). Being able to eliminate a majority of all exceptions, which eventually enables many more functions to be <strong>noexcept</strong>, is a huge improvement for both correctness and performance:</p>
<ul>
<li><strong>Correctness: It eliminates a majority of the invisible control flow paths in our code.</strong> For example, over 20 years ago I wrote GotW #20 [<a href="http://gotw.ca/gotw/020.htm">Sutter 1997</a>] that shows how today a 4-line function has 3 normal execution paths and <em>20 invisible</em> exceptional execution paths; if we can eliminate a majority of the functions that can throw, we immediately remove a majority of the invisible possible execution paths in functions like this one, in all calling code.</li>
<li><strong>Performance: More </strong><strong>noexcept</strong><strong> enables more optimization and faster code.</strong> (You knew that was coming, right?)</li>
</ul>
<p>Once you change all preconditions (and postconditions and assertions) from exceptions to contracts, eliminating some of the largest categories of exceptions, one specific kind of exception dominates all others: <strong>bad_alloc</strong>. Which brings us to step 3…</p>
<p><strong>Step 3 is to consider handling heap exhaustion (out-of-memory, OOM) differently from other errors.</strong> If in addition to not throwing on precondition violations we also do not throw on OOM, the vast majority of all C++ standard library functions can be <strong>noexcept</strong>. — Needless to say, this would be a huge change where we need to tread carefully and measure impact and high-fidelity compatibility in major real code bases, and we don’t want people to panic about it or think we’ve lost our minds: We are serious about bringing code forward gently after validating good adoptability and low impact long before this gets near an actual standard.</p>
<p>Nevertheless, we are also serious about improving this, and the fundamental change is simple and already fully supported in C++ today: In Rapperswil, LEWG also voted unanimously to pursue section 4.3 of <strong><a href="https://wg21.link/p0709">P0709 (my paper)</a></strong> which proposes pursuing a path of gradually migrating all OOM from <strong>bad_alloc</strong> to <strong>new(nothrow)</strong>-like mechanisms. The initial contemplated step, definitely not for C++20, would be to change the default <strong>new_handler</strong> from throwing <strong>bad_alloc</strong> to calling <strong>terminate</strong>. That might sound like a big change, but it’s not, it’s already fully supported in C++ today because you can already change the <strong>new_handler</strong> to terminate today with a single line of code (<strong>std::set_new_handler([]{terminate();});</strong>), and this would just be changing the default and existing code that wants to keep the current behavior could still write simply the reverse single line of code (<strong>std::set_new_handler([]{throw std::bad_alloc();});</strong>) to get exactly the current behavior.</p>
<p>To repeat, this is a feature that will want a clear high-fidelity zero-breakage migration path, and we’re treating that compatibility seriously, even as we are also treating solving this problem seriously to modernize C++ error handling and move toward a mostly-<strong>noexcept</strong> world.</p>
<p>You can find a more detailed writeup in my new proposal <a href="https://wg21.link/p0709"><strong>P0709</strong></a>, particularly sections 1.1, 4.2, and 4.3. Again, P0709 is not for C++20, it is to illustrate a direction and potential path. The other parts of P0709 have not yet been reviewed by the full committee, so for now they should not be treated as anything more than a proposal, subject to much discussion and feedback over the coming several years.</p>
<h1>Other new features approved for C++20</h1>
<p>We adopted several other new features into the draft standard.</p>
<p><strong><a href="https://wg21.link/p0941">Feature test macros (Ville Voutilainen, Jonathan Wakely).</a></strong> This enables code to portably test whether a certain new C++ feature exists. “Why would I do that?” someone might ask. The primary and biggest benefit is <strong>they help your team to start to adopt new C++ features even before all your compilers support them</strong>; just write</p>
<pre>#if /*new feature is present*/ // temporary
<strong>    nice clean modern code!    // &lt;-- keep this long-term</strong>
#else                          // temporary
    do it the old way          // temporary
#endif                         // temporary</pre>
<p>and eventually drop the #if test and the whole #else block as soon as all your compilers are up to date. This is so much better than today, where one of two things happens: (1) Teams often wait until all their compilers support a given new C++ feature before they start to use it, which slows down adopting the new features and getting their benefits at least on the compilers that do support it. Or, (2) teams roll their own nonstandard nonportable compiler-specific “approximate” feature tests (e.g., write their own macro for “I know this feature is available on version ## of MSVC and version ## of GCC” by hand).</p>
<p>We all agree we don’t like macros. However, we don’t yet have replacements for all uses of macros, including this one, and these standard macros are better than rolling your own nonstandard ones or, more likely, just not using new C++ features at all for a longer time.</p>
<p>Some experts still disagree, and we respect their views, but in my view these feature test macros are an important and pragmatic help to improve the speed of adoption of new standard C++ features.</p>
<p><strong><a href="https://wg21.link/p0898">Standard library concepts (Casey Carter, Eric Niebler).</a></strong> This is the first part of the Ranges TS to be merged into C++20 at an upcoming meeting, and contains the core concepts from the Ranges TS. It is also the first appearance of the concepts language feature in the standard library. Expect more to come for C++20 (see Ranges, below).</p>
<p><strong><a href="https://wg21.link/p0732">Class Types in Non-Type Template Parameters (Jeff Snyder, Louis Dionne).</a></strong> Yes, you can now have types other than int and char as non-type template parameters. For example, in addition to <strong>template&lt;int Size&gt;</strong>, you can now have things like <strong>template&lt;fixed_string S&gt;</strong> for a suitably defined class type. It turns out that this builds on the <strong>&lt;=&gt;</strong> spaceship comparison operator; and if you’re wondering why, it’s because we know the semantics of a defaulted <strong>&lt;=&gt;</strong> comparison, which is essential because the compiler has to perform comparisons to determine whether two template instantiations are the same.</p>
<p>Note: I did not have this benefit in mind at all when I proposed <strong>&lt;=&gt;</strong>. I think this is a great example where, when you let programmers express intent explicitly as with <strong>&lt;=&gt;</strong>, and provide useful defaults, you are inherently adding more reliable information to the source code and will reap additional benefits because you can now build on knowledge of that clear programmer intent.</p>
<p><a href="https://wg21.link/p0892"><strong>explicit(bool) (Barry Revzin).</strong></a> This is conditional <strong>explicit</strong>, along the same lines as conditional <strong>noexcept</strong>. It lets library writers write <strong>explicit</strong> at a finer granularity, to turn off conversions where possible and feasible, without having to write two functions all the time.</p>
<p><strong><a href="https://wg21.link/p0476">Bit-casting object representations (JF Bastien).</a></strong> Header <strong>&lt;bit&gt;</strong> now lets you <strong>bit_cast.</strong> “But wait,” someone may be thinking, “don’t we already have <strong>reinterpret_cast</strong>?” Yes we do, and this is still a reinterpreting operation, but <strong>bit_cast</strong> has less unsafety and some additional flexibility: it ensures the sizes of the From and To types match, guarantees that they are both actually trivially copyable, and as a bonus makes the operation <strong>constexpr</strong> wherever possible.</p>
<p>Speaking of constexpr bit_cast, here are some more items in the “constexpr all the things!” department:</p>
<ul>
<li><strong><a href="https://wg21.link/p0879">“Constexpr for swap and swap related functions” (Antony Polukhin).</a></strong> Don’t be misled by the title, there are a lot of algorithms mentioned here.</li>
<li><strong><a href="https://wg21.link/p1064">“Allowing Virtual Function Calls in Constant Expressions” (Peter Dimov, Vassil Vassilev).</a></strong> Even if you weren’t surprised that we were thinking of <strong>constexpr new</strong> (we are), you might still be surprised about <strong>constexpr virtual</strong> functions. After all, virtual functions are dynamic, right? Yes they are… except when they run at compile time. So here’s another step to general C++ compile-time code.</li>
</ul>
<h1>Other progress and decisions</h1>
<p><strong>Reflection TS is feature-complete</strong>: The Reflection TS was declared feature-complete and is being sent out for its main comment ballot over the summer. Note again that the TS’s current template metaprogramming-based syntax is just a placeholder; the feedback being requested is on the core “guts” of the design, and the committee already knows it intends to replace the surface syntax with a simpler programming model that uses ordinary compile-time code and not <strong>&lt;&gt;</strong>-style metaprogramming.</p>
<p><strong>Parallelism TS2 is done</strong>: The second Parallelism TS is done! We completed ballot comment resolution, and approved the final TS for publication. This TS includes more execution policies, an <strong>exception_list</strong> type to communicate multiple parallel exceptions, and more parallel algorithms including wavefront, reductions, inductions, parallel for, and more. It also includes <strong>task_block</strong> support to enable writing custom parallel algorithms.</p>
<p><strong>Graphics (io2d) is deferred</strong>: Many thanks to Michael McLaughlin especially, and to Guy Davidson, Michael Kazakov, and David Ludwig for their assistance with the design, specification, and implementation of this cross-platform library. This is a project that has been worked on for several years, and for the past two years has been primarily responding to committee tweak requests; unfortunately, although the committee requested a series of updates to the proposal that have been applied, at this meeting the committee decided that it does not have interest to pursue further work on graphics in any form at this time after all. However, the io2d project will continue, and be available on package managers (Conan, vcpkg), and we expect a renewed proposal in the medium term; in the meantime, watch <a href="https://hatcat.com">Guy Davidson’s blog</a> for news and updates.</p>
<p>Also, LEWG adopted <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0921r2.pdf">P0921r2</a> as a statement of their direction for future C++ standard library evolution compatibility guarantees.</p>
<h1>Updates on other major proposals</h1>
<p>Here are other major items in progress. You’ll notice that the first six (6!) of them mention expectations for our next meeting this November in San Diego. Not all of those items will make C++20 in San Diego, but people are going to try. It’s not surprising that San Diego is going to be a busy meeting, though; that was expected, because it’s the last meeting to merge major features into C++20, and deadlines are famously motivational. — Just <strong>do not</strong> expect all of the following to make C++20, and I’m listing them in rough order starting with the most likely to make it in.</p>
<p><strong>(very likely for C++20) Ranges</strong>: In my previous trip report I mentioned that the core concepts from the Ranges TS were expected to make C++20, but the rest of the Ranges TS would be “C++20 or C++23.” Since then we have made faster than expected progress, and it now looks like Ranges is “likely” to make C++20 in the next meeting or two. For those interested in details, in addition to all of the Ranges TS, also paper P0789 on Range Adaptors and Utilities have now progressed to detailed wording review and are targeting C++20. In sum, to quote Eric Niebler: “If you liked the Ranges TS, you’ll love C++20.”</p>
<p><strong>(likely for C++20) Concepts: “convenience” notation for constrained templates</strong>: We already added the concepts core feature to C++20, and at this meeting we had further discussions on adding a convenience syntax to write constrained templates without resorting to the low-level “<strong>requires</strong>” keyword. The two major active proposals that received discussion were from Bjarne Stroustrup and from me. The good news is that the Evolution Working Group (EWG) liked both, which means that for the first time we have a proposal based on the TS syntax (Bjarne’s preference) that could get consensus to be approved!</p>
<p>The key people are continuing to work to come up with a merged proposal that might be adoptable for C++20 in November in San Diego, and I’m pleased to report that as of this post-meeting mailing we for the first time have a unified proposal that lists most of the previous authors of papers in this area as coauthors, you can find it here: <strong><a href="https://wg21.link/P1141">P1141R0: “Yet another approach for constrained declarations.”</a></strong> I’m guardedly optimistic that we may have a winner here; we’ll know in San Diego. (I sometimes delay my trip report until the post-meeting mailing is available so that everyone can see the latest papers, and knowing that this new paper was coming was one reason I delayed this report.)</p>
<p><strong>(maybe for C++20) Coroutines</strong>: EWG considered an alternative, then decided to go forward with the TS approach. That came up for full committee vote but fell just short and was not adopted for C++20; the proposers will continue to work on improving consensus over the summer by addressing remaining concerns and we expect coroutines to be proposed again for C++20 at our November meeting in San Diego.</p>
<p><strong>Modules</strong>: For the first time, the committee saw a merged approach that both major proposers said satisfies their requirements; that announcement was met by applause in the room. The merged proposal aims to combine the “best of” the Modules TS and the Atom alternative proposal, and that direction was approved by EWG. EWG did not approve the poll to incorporate a subset of it into C++20 at this meeting; it is not yet clear whether part of the proposal can make C++20 but we are going to have an extra two-day meeting in September to help make progress and we expect it to be proposed again for C++20 at our November meeting in San Diego.</p>
<p><strong>Executors</strong>: This is still not expected to be part of C++20, but key people have not given up and are trying to make it happen, and one never can tell. We are going to hold an extra two-day meeting in September to help make progress on Executors, and expect to have a lively discussion about options to merge all or parts of it into C++20 in November in San Diego.</p>
<p><strong>Networking</strong>: This is pretty much ready except that it depends on Executors. Soon after Executors are ready for C++20, Networking is ready to slide in right behind it.</p>
<p>Clearly San Diego is going to be a busy meeting. But before then we have two extra design meetings on modules and executors to help improve their chances of progress; those will be co-located with <strong><a href="https://cppcon.org/">CppCon in September</a></strong>, to take place near the CppCon site on the days just before the conference begins. On top of that, there will also be an extra library wording issues meeting in the Chicago area in August… all in all, it’ll be a full summer and fall before we even get to San Diego.</p>
<p>Additionally, <strong>SG12</strong> had productive discussions about undefined behavior (including with participation from our sister ISO working group WG23, Programming Language Vulnerabilities), and <strong>SG15</strong> had a second exploratory evening session focusing on package managers for C++.</p>
<h1>What’s next</h1>
<p>Here is a cheat-sheet summary of our current expectations for some of the major pieces of work. Note that, as always, this is an estimate only. The bolded parts are the major changes from last time, including that Ranges as a whole is looking very likely for C++20.</p>
<p><img data-attachment-id="3675" data-permalink="https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/wg21-schedule-2018-06/" data-orig-file="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500" data-orig-size="1357,617" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-schedule-2018-06" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500?w=500" class="alignnone size-full wp-image-3675" src="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500" alt="wg21-schedule-2018-06" srcset="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>And here is an updated snapshot of where we are on the timeline for C++20 and the TSes that are completed, in flight, or expected to begin:</p>
<p><img data-attachment-id="3674" data-permalink="https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/wg21-timeline-2018-06/" data-orig-file="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500" data-orig-size="1943,1339" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline-2018-06" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500?w=500" class="alignnone size-full wp-image-3674" src="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500" alt="wg21-timeline-2018-06" srcset="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the approximately 140 experts who attended this meeting, and the many more who participate in standardization through their national bodies! Have a good spring… we look forward now to our next “extra” meetings in September (Bellevue, WA, USA) and the next regular WG21 meeting in November (San Diego, CA, USA).</p>
									</div>

				<p class="post-info">
					Posted in <a href="https://herbsutter.com/category/c/" rel="category tag">C++</a> | 											<a href="https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/#comments">25 Comments &#187;</a>									</p>
							</div>
					<div class="post-3664 post type-post status-publish format-standard hentry category-uncategorized" id="post-3664">
				<div class="posttitle">
			<h2><a href="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/" rel="bookmark">Trip report: Winter ISO C++ standards meeting&nbsp;(Jacksonville)</a></h2>
				<p class="postmetadata">2018-04-02 by <a href="https://herbsutter.com/author/herbsutter/" title="Posts by Herb Sutter">Herb Sutter</a>  </p>
				</div>

				<div class="entry">
					<p><em>[Edited to add C++20 schedule at end]</em></p>
<p>On Saturday March 17, the ISO C++ committee completed its winter meeting in Jacksonville, Florida, USA, hosted with thanks by the <a href="http://isocpp.org/about">Standard C++ Foundation</a> and <a href="https://peren.com/">Perennial</a>. We had some 140 people at the meeting, representing 8 national bodies. As usual, we met for six days Monday through Saturday, including all evenings.</p>
<p>A special highlight was on Thursday evening (the only non-officially-working evening) when Bjarne Stroustrup personally hosted the entire committee for a celebratory dinner to share the <a href="https://isocpp.org/blog/2018/02/bjarne-stroustrup-receives-draper-prize-engineerings-top-u.s.-honor">2018 Charles Stark Draper Prize</a>, the U.S.’s top engineering honor, which this year was awarded for a programming language for only the second time in its history. Although the prize was awarded to Bjarne personally, he made it clear that he considered this an award for the whole C++ community, without whom C++ would never have been successful, and so he hosted the dinner for the committee as a representative proxy for the entire worldwide C++ community. — So to all C++ programmers and contributors who are reading this: Thank you, from Bjarne and from us, for your support, and consider yourselves part of this year’s Draper Prize.</p>
<p>The following are some highlights of what we achieved this week. You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>. The main things to note are:</p>
<ul>
<li>“IS” means “international standard.” In our case, it’s the core C++ standard itself. Think of this as “trunk.”</li>
<li>“TS” means “technical specification,” a document separate from the main standard where we can gain experience with new features before putting them into the IS. We have several of these, summarized on the <a href="http://isocpp.org/std/status">status page</a>. Think of these as “beta branches.”</li>
</ul>
<h2>Leading up to this meeting</h2>
<p>As I reported in my <a href="https://herbsutter.com/2017/11/11/trip-report-fall-iso-c-standards-meeting-albuquerque/">previous trip report</a> for the fall meeting (Albuquerque 2017), last time we almost completed addressing the comments received from national bodies in the Modules comment ballot that ran last summer. The rest were addressed in a series of teleconferences between meetings, and the <strong>Modules TS</strong> was finalized and shipped to ISO at the end of January.</p>
<p>One of the highlights in the pre-meeting mailing was <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0939r0.pdf"><strong>“Direction for ISO C++” (Beman Dawes, Howard Hinnant, Bjarne Stroustrup, Daveed Vandevoorde, Michael Wong)</strong></a>. Although non-binding, it’s the first set of recommendations from our recently created advisory Direction Group, a small subgroup of respected long-time participants that currently consists of those paper authors and is chaired this year by Bjarne Stroustrup.</p>
<h2>Features adopted for C++20</h2>
<p>We adopted several new features into the draft standard.</p>
<p><a href="https://wg21.link/p0840"><strong><em>[[no_unique_address]]</em> (Richard Smith).</strong></a> You know the empty base optimization (EBO)? If you do, can you remember the (probably many) times you’ve artificially made another class a base of your class, instead of just a data member, just so you could get EBO? And, every time that happened, you wished C++ had the empty member optimization (let&#8217;s call it &#8220;EMO&#8221;)? In C++20, it does, and you opt in via <em>[[no_unique_address]]</em>. Here’s an example from the paper:</p>
<pre>template&lt;typename Key, typename Value,
         typename Hash, typename Pred, typename Allocator&gt;
class hash_map {
<span style="color:#339966;">  [[no_unique_address]]</span> Hash hasher;         // EMOji
<span style="color:#339966;">  [[no_unique_address]]</span> Pred pred;           // EMOji
<span style="color:#339966;">  [[no_unique_address]]</span> Allocator alloc;     // EMOji
  Bucket *buckets;
  // ...
public:
  // ...
};</pre>
<p><a href="https://wg21.link/p0479r2"><strong><em>[[likely]]</em> and </strong><strong><em>[[unlikely]]</em> (Clay Trychta).</strong></a> (The link is to R2 of the paper, which contains more description. The R4 version is the one that was adopted.) Many compilers already allow you to “hint” whether a branch is likely or unlikely to be true, which can help optimizations. This standardizes that. Here’s an example from the paper:</p>
<pre>if (foo()) <span style="color:#339966;">[[unlikely]]</span> return false;
if (bar()) <span style="color:#339966;">[[unlikely]]</span> return false;
baz();</pre>
<p>Major disclaimer: This feature comes with the same warning label as the existing compiler extensions, which is “measure, measure, measure!” Compilers already know which branches are likely, usually better than you do (especially with profile-guided optimization, aka PGO). A major reason to use this feature is not actually to optimize (though it can help if you don’t have PGO), but to control which path gets optimized for other reasons. For example, for some code it is essential to make the <em>uncommon</em> path faster so that it is faster when you do hit it — and in such cases you would actually use this attribute in the inverted sense, so please also write a comment nearby to document that intent otherwise some hapless reader (more than likely your future self) will be temporarily confused.</p>
<p><a href="https://wg21.link/p0355r7"><strong>Extending </strong><strong><em>&lt;chrono&gt;</em> to calendars and time zones (Howard Hinnant, Tomasz Kamiński).</strong></a> This is a much-loved (and huger-than-you-think) library addition that will help a lot of users, and really exercises modern C++ features like user-defined literals.</p>
<p><a href="https://wg21.link/p0122r7"><strong><em>span</em>: Bounds-safe views for sequences of objects (Neil MacIntosh, Stephan T. Lavavej).</strong></a> This one comes directly from the C++ Core Guidelines’ Guideline Support Library (GSL), and is intended to be a replacement especially for unsafe C-style (pointer,length) parameter pairs. We expect to be used pervasively as a vocabulary type for function parameters in particular.</p>
<h2>Cleanup adopted for C++20</h2>
<p>We also made some improvements to existing features.</p>
<p><a href="https://wg21.link/p0634"><strong>“Down with </strong><strong><em>typename</em>!” (Nina Ranns, Daveed Vandevoorde).</strong></a> Are you tired of writing <em>typename</em> redundantly in places where the compiler should know only a type was possible? So were the proposal authors. Now <em>typename</em> is required in fewer places.</p>
<p><a href="https://wg21.link/p0780"><strong>Lambda capture initializers can now expand variadic parameter packs (Barry Revzin).</strong></a> An example, taken from the paper:</p>
<pre>template&lt;class F, class... Args&gt;
auto delay_invoke(F f, Args... args) {
    return [f=std::move(f), <span style="color:#339966;">...args=std::move(args)</span>]() -&gt; decltype(auto) {
        return std::invoke(f, args...);
    };
}</pre>
<p>The now-allowed expansion is the one in the third line.</p>
<p><a href="https://wg21.link/p0962"><strong>Consistent <em>begin</em>/<em>end</em> for range-<em>for</em> (Ville Voutilainen).</strong></a> The range-based <em>for</em> loop is already customizable, and can handle ranges that have both member <em>rng.begin()</em>/<em>rng.end()</em> functions or ones that have non-member <em>begin(rng)</em>/<em>end(rng)</em> functions. But what if it relies on the non-member functions, but happens to also have one member named either <em>begin</em> or <em>end</em> (such as, say, <em>end</em> in <em>ios_base</em>)? That’s now legal, we ignore the one-off member and use the non-member pair. Here’s an example from the paper that is not legal in C++17 but now works in C++20:</p>
<pre>struct X : std::stringstream { /*...*/ };

std::istream_iterator&lt;char&gt; begin(X&amp; x)
  { return std::istream_iterator&lt;char&gt;(x); }

std::istream_iterator&lt;char&gt; end(X&amp; x)
  { return std::istream_iterator&lt;char&gt;(); }

int main() {
    X x;
<span style="color:#339966;">    for (auto&amp;&amp; i : x) {   // works in C++20
</span>      // ...
    }
}</pre>
<p>Interesting tidbit: This is one of those “new functionality” features created by removing wording in the standard, namely removing a restriction. The entire wording change was to change “either (or both) finds” to “both find” in one place.</p>
<p><a href="https://wg21.link/p0969"><strong>Structured bindings can access accessible members (Timur Doumler).</strong></a> In C++17, you could use structured bindings to bind to class members as long as they were public. But what if you’re inside a member or friend of the class? Shouldn’t you be able to use structured bindings on members, which are visible (i.e., accessible) to you even if they aren’t public to everyone, just like we can do any other normal thing with those members? In C++17 that didn&#8217;t work, but it was an oversight and now we can do that:</p>
<pre>class X {
    int i;
    int j;
public:
    friend void f();
};

void f() {
    X x;
<span style="color:#339966;">    auto [myi, myj] = x;   // now ok</span>
}</pre>
<p>We also adopted some other fixes, including:</p>
<ul>
<li><a href="https://wg21.link/p0961"><strong>Structured bindings </strong><strong><em>get&lt;&gt;</em> lookup relaxations (Ville Voutilainen)</strong></a> to make the <em>get&lt;&gt;</em> customization point a little more general and easier to use, such as for types that happens to also have an unrelated member non-template <em>.get()</em> (like smart pointers).</li>
<li><a href="https://wg21.link/p0905r1"><strong>Symmetry for spaceship (Tomasz Kamiński, Herb Sutter, Richard Smith)</strong></a> to make <em>&lt;=&gt;</em> itself symmetric the way <em>&lt;=&gt;</em> already made the two-way comparisons symmetric.</li>
<li><a href="https://wg21.link/p0551r3"><strong>Thou shalt not specialize </strong><strong><em>std</em> function templates! (Walter E. Brown)</strong></a>, which should be read with the addendum “or take their addresses” (that last part continues to be discussed).</li>
<li><a href="https://wg21.link/p0754r2"><strong><em>&lt;version&gt;</em> (Alan Talbot)</strong></a> described as “for those people who dislike <em>&lt;iso646&gt;</em>.”</li>
</ul>
<p>&#8230; and a few more including a couple of small extensions to <strong>coroutines</strong> and <strong>networking</strong>. Note that those two TSes were already published, and are not yet merged into the C++ draft standard, but we are still maintaining those experimental TS “branches” with fixes and updates, so that those will be done and ready once we are ready to merge those TS branches into the C++ “trunk” project itself.</p>
<h2>Other major full committee approvals</h2>
<p>We approved <strong>Parallelism TS 2</strong> to be extended with the (huge) extensions in <a href="https://wg21.link/p0214r9"><strong>Data-parallel vector types and operations (Matthias Kretz)</strong></a> and declared it <strong>feature-complete</strong>: It is now being sent out for its main ISO comment ballot.</p>
<p>We also decided to officially open a <strong>Reflection TS</strong> work item, which means that the committee as a whole is taking ownership of the proposal and intends to progress it as a TS. The initial content is from the paper <a href="https://wg21.link/p0194r6"><strong>“Static reflection” (Matúš Chochlík, Axel Naumann, David Sankel)</strong></a> but everyone should understand that the surface syntax will change. The primary point of the TS is in the underlying “engine” and functionality, and the intention is to replace the placeholder template-metaprogramming-like <em>reflexpr</em> syntax with an object-like model that looks like “more <em>constexpr</em> code” — regular C++ code that is able to be run at compile time.</p>
<h2>Language/library evolution subgroup approvals</h2>
<p>Here is a list of proposals that achieved Evolution or Library Evolution working group (EWG or LEWG) design approval. This means that the subgroup responsible for approving the design has done so (sometimes provisionally, with a few “revision is expected” notes below), and the next step is that they now enter wording review in the Core or Library working group (CWG or LWG), and are slated to be proposed for formal adoption in C++20 at a future meeting. Thanks to Olivier Giroux, Ville Voutilainen, Titus Winters for their notes that contributed to this summary.</p>
<p>For <strong>contracts</strong>, EWG discussed a clarification to what the result of observable side-effects in contract pre/post-conditions is, and the guidance is that it’s undefined behavior.</p>
<p>For <strong>reflection</strong> and related facilities, EWG approved some papers that are significant milestones for compile-time programming:</p>
<ul>
<li><a href="https://wg21.link/p0670"><strong>“Static reflection of functions” (Matúš Chochlík, Axel Naumann, David Sankel)</strong></a>, which would extend the reflection proposal to functions and parameters.</li>
<li><a href="https://wg21.link/p0784"><strong>“Standard containers and </strong><strong><em>constexpr</em>” (Louis Dionne, Richard Smith, Nina Ranns, Daveed Vandevoorde)</strong></a> which would permit <em>constexpr</em> objects to have destructors and use dynamic memory allocation — stop, pause, and reflect[sic] on just what those two features imply: compile-time resource-managing types like <em>constexpr vector&lt;std::metainfo&gt;</em>. Sends shivers down your spine (in a good way), doesn’t it?</li>
<li><a href="https://wg21.link/p0732"><strong>“Class types in non-type template parameters” (Jeff Snyder)</strong></a>, which would permit template non-type parameters of user-defined type, and enables instantiating templates with values such as compile-time strings.</li>
</ul>
<p>EWG also approved:</p>
<ul>
<li><a href="https://wg21.link/p0482"><strong>“</strong><strong><em>char8_t</em>: A type for UTF-8 characters and strings” (Tom Honermann)</strong></a></li>
<li><a href="https://wg21.link/p0892"><strong>“</strong><strong><em>explicit(bool)</em>” (Barry Revzin)</strong></a></li>
<li><a href="https://wg21.link/p0929"><strong>“Checking for abstract class types” (Jens Maurer)</strong></a></li>
</ul>
<p>We also decided to pursue putting in writing two statements about <strong>how we evolve C++</strong>:</p>
<ul>
<li>EWG decided to pursue turning <a href="https://wg21.link/p0684"><strong>“C++ Stability, Velocity, and Deployment Plans” (Titus Winters)</strong></a> into a Standing Document, with the expectation is that the document will be revised and reviewed again. Titus Winters will be the main author, and Gabriel Dos Reis, Bjarne Stroustrup, and Mike Spertus will assist.</li>
<li>EWG also supports turning <a href="https://wg21.link/p0921"><strong>“Standard library compatibility promises” (Titus Winters)</strong></a> into a Standing Document, and to add the promises also to the standard’s own Library Introduction clause. Titus Winters will be the main author, with help from Ashley Hedberg, Nevin Liber, Bjarne Stroustrup, James Dennett, Walter E. Brown, Gor Nishanov, Alisdair Meredith, Mike Spertus, Robert Steagall and Daveed Vandevoorde.</li>
</ul>
<p>We decided to launch a systematic effort to drive out the remaining uses of <strong>macros</strong> by providing replacements for those uses. We requested an analysis paper listing all the remaining use cases for macros are, a description of the status of the non-macro solutions for those problems, and possible solutions. This paper will be led by Ville Voutilainen, assisted by Bjarne Stroustrup, Gabriel Dos Reis, James Dennett, and Vittorio Romeo.</p>
<p>Somewhat stunningly (to me), we decided to pursue some <strong>cleanup to the C fundamental types</strong> that would be a breaking change to certain kinds of C and C++17 code. It came up via the discussion of <a href="https://wg21.link/p0946"><strong>“Towards consistency between </strong><strong><em>&lt;=&gt;</em> and other comparison operators” (Richard Smith)</strong></a>, which observed that when we added <em>&lt;=&gt;</em> to C++20, in <em>&lt;=&gt;</em> only we deliberately decided not to repeat the well-known issues that we did not want to perpetuate with C’s two-way comparisons for fundamental types (e.g., signed-unsigned comparison surprises like <em>-1 &lt; 0u</em> giving the “wrong” answer)… which naturally meant that we now have inconsistencies between the preexisting two-way comparison operators and the shiny new three-way <em>&lt;=&gt;</em> operator. When faced with this, the subgroup discovered that we had a consensus in the room that enough really was enough, and we decided to seriously investigate doing some housecleaning and fix those things even though that would include breaking changes to (mostly ill-behaved) C and C++17 code. For example, we are now on a path to pursue deprecating or outright removing the ability to compare two unrelated enumerations (which is just plain suspicious code), and to require <em>-1 &lt; 0u</em> to give the mathematically correct answer even when in the worst case that means generating two comparison machine instructions instead of just one (any code that does such ill-advised things would change from being a correctness problem into “just” a one-extra-instruction performance problem). — We have made no decisions about actually doing this or the ship vehicle for such changes, which likely would have to be rolled out in stages via deprecation followed by removel, and we expect more data to be gathered before Rapperswil regarding how much code could be affected. But as far as I can recall, this is the most breaking-change cleanup to C’s fundamental types that we have ever been willing to seriously consider.</p>
<p>LEWG approved <a href="https://wg21.link/p0898"><strong>Standard library concepts (Casey Carter)</strong></a>. This is the first part of the Ranges TS to be on track for merging into C++20 at an upcoming meeting, and contains the core concepts from the Ranges TS. It is also the first appearance of the <strong>concepts</strong> language feature in the standard library.</p>
<h2>Other progress</h2>
<p>Also for <strong>concepts</strong>, at this meeting EWG approved pursuing a direction based on my paper <a href="https://wg21.link/p0745"><strong>“Concepts in-place syntax” (Herb Sutter)</strong></a> to have a shorthand syntax for declaring constrained templates.</p>
<p>At this meeting, we considered further improvements to the <strong>modules</strong> design, including a renewed proposal focusing on a bridge to help existing header-based code move toward a modules-enabled world. By the end of the meeting, the main participants had hammered out a plan to, over the next few meetings:</p>
<ul>
<li>move a core set of modules functionality into C++20 that is “clean” and uncompromised by legacy concerns; and</li>
<li>concurrently update the remaining modules TS with features specific to transitioning header-based code to modules, which might include support for macros.</li>
</ul>
<p>There’s a lot of work remaining, but we’ll know in the next few meetings how the objectives are progressing.</p>
<p>After several years of incubation, <strong>executors</strong> are now making strong progress and are on track to become a TS in the C++20 timeframe. (Let me explicitly say “<strong>thread pools</strong>” for the benefit of those who are Ctrl-F&#8217;ing to find out how C++ intends to support modern thread pools such as in Windows 10 and Grand Central Dispatch. You&#8217;re now in the right place: Modern thread pool support is coming as part of executors.)</p>
<p>Note that there is a dependency on executors before we can merge the <strong>networking</strong> TS and the future.then feature in the <strong>concurrency</strong> TS into the C++ draft standard, which means that all of those features are likely to be merged early in the C++23 cycle rather than in C++20.</p>
<p>We are going to try to ship <strong>coroutines</strong> in C++20.</p>
<p>We are opening a new work item for <strong>Library Fundamentals TS3</strong>, the third batch of library additions, even as we will soon be starting to fold in material from the recently-published Library Fundamentals TS2 into C++20.</p>
<p><strong>SG15 (Tooling) (Titus Winters)</strong> had its first meeting, and there is a shared belief that we need to take concrete steps toward enabling better support for tools for two things in particular: modules, and C++ library package managers. That coincided very nicely with the <a href="https://isocpp.org/blog/2018/03/results-summary-cpp-foundation-developer-survey-lite-2018-02">2018-02 isocpp.org survey</a>, where on the open-ended question 10, the #1 write-in answer was to request “dependencies / package manager” (15% of all write-ins mentioned that). Clearly there is interest in this area, and it will be interesting to see how this develops into proposals over the coming meetings.</p>
<p>We also created a new study group <strong>SG16 (Unicode)</strong> with Tom Honermann as the SG chair.</p>
<h2>What’s next</h2>
<p>Whew! Here is a cheat-sheet summary of our current expectations for some of the major pieces of work that are not already in draft C++20. Note that this is an estimate only.</p>
<p style="text-align:center;"><img data-attachment-id="3665" data-permalink="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/cpp11147020-201803/" data-orig-file="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500" data-orig-size="1357,678" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cpp11147020 &#8211; 201803" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500?w=500" class="alignnone size-full wp-image-3665" src="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500" alt="cpp11147020 - 201803" srcset="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>And here is an updated snapshot of where we are on the timeline for C++20 and the TSes that are completed, in flight, or expected to begin:</p>
<p style="text-align:center;"><img data-attachment-id="3666" data-permalink="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/wg21-timeline-2018-03/" data-orig-file="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500" data-orig-size="1214,838" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline-2018-03" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500?w=500" class="alignnone size-full wp-image-3666" src="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500" alt="wg21-timeline-2018-03.png" srcset="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Finally, here is the schedule for the C++20 cycle approved by unanimous consent at this meeting:</p>
<p style="text-align:center;"><img data-attachment-id="3671" data-permalink="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/wg21-schedule-2018-03/" data-orig-file="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500" data-orig-size="1479,814" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-schedule-2018-03" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500?w=500" class="alignnone size-full wp-image-3671" src="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500" alt="wg21-schedule-2018-03" srcset="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the approximately 140 experts who attended this meeting, and the many more who participate in standardization through their national bodies! Have a good spring… we look forward now to our next meetings in June (Rapperswil, Switzerland) and November (San Diego, CA, USA).</p>
									</div>

				<p class="post-info">
					Posted in <a href="https://herbsutter.com/category/uncategorized/" rel="category tag">Uncategorized</a> | 											<a href="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/#comments">17 Comments &#187;</a>									</p>
							</div>
				<p align="center" class="posts-nav-link">
			<a href="https://herbsutter.com/page/2/" >Older Posts &#187;</a>		</p>
</div><!-- end id:content-main -->
<div id="sidebar">
<ul>
<li class="sidebox"><h2><label for="subscribe-field">Follow by email</label></h2>
				<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="subscribe-blog">
																	<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" placeholder="Enter your email address" value="" id="subscribe-field"/></p>
					
					<p>
						<input type="hidden" name="action" value="subscribe"/>
						<input type="hidden" name="blog_id" value="3379246"/>
						<input type="hidden" name="source" value="https://herbsutter.com/"/>
						<input type="hidden" name="sub-type" value="widget"/>
						<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
						<input type="hidden" id="_wpnonce" name="_wpnonce" value="4590924cc6" />						<input type="submit" value="Subscribe" />
					</p>
				</form>
			
</li><li class="sidebox"><h2><a href='http://twitter.com/herbsutter'>Tweets</a></h2><ul class='tweets'></ul><a href="http://twitter.com/herbsutter"  class='twitter-follow-button' data-show-count='false' data-link-color='#265e15' data-text-color='#333333'>Follow @herbsutter</a></li><li class="sidebox"><h2>Popular</h2><ul>				<li>
										<a href="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/" class="bump-view" data-bump-view="tp">
						Trip report: Fall ISO C++ standards meeting (San Diego)					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/gotw/" class="bump-view" data-bump-view="tp">
						GotW					</a>
										</li>
								<li>
										<a href="https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/" class="bump-view" data-bump-view="tp">
						Lifetime profile v1.0 posted					</a>
										</li>
				</ul></li><li class="sidebox"><h2>Categories</h2>		<ul>
				<li class="cat-item cat-item-291"><a href="https://herbsutter.com/category/apple/" >Apple</a>
</li>
	<li class="cat-item cat-item-49277"><a href="https://herbsutter.com/category/c-net/" >C# / .NET</a>
</li>
	<li class="cat-item cat-item-2426"><a href="https://herbsutter.com/category/c/" >C++</a>
</li>
	<li class="cat-item cat-item-69816"><a href="https://herbsutter.com/category/cloud/" >Cloud</a>
</li>
	<li class="cat-item cat-item-214618"><a href="https://herbsutter.com/category/concurrency/" >Concurrency</a>
</li>
	<li class="cat-item cat-item-8259773"><a href="https://herbsutter.com/category/effective-concurrency/" >Effective Concurrency</a>
</li>
	<li class="cat-item cat-item-3696745"><a href="https://herbsutter.com/category/friday-thoughts/" >Friday Thoughts</a>
</li>
	<li class="cat-item cat-item-3867746"><a href="https://herbsutter.com/category/c/gotw/" >GotW</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://herbsutter.com/category/hardware/" >Hardware</a>
</li>
	<li class="cat-item cat-item-1017"><a href="https://herbsutter.com/category/java/" >Java</a>
</li>
	<li class="cat-item cat-item-637"><a href="https://herbsutter.com/category/microsoft/" >Microsoft</a>
</li>
	<li class="cat-item cat-item-420845"><a href="https://herbsutter.com/category/opinion-editorial/" >Opinion &amp; Editorial</a>
</li>
	<li class="cat-item cat-item-1633077"><a href="https://herbsutter.com/category/reader-qa/" >Reader Q&amp;A</a>
</li>
	<li class="cat-item cat-item-2301"><a href="https://herbsutter.com/category/software-development/" >Software Development</a>
</li>
	<li class="cat-item cat-item-393523"><a href="https://herbsutter.com/category/talks-events/" >Talks &amp; Events</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://herbsutter.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-151"><a href="https://herbsutter.com/category/web/" >Web</a>
</li>
		</ul>
			</li></ul>
</div><!-- end id:sidebar -->
</div><!-- end id:content -->
</div><!-- end id:container -->
<div id="footer">
	<div id="colophon">
		<p><a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a></p>
		<p>WPThemes.</p>
		<br class="clear" />
	</div><!-- end #colophon-->
</div><!-- end #footer-->
		<script type="text/javascript">
		//<![CDATA[
		var infiniteScroll = {"settings":{"id":"content-main","ajaxurl":"https:\/\/herbsutter.com\/?infinity=scrolling","type":"scroll","wrapper":true,"wrapper_class":"infinite-wrap","footer":true,"click_handle":"1","text":"Older posts","totop":"Scroll back to top","currentday":"02.04.18","order":"DESC","scripts":[],"styles":[],"google_analytics":false,"offset":0,"history":{"host":"herbsutter.com","path":"\/page\/%d\/","use_trailing_slashes":true,"parameters":""},"query_args":{"error":"","m":"","p":0,"post_parent":"","subpost":"","subpost_id":"","attachment":"","attachment_id":0,"name":"","pagename":"","page_id":0,"second":"","minute":"","hour":"","day":0,"monthnum":0,"year":0,"w":0,"category_name":"","tag":"","cat":"","tag_id":"","author":"","author_name":"","feed":"","tb":"","paged":0,"meta_key":"","meta_value":"","preview":"","s":"","sentence":"","title":"","fields":"","menu_order":"","embed":"","category__in":[],"category__not_in":[],"category__and":[],"post__in":[],"post__not_in":[],"post_name__in":[],"tag__in":[],"tag__not_in":[],"tag__and":[],"tag_slug__in":[],"tag_slug__and":[],"post_parent__in":[],"post_parent__not_in":[],"author__in":[],"author__not_in":[],"posts_per_page":7,"ignore_sticky_posts":false,"suppress_filters":false,"cache_results":false,"update_post_term_cache":true,"lazy_load_term_meta":true,"update_post_meta_cache":true,"post_type":"","nopaging":false,"comments_per_page":"50","no_found_rows":false,"order":"DESC"},"last_post_date":"2018-04-02 18:06:02","stats":"blog=3379246&v=wpcom&tz=-8&user_id=0&subd=herbsutter&x_pagetype=infinite"}};
		//]]>
		</script>
		<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201847y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	</div>
<script type='text/javascript'>
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"https:\/\/herbsutter.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?action=logout&_wpnonce=6fccf864d4","homeURL":"https:\/\/herbsutter.com\/","postID":"3695","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"","text_direction":"ltr"};
/* ]]> */
</script>
<script type='text/javascript' src='https://s2.wp.com/_static/??/wp-content/js/jquery/jquery.autoresize.js,/wp-content/mu-plugins/highlander-comments/script.js?m=1521806916j'></script>
		<div id="infinite-footer">
			<div class="container">
				<div class="blog-info">
					<a id="infinity-blog-title" href="https://herbsutter.com/" rel="home">
						Sutter’s Mill					</a>
				</div>
				<div class="blog-credits">
					<a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a> 				</div>
			</div>
		</div><!-- #infinite-footer -->
		
	<div id="carousel-reblog-box">
		<form action="#" name="carousel-reblog">
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" placeholder="Add your thoughts here... (optional)"></textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="#" class="cancel">Cancel</a></span>
				<input type="submit" name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post" />
				<input type="hidden" id="carousel-reblog-blog-id" value="3379246" />
				<input type="hidden" id="carousel-reblog-blog-url" value="https://herbsutter.com" />
				<input type="hidden" id="carousel-reblog-blog-title" value="Sutter’s Mill" />
				<input type="hidden" id="carousel-reblog-post-url" value="" />
				<input type="hidden" id="carousel-reblog-post-title" value="" />
			</div>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="c0f0a72e87" /><input type="hidden" name="_wp_http_referer" value="/" />		</form>

		<div class="arrow"></div>
	</div>
<link rel='stylesheet' id='all-css-0-3' href='https://s0.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel.css?m=1524699534h&cssminify=yes' type='text/css' media='all' />
<!--[if lte IE 8]>
<link rel='stylesheet' id='jetpack-carousel-ie8fix-css'  href='https://s1.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel-ie8fix.css?m=1412618825h&#038;ver=20121024' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='all-css-2-3' href='https://s2.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.css?m=1443731146h&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"3379246","siteName":"Sutter\u2019s Mill","siteURL":"https:\/\/herbsutter.com","icon":"<img alt='' src='https:\/\/secure.gravatar.com\/blavatar\/4554b8d24c7f200dc5e2e1b18db1893f?s=50&d=https%3A%2F%2Fs2.wp.com%2Fi%2Flogo%2Fwpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/mistylook","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2018%2F11%2F13%2Ftrip-report-fall-iso-c-standards-meeting-san-diego%2F","themeURL":"","xhrURL":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"8fb9818ae2","isSingular":"","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"4590924cc6\" \/>","referer":"https:\/\/herbsutter.com\/","canFollow":"1","feedID":"171936","statusMessage":"","customizeLink":"https:\/\/herbsutter.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fherbsutter.wordpress.com%2F","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: MistyLook","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"Join 19,532 other followers","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2018%2F11%2F13%2Ftrip-report-fall-iso-c-standards-meeting-san-diego%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"https:\/\/herbsutter.com\/wp-admin\/admin-ajax.php","nonce":"665015e67f","display_exif":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","copyright":"Copyright","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/herbsutter.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fherbsutter.com%2F2018%2F11%2F13%2Ftrip-report-fall-iso-c-standards-meeting-san-diego%2F","blog_id":"3379246","meta_data":["camera","aperture","shutter_speed","focal_length","copyright"],"local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=3379246&v=wpcom&tz=-8&user_id=0&subd=herbsutter","is_public":"1","reblog_enabled":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVUdFuwyAM/KFSt5q6Pk37FkqcxpQYhk3S/H1JpURTq0XaA9JxvrPPAGMyLrIiK3iBBgdymO57Lzv4VeqLSaFciQUC3VDgp2DBznITMG+IiVti0mkFr9pFKBOrvXd07UI9ivmd2Rhjm57YXGyG3kqVVmTigDlTU7Ou3D87aLbuJlsmpxR5Nq1oQ+1sjkUwgEdNtbNZiMVD7EKZA9ePkLGNF49O/3qwoa4WwYqgPg3Pe8ooc+Dv/ut4+vg8ns+H08E/AITttzI='></script>
<script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVy0sOQEAMANALqcYvYSHOgmkmpWoyirg9WyuxfIuHZ4BxVSM1XHYIsnvWDe1kM4owSD/OA0cHgQmVDoqkjtWn05bgnxu+Hws58L0IxeutZ3VLm1V5WRVlU+fTDQ0qQ9Y='></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script type="text/javascript">
			jQuery.extend( infiniteScroll.settings.scripts, ["jquery-core","jquery-migrate","jquery","mobile-useragent-info","postmessage","jquery_inview","jetpack_resize","spin","jquery.spin","grofiles-cards","wpgroho","jquery.autoresize","highlander-comments","devicepx","jetpack_likes_queuehandler","the-neverending-homepage","syntaxhighlighter","wpcom-masterbar-js","wpcom-masterbar-tracks-js","wpcom-actionbar-bar","jetpack-carousel","swfobject","videopress","twitter-widgets","twitter-widgets-infinity","twitter-widgets-pending","tiled-gallery"] );
			jQuery.extend( infiniteScroll.settings.styles, ["jetpack_likes","the-neverending-homepage","infinity-mistylook","wpcom-core-compat-playlist-styles","mp6hacks","wpcom-bbpress2-staff-css","wp-block-library","mistylook","jetpack-top-posts-widget","jetpack-widget-social-icons-styles","noticons","geo-location-flair","reblogging","a8c-global-print","wpcom-actionbar-bar","h4-global","highlander-comments","highlander-comments-ie7","jetpack-carousel","tiled-gallery","jetpack-carousel-ie8fix"] );
		</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'3379246','blog_tz':'-8','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'3379246','v':'wpcom','tz':'-8','user_id':'0','subd':'herbsutter'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1TaVhzUzFMbjdWNHpwZGhTayxPSUFCMGNrd29+Smw0TDhnZmRTK0hlRi9QSGh6bi9GXVhBJWIlZlR5U1JMLU8/MkNtblkvY1d1TjBELytHc0k/MXdHUVQyK2IyUVA5SjU1bj9VX3ExLHYsREFpcnlfNHYtXV1HSUIsLkJrcnp0eS5sNFVFci5uQjJqTmcvVXlHRzNmbU55UHZKQkhXLkE/VnliTFRid1MxMk8rQk9WZj9lWW9CK2p1R05lLkRQZ1FoTF0sci9wW2MrYXZlQlY4XzM/bUlWYlg/QXBwT2pUeTI1WTcrU3kmTlZtMz8sJkdDOTNCZmVPUFFZdD1obFRNN0diYlEuQz9FK0MvN1NbLT9xMkdzYzFbalhtNVUubGU/RT9LVkd3WWJwU1lUSzN0Tw=='}]);
_stq.push([ 'clickTrackerInit', '3379246', '0' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>