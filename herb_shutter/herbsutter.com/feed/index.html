<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>Sutter’s Mill</title>
	<atom:link href="https://herbsutter.com/feed/" rel="self" type="application/rss+xml" />
	<link>https://herbsutter.com</link>
	<description>Herb Sutter on software development</description>
	<lastBuildDate>
	Mon, 19 Nov 2018 23:08:16 +0000	</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
<cloud domain='herbsutter.com' port='80' path='/?rsscloud=notify' registerProcedure='' protocol='http-post' />
<image>
		<url>https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=96&#038;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fbuttonw-com.png</url>
		<title>Sutter’s Mill</title>
		<link>https://herbsutter.com</link>
	</image>
	<atom:link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
	<atom:link rel='hub' href='https://herbsutter.com/?pushpress=hub'/>
	<item>
		<title>Trip report: Fall ISO C++ standards meeting (San Diego)</title>
		<link>https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/</link>
				<comments>https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/#comments</comments>
				<pubDate>Tue, 13 Nov 2018 21:29:31 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3695</guid>
				<description><![CDATA[On Saturday November 10, the ISO C++ committee completed its fall meeting in San Diego, California, USA, hosted with thanks by Qualcomm. This was the biggest ISO C++ meeting in our 29-year history, with some 180 people at the meeting, representing 12 nations. For more details about our size increase, including how we adapted organizationally to [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>On Saturday November 10, the ISO C++ committee completed its fall meeting in San Diego, California, USA, hosted with thanks by <strong><a href="https://www.qualcomm.com">Qualcomm</a></strong>. This was the biggest ISO C++ meeting in our 29-year history, with some 180 people at the meeting, representing 12 nations. For more details about our size increase, including how we adapted organizationally to handle the load, see <a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/">my “pre-trip report”</a> posted before the meeting began.</p>
<p>Because this is one of the last meetings for adding features to C++20, we gave priority to proposals that might make C++20, and we adopted a number of them for C++20. <strong>Thank you to all of the hundreds of people who participate in ISO C++</strong>, those who came to the meeting and still more who participated electronically, and who all helped with the design refinement and specification wording and organization. I want to at least try to recognize by name many of the authors of the proposals we adopted, but nobody succeeds with a proposal on their own. <strong>C++ is a team effort</strong> – this wouldn’t be possible without all of your help. So, thank you, and apologies for not being able to acknowledge everyone by name.</p>
<p>Notes:</p>
<ul>
<li>Some of the links below are to papers that will not be published until the post-meeting mailing at the end of this month, and so the links will become public at that time.</li>
<li>For more details, see also the <a href="https://www.reddit.com/r/cpp/comments/9vwvbz/2018_san_diego_iso_c_committee_trip_report_ranges/">Reddit trip report</a>.</li>
<li>You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>.</li>
</ul>
<h1>Prelude: Focus</h1>
<p>The committee is actively working to keep coherence and direction in the face of a tsunami of proposals and a huge number of enthusiastic people. Perhaps the most impactful record-setting number was the size of the pre-meeting mailing: 274 papers. For comparison, even excluding the biggest paper which was the updated C++ standard working draft which appears in every mailing, the pre-meeting mailing was enormous:</p>
<ul>
<li>By word count, it exceeded Shakespeare’s complete published works.</li>
<li>By paper count, it exceeded the previous pre-meeting papers record by about 65%, and started to approach the total number of technical papers to produce the first C++ standard (total of pre-meeting mailings from 1990-1997).</li>
</ul>
<p>We appreciate all the input, including that many of the papers are about bug fixes (always welcome) and rounding out existing features. However, a large number were proposals for new “good” features. And the trouble is that we can’t say yes to every feature that is “good” that benefits some users; we have to decide on a focused set, of at least coordinated features and ideally of general composable features, that fulfills the aim and mission of C++ and keeps the language adoptable and usable.</p>
<p>As I reminded in <a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/">my pre-trip report</a>, focus means saying no more often, and so we’ve taken several steps in recent meetings and at this meeting:</p>
<ul>
<li>About a year ago, we created the <strong>Direction Group (Bjarne Stroustrup, Daveed Vandevoorde, Michael Wong, Howard Hinnant, Roger Orr, and the recently retired Beman Dawes)</strong> which has created and maintains an advisory document <strong><a href="https://wg21.link/p0939">Direction for ISO C++ (P0939)</a></strong>.</li>
<li>In 2018, Pearson Education made free electronic copies of <strong><a href="http://www.stroustrup.com/dne.html">The Design and Evolution of C++ (Bjarne Stroustrup)</a></strong> available to all committee members. Not only does this help ensure that the newer people have access to this expected-to-be-read foundational work, which continues to be very current, but also having it in machine-readable and -searchable form makes it much easier to reference and quote from in our own papers.</li>
<li>At this meeting, we let EWG and LEWG continue to focus on near-term papers, and created <strong>SG17 (EWG Incubator, JF Bastien)</strong> and <strong>SG18 LEWG Incubator (Bryce Adelstein Lelbach)</strong> to help review and improve the papers that EWG and LEWG could not handle, to improve them and to prune them before they reach the main subgroup. Thank you to JF and Bryce for being willing to chair these new groups!</li>
</ul>
<h1>Two major features adopted for C++20: Ranges, and Concepts convenience notation</h1>
<p><strong><a href="https://wg21.link/P0896R3">Ranges (Eric Niebler, Casey Carter, Christopher Di Bella)</a></strong> was adopted for C++20. This was a tremendous amount of work by Casey Carter in particular (witness the recurring 3:00am editing update emails during the week). As Eric Niebler put it: “If you liked the Ranges TS, you’ll love C++20.”</p>
<p><strong><a href="https://wg21.link/P1141R1">Concepts “convenience” notation for constrained templates (Ville Voutilainen, Thomas Köppe, Andrew Sutton, Herb Sutter, Gabriel Dos Reis, Bjarne Stroustrup, Jason Merrill, Hubert Tong, Eric Niebler, Casey Carter, Tom Honermann, Erich Keane, Walter E. Brown, Michael Spertus)</a></strong> passed unanimously on Saturday. I highlighted this paper as a “we may have a winner here” in my last trip report, and indeed it sailed through and was adopted for C++20. Recall that we already added the concepts core feature to C++20 back in 2017, but without the convenience notation to write templates without the “template” or “requires” keywords; at this meeting we finally converged on a convenience syntax to write constrained templates that both addressed all the major problems people had identified in the Concepts TS convenience notation design, and was also acceptable to the primary concepts designers (hence the long list of coauthors). For the first time, besides the special case of generic lambdas, C++ will now let you write lots of generic functions without &#8220;template&#8221; or angle brackets, and that are concept-constrained and therefore much easier to use correctly than function templates have ever been before.</p>
<h1>More constexpr adopted for C++20: Ongoing concerted push toward general compile-time programming</h1>
<p>In the first part of my <a href="https://www.youtube.com/watch?v=4AfRAVcThyA">CppCon 2017 talk</a>, I emphasized that C++ is serious about first-class compile-time programming. That is a general theme to current C++ evolution, and is particularly important for being able to make effective use of compile-time reflection, and for building on that further in the future for compile-time code generation such as my <a href="https://wg21.link/P0707">metaclasses proposal</a> relies upon.</p>
<p>First-class compile-time programming in C++ has been building since we allowed simple one-liner constexpr functions in C++11, to constexpr functions with loops in C++14, to constexpr lambdas and “if constexpr” in C++17. This week, we have added still more as a coordinated set of additions to C++20:</p>
<ul>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1073r2.html">“consteval” immediate functions (Richard Smith, Andrew Sutton, Daveed Vandevoorde)</a></strong>, which came in part from Andrew’s and my <a href="https://wg21.link/P0707">metaclasses work</a>, allow writing functions that are guaranteed to run at compile time. This is essential for the kind of code generation that metaclasses rely on, and it’s great to see this now adopted as part of C++20!</li>
<li><strong><a href="https://wg21.link/P1330">constexpr union (Louis Dionne, Daveed Vandevoorde)</a></strong> lets you change the active member of a union during compile-time code.</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1002r0.pdf">constexpr try and catch (Louis Dionne)</a></strong> lets you write try/catch in constexpr code. However, note that it doesn’t actually let you throw exceptions at compile time.</li>
<li><strong><a href="https://wg21.link/P1327">constexpr dynamic_cast and typeid (Peter Dimov, Vassil Vassilev)</a></strong> lets you write dynamic_cast and typeid in compile-time expressions. Note that virtual function calls are already allowed in constant expressions (that was approved at our previous meeting).</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0595r1.html">std::is_constant_evaluated (also by Richard Smith, Andrew Sutton, Daveed Vandevoorde)</a></strong> lets you write conditional code that lets you write part of a function using code that is guaranteed to be executed at compile-time. Another way to think of it is that it’s similar in spirit to “if constexpr” except that it lets you combine “if constexpr” with an “else normal-if.”</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1006r1.pdf">constexpr std::pointer_traits (Louis Dionne)</a></strong> is an essential ingredient for enabling compile-time reflection and especially compile-time std::vector. (Compile-time std::vector will also need compile-time new, still under development.)</li>
<li><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1032r1.html">Miscellaneous constexpr library bits (Antony Polukhin)</a></strong> added still more constexpr within the standard library, which means making even more of the standard library available to compile-time code.</li>
</ul>
<p>We’re on track to making most “normal” C++ code available to run at compile time — and although C++20 won’t get quite all the way there, C++20 is a landmark release and a turning point where start to permanently leave behind the angle brackets and workarounds we’ve been using since the 1990s, with the near-complete birth of fully “natural” compile-time C++ code. Recall that we have already been adding support for user-defined types as template parameter types; soon (either before or after C++20’s feature freeze) we may be able to use strings as template arguments, and use containers like std::vector in compile-time code. Of course, there likely will be some limits; for example, supporting compile-time std::thread is possible, but less likely to be worth the effort.</p>
<p>Looking ahead to C++23 for a moment, where we expect still more of that plus (we hope) full static reflection in the standard, this marks a difficult-to-overstate landmark shift in C++ programming — not a course change, but really taking all the things that programmers have already been trying to do indirectly and giving it first-class natural support. The long-term results are likely to exceed our expectations in ways that we can’t fully anticipate yet. So fasten your seat belts, and stay tuned. C++ programming is likely to evolve more, and in better ways, in the upcoming 5 years than it already has in the past 20.</p>
<h1>Other changes approved for C++20</h1>
<p>A number of other smaller changes were adopted as well.</p>
<ul>
<li><strong><a href="https://wg21.link/p0668">Revising the C++ memory model (Hans-J. Boehm, Olivier Giroux, Viktor Vafeiades, et al.)</a></strong> makes several updates for weaker architectures including better support for GPU memory. <strong><a href="https://wg21.link/p0982">Weaken release sequences (Hans-J. Boehm, Olivier Giroux, Viktor Vafeiades)</a></strong>, a related paper forked from the main one, was also approved.</li>
<li><strong><a href="https://wg21.link/p1084">Today’s return-type-requirements are insufficient (Walter E. Brown, Casey Carter)</a></strong> tightens up Concept-constrained return type deduction.</li>
<li><strong><a href="https://wg21.link/p1289">Access control in contract conditions (J. Daniel Garcia, Ville Voutilainen)</a></strong> lets public functions’ preconditions and postconditions also access private members.</li>
<li><strong><a href="https://wg21.link/p0907">Signed integers are two’s complement (JF Bastien)</a></strong> is the result of a courtroom drama in both WG21 (C++) and WG14 (C). After intense prosecutorial cross-examination, the witness finally admitted in both courts that, yes, all known modern computers are two’s complement machines, and, no, we don’t really care about using C++ (or C) on the ones that aren’t. The C standard is likely to adopt the same change.</li>
<li><strong><a href="https://wg21.link/p0482">char8_t: A type for UTF-8 characters and strings (Tom Honermann)</a></strong> is another step toward broad Unicode support.</li>
<li><strong><a href="https://wg21.link/p1094">Nested inline namespaces (Alisdair Meredith)</a></strong> extends the new C++20 convenient nested namespace declaration syntax also for inline namespaces.</li>
<li><strong><a href="https://wg21.link/p1353">Missing feature test macros (John Spicer)</a></strong> adds support for missing macros that let code test for the presence of three features: destroying delete, three-way comparison (spaceship), and conditional explicit.</li>
<li>Several cleanup updates to std::optional, std::variant, std::function.</li>
<li><strong><a href="https://wg21.link/p0655">visit&lt;R&gt; (Michael Park, Agustín Bergé)</a></strong> allows specifying the return type when visiting variants.</li>
<li><strong><a href="https://wg21.link/p0357">reference_wrapper for incomplete types (Tomasz Kamiński, Stephan T. Lavavej, Alisdair Meredith)</a></strong> lets the wrapper work for forward-declared and abstract types.</li>
<li><strong><a href="https://wg21.link/p1007">assume_aligned (Timur Doumler, Chandler Carruth)</a></strong> enables portable code to express an alignment optimization hint to the compiler.</li>
<li><strong><a href="https://wg21.link/p1020">Smart pointer creation with default initialization (Glen Fernandes, Peter Dimov)</a></strong> adds allocate_shared_default_init, make_shared_default_init, and make_unique_default_init to perform default initialization.</li>
<li><strong><a href="https://wg21.link/p1085">Should span be Regular? (Tony Van Eerd)</a></strong> removes the comparison operators from std::span.</li>
<li><strong><a href="https://wg21.link/p0919">Heterogeneous lookup for unordered containers (Mateusz Pusz)</a></strong> enables indexing without creating a temporary key object.</li>
<li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0356r4.html"><strong>Simplified partial function application (Tomasz Kamiński)</strong></a> adds bind_front to the library.</li>
<li>Lots of smaller features and individual issues resolutions.</li>
</ul>
<h1>Other progress and decisions</h1>
<p><strong><a href="https://wg21.link/P1103">Modules (Richard Smith; and Gabriel Dos Reis)</a></strong> for the first time had a unified design approved targeting C++20. Wording specification work will continue over the holidays, and we expect to consider modules for C++20 at our next meeting in February.</p>
<p><strong>Executors</strong>: Thanks to progress between meetings and special meeting in September, we now are hopeful that an initial Executors design can make it for C++20. The feature was not merged at this meeting, but the design was approved for C++20 and we expect to consider adding the wording specification to C++20 at our next meeting.</p>
<p><strong>Coroutines</strong>: We continued to make progress on coroutines. At this meeting, EWG again recommended merging the <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/n4775.pdf"><strong>Coroutines TS (Gor Nishanov)</strong></a> into C++20, and this time EWG additionally explicitly included plans to incorporate features from the competing <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p1063r1.pdf"><strong>Core Coroutines proposal (Geoff Romer, James Dennett, Chandler Carruth)</strong></a>. As in Rapperswil, the vote to merge the Coroutines TS into C++20 fell just short numerically and was not adopted for C++20 at this meeting. The proposers, and new collaborators from Facebook and other companies, will continue to work on improving consensus over the winter by addressing remaining concerns, including doing further work to merge features from Core Coroutines into the TS approach, such as an upcoming paper <strong>“A unifying design for Executors, Sender/Receiver, coroutines, parallel algorithms and networking” by Lewis Baker</strong> of Facebook which is expected to appear in the post-meeting mailing. We expect coroutines to be proposed again for C++20 at our February meeting in Kona with this additional information, and with the national bodies having more time to absorb the large amount of new information that was presented at this meeting.</p>
<p><strong>Networking</strong>: This depends on Executors, and despite some discussion about decoupling the non-Executor parts, at this meeting we decided to target merging Networking into C++ for soon post-C++20 (i.e., targeting C++23). It also might depend on Coroutines, because some experts are still working through whether there is integration work to be done to merge Networking with Coroutines.</p>
<p><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/n4766.pdf">Reflection TS v1 (David Sankel)</a> ISO ballot continues:</strong> The Reflection TS international comment ballot was already in progress during the meeting and will conclude next month. As I mentioned in my last trip report, note again that the TS’s current template metaprogramming-based syntax is just a placeholder; the feedback being requested is on the core “guts” of the design, and the committee already knows it intends to replace the surface syntax with a simpler programming model that uses ordinary compile-time code and not &lt;&gt;-style metaprogramming. In San Diego, we began looking at a <strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1240r0.pdf">“next-generation” reflection proposal  P1240 (Andrew Sutton, Faisal Vali, Daveed Vandevoorde)</a></strong>.</p>
<p><strong><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0267r8.pdf">2D Graphics (Michael B. McLaughlin, Herb Sutter, Jason Zink, Guy Davidson, Michael Kazakov)</a></strong><strong> sent back to SG13:</strong> The SG13 HMI (human-machine interface) study group was reopened with <strong>Roger Orr</strong> as chair and will be taking another look at next steps for the Graphics proposal in the coming months.</p>
<h1>Upcoming new work: Machine learning and education</h1>
<p>In addition to the two Incubator Study Groups I mentioned in <a href="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/">my pre-trip report</a>, we also formed two new domain-specific study groups:</p>
<p><strong>SG19: Machine Learning (Michael Wong).</strong> We feel we can leverage C++’s strengths in generic programming, optimization and acceleration, as well as code portability, for the specific domain of Machine Learning. The aim of SG19 is to address and improve on C++’s ability to support fast iteration, better support for array, matrix, linear algebra, in memory passing of data for computation, scaling, and graphing, as well as optimization for graph programming.</p>
<p><strong>SG20: Education (JC van Winkel).</strong> We feel we have an opportunity to improve the quality of C++ education, to help software developers correctly use our language and ecosystem to write correct, maintainable, and performing software. SG20 aims to create curriculum guidelines for various levels of expertise and application domains, and to stimulate WG21 paper writers to include advise on how to teach the new feature they are proposing to add to the standard.</p>
<p>Thank you to Michael and JC for volunteering as chairs!</p>
<h1>What’s next</h1>
<p>Whew! Here is a cheat-sheet summary of our current reasonable expectations for some of the major pieces of work. Note that this is an estimate only, and progress can end up being different than expected.</p>
<p><img data-attachment-id="3696" data-permalink="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/wg21-proposal-progress-2/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500" data-orig-size="1357,676" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-proposal-progress" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500?w=500" class="alignnone size-full wp-image-3696" src="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500" alt="wg21-proposal-progress" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>And here is an updated snapshot of where we are on the schedule for C++20, which can always be found in paper <a href="https://wg21.link/p1000">P1000</a>:</p>
<p><img data-attachment-id="3697" data-permalink="https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/wg21-schedule/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500" data-orig-size="1479,814" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-schedule" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500?w=500" class="alignnone size-full wp-image-3697" src="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500" alt="wg21-schedule" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the approximately 180 experts who attended this meeting, and the many more who participate in standardization through their national bodies! Have a good winter… we look forward now to several interim telecons and potentially side meetings, and then our next regular WG21 meeting in February (Kona, HI, USA).</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/feed/</wfw:commentRss>
		<slash:comments>13</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/11/wg21-proposal-progress.png" medium="image">
			<media:title type="html">wg21-proposal-progress</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/11/wg21-schedule.png" medium="image">
			<media:title type="html">wg21-schedule</media:title>
		</media:content>
	</item>
		<item>
		<title>Pre-trip report: Fall ISO C++ standards meeting (San Diego)</title>
		<link>https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/</link>
				<comments>https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/#comments</comments>
				<pubDate>Mon, 05 Nov 2018 16:09:18 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3687</guid>
				<description><![CDATA[In one hour, our fall meeting will begin. I&#8217;ll still write a trip report at the end with the results of the meeting, but because this is an unusually (and historically) large meeting we&#8217;ve had to make a few adjustments. This post is combined from a couple of administrative emails I sent to the committee [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>In one hour, our fall meeting will begin. I&#8217;ll still write a trip report at the end with the results of the meeting, but because this is an unusually (and historically) large meeting we&#8217;ve had to make a few adjustments.</p>
<p>This post is combined from a couple of administrative emails I sent to the committee over the past few weeks. Note that they&#8217;re written with that audience in mind, so they end with guidance about how to work effectively in the new subgroups, but I thought that others who follow C++ standardization would find them interesting and useful too.</p>
<hr />
<h2>New Study Groups: EWG Incubator and LEWG Incubator</h2>
<p>As you may have noticed, we’ve been growing:</p>
<ul>
<li>Record #people: 173 unique names known so far for San Diego.</li>
<li>Record #papers: 274 in pre-San Diego.</li>
</ul>
<p>In the past we’ve had five main subgroups working during the week, but that doesn’t scale well to either the number of people (it’s not ideal to have ~170 in just five huge subgroups) or the number of papers (five subgroups will leave many papers unhandled). The following are some adjustments we’re making in order to scale organizationally.</p>
<p>Effective [October 19], we have formed two new Study Groups with the chairs shown below, both of which will meet in San Diego for three days each:</p>
<ul>
<li><strong>SG17 “EWG Incubator SG” (JF Bastien)</strong></li>
<li><strong>SG18 “LEWG Incubator SG” (Bryce Adelstein Lelbach)</strong></li>
</ul>
<p>Thank you very much to JF and Bryce for making themselves available to serve as chairs!</p>
<p>Notes:</p>
<ul>
<li>The “(L)EWG Incubator” SGs are not additional (L)EWG groups, they are (like all SGs) a pipeline stage in front of EWG and LEWG respectively.</li>
<li>As advertised in our agenda, in San Diego (L)EWG will again prioritize C++20-targetable material first, and the Incubator SGs’ primary agendas will be to schedule those papers that are not likely to fit in the main (L)EWG groups. The chairs are coordinating their agendas. Please consult the daily agendas that will be maintained on the wiki to see what topics are scheduled for each session, so that you don’t miss your favorite topic.</li>
<li>Although SGs typically forward work to (L)EWG, they can as needed forward work to each other too if they believe the proposal needs domain expert input from that SG before entering (L)EWG. Papers that are primarily about a topic that is owned by an active topic-specific SG should still go to that SG; for example, all other SGs normally redirect any stray concurrency-related papers they receive to SG1 instead.</li>
<li>Like most SGs, we should expect the Incubator SGs will forward only a subset of what they receive to (L)EWG, sometimes after first asking for significant changes. As with all SGs, any papers that these SGs refine and forward need to pass through (L)EWG as usual, including to meet the IS ship deadlines described in <a href="https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwg21.link%2Fp1000&amp;data=02%7C01%7Chsutter%40microsoft.com%7C8abce4edc0024dbe65a008d635dc4771%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636755617544126127&amp;sdata=dqjwKm57%2F5Ty7kKkXoMJPQKJ5J%2BpssmxTsWON6jwU3o%3D&amp;reserved=0">P1000</a>. As with all SGs[*], SG17 and SG18 never “pre-bless” proposals; if SG17/18 approves forwarding a proposal to (L)EWG, that just means it is ready to have an initial presentation in (L)EWG and begin its journey in those groups, not that it has any default positive standing in (L)EWG. There should never be an expectation of “well the SG blessed it, if we’d wanted to comment we should have been in the SG.”
<ul>
<li>[*] except for SG1 uniquely; proposals coming from SG1 do often have some advanced standing and trust because of SG1’s demonstrated expertise and history, but even SG1’s proposals get looked at by (L)EWG first and don’t skip (L)EWG entirely</li>
</ul>
</li>
<li>The quantity of work that we process into the standard is still gated by CWG and LWG bandwidth. Therefore a major function of the Incubator SGs is act as a selection pipeline stage to turn higher input volume into higher average quality, and avoid the status quo default of papers backing up in front of EWG/LEWG/CWG/LWG.</li>
</ul>
<p>We also have two expanded/reactivated Study Groups, both of which will meet in San Diego:</p>
<ul>
<li><strong>SG12 “UB, Undefined/Unspecifed Behavior” (Gabriel Dos Reis)</strong> is now regularly meeting for ~3 days, co-located again with our sister WG23 (Vulnerabilities) in San Diego. – So San Diego is again a combined WG21/WG23 meeting, not just WG21.</li>
<li><strong>SG13 “HMI, I/O” (Roger Orr)</strong> is now reactivated to handle the Graphics proposal that does not currently have consensus to proceed in LEWG but has a critical mass of people actively interested in working on it, so it makes sense to reactivate the SG. Also, that proposal is actually a group of some 5-6 sub-proposals, so it will be up to SG13 to decide whether to incubate them as a group or individually, and then feed them to appropriate other subgroups for consideration when ready. Thank you to Roger for being willing to chair the group!</li>
</ul>
<p>And we have a request for at least one new Study Group, though this will not be created until after San Diego:</p>
<ul>
<li>Several companies have approached me to actively pursue work in Machine Learning. No concrete announcement yet, but I’m penciling in an ‘<strong>SG19 (chair tbd)</strong>’ for that.</li>
</ul>
<p>So here’s an updated look at our current organization:</p>
<p><img data-attachment-id="3688" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-organization/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500" data-orig-size="1500,1058" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-organization" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500?w=500" class="alignnone size-full wp-image-3688" src="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500" alt="wg21-organization" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>The subgroups with heavy outlines are the ones that, starting in San Diego, will meet for multiple full days during our face-to-face meetings. You’ll notice there are now eight (8) of those, and so starting in San Diego our new standard meeting space requirement will be <strong>8 concurrent breakout rooms</strong> (was previously 6, with the 6<sup>th</sup> shared among SGs and usually lightly utilized). Here’s a summary of the breakout tracks in San Diego (and of course we’ll have plenary first thing Monday and on Saturday – a few subgroups may choose to also meet a little longer on Saturday after plenary, as usual, and that will be announced on Saturday):</p>
<p><img data-attachment-id="3689" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-breakouts/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500" data-orig-size="1500,843" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-breakouts" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500?w=500" class="alignnone size-full wp-image-3689" src="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500" alt="wg21-breakouts" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>(Insert your favorite &#8220;8-track&#8221; joke here, with <em>de rigueur</em> comment about C and C++ starting in the 1970s.)</p>
<h2>Perspective: Our history and trajectory</h2>
<p>I counted the #attendees (solid) and #papers (dashed) all the way back to my personal first meeting in July 1997. Here is the resulting graph.*</p>
<p><img data-attachment-id="3690" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-graph/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500" data-orig-size="1500,843" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-graph" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500?w=500" class="alignnone size-full wp-image-3690" src="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500" alt="wg21-graph" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Please go look at the <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/1997/">quaint 1997 papers page, when we completed C++98 standardization</a>. Fun facts:</p>
<ul>
<li>The highest paper number was N1148. So we had 1148 papers in the entire 8-year cycle to produce C++98.</li>
<li>Pre- and post-meeting mailings were typically of a similar size. So we had ~600 pre-meeting papers in the entire 8-year cycle to produce C++98.</li>
<li>Many of those were issues lists, a higher proportion than today. And the technical papers were typically shorter than today’s.</li>
</ul>
<p><strong>So our San Diego technical paper volume is within a close order of all the technical papers to produce C++98.</strong> And, as already noted, it’s more than Shakespeare’s lifetime published word count, even excluding the C++ working paper.</p>
<p>Also in 1997, two months before the first meeting shown in the above graph, there was a famous Q&amp;A session at WWDC that included the following quote:</p>
<blockquote><p><em>So we had to decide what are the fundamental directions we’re going in and what makes sense and what doesn’t. There were a bunch of things that didn’t, and microcosmically they might have made sense but macrocosmically they made no sense…</em></p>
<p><em>Focus is about saying no, and the result of that focus is going to be some really great products where the total is much greater than the sum of the parts.</em></p>
<p>— Some Guy, 1997  (and Bjarne Stroustrup, 2018, paraphrasing)</p></blockquote>
<h2><strong>What does “focus means saying no” mean to WG21?</strong></h2>
<p>We are a standards committee, not a design team. A design team can assign work (because it has employees), can make decisions without democratic vote (because it has a hopefully-benevolent dictator), and can just refuse to listen to ideas. A standards committee isn’t like that: In WG21, we are volunteers and we always review as many papers as we can (of course we assume the author/champion is present etc., see <a href="https://isocpp.org/std/standing-documents/sd-4-wg21-practices-and-procedures">SD-4</a>). For us, “saying no” doesn’t mean ignoring by fiat, it means deciding as a group to decline to go in that direction after first listening to it.</p>
<p>The way I think of this mailing’s papers is in five “buckets”, illustrated here:</p>
<p><img data-attachment-id="3691" data-permalink="https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/wg21-focus/" data-orig-file="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500" data-orig-size="1500,843" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-focus" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500?w=500" class="alignnone size-full wp-image-3691" src="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500" alt="wg21-focus.png" srcset="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Yes, I can count. There’s a bucket 0 that’s not on the slide:</p>
<p>0. Thank you for your papers that used to be missing! In the past we’ve sometime had presentations and reflector mails without papers – aka “please write a paper,” and you did. Thank you for those.</p>
<p>1. Thank you for your bug-fix papers! We appreciate the many eyes to help our standard be better. We expect to take <strong>most</strong> of these (modulo agreeing on the right fix).</p>
<p>2. Thank you for your papers to improve an existing feature! We appreciate ways to remove limitations on our features (e.g., enable move-capture for lambdas). We expect to take <strong>some percentage</strong> of these (modulo agreeing on the right improvement).</p>
<p>3. Thank you for your new overlapping feature ideas! Sometimes there is a group of related narrower features where there is a lovable general feature struggling to hatch. We will try to <strong>merge-via-generalization</strong> N features into 1 general feature that can be orthogonal and composable with the rest of the language and library. Note that this frequently takes a number of meetings. Also, ideally it results in the ability to <strong>deprecate existing features by replacement-via-generalization</strong> (think how “using” subsumed “typedef”).</p>
<p>4. Thank you for still more new solo feature ideas! We will consider all of them, but for we expect to have a <strong>high bar for language proposals</strong> and require that they are composable with the rest of the language and clearly aligned with (a step in the direction of) where we want C++ to go in the next 10-30 years. And, over time, expect to see fewer of them, and to have them increasingly make existing features redundant (<strong>deprecate existing features by replacement-via-generalization</strong>, again).</p>
<p>Both #3’s merging and #4’s filtering procedures are aiming at the same goal: Producing a strong proposal that solves more than one problem.</p>
<h2><strong>What you can do (message to new subgroup participants)</strong></h2>
<p>Especially in #3 and #4, it’s unavoidable that the Incubator SGs will break hearts by saying &#8220;no.&#8221; So, please keep in mind the following tips.</p>
<p><strong>When you are an Incubator SG participant,</strong> you will participate in polls that break hearts – so be kind, and especially watch for features that are #3’s (related to others and potentially generalizable) or look for ways to help them become #3’s (invite specific overlapping proposals that may not exist yet, to help complement and round out this proposal into something general), don’t just assume they’re #4’s (facing a difficult bar as a partly-fledged solo feature).</p>
<p><strong>When you are an Incubator SG presenter,</strong> be prepared that not everyone may love your feature as much as you do, at least at first – but find ways to frame, and to evolve, your proposal to make it #3 instead of #4, especially by finding like-minded proposers of similar features that you can together turn into a #3 feature group and refine/complete/integrate together. Because it’ll be easier to succeed in #3 than in #4.</p>
<p>In general, we encourage all participants to consult:</p>
<ul>
<li><a href="https://wg21.link/p0939">P0939</a>, the Direction Group’s suggestions – people are not expected to necessarily agree with every part but we should be open to the well-informed advice therein.</li>
<li><a href="http://www.stroustrup.com/dne.html">D&amp;E</a>, which is available for free to committee members – contact Bjarne to get a copy.</li>
</ul>
<p>Although we can’t read all the mailing, we can read these two items.</p>
<p>&nbsp;</p>
<p><strong>Thank you</strong> to everyone, especially to the new subgroup chairs and the existing officers and chairs and upcoming meeting hosts, who have worked very hard at short notice, especially over the past few weeks, to help organize for our current growth.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2018/11/05/pre-trip-report-fall-iso-c-standards-meeting-san-diego/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/11/wg21-organization.png" medium="image">
			<media:title type="html">wg21-organization</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/11/wg21-breakouts.png" medium="image">
			<media:title type="html">wg21-breakouts</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/11/wg21-graph.png" medium="image">
			<media:title type="html">wg21-graph</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/11/wg21-focus.png" medium="image">
			<media:title type="html">wg21-focus.png</media:title>
		</media:content>
	</item>
		<item>
		<title>My CppCon 2018 talk is now online</title>
		<link>https://herbsutter.com/2018/09/30/my-cppcon-2018-talk-is-now-online/</link>
				<comments>https://herbsutter.com/2018/09/30/my-cppcon-2018-talk-is-now-online/#comments</comments>
				<pubDate>Sun, 30 Sep 2018 17:09:36 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3685</guid>
				<description><![CDATA[My Thursday talk is now online. Thanks to Mark Bashian and his wonderful team at Bash Films for posting the plenary sessions so quickly&#8230; it was great to see each keynote posted the following morning, and the rest of the CppCon 2018 videos will be posted in the next few weeks as usual. Thanks again to everyone who [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="https://www.youtube.com/watch?v=80BZxujhY38">My Thursday talk is now online.</a> Thanks to Mark Bashian and his wonderful team at <a href="http://www.bashfilms.com/">Bash Films</a> for posting the plenary sessions so quickly&#8230; it was great to see each keynote posted the following morning, and the rest of the CppCon 2018 videos will be posted in the next few weeks as usual.</p>
<p>Thanks again to everyone who came! It was a great conference, and we are already looking forward to next year&#8217;s CppCon in our new location in Denver, CO, USA.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2018/09/30/my-cppcon-2018-talk-is-now-online/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Lifetime profile v1.0 posted</title>
		<link>https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/</link>
				<comments>https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/#comments</comments>
				<pubDate>Fri, 21 Sep 2018 06:00:06 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3683</guid>
				<description><![CDATA[I love C++. I also love safe code and not having to worry about dangling pointers and iterators and views. So I’ve been doing some work to make my life less conflicted: As long promised, the Lifetime profile 1.0 paper is now posted in the C++ Core Guidelines repo. It aims to detect common local [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I love C++. I also love safe code and not having to worry about dangling pointers and iterators and views. So I’ve been doing some work to make my life less conflicted: As long promised, the <strong><a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/docs/Lifetime.pdf">Lifetime profile 1.0 paper</a></strong> is now posted in the C++ Core Guidelines repo. It aims to detect common local cases of dangling pointers/iterators/string_views/spans/etc. in C++ code, at compile time, efficiently enough to run during normal compilation and in IDE tooltips. And, best of all (IMO), leveraging the rich information that’s already in typical modern C++ code, especially code that uses RAII and STL, with little or no annotation (e.g., see section 2.6).</p>
<p>For a quick summary, section 1.1 is a readable 3-page overview. Or, if you prefer watching a talk video, you can also see <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA&amp;feature=youtu.be&amp;t=29m6s">my CppCon 2015 talk starting at 29:06</a>, where I first talked about this work; the approach is still the same. I’ll also be <a href="https://herbsutter.com/2018/09/14/my-cppcon-2018-talk-title-and-abstract/">giving an update on this work next week at CppCon</a> as one of the three major sections of my talk this year.</p>
<p>Many thanks to all of the people who contributed and gave feedback to help me flesh out this design over the past three years. I would like to especially thank <strong>Neil MacIntosh</strong> and <strong>Kyle Reed</strong> who did the bulk of the MSVC static analysis extension implementation work, and <strong>Matthias Gehre</strong> and <strong>Gábor Horváth</strong> who did the Clang-based implementation. Thank you! Those of you who’ll be at CppCon will see some of these folks on-stage showing their work in my talk, and be able to ask them questions at the conference.</p>
<p>… Did I say Clang? Yes, there’s now also a Clang-based implementation in addition to MSVC. Although I stress this work is still somewhat experimental and that both are partial implementations, both of them do already compile most of the examples in the paper and both already run efficiently enough to run during normal compilation (Clang) and in the IDE for live-squiggle diagnostics (MSVC) even though they have not been optimized yet. And, as you’d expect in 2018, the Clang-based implementation is available on Godbolt — in the paper, just search for “godbolt” to find over 30 links to live examples. Here are a few you might find interesting:</p>
<ul>
<li><a href="https://godbolt.org/z/szJjnH">godbolt.org/z/szJjnH</a> A simple starter dangling raw pointer example.</li>
<li><a href="https://godbolt.org/z/_midIP">godbolt.org/z/_midIP</a> This one’s simple but fun… quick, how is the pointer use on line 11 invalidated by the <em>following</em> line, line 12?</li>
<li><a href="https://godbolt.org/z/dymV_C">godbolt.org/z/dymV_C</a> From C++17: A dangling <em>string_view</em>, which is important because it turns out to be easy to convert a <em>std::string</em> to a <em>string_view</em>, so that dangling is almost the default behavior.</li>
<li><a href="https://godbolt.org/z/eqCRLx">godbolt.org/z/eqCRLx</a> From the very latest bleeding edge: A dangling <em>filter_view</em> from the Ranges TS that we’re about to see if we can merge into the standard in time for C++20. Those are non-owning indirections, so they can dangle too.</li>
<li><a href="https://godbolt.org/z/iq5Qja">godbolt.org/z/iq5Qja</a> From C++98 with a dash of C++11: You know how using <em>auto</em> to deduce a <em>vector&lt;bool&gt;</em> subscript <em>[]</em> operator actually captures a <em>vector&lt;bool&gt;::reference</em> proxy, which can dangle after a <em>push_back</em> or <em>reserve</em>? If you didn’t: Sorry to be the bearer of sad tidings, but here’s some good news about that example.</li>
<li><a href="https://godbolt.org/z/UE-Mb0">godbolt.org/z/UE-Mb0</a> This short example can take a few minutes to grok… take a cup of coffee to understand who owns what and points where, and why the pointers are dangling (or not), and what the compiler is understanding about our code in order to be able to tell us about the problems accurately.</li>
</ul>
<p>If you’re interested in preventing common cases of dangling pointers, iterators, string_views, spans, and more, efficiently at compile time with high quality diagnostics, check out the examples in the paper and play around with them on Godbolt.</p>
<p>If you find new examples that are correctly diagnosed that you think are particularly cool, feel free to distill them down to their essence (and sanitize them if they came from real code) and post them as new Godbolt links in the comments below — bonus points if you also briefly summarize what the problem is, and extra bonus points if they did come from real world code. I may add some of them to the paper, with attribution, and maybe even use one in next week’s talk.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2018/09/20/lifetime-profile-v1-0-posted/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>My CppCon 2018 talk title and abstract</title>
		<link>https://herbsutter.com/2018/09/14/my-cppcon-2018-talk-title-and-abstract/</link>
				<comments>https://herbsutter.com/2018/09/14/my-cppcon-2018-talk-title-and-abstract/#comments</comments>
				<pubDate>Fri, 14 Sep 2018 18:53:14 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3680</guid>
				<description><![CDATA[In just 10 days, we&#8217;ll be at CppCon! I can hardly wait for Bjarne&#8217;s new opening keynote and the 100+ other sessions&#8230; we have a really great lineup of speakers again this year. I&#8217;ll be giving a talk as well, and here&#8217;s the title and abstract for what I&#8217;ll be covering this year. I hope [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>In just 10 days, we&#8217;ll be at <a href="http://www.cppcon.org">CppCon</a>! I can hardly wait for Bjarne&#8217;s new opening keynote and the 100+ other sessions&#8230; we have a really great lineup of speakers again this year.</p>
<p>I&#8217;ll be giving a talk as well, and here&#8217;s the title and abstract for what I&#8217;ll be covering this year. I hope to see many of you in sunny Bellevue, WA, USA soon.</p>
<p>&nbsp;</p>
<h2>Thoughts on a more powerful <em>and</em> simpler C++ (5 of N)</h2>
<p>Perhaps the most important thing we can do for C++ at this point in its evolution is to make sure we preserve its core strengths while also directing its evolution in ways that make it simpler to use. That is my own opinion at least, and so this talk starts with a perspective question: What “is C++,” really? The language continues to evolve and change; as it does so, how can we be sure we’re picking C++ evolutionary improvements that not only don’t lose its “C++-ic” qualities, but make it a better C++ than ever?</p>
<p>At recent CppCons, I’ve spoken about several of my own personal C++ evolution efforts and experiments, and why I think they’re potentially important directions to explore for making C++ both more powerful and also simpler to use. The bulk of the talk is updates on two of these:</p>
<p><strong>Lifetime and dangling.</strong> At CppCon 2015, Bjarne Stroustrup and I launched <a href="https://github.com/isocpp/CppCoreGuidelines"><em>The C++ Core Guidelines</em></a> in our plenary talks. In <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA&amp;feature=youtu.be&amp;t=29m6s">my part starting at 29:06</a>, I gave an early look at my work on the Guidelines “Lifetime” profile, an approach for diagnosing many common cases of pointer/iterator dangling at compile time, with demos in an early MSVC-based prototype. For this year’s CppCon, I’ll cover what’s new, including:</p>
<ul>
<li>use-after-move diagnoses</li>
<li>better support for the standard library out of the box without annotation</li>
<li>more complete implementations in two compilers: in MSVC as a static analysis extension, and in a Clang-based implementation that is efficient enough to run during normal compilation</li>
<li>the complete 1.0 Lifetime specification being released on the Guidelines&#8217; GitHub repo this month</li>
</ul>
<p>I’ll summarize the highlights but focus on what’s new, so I recommend <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA&amp;feature=youtu.be&amp;t=29m6s">rewatching that talk video</a> as a refresher for background for this year’s session.</p>
<p><strong>Metaclasses.</strong> In <a href="https://www.youtube.com/watch?v=4AfRAVcThyA&amp;vl=en">my CppCon 2017 talk</a>, I gave an early look at my “metaclasses” proposal to use compile-time reflection and compile-time generation to make authoring classes both more powerful and also simpler. In this case, “simpler” means not only eliminating a lot of tedious boilerplate, but also eliminating many common sources of errors and bugs. For this year, we’ll cover what’s new, including:</p>
<ul>
<li>an update on the Clang-based implementation, which now supports more use cases including function parameter lists</li>
<li>new examples, including from domains like concurrency</li>
<li>an updated P0707 paper, with more links to working examples live on Godbolt, being posted in the next few weeks for the pre-San Diego committee mailing</li>
</ul>
<p>&nbsp;</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2018/09/14/my-cppcon-2018-talk-title-and-abstract/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Summer ISO C++ standards meeting (Rapperswil)</title>
		<link>https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/</link>
				<comments>https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/#comments</comments>
				<pubDate>Mon, 02 Jul 2018 18:31:12 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3673</guid>
				<description><![CDATA[On Saturday June 9, the ISO C++ committee completed its summer meeting in beautiful Rapperswil, Switzerland, hosted with thanks by HSR Rapperswil, Zühlke, Netcetera, Bbv, SNV, Crealogix, Meeting C++, and BMW Car IT GmbH. We had some 140 people at the meeting, representing 11 national bodies. As usual, we met for six days Monday through [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>On Saturday June 9, the ISO C++ committee completed its summer meeting in beautiful Rapperswil, Switzerland, hosted with thanks by HSR Rapperswil, Zühlke, Netcetera, Bbv, SNV, Crealogix, Meeting C++, and BMW Car IT GmbH. We had some 140 people at the meeting, representing 11 national bodies. As usual, we met for six days Monday through Saturday, this time including all evenings.</p>
<p>Per our <a href="https://wg21.link/P1000">C++20 schedule</a>, this was the second-last meeting for merging major language features into C++20. So we gave priority to the major proposals that might make C++20 or otherwise could make solid progress, and we deferred other proposals to be considered at a future meeting — not at all as a comment on the proposals, but just for lack of time. We expect to get to these soon once C++20 is well in hand.</p>
<h1>Top news: Contracts adopted for C++20</h1>
<p><a href="https://wg21.link/p0542"><strong>Contracts (Gabriel Dos Reis, J. Daniel Garcia, John Lakos, Alisdair Meredith, Nathan Myers, Bjarne Stroustrup)</strong></a> was formally adopted for C++20.</p>
<p>Contracts allow preconditions, postconditions, and assertions to be expressed in code using a uniform syntax, with options to have different contract levels, custom violation handlers, and more.</p>
<p>Here are a few quick examples to get the flavor. Let’s start with perhaps the most familiar contract, <strong>assert</strong>:</p>
<pre>void f() {
    int x = g();
    int y = h();
<span style="color:#008000;"><strong>    [[assert: x+y &gt; 0]]</strong></span>
}</pre>
<p>“But wait,” someone might say, “C&#8217;s <strong>assert</strong> macro was good enough for my grandpappy, so shouldn’t it be good enough for me?” Never fear, you can still <strong>assert(x)</strong>, but if you respell it as <span style="color:#339966;"><strong>[[assert:x]]</strong></span> you get some benefits. For example:</p>
<ul>
<li>You’re not relying on a macro (unlike C assert). Yes, this matters, because macros are outside the language and routinely cause problems when using language features. For example, this was demonstrated again just a few days ago on Twitter by Nico Josuttis (HT: Alisdair Meredith), who pointed out that <strong>assert(c==std::complex&lt;float&gt;{0,0})</strong> does not compile; the reason is because macros don&#8217;t understand language commas, but <span style="color:#008000;"><strong>[[assert: c==std::complex&lt;float&gt;{0,0}]]</strong></span> works just fine without any surprises.</li>
<li>You get to install your own violation handler and ship a release build with the option of turning on enforcement at run time.</li>
<li>You get to express <span style="color:#008000;"><strong>audit</strong></span> to distinguish expensive checks to be run only when explicitly requested.</li>
<li>You get to express <span style="color:#008000;"><strong>axiom</strong></span> contracts that are intended to never generate run-time code but are available to static analysis tools.</li>
<li>Finally, you will likely get better performance, because contracts should enable compilers to perform more optimizations, more easily, than expressing them using assertions.</li>
</ul>
<p>But there’s more, because of course contracts are not just about assertions. They also include expects preconditions and ensures postconditions, which are part of the function declaration and so are visible at call sites:</p>
<pre>double sqrt(double x) <span style="color:#008000;"><strong>[[expects: x &gt;= 0]]</strong></span>;

void sort(vector&lt;emp&gt;&amp; v) <span style="color:#008000;"><strong>[[ensures audit: is_sorted(v)]]</strong></span>;
    // could be expensive, check only when audit is requested</pre>
<p>In addition to similar benefits as for assert, expects preconditions in particular deliver some enforcement benefits that are very desirable and difficult or impossible to get by hand:</p>
<ul>
<li>Preconditions are usually enforced at the call site, which is what we want most of the time because a precondition violation always means a programming bug in the calling code.</li>
<li>But preconditions can also be enforced in the callee, which can sometimes be necessary for pragmatic reasons, such as when the function is invoked through an opaque function pointer.</li>
<li>Preconditions and postconditions that are known at the call site also give the optimizer more information to potentially make your code fast.</li>
</ul>
<p>As a cheeky aside, if you noticed that I mentioned optimization several times, it’s for the usual reason: The simplest way to get C++ programmers to want a feature is to show that it can make their code faster, even if performance isn’t the only motivation or benefit.</p>
<h1>Why contracts are a big deal, and related Rapperswil progress</h1>
<p>In my opinion, contracts is the most impactful feature of C++20 so far, and arguably the most impactful feature we have added to C++ since C++11. That statement might surprise you, so let me elaborate why I think so.</p>
<p><strong>Having first-class contracts support it is the first major &#8220;step 1&#8221; of reforming error handling in C++</strong> and applying 30 years’ worth of learnings.</p>
<p><strong>Step 2 is to (gradually) migrate std:: standard library precondition violations in particular from exceptions (or error codes) to contracts.</strong> The programming world now broadly recognizes that programming bugs (e.g., out-of-bounds access, null dereference, and in general all pre/post/assert-condition violations) cause a corrupted state that cannot be recovered from programmatically, and so they should never be reported to the calling code as exceptions or error codes that code could somehow handle. Over the past three meetings (Albuquerque through Rapperswil), the Library Evolution Working Group (LEWG) voted unanimously to pursue <strong><a href="https://wg21.link/p0788r2">P0788R2 (Walter Brown)</a></strong> and relatedly in Rapperswil voted unanimously to pursue section 4.2 of <strong><a href="https://wg21.link/p0709">P0709 (my paper)</a></strong>, which includes pursuing a path of gradually migrating all standard library preconditions from exceptions toward contracts. (Note that in the near term, the idea is for implementations to be allowed, but not required, to use contracts. We are bringing the community forward gently here.)</p>
<p>Why is step 2 so important? Because it’s not just window dressing: Gradually switching precondition violations from exceptions to contracts promises to eventually remove a majority of all exceptions thrown by the standard library(!). This principle applies across programming languages; for examples, in Java and .NET some 90% of all exceptions are thrown for precondition violations (e.g., <strong>ArgumentNullException</strong>). Being able to eliminate a majority of all exceptions, which eventually enables many more functions to be <strong>noexcept</strong>, is a huge improvement for both correctness and performance:</p>
<ul>
<li><strong>Correctness: It eliminates a majority of the invisible control flow paths in our code.</strong> For example, over 20 years ago I wrote GotW #20 [<a href="http://gotw.ca/gotw/020.htm">Sutter 1997</a>] that shows how today a 4-line function has 3 normal execution paths and <em>20 invisible</em> exceptional execution paths; if we can eliminate a majority of the functions that can throw, we immediately remove a majority of the invisible possible execution paths in functions like this one, in all calling code.</li>
<li><strong>Performance: More </strong><strong>noexcept</strong><strong> enables more optimization and faster code.</strong> (You knew that was coming, right?)</li>
</ul>
<p>Once you change all preconditions (and postconditions and assertions) from exceptions to contracts, eliminating some of the largest categories of exceptions, one specific kind of exception dominates all others: <strong>bad_alloc</strong>. Which brings us to step 3…</p>
<p><strong>Step 3 is to consider handling heap exhaustion (out-of-memory, OOM) differently from other errors.</strong> If in addition to not throwing on precondition violations we also do not throw on OOM, the vast majority of all C++ standard library functions can be <strong>noexcept</strong>. — Needless to say, this would be a huge change where we need to tread carefully and measure impact and high-fidelity compatibility in major real code bases, and we don’t want people to panic about it or think we’ve lost our minds: We are serious about bringing code forward gently after validating good adoptability and low impact long before this gets near an actual standard.</p>
<p>Nevertheless, we are also serious about improving this, and the fundamental change is simple and already fully supported in C++ today: In Rapperswil, LEWG also voted unanimously to pursue section 4.3 of <strong><a href="https://wg21.link/p0709">P0709 (my paper)</a></strong> which proposes pursuing a path of gradually migrating all OOM from <strong>bad_alloc</strong> to <strong>new(nothrow)</strong>-like mechanisms. The initial contemplated step, definitely not for C++20, would be to change the default <strong>new_handler</strong> from throwing <strong>bad_alloc</strong> to calling <strong>terminate</strong>. That might sound like a big change, but it’s not, it’s already fully supported in C++ today because you can already change the <strong>new_handler</strong> to terminate today with a single line of code (<strong>std::set_new_handler([]{terminate();});</strong>), and this would just be changing the default and existing code that wants to keep the current behavior could still write simply the reverse single line of code (<strong>std::set_new_handler([]{throw std::bad_alloc();});</strong>) to get exactly the current behavior.</p>
<p>To repeat, this is a feature that will want a clear high-fidelity zero-breakage migration path, and we’re treating that compatibility seriously, even as we are also treating solving this problem seriously to modernize C++ error handling and move toward a mostly-<strong>noexcept</strong> world.</p>
<p>You can find a more detailed writeup in my new proposal <a href="https://wg21.link/p0709"><strong>P0709</strong></a>, particularly sections 1.1, 4.2, and 4.3. Again, P0709 is not for C++20, it is to illustrate a direction and potential path. The other parts of P0709 have not yet been reviewed by the full committee, so for now they should not be treated as anything more than a proposal, subject to much discussion and feedback over the coming several years.</p>
<h1>Other new features approved for C++20</h1>
<p>We adopted several other new features into the draft standard.</p>
<p><strong><a href="https://wg21.link/p0941">Feature test macros (Ville Voutilainen, Jonathan Wakely).</a></strong> This enables code to portably test whether a certain new C++ feature exists. “Why would I do that?” someone might ask. The primary and biggest benefit is <strong>they help your team to start to adopt new C++ features even before all your compilers support them</strong>; just write</p>
<pre>#if /*new feature is present*/ // temporary
<strong>    nice clean modern code!    // &lt;-- keep this long-term</strong>
#else                          // temporary
    do it the old way          // temporary
#endif                         // temporary</pre>
<p>and eventually drop the #if test and the whole #else block as soon as all your compilers are up to date. This is so much better than today, where one of two things happens: (1) Teams often wait until all their compilers support a given new C++ feature before they start to use it, which slows down adopting the new features and getting their benefits at least on the compilers that do support it. Or, (2) teams roll their own nonstandard nonportable compiler-specific “approximate” feature tests (e.g., write their own macro for “I know this feature is available on version ## of MSVC and version ## of GCC” by hand).</p>
<p>We all agree we don’t like macros. However, we don’t yet have replacements for all uses of macros, including this one, and these standard macros are better than rolling your own nonstandard ones or, more likely, just not using new C++ features at all for a longer time.</p>
<p>Some experts still disagree, and we respect their views, but in my view these feature test macros are an important and pragmatic help to improve the speed of adoption of new standard C++ features.</p>
<p><strong><a href="https://wg21.link/p0898">Standard library concepts (Casey Carter, Eric Niebler).</a></strong> This is the first part of the Ranges TS to be merged into C++20 at an upcoming meeting, and contains the core concepts from the Ranges TS. It is also the first appearance of the concepts language feature in the standard library. Expect more to come for C++20 (see Ranges, below).</p>
<p><strong><a href="https://wg21.link/p0732">Class Types in Non-Type Template Parameters (Jeff Snyder, Louis Dionne).</a></strong> Yes, you can now have types other than int and char as non-type template parameters. For example, in addition to <strong>template&lt;int Size&gt;</strong>, you can now have things like <strong>template&lt;fixed_string S&gt;</strong> for a suitably defined class type. It turns out that this builds on the <strong>&lt;=&gt;</strong> spaceship comparison operator; and if you’re wondering why, it’s because we know the semantics of a defaulted <strong>&lt;=&gt;</strong> comparison, which is essential because the compiler has to perform comparisons to determine whether two template instantiations are the same.</p>
<p>Note: I did not have this benefit in mind at all when I proposed <strong>&lt;=&gt;</strong>. I think this is a great example where, when you let programmers express intent explicitly as with <strong>&lt;=&gt;</strong>, and provide useful defaults, you are inherently adding more reliable information to the source code and will reap additional benefits because you can now build on knowledge of that clear programmer intent.</p>
<p><a href="https://wg21.link/p0892"><strong>explicit(bool) (Barry Revzin).</strong></a> This is conditional <strong>explicit</strong>, along the same lines as conditional <strong>noexcept</strong>. It lets library writers write <strong>explicit</strong> at a finer granularity, to turn off conversions where possible and feasible, without having to write two functions all the time.</p>
<p><strong><a href="https://wg21.link/p0476">Bit-casting object representations (JF Bastien).</a></strong> Header <strong>&lt;bit&gt;</strong> now lets you <strong>bit_cast.</strong> “But wait,” someone may be thinking, “don’t we already have <strong>reinterpret_cast</strong>?” Yes we do, and this is still a reinterpreting operation, but <strong>bit_cast</strong> has less unsafety and some additional flexibility: it ensures the sizes of the From and To types match, guarantees that they are both actually trivially copyable, and as a bonus makes the operation <strong>constexpr</strong> wherever possible.</p>
<p>Speaking of constexpr bit_cast, here are some more items in the “constexpr all the things!” department:</p>
<ul>
<li><strong><a href="https://wg21.link/p0879">“Constexpr for swap and swap related functions” (Antony Polukhin).</a></strong> Don’t be misled by the title, there are a lot of algorithms mentioned here.</li>
<li><strong><a href="https://wg21.link/p1064">“Allowing Virtual Function Calls in Constant Expressions” (Peter Dimov, Vassil Vassilev).</a></strong> Even if you weren’t surprised that we were thinking of <strong>constexpr new</strong> (we are), you might still be surprised about <strong>constexpr virtual</strong> functions. After all, virtual functions are dynamic, right? Yes they are… except when they run at compile time. So here’s another step to general C++ compile-time code.</li>
</ul>
<h1>Other progress and decisions</h1>
<p><strong>Reflection TS is feature-complete</strong>: The Reflection TS was declared feature-complete and is being sent out for its main comment ballot over the summer. Note again that the TS’s current template metaprogramming-based syntax is just a placeholder; the feedback being requested is on the core “guts” of the design, and the committee already knows it intends to replace the surface syntax with a simpler programming model that uses ordinary compile-time code and not <strong>&lt;&gt;</strong>-style metaprogramming.</p>
<p><strong>Parallelism TS2 is done</strong>: The second Parallelism TS is done! We completed ballot comment resolution, and approved the final TS for publication. This TS includes more execution policies, an <strong>exception_list</strong> type to communicate multiple parallel exceptions, and more parallel algorithms including wavefront, reductions, inductions, parallel for, and more. It also includes <strong>task_block</strong> support to enable writing custom parallel algorithms.</p>
<p><strong>Graphics (io2d) is deferred</strong>: Many thanks to Michael McLaughlin especially, and to Guy Davidson, Michael Kazakov, and David Ludwig for their assistance with the design, specification, and implementation of this cross-platform library. This is a project that has been worked on for several years, and for the past two years has been primarily responding to committee tweak requests; unfortunately, although the committee requested a series of updates to the proposal that have been applied, at this meeting the committee decided that it does not have interest to pursue further work on graphics in any form at this time after all. However, the io2d project will continue, and be available on package managers (Conan, vcpkg), and we expect a renewed proposal in the medium term; in the meantime, watch <a href="https://hatcat.com">Guy Davidson’s blog</a> for news and updates.</p>
<p>Also, LEWG adopted <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0921r2.pdf">P0921r2</a> as a statement of their direction for future C++ standard library evolution compatibility guarantees.</p>
<h1>Updates on other major proposals</h1>
<p>Here are other major items in progress. You’ll notice that the first six (6!) of them mention expectations for our next meeting this November in San Diego. Not all of those items will make C++20 in San Diego, but people are going to try. It’s not surprising that San Diego is going to be a busy meeting, though; that was expected, because it’s the last meeting to merge major features into C++20, and deadlines are famously motivational. — Just <strong>do not</strong> expect all of the following to make C++20, and I’m listing them in rough order starting with the most likely to make it in.</p>
<p><strong>(very likely for C++20) Ranges</strong>: In my previous trip report I mentioned that the core concepts from the Ranges TS were expected to make C++20, but the rest of the Ranges TS would be “C++20 or C++23.” Since then we have made faster than expected progress, and it now looks like Ranges is “likely” to make C++20 in the next meeting or two. For those interested in details, in addition to all of the Ranges TS, also paper P0789 on Range Adaptors and Utilities have now progressed to detailed wording review and are targeting C++20. In sum, to quote Eric Niebler: “If you liked the Ranges TS, you’ll love C++20.”</p>
<p><strong>(likely for C++20) Concepts: “convenience” notation for constrained templates</strong>: We already added the concepts core feature to C++20, and at this meeting we had further discussions on adding a convenience syntax to write constrained templates without resorting to the low-level “<strong>requires</strong>” keyword. The two major active proposals that received discussion were from Bjarne Stroustrup and from me. The good news is that the Evolution Working Group (EWG) liked both, which means that for the first time we have a proposal based on the TS syntax (Bjarne’s preference) that could get consensus to be approved!</p>
<p>The key people are continuing to work to come up with a merged proposal that might be adoptable for C++20 in November in San Diego, and I’m pleased to report that as of this post-meeting mailing we for the first time have a unified proposal that lists most of the previous authors of papers in this area as coauthors, you can find it here: <strong><a href="https://wg21.link/P1141">P1141R0: “Yet another approach for constrained declarations.”</a></strong> I’m guardedly optimistic that we may have a winner here; we’ll know in San Diego. (I sometimes delay my trip report until the post-meeting mailing is available so that everyone can see the latest papers, and knowing that this new paper was coming was one reason I delayed this report.)</p>
<p><strong>(maybe for C++20) Coroutines</strong>: EWG considered an alternative, then decided to go forward with the TS approach. That came up for full committee vote but fell just short and was not adopted for C++20; the proposers will continue to work on improving consensus over the summer by addressing remaining concerns and we expect coroutines to be proposed again for C++20 at our November meeting in San Diego.</p>
<p><strong>Modules</strong>: For the first time, the committee saw a merged approach that both major proposers said satisfies their requirements; that announcement was met by applause in the room. The merged proposal aims to combine the “best of” the Modules TS and the Atom alternative proposal, and that direction was approved by EWG. EWG did not approve the poll to incorporate a subset of it into C++20 at this meeting; it is not yet clear whether part of the proposal can make C++20 but we are going to have an extra two-day meeting in September to help make progress and we expect it to be proposed again for C++20 at our November meeting in San Diego.</p>
<p><strong>Executors</strong>: This is still not expected to be part of C++20, but key people have not given up and are trying to make it happen, and one never can tell. We are going to hold an extra two-day meeting in September to help make progress on Executors, and expect to have a lively discussion about options to merge all or parts of it into C++20 in November in San Diego.</p>
<p><strong>Networking</strong>: This is pretty much ready except that it depends on Executors. Soon after Executors are ready for C++20, Networking is ready to slide in right behind it.</p>
<p>Clearly San Diego is going to be a busy meeting. But before then we have two extra design meetings on modules and executors to help improve their chances of progress; those will be co-located with <strong><a href="https://cppcon.org/">CppCon in September</a></strong>, to take place near the CppCon site on the days just before the conference begins. On top of that, there will also be an extra library wording issues meeting in the Chicago area in August… all in all, it’ll be a full summer and fall before we even get to San Diego.</p>
<p>Additionally, <strong>SG12</strong> had productive discussions about undefined behavior (including with participation from our sister ISO working group WG23, Programming Language Vulnerabilities), and <strong>SG15</strong> had a second exploratory evening session focusing on package managers for C++.</p>
<h1>What’s next</h1>
<p>Here is a cheat-sheet summary of our current expectations for some of the major pieces of work. Note that, as always, this is an estimate only. The bolded parts are the major changes from last time, including that Ranges as a whole is looking very likely for C++20.</p>
<p><img data-attachment-id="3675" data-permalink="https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/wg21-schedule-2018-06/" data-orig-file="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500" data-orig-size="1357,617" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-schedule-2018-06" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500?w=500" class="alignnone size-full wp-image-3675" src="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500" alt="wg21-schedule-2018-06" srcset="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>And here is an updated snapshot of where we are on the timeline for C++20 and the TSes that are completed, in flight, or expected to begin:</p>
<p><img data-attachment-id="3674" data-permalink="https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/wg21-timeline-2018-06/" data-orig-file="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500" data-orig-size="1943,1339" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline-2018-06" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500?w=500" class="alignnone size-full wp-image-3674" src="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500" alt="wg21-timeline-2018-06" srcset="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the approximately 140 experts who attended this meeting, and the many more who participate in standardization through their national bodies! Have a good spring… we look forward now to our next “extra” meetings in September (Bellevue, WA, USA) and the next regular WG21 meeting in November (San Diego, CA, USA).</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2018/07/02/trip-report-summer-iso-c-standards-meeting-rapperswil/feed/</wfw:commentRss>
		<slash:comments>25</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/06/wg21-schedule-2018-06.png" medium="image">
			<media:title type="html">wg21-schedule-2018-06</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/06/wg21-timeline-2018-06.png" medium="image">
			<media:title type="html">wg21-timeline-2018-06</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Winter ISO C++ standards meeting (Jacksonville)</title>
		<link>https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/</link>
				<comments>https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/#comments</comments>
				<pubDate>Tue, 03 Apr 2018 02:06:02 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3664</guid>
				<description><![CDATA[[Edited to add C++20 schedule at end] On Saturday March 17, the ISO C++ committee completed its winter meeting in Jacksonville, Florida, USA, hosted with thanks by the Standard C++ Foundation and Perennial. We had some 140 people at the meeting, representing 8 national bodies. As usual, we met for six days Monday through Saturday, [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><em>[Edited to add C++20 schedule at end]</em></p>
<p>On Saturday March 17, the ISO C++ committee completed its winter meeting in Jacksonville, Florida, USA, hosted with thanks by the <a href="http://isocpp.org/about">Standard C++ Foundation</a> and <a href="https://peren.com/">Perennial</a>. We had some 140 people at the meeting, representing 8 national bodies. As usual, we met for six days Monday through Saturday, including all evenings.</p>
<p>A special highlight was on Thursday evening (the only non-officially-working evening) when Bjarne Stroustrup personally hosted the entire committee for a celebratory dinner to share the <a href="https://isocpp.org/blog/2018/02/bjarne-stroustrup-receives-draper-prize-engineerings-top-u.s.-honor">2018 Charles Stark Draper Prize</a>, the U.S.’s top engineering honor, which this year was awarded for a programming language for only the second time in its history. Although the prize was awarded to Bjarne personally, he made it clear that he considered this an award for the whole C++ community, without whom C++ would never have been successful, and so he hosted the dinner for the committee as a representative proxy for the entire worldwide C++ community. — So to all C++ programmers and contributors who are reading this: Thank you, from Bjarne and from us, for your support, and consider yourselves part of this year’s Draper Prize.</p>
<p>The following are some highlights of what we achieved this week. You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>. The main things to note are:</p>
<ul>
<li>“IS” means “international standard.” In our case, it’s the core C++ standard itself. Think of this as “trunk.”</li>
<li>“TS” means “technical specification,” a document separate from the main standard where we can gain experience with new features before putting them into the IS. We have several of these, summarized on the <a href="http://isocpp.org/std/status">status page</a>. Think of these as “beta branches.”</li>
</ul>
<h2>Leading up to this meeting</h2>
<p>As I reported in my <a href="https://herbsutter.com/2017/11/11/trip-report-fall-iso-c-standards-meeting-albuquerque/">previous trip report</a> for the fall meeting (Albuquerque 2017), last time we almost completed addressing the comments received from national bodies in the Modules comment ballot that ran last summer. The rest were addressed in a series of teleconferences between meetings, and the <strong>Modules TS</strong> was finalized and shipped to ISO at the end of January.</p>
<p>One of the highlights in the pre-meeting mailing was <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0939r0.pdf"><strong>“Direction for ISO C++” (Beman Dawes, Howard Hinnant, Bjarne Stroustrup, Daveed Vandevoorde, Michael Wong)</strong></a>. Although non-binding, it’s the first set of recommendations from our recently created advisory Direction Group, a small subgroup of respected long-time participants that currently consists of those paper authors and is chaired this year by Bjarne Stroustrup.</p>
<h2>Features adopted for C++20</h2>
<p>We adopted several new features into the draft standard.</p>
<p><a href="https://wg21.link/p0840"><strong><em>[[no_unique_address]]</em> (Richard Smith).</strong></a> You know the empty base optimization (EBO)? If you do, can you remember the (probably many) times you’ve artificially made another class a base of your class, instead of just a data member, just so you could get EBO? And, every time that happened, you wished C++ had the empty member optimization (let&#8217;s call it &#8220;EMO&#8221;)? In C++20, it does, and you opt in via <em>[[no_unique_address]]</em>. Here’s an example from the paper:</p>
<pre>template&lt;typename Key, typename Value,
         typename Hash, typename Pred, typename Allocator&gt;
class hash_map {
<span style="color:#339966;">  [[no_unique_address]]</span> Hash hasher;         // EMOji
<span style="color:#339966;">  [[no_unique_address]]</span> Pred pred;           // EMOji
<span style="color:#339966;">  [[no_unique_address]]</span> Allocator alloc;     // EMOji
  Bucket *buckets;
  // ...
public:
  // ...
};</pre>
<p><a href="https://wg21.link/p0479r2"><strong><em>[[likely]]</em> and </strong><strong><em>[[unlikely]]</em> (Clay Trychta).</strong></a> (The link is to R2 of the paper, which contains more description. The R4 version is the one that was adopted.) Many compilers already allow you to “hint” whether a branch is likely or unlikely to be true, which can help optimizations. This standardizes that. Here’s an example from the paper:</p>
<pre>if (foo()) <span style="color:#339966;">[[unlikely]]</span> return false;
if (bar()) <span style="color:#339966;">[[unlikely]]</span> return false;
baz();</pre>
<p>Major disclaimer: This feature comes with the same warning label as the existing compiler extensions, which is “measure, measure, measure!” Compilers already know which branches are likely, usually better than you do (especially with profile-guided optimization, aka PGO). A major reason to use this feature is not actually to optimize (though it can help if you don’t have PGO), but to control which path gets optimized for other reasons. For example, for some code it is essential to make the <em>uncommon</em> path faster so that it is faster when you do hit it — and in such cases you would actually use this attribute in the inverted sense, so please also write a comment nearby to document that intent otherwise some hapless reader (more than likely your future self) will be temporarily confused.</p>
<p><a href="https://wg21.link/p0355r7"><strong>Extending </strong><strong><em>&lt;chrono&gt;</em> to calendars and time zones (Howard Hinnant, Tomasz Kamiński).</strong></a> This is a much-loved (and huger-than-you-think) library addition that will help a lot of users, and really exercises modern C++ features like user-defined literals.</p>
<p><a href="https://wg21.link/p0122r7"><strong><em>span</em>: Bounds-safe views for sequences of objects (Neil MacIntosh, Stephan T. Lavavej).</strong></a> This one comes directly from the C++ Core Guidelines’ Guideline Support Library (GSL), and is intended to be a replacement especially for unsafe C-style (pointer,length) parameter pairs. We expect to be used pervasively as a vocabulary type for function parameters in particular.</p>
<h2>Cleanup adopted for C++20</h2>
<p>We also made some improvements to existing features.</p>
<p><a href="https://wg21.link/p0634"><strong>“Down with </strong><strong><em>typename</em>!” (Nina Ranns, Daveed Vandevoorde).</strong></a> Are you tired of writing <em>typename</em> redundantly in places where the compiler should know only a type was possible? So were the proposal authors. Now <em>typename</em> is required in fewer places.</p>
<p><a href="https://wg21.link/p0780"><strong>Lambda capture initializers can now expand variadic parameter packs (Barry Revzin).</strong></a> An example, taken from the paper:</p>
<pre>template&lt;class F, class... Args&gt;
auto delay_invoke(F f, Args... args) {
    return [f=std::move(f), <span style="color:#339966;">...args=std::move(args)</span>]() -&gt; decltype(auto) {
        return std::invoke(f, args...);
    };
}</pre>
<p>The now-allowed expansion is the one in the third line.</p>
<p><a href="https://wg21.link/p0962"><strong>Consistent <em>begin</em>/<em>end</em> for range-<em>for</em> (Ville Voutilainen).</strong></a> The range-based <em>for</em> loop is already customizable, and can handle ranges that have both member <em>rng.begin()</em>/<em>rng.end()</em> functions or ones that have non-member <em>begin(rng)</em>/<em>end(rng)</em> functions. But what if it relies on the non-member functions, but happens to also have one member named either <em>begin</em> or <em>end</em> (such as, say, <em>end</em> in <em>ios_base</em>)? That’s now legal, we ignore the one-off member and use the non-member pair. Here’s an example from the paper that is not legal in C++17 but now works in C++20:</p>
<pre>struct X : std::stringstream { /*...*/ };

std::istream_iterator&lt;char&gt; begin(X&amp; x)
  { return std::istream_iterator&lt;char&gt;(x); }

std::istream_iterator&lt;char&gt; end(X&amp; x)
  { return std::istream_iterator&lt;char&gt;(); }

int main() {
    X x;
<span style="color:#339966;">    for (auto&amp;&amp; i : x) {   // works in C++20
</span>      // ...
    }
}</pre>
<p>Interesting tidbit: This is one of those “new functionality” features created by removing wording in the standard, namely removing a restriction. The entire wording change was to change “either (or both) finds” to “both find” in one place.</p>
<p><a href="https://wg21.link/p0969"><strong>Structured bindings can access accessible members (Timur Doumler).</strong></a> In C++17, you could use structured bindings to bind to class members as long as they were public. But what if you’re inside a member or friend of the class? Shouldn’t you be able to use structured bindings on members, which are visible (i.e., accessible) to you even if they aren’t public to everyone, just like we can do any other normal thing with those members? In C++17 that didn&#8217;t work, but it was an oversight and now we can do that:</p>
<pre>class X {
    int i;
    int j;
public:
    friend void f();
};

void f() {
    X x;
<span style="color:#339966;">    auto [myi, myj] = x;   // now ok</span>
}</pre>
<p>We also adopted some other fixes, including:</p>
<ul>
<li><a href="https://wg21.link/p0961"><strong>Structured bindings </strong><strong><em>get&lt;&gt;</em> lookup relaxations (Ville Voutilainen)</strong></a> to make the <em>get&lt;&gt;</em> customization point a little more general and easier to use, such as for types that happens to also have an unrelated member non-template <em>.get()</em> (like smart pointers).</li>
<li><a href="https://wg21.link/p0905r1"><strong>Symmetry for spaceship (Tomasz Kamiński, Herb Sutter, Richard Smith)</strong></a> to make <em>&lt;=&gt;</em> itself symmetric the way <em>&lt;=&gt;</em> already made the two-way comparisons symmetric.</li>
<li><a href="https://wg21.link/p0551r3"><strong>Thou shalt not specialize </strong><strong><em>std</em> function templates! (Walter E. Brown)</strong></a>, which should be read with the addendum “or take their addresses” (that last part continues to be discussed).</li>
<li><a href="https://wg21.link/p0754r2"><strong><em>&lt;version&gt;</em> (Alan Talbot)</strong></a> described as “for those people who dislike <em>&lt;iso646&gt;</em>.”</li>
</ul>
<p>&#8230; and a few more including a couple of small extensions to <strong>coroutines</strong> and <strong>networking</strong>. Note that those two TSes were already published, and are not yet merged into the C++ draft standard, but we are still maintaining those experimental TS “branches” with fixes and updates, so that those will be done and ready once we are ready to merge those TS branches into the C++ “trunk” project itself.</p>
<h2>Other major full committee approvals</h2>
<p>We approved <strong>Parallelism TS 2</strong> to be extended with the (huge) extensions in <a href="https://wg21.link/p0214r9"><strong>Data-parallel vector types and operations (Matthias Kretz)</strong></a> and declared it <strong>feature-complete</strong>: It is now being sent out for its main ISO comment ballot.</p>
<p>We also decided to officially open a <strong>Reflection TS</strong> work item, which means that the committee as a whole is taking ownership of the proposal and intends to progress it as a TS. The initial content is from the paper <a href="https://wg21.link/p0194r6"><strong>“Static reflection” (Matúš Chochlík, Axel Naumann, David Sankel)</strong></a> but everyone should understand that the surface syntax will change. The primary point of the TS is in the underlying “engine” and functionality, and the intention is to replace the placeholder template-metaprogramming-like <em>reflexpr</em> syntax with an object-like model that looks like “more <em>constexpr</em> code” — regular C++ code that is able to be run at compile time.</p>
<h2>Language/library evolution subgroup approvals</h2>
<p>Here is a list of proposals that achieved Evolution or Library Evolution working group (EWG or LEWG) design approval. This means that the subgroup responsible for approving the design has done so (sometimes provisionally, with a few “revision is expected” notes below), and the next step is that they now enter wording review in the Core or Library working group (CWG or LWG), and are slated to be proposed for formal adoption in C++20 at a future meeting. Thanks to Olivier Giroux, Ville Voutilainen, Titus Winters for their notes that contributed to this summary.</p>
<p>For <strong>contracts</strong>, EWG discussed a clarification to what the result of observable side-effects in contract pre/post-conditions is, and the guidance is that it’s undefined behavior.</p>
<p>For <strong>reflection</strong> and related facilities, EWG approved some papers that are significant milestones for compile-time programming:</p>
<ul>
<li><a href="https://wg21.link/p0670"><strong>“Static reflection of functions” (Matúš Chochlík, Axel Naumann, David Sankel)</strong></a>, which would extend the reflection proposal to functions and parameters.</li>
<li><a href="https://wg21.link/p0784"><strong>“Standard containers and </strong><strong><em>constexpr</em>” (Louis Dionne, Richard Smith, Nina Ranns, Daveed Vandevoorde)</strong></a> which would permit <em>constexpr</em> objects to have destructors and use dynamic memory allocation — stop, pause, and reflect[sic] on just what those two features imply: compile-time resource-managing types like <em>constexpr vector&lt;std::metainfo&gt;</em>. Sends shivers down your spine (in a good way), doesn’t it?</li>
<li><a href="https://wg21.link/p0732"><strong>“Class types in non-type template parameters” (Jeff Snyder)</strong></a>, which would permit template non-type parameters of user-defined type, and enables instantiating templates with values such as compile-time strings.</li>
</ul>
<p>EWG also approved:</p>
<ul>
<li><a href="https://wg21.link/p0482"><strong>“</strong><strong><em>char8_t</em>: A type for UTF-8 characters and strings” (Tom Honermann)</strong></a></li>
<li><a href="https://wg21.link/p0892"><strong>“</strong><strong><em>explicit(bool)</em>” (Barry Revzin)</strong></a></li>
<li><a href="https://wg21.link/p0929"><strong>“Checking for abstract class types” (Jens Maurer)</strong></a></li>
</ul>
<p>We also decided to pursue putting in writing two statements about <strong>how we evolve C++</strong>:</p>
<ul>
<li>EWG decided to pursue turning <a href="https://wg21.link/p0684"><strong>“C++ Stability, Velocity, and Deployment Plans” (Titus Winters)</strong></a> into a Standing Document, with the expectation is that the document will be revised and reviewed again. Titus Winters will be the main author, and Gabriel Dos Reis, Bjarne Stroustrup, and Mike Spertus will assist.</li>
<li>EWG also supports turning <a href="https://wg21.link/p0921"><strong>“Standard library compatibility promises” (Titus Winters)</strong></a> into a Standing Document, and to add the promises also to the standard’s own Library Introduction clause. Titus Winters will be the main author, with help from Ashley Hedberg, Nevin Liber, Bjarne Stroustrup, James Dennett, Walter E. Brown, Gor Nishanov, Alisdair Meredith, Mike Spertus, Robert Steagall and Daveed Vandevoorde.</li>
</ul>
<p>We decided to launch a systematic effort to drive out the remaining uses of <strong>macros</strong> by providing replacements for those uses. We requested an analysis paper listing all the remaining use cases for macros are, a description of the status of the non-macro solutions for those problems, and possible solutions. This paper will be led by Ville Voutilainen, assisted by Bjarne Stroustrup, Gabriel Dos Reis, James Dennett, and Vittorio Romeo.</p>
<p>Somewhat stunningly (to me), we decided to pursue some <strong>cleanup to the C fundamental types</strong> that would be a breaking change to certain kinds of C and C++17 code. It came up via the discussion of <a href="https://wg21.link/p0946"><strong>“Towards consistency between </strong><strong><em>&lt;=&gt;</em> and other comparison operators” (Richard Smith)</strong></a>, which observed that when we added <em>&lt;=&gt;</em> to C++20, in <em>&lt;=&gt;</em> only we deliberately decided not to repeat the well-known issues that we did not want to perpetuate with C’s two-way comparisons for fundamental types (e.g., signed-unsigned comparison surprises like <em>-1 &lt; 0u</em> giving the “wrong” answer)… which naturally meant that we now have inconsistencies between the preexisting two-way comparison operators and the shiny new three-way <em>&lt;=&gt;</em> operator. When faced with this, the subgroup discovered that we had a consensus in the room that enough really was enough, and we decided to seriously investigate doing some housecleaning and fix those things even though that would include breaking changes to (mostly ill-behaved) C and C++17 code. For example, we are now on a path to pursue deprecating or outright removing the ability to compare two unrelated enumerations (which is just plain suspicious code), and to require <em>-1 &lt; 0u</em> to give the mathematically correct answer even when in the worst case that means generating two comparison machine instructions instead of just one (any code that does such ill-advised things would change from being a correctness problem into “just” a one-extra-instruction performance problem). — We have made no decisions about actually doing this or the ship vehicle for such changes, which likely would have to be rolled out in stages via deprecation followed by removel, and we expect more data to be gathered before Rapperswil regarding how much code could be affected. But as far as I can recall, this is the most breaking-change cleanup to C’s fundamental types that we have ever been willing to seriously consider.</p>
<p>LEWG approved <a href="https://wg21.link/p0898"><strong>Standard library concepts (Casey Carter)</strong></a>. This is the first part of the Ranges TS to be on track for merging into C++20 at an upcoming meeting, and contains the core concepts from the Ranges TS. It is also the first appearance of the <strong>concepts</strong> language feature in the standard library.</p>
<h2>Other progress</h2>
<p>Also for <strong>concepts</strong>, at this meeting EWG approved pursuing a direction based on my paper <a href="https://wg21.link/p0745"><strong>“Concepts in-place syntax” (Herb Sutter)</strong></a> to have a shorthand syntax for declaring constrained templates.</p>
<p>At this meeting, we considered further improvements to the <strong>modules</strong> design, including a renewed proposal focusing on a bridge to help existing header-based code move toward a modules-enabled world. By the end of the meeting, the main participants had hammered out a plan to, over the next few meetings:</p>
<ul>
<li>move a core set of modules functionality into C++20 that is “clean” and uncompromised by legacy concerns; and</li>
<li>concurrently update the remaining modules TS with features specific to transitioning header-based code to modules, which might include support for macros.</li>
</ul>
<p>There’s a lot of work remaining, but we’ll know in the next few meetings how the objectives are progressing.</p>
<p>After several years of incubation, <strong>executors</strong> are now making strong progress and are on track to become a TS in the C++20 timeframe. (Let me explicitly say “<strong>thread pools</strong>” for the benefit of those who are Ctrl-F&#8217;ing to find out how C++ intends to support modern thread pools such as in Windows 10 and Grand Central Dispatch. You&#8217;re now in the right place: Modern thread pool support is coming as part of executors.)</p>
<p>Note that there is a dependency on executors before we can merge the <strong>networking</strong> TS and the future.then feature in the <strong>concurrency</strong> TS into the C++ draft standard, which means that all of those features are likely to be merged early in the C++23 cycle rather than in C++20.</p>
<p>We are going to try to ship <strong>coroutines</strong> in C++20.</p>
<p>We are opening a new work item for <strong>Library Fundamentals TS3</strong>, the third batch of library additions, even as we will soon be starting to fold in material from the recently-published Library Fundamentals TS2 into C++20.</p>
<p><strong>SG15 (Tooling) (Titus Winters)</strong> had its first meeting, and there is a shared belief that we need to take concrete steps toward enabling better support for tools for two things in particular: modules, and C++ library package managers. That coincided very nicely with the <a href="https://isocpp.org/blog/2018/03/results-summary-cpp-foundation-developer-survey-lite-2018-02">2018-02 isocpp.org survey</a>, where on the open-ended question 10, the #1 write-in answer was to request “dependencies / package manager” (15% of all write-ins mentioned that). Clearly there is interest in this area, and it will be interesting to see how this develops into proposals over the coming meetings.</p>
<p>We also created a new study group <strong>SG16 (Unicode)</strong> with Tom Honermann as the SG chair.</p>
<h2>What’s next</h2>
<p>Whew! Here is a cheat-sheet summary of our current expectations for some of the major pieces of work that are not already in draft C++20. Note that this is an estimate only.</p>
<p style="text-align:center;"><img data-attachment-id="3665" data-permalink="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/cpp11147020-201803/" data-orig-file="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500" data-orig-size="1357,678" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="cpp11147020 &#8211; 201803" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500?w=500" class="alignnone size-full wp-image-3665" src="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500" alt="cpp11147020 - 201803" srcset="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>And here is an updated snapshot of where we are on the timeline for C++20 and the TSes that are completed, in flight, or expected to begin:</p>
<p style="text-align:center;"><img data-attachment-id="3666" data-permalink="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/wg21-timeline-2018-03/" data-orig-file="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500" data-orig-size="1214,838" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline-2018-03" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500?w=500" class="alignnone size-full wp-image-3666" src="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500" alt="wg21-timeline-2018-03.png" srcset="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Finally, here is the schedule for the C++20 cycle approved by unanimous consent at this meeting:</p>
<p style="text-align:center;"><img data-attachment-id="3671" data-permalink="https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/wg21-schedule-2018-03/" data-orig-file="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500" data-orig-size="1479,814" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-schedule-2018-03" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500?w=500" class="alignnone size-full wp-image-3671" src="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500" alt="wg21-schedule-2018-03" srcset="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=500 500w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=150 150w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=300 300w, https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the approximately 140 experts who attended this meeting, and the many more who participate in standardization through their national bodies! Have a good spring… we look forward now to our next meetings in June (Rapperswil, Switzerland) and November (San Diego, CA, USA).</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2018/04/02/trip-report-winter-iso-c-standards-meeting-jacksonville/feed/</wfw:commentRss>
		<slash:comments>17</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/04/cpp11147020-201803.png" medium="image">
			<media:title type="html">cpp11147020 - 201803</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/04/wg21-timeline-2018-03.png" medium="image">
			<media:title type="html">wg21-timeline-2018-03.png</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2018/04/wg21-schedule-2018-03.png" medium="image">
			<media:title type="html">wg21-schedule-2018-03</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Fall ISO C++ standards meeting (Albuquerque)</title>
		<link>https://herbsutter.com/2017/11/11/trip-report-fall-iso-c-standards-meeting-albuquerque/</link>
				<comments>https://herbsutter.com/2017/11/11/trip-report-fall-iso-c-standards-meeting-albuquerque/#comments</comments>
				<pubDate>Sat, 11 Nov 2017 19:38:55 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3624</guid>
				<description><![CDATA[A few minutes ago, the ISO C++ committee completed its fall meeting in Albuquerque, New Mexico, USA, hosted with our thanks by Sandia National Laboratories. We had some 140 people at the meeting, representing 10 national bodies. As usual, we met for six days Monday through Saturday, including several evenings. The following are some highlights [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>A few minutes ago, the ISO C++ committee completed its fall meeting in Albuquerque, New Mexico, USA, hosted with our thanks by <a href="http://www.sandia.gov/">Sandia National Laboratories</a>. We had some 140 people at the meeting, representing 10 national bodies. As usual, we met for six days Monday through Saturday, including several evenings.</p>
<p>The following are some highlights of what we achieved this week. You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>. The main things to note are:</p>
<ul>
<li>“IS” means “international standard.” In our case, it’s the core C++ standard itself. Think of this as “trunk.”</li>
<li>“TS” means “technical specification,” a document separate from the main standard where we can gain experience with new features before putting them into the IS. We have several of these, summarized on the <a href="http://isocpp.org/std/status">status page</a>. Think of these as “beta branches.”</li>
</ul>
<h2>Modules TS ballot comments: Almost done</h2>
<p>A primary goal of the meeting was to address the comments received from national bodies in the Modules TS’s comment ballot that ran this summer. We managed to address them all in one meeting, as well as deal with most of the specification wording issues discovered in the process of responding to the national comments; we discovered one or two areas where the TS wording did not quite match the approved design intent, and so the plan is to finish addressing those and to approve the Modules TS for publication in between meetings via a teleconference, rather than wait for our next face to face meeting in March.</p>
<p>It will be great to get the TS published, and continue getting experience with implementations now in progress, at various stages, in all of Visual C++, Clang, and gcc as we let the ink dry and hammer out some remaining design issues, before starting to consider adopting modules into the C++ draft standard itself. I do not know whether modules will make the feature cutoff for C++20, but a lot of people are working hard to maximize the chances… we’ll know in another 12-18 months when we reach the C++20 feature cutoff.</p>
<h2>Second meeting for C++20</h2>
<p>This was also the second meeting where we could vote changes into Draft C++20. And we did!</p>
<p>Here are some of the features that were added to C++20 at this meeting. Note: These links currently find the most recent pre-meeting papers and so may not reflect the exact wording adopted at the meeting, but the links will light up to the post-meeting versions of the papers that were actually adopted as soon as those are available in the post-meeting mailing about three weeks from now.</p>
<p><a href="https://wg21.link/p0614"><strong>Range-based for statements with initializer (Thomas Köppe).</strong></a> In C++17, we already allowed initialization of if-scoped and switch-scoped variables, just like the ordinary for loop has already had for years. Today, we added the same for the range-based for loop, which gives the same benefit: It enables and encourages locally scoped variables without the programmer having to introduce a scope manually. To take an example from the paper, in C++17 we might write the following to get a variable thing that exists just as long as is needed for the for loop, which avoids a bad pitfall (do you see why the “WRONG” comment is wrong? it might work depending on what f() returns, or it might be undefined behavior):</p>
<pre>{
  T thing = f();
  for (auto&amp; x : thing.items()) {
    // Note: “for (auto&amp; x : f().items())” is WRONG
    mutate(&amp;x);
    log(x);
  }
}</pre>
<p>and now in draft C++20 we can write the recommended local scoping directly with less ceremony of { } and indenting, and follow the <a href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#es6-declare-names-in-for-statement-initializers-and-conditions-to-limit-scope">C++ Core Guidelines scoping recommendations</a> now also for range-for, as just:</p>
<pre>for (T thing = f(); auto&amp; x : thing.items()) {
  mutate(&amp;x);
  log(x);
}</pre>
<p><a href="https://wg21.link/p0476"><strong>Bit-casting object representations (JF Bastien).</strong></a> This proposal gives a way to copy the bits of an object in a consistent and simple manner. It adds the new header &lt;bit&gt;, and provides bit_cast for trivially-copyable “bag-o-bits” objects, to easily copy the bits of any such object to another of the same size (the types need not be the same). Note: Yes, we already have memcpy, but bit_cast is safer and also can run at compile time.</p>
<p><strong>Lots of other cleanup.</strong> We did various smaller features and cleanup, sometimes to fix bugs, sometimes to improve consistency and generality, and sometimes to make the language a little simpler to use.</p>
<ul>
<li>Example of bug fixes: Draft C++20 sets forth more precisely where constexpr functions are defined (<a href="https://wg21.link/cwg1581">core issue 1581</a>).</li>
<li>Examples of consistency and generality: Draft C++20 now supports concepts requires-clauses in more places including lambdas (<a href="https://wg21.link/p0857">P0857</a>, Thomas Köppe). Also, stateless (non-capturing) lambdas are now default constructible and assignable, which makes them more convenient to create and use (<a href="https://wg21.link/p0624">P0624</a>, Louis Dionne).</li>
</ul>
<p><a href="https://wg21.link/p0515"><strong>Operator </strong><strong>&lt;=&gt;, aka “spaceship” (myself).</strong></a> Beyond those, my personal favorite is that the committee adopted my own proposal for the &lt;=&gt; “spaceship” three-way comparison operator (<a href="https://wg21.link/p0515">language wording</a>; <a href="https://wg21.link/p0768">library wording</a>). Many thanks to all the proposal’s reviewers, including all the authors of previous proposals in this area and especially Jens Maurer and Walter Brown for standardese wording help. This will greatly simplify how to write comparisons.</p>
<p>For example, in C++17 if we want to have a case-insensitive string type CIString that supports comparisons between two CIStrings and between a CIString and a C-style char* string, we would have to write something like the following 18 nonmember friend functions:</p>
<pre>class CIString {
  string s;
public:
  // ...

  friend bool operator==(const CIString&amp; a, const CIString&amp; b) { return ci_compare(a.s.c_str(), b.s.c_str()) != 0; }
  friend bool operator&lt; (const CIString&amp; a, const CIString&amp; b) { return ci_compare(a.s.c_str(), b.s.c_str()) &lt;  0; }
  friend bool operator!=(const CIString&amp; a, const CIString&amp; b) { return !(a == b); }
  friend bool operator&gt; (const CIString&amp; a, const CIString&amp; b) { return b &lt; a; }
  friend bool operator&gt;=(const CIString&amp; a, const CIString&amp; b) { return !(a &lt; b); }
  friend bool operator&lt;=(const CIString&amp; a, const CIString&amp; b) { return !(b &lt; a); }

  friend bool operator==(const CIString&amp; a, const char* b) { return ci_compare(a.s.c_str(), b) != 0; }
  friend bool operator&lt; (const CIString&amp; a, const char* b) { return ci_compare(a.s.c_str(), b) &lt;  0; }
  friend bool operator!=(const CIString&amp; a, const char* b) { return !(a == b); }
  friend bool operator&gt; (const CIString&amp; a, const char* b) { return b &lt; a; }
  friend bool operator&gt;=(const CIString&amp; a, const char* b) { return !(a &lt; b); }
  friend bool operator&lt;=(const CIString&amp; a, const char* b) { return !(b &lt; a); }

  friend bool operator==(const char* a, const CIString&amp; b) { return ci_compare(a, b.s.c_str()) != 0; }
  friend bool operator&lt; (const char* a, const CIString&amp; b) { return ci_compare(a, b.s.c_str()) &lt;  0; }
  friend bool operator!=(const char* a, const CIString&amp; b) { return !(a == b); }
  friend bool operator&gt; (const char* a, const CIString&amp; b) { return b &lt; a; }
  friend bool operator&gt;=(const char* a, const CIString&amp; b) { return !(a &lt; b); }
  friend bool operator&lt;=(const char* a, const CIString&amp; b) { return !(b &lt; a); }
};</pre>
<p>With this proposal, the class&#8217;s comparisons could instead be implemented as just two ordinary member functions (vs. the 18 that had to be nonmember friends above):</p>
<pre>class CIString {
   string s;
public:
   // ...

  std::weak_ordering operator&lt;=&gt;(const CIString&amp; b) const
      { return ci_compare(s.c_str(), b.s.c_str()); }
  std::weak_ordering operator&lt;=&gt;(const char* b) const
      { return ci_compare(s.c_str(), b); }
};</pre>
<p>and objects of this type can still be used just as flexibly and efficiently as if the class author had written all of the above two-way operators in the first version, because now the compiler will rewrite expressions like s1&lt;s2 to (s1&lt;=&gt;s2 &lt; 0) for you automatically. Additionally, unlike the first attempt, this version also documents in code that the kind of ordering being returned is a weak ordering, not a strong (total) ordering. I&#8217;m a fan of writing less code to say more, and to say it more accurately. Please see the paper linked above for more details.</p>
<p>In related news, at this meeting the Library Evolution subgroup also began considering David Stone’s proposal to apply operator&lt;=&gt; to the standard library, and it got a warm reception and is expected to progress over the coming meetings. If it succeeds, we hope it may possibly let us get a small reduction in the size of the standard library specification as well as a result. Additionally, at this meeting we discovered that having &lt;=&gt; opens an unanticipated door for language evolution: Because the default operator&lt;=&gt; is guaranteed to be memberwise, so that we can know those are its semantics <em>at compile time</em>, a brand-new proposal by Jeff Snyder can leverage it to solve the remaining problems that before prevented us from using non-built-in types as non-type template parameters; we&#8217;ll see more of his proposal at our next meeting. That&#8217;s a good sign of a feature that is generally useful in the language beyond just its intended use cases.</p>
<p>We also approved extensions to the standard library:</p>
<p><a href="https://wg21.link/p0718"><strong>atomic&lt;shared_ptr&lt;T&gt;&gt;</strong></a> (myself, Alisdair Meredith): This was originally my proposal and I got it into the Concurrency TS; many thanks to Alisdair Meredith who got it the rest of the way into draft C++20 over the past two meetings. There are changes since it appeared in the Concurrency TS, including to make it use the name I originally proposed (and not “atomic_shared_ptr&lt;T&gt;”).</p>
<p>Here&#8217;s more that we got at this meeting on the standard library side. If you notice &#8220;constexpr&#8221; being mentioned a few times above already, and some more below, that&#8217;s no accident; in Library subgroup chair Marshall Clow&#8217;s words, &#8220;the future of constexpr is bright.&#8221; The following other progress also includes more work on enabling features to work at compile time, including most of the rest of the standard algorithms:</p>
<ul>
<li>The draft Parallelism TS 2 got <a href="https://wg21.link/p0075">a template library for parallel for loops</a> (Pablo Halpern, Clark Nelson).</li>
<li>Draft C++20 got <a href="https://wg21.link/p0550">remove_cvref</a> (Walter E. Brown)…</li>
<li>and <a href="https://wg21.link/p0600">the [[nodiscard]] attribute in the standard library</a> (Nicolai Josuttis)…</li>
<li>and <a href="https://wg21.link/p0053">synchronized buffered ostreams</a> (Lawrence Crowl, Peter Sommerlad, Nicolai Josuttis, Pablo Halpern)…</li>
<li>and <a href="https://wg21.link/p0202">more of the standard &lt;algorithm&gt; and &lt;utilities&gt; features being constexpr</a> (Antony Polukhin)…</li>
<li>and <a href="https://wg21.link/p0415">constexpr std::complex</a> (Antony Polukhin)…</li>
<li>and <a href="https://wg21.link/p0020">atomic&lt;floating point type&gt;</a> (H. Carter Edwards, Hans Boehm, Olivier Giroux, JF Bastien, James Reus)…</li>
<li>and <a href="https://wg21.link/p0457">starts_with and ends_with for std::string and std::string_view</a> (Mikhail Maltsev).</li>
</ul>
<p>(Aside: At this meeting, the Evolution subgroup also provisionally allowed constexpr (compile-time) new, vector, and string. Stop a moment, and think about what that means. &#8212; That is not yet in C++20, but it&#8217;s on its way and could be approved for draft C++20 in another few meetings&#8230; and if this all reminds you of the CppCon &#8220;constexpr all the things!&#8221; talk title, you&#8217;re exactly right.)</p>
<p>And much more. Thanks to all those proposal authors and the issues list proposed wording contributors and all their helpers, without which this team effort would not succeed meeting after meeting. None of the proposers could get it done without all the contributions of many people who work tirelessly all the way from design feedback to detailed wording review, usually for no public glory, and we appreciate their indispensable help. For any of the above papers you happen to have interest to click on, please be sure to look also at the Acknowledgments section, many of which are quite extensive and deservedly so.</p>
<p>We also continued incubating other work. In particular, the <strong>Reflection</strong> study group had presentations, and gave direction and feedback, on static reflection for functions, as well as design feedback on Section 5 of my <a href="https://wg21.link/p0707">metaclasses paper</a>. The <strong>Undefined/Unspecified Behavior</strong> study group met for two days with our sister committee WG23 (Vulnerabilities) co-located at the same venue to start work on a C++-specific document about programming language vulnerabilities and guidance, in conjunction with (and already providing new feedback for) the C++ Core Guidelines.</p>
<h2>What’s next</h2>
<p>Here’s an updated snapshot of our status:</p>
<p><img data-attachment-id="3631" data-permalink="https://herbsutter.com/2017/11/11/trip-report-fall-iso-c-standards-meeting-albuquerque/wg21-timeline-2017-11/" data-orig-file="https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=500" data-orig-size="1937,1427" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline-2017-11" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=500?w=500" class="alignnone size-full wp-image-3631" src="https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=500" alt="wg21-timeline-2017-11" srcset="https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=500 500w, https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=150 150w, https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=300 300w, https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the 140 experts in Albuquerque this week, and the many more who participate in standardization through their national bodies! Have a good winter… we look forward now to our next meetings in March (Jacksonville, Florida, USA) and June (Rapperswil, Switzerland).</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/11/11/trip-report-fall-iso-c-standards-meeting-albuquerque/feed/</wfw:commentRss>
		<slash:comments>23</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2017/11/wg21-timeline-2017-11.png" medium="image">
			<media:title type="html">wg21-timeline-2017-11</media:title>
		</media:content>
	</item>
		<item>
		<title>Interview: On simplifying C++</title>
		<link>https://herbsutter.com/2017/11/02/interview-on-clion-on-simplifying-c/</link>
				<comments>https://herbsutter.com/2017/11/02/interview-on-clion-on-simplifying-c/#comments</comments>
				<pubDate>Thu, 02 Nov 2017 17:29:59 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3602</guid>
				<description><![CDATA[I was also interviewed recently by Anastasia Kazakova for the CLion blog, and that interview is now live: Toward a more powerful and simpler C++ with Herb Sutter Topics include: Concepts and modules (and coroutines) as the true hot topics right now How my work on metaclasses was motivated and developed Obligatory aside on operator&#60;=&#62; [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I was also interviewed recently by Anastasia Kazakova for the CLion blog, and that interview is now live:</p>
<blockquote>
<h3><a href="https://blog.jetbrains.com/clion/2017/11/towards-a-more-powerful-and-simpler-cpp-with-herb-sutter/">Toward a more powerful and simpler C++ with Herb Sutter</a></h3>
</blockquote>
<p>Topics include:</p>
<ul>
<li>Concepts and modules (and coroutines) as the true hot topics right now</li>
<li>How my work on metaclasses was motivated and developed</li>
<li>Obligatory aside on operator&lt;=&gt; which grew out of the same work</li>
<li>Good and bad ways to learn from other languages and their experience</li>
<li>What are the next questions to be answered for metaclasses proposal</li>
<li>What has been the committee&#8217;s feedback so far</li>
<li>How can we expect to see reflection, compile-time code, injection, and metaclasses both progress in committee and get built into production compilers</li>
<li>How toolable are today&#8217;s C++11/14/17 features, and what about toolability for metaclasses</li>
</ul>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/11/02/interview-on-clion-on-simplifying-c/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>My Qt World Summit keynote video is now online</title>
		<link>https://herbsutter.com/2017/10/25/my-qt-world-summit-keynote-video-is-now-online/</link>
				<comments>https://herbsutter.com/2017/10/25/my-qt-world-summit-keynote-video-is-now-online/#comments</comments>
				<pubDate>Wed, 25 Oct 2017 18:31:51 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3578</guid>
				<description><![CDATA[The Qt World Summit videos were just posted, including my talk which was a condensed (40-minute) version of my CppCon 2017 metaclasses talk with some small tweaks for a Qt-specific audience. Here it is below:]]></description>
								<content:encoded><![CDATA[<p>The Qt World Summit videos were just posted, including my talk which was a condensed (40-minute) version of my <a href="https://herbsutter.com/2017/09/28/my-cppcon-2017-session-is-now-on-youtube/">CppCon 2017 metaclasses talk</a> with some small tweaks for a Qt-specific audience.</p>
<p>Here it is below:</p>
<iframe class='youtube-player' type='text/html' width='500' height='282' src='https://www.youtube.com/embed/NunSS_ppDsI?version=3&#038;rel=0&#038;fs=1&#038;autohide=2&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;start=77&#038;wmode=transparent' allowfullscreen='true' style='border:0;'></iframe>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/10/25/my-qt-world-summit-keynote-video-is-now-online/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Interview with InfoQ: C++17, and beyond&#8230;</title>
		<link>https://herbsutter.com/2017/10/23/interview-with-infoq-c17-and-beyond/</link>
				<pubDate>Tue, 24 Oct 2017 00:54:28 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3563</guid>
				<description><![CDATA[Last week I did an interview by email with InfoQ. It just went live: C++17 is Here: Interview with Herb Sutter Topics include: What parts of C++17 should developers get most excited about? Why didn&#8217;t concepts make it into C++17? What will be the major focus areas for C++20? What do you find interesting or [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Last week I did an interview by email with InfoQ. It just went live:</p>
<blockquote>
<h3 class="general"><a href="https://www.infoq.com/news/2017/10/cpp-17-herb-sutter-interview">C++17 is Here: Interview with Herb Sutter</a></h3>
</blockquote>
<p>Topics include:</p>
<ul>
<li>What parts of C++17 should developers get most excited about?</li>
<li>Why didn&#8217;t concepts make it into C++17?</li>
<li>What will be the major focus areas for C++20?</li>
<li>What do you find interesting or inspiring about new languages like Rust, Swift, and Go?</li>
<li>Any new books coming? What&#8217;s your main focus today?</li>
</ul>
]]></content:encoded>
									
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>11 is the new 7: iOS designers, what is it with the motion fetish? Please stop making us motion sick</title>
		<link>https://herbsutter.com/2017/10/17/11-is-the-new-7-ios-designers-what-is-it-with-the-motion-fetish-please-stop-making-us-motion-sick/</link>
				<comments>https://herbsutter.com/2017/10/17/11-is-the-new-7-ios-designers-what-is-it-with-the-motion-fetish-please-stop-making-us-motion-sick/#comments</comments>
				<pubDate>Tue, 17 Oct 2017 22:04:12 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3457</guid>
				<description><![CDATA[In my household, iOS 7 was sickening &#8212; literally. When it came out with its flashy parallax home screen and (IMO too often gratuitous) motion effects, my wife was one of the many people it immediately made motion-sick. After 30 years of loyally loving Apple products, my wife almost had to dump her iPhone. It [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>In my household, iOS 7 was sickening &#8212; literally. When it came out with its flashy parallax home screen and (IMO too often gratuitous) motion effects, my wife was one of the many people it immediately made motion-sick. After 30 years of loyally loving Apple products, my wife almost had to dump her iPhone. It was so bad that it&#8217;s the only time in my life we&#8217;ve written an email directly to the CEO of a company; we didn&#8217;t expect Tim Cook to reply, but we hope it helped raise awareness, and fortunately (likely not because of us, even slightly, but very happily), Settings &gt; Accessibility &gt; Reduce Motion came long just in time, and iOS was usable again.</p>
<p>Now iOS 11 has done it again. Just unlocking the phone is motion sickness-inducing because the lock screen now flies upward out of the way on every unlock, <strong>even if you have Settings &gt; Accessibility &gt; Reduce Motion enabled</strong>. (What happened to &#8220;No means no&#8221;?) And there appears to be more motion again around the lock and home screens and when just opening and switching the built-in apps, so now my wife is feeling ill again in the first 10 seconds of every phone session since she upgraded, and we&#8217;re having Android conversations again. And we don&#8217;t want Android. Really.</p>
<p>iOS is supposed to be the most usable phone OS, but <strong>you can&#8217;t use something if you can&#8217;t look at it</strong>.</p>
<p>&nbsp;</p>
<h3>Open letter to Apple designers:</h3>
<p>We love your work because you love usability, and especially in recent years you love accessibility. Please, get back to those roots.</p>
<p>What is it with all the motion lately? You are known for minimalism, and that &#8220;design is how it works.&#8221; Design is not about &#8220;how it looks&#8221; eye candy &#8212; gratuitous motion is not a feature, yet it seems that in recent releases you have had a temptation to go for &#8220;cool&#8221; effects that do not improve usability. Please resist. I hope we can all agree that parallax on the home screen has insignificant effect on improving usability; I turned it off as soon as I could even though I&#8217;m not motion sickness-prone (seriously, this aspect of iOS reminds me unflatteringly of <a href="https://en.wikipedia.org/wiki/Office_Assistant">Clippy</a> bouncing around). And yes, I realize that you likely made the iOS 11 lock screen <del>swerve</del> <del>careen</del> <span style="text-decoration:underline;">glide</span> up on unlock in order to teach that &#8220;hey look! see? it lives up there just off the top of the screen&#8221; so that we remember that we can now pull it down anytime to get it back &#8212; yes, we know, we learned it once the first time, could we please now not have to live with that animation forever? Please stop with the careening screen elements. You know what Nancy Reagan would say about the animations: Just Say No.</p>
<p>Minimal-change proposed resolution: Please, just make all the new motion effects, including the fly-away lock screen, respect Settings &gt; Accessibility &gt; Reduce Motion. (Translation: &#8220;No means no.&#8221; We said No already. Please respect it.) Or give us a new way to turn it off. Please.</p>
<p>We want to keep using iOS, but we can&#8217;t use it if we can&#8217;t look at it. We don&#8217;t want to have to switch to Android to get a phone we can use. Don&#8217;t let Android win on usability, which is supposed to be your home turf &#8212; and don&#8217;t let Android win on accessibility, which is so important these days and which I know is important to you.</p>
<p>Thank you for your consideration and help.</p>
<p>&nbsp;</p>
<p><em>If you know of a workaround that can disable these awful motion effects, please mention it in the comments. (But please don&#8217;t suggest jailbreaking, which isn&#8217;t an option for us because that would be license-violating and security-compromising.)</em></p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/10/17/11-is-the-new-7-ios-designers-what-is-it-with-the-motion-fetish-please-stop-making-us-motion-sick/feed/</wfw:commentRss>
		<slash:comments>14</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>My CppCon 2017 session is now on YouTube</title>
		<link>https://herbsutter.com/2017/09/28/my-cppcon-2017-session-is-now-on-youtube/</link>
				<comments>https://herbsutter.com/2017/09/28/my-cppcon-2017-session-is-now-on-youtube/#comments</comments>
				<pubDate>Fri, 29 Sep 2017 00:17:52 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3429</guid>
				<description><![CDATA[My CppCon talk yesterday is now on YouTube. You can read more about in my July blog post on &#8220;Metaclasses: Thoughts on generative C++&#8221; which contains links to the current paper and some examples that work so far on the live prototype compiler cppx.godbolt.org. Thanks again to Bjarne Stroustrup for making C++ so general and powerful with [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="https://youtu.be/4AfRAVcThyA">My CppCon talk yesterday is now on YouTube.</a> You can read more about in my July blog post on <a href="https://herbsutter.com/2017/07/26/metaclasses-thoughts-on-generative-c/">&#8220;Metaclasses: Thoughts on generative C++&#8221;</a> which contains links to the current paper and some examples that work so far on the live prototype compiler cppx.godbolt.org.</p>
<p>Thanks again to Bjarne Stroustrup for making C++ so general and powerful with just a single kind of &#8220;class&#8221; (essential for this work), to Andrew Sutton for implementing the prototype metaclasses compiler, to Matt Godbolt for hosting it on his site, to everyone on the committee and in the community on whose work this is trying to build and have provided comments and feedback, and to Bash Films and CppCon for making these videos available so quickly. As in previous years, the CppCon videos will also be available on Channel 9 as well, though that usually takes a few extra weeks to happen.</p>
<iframe class='youtube-player' type='text/html' width='500' height='282' src='https://www.youtube.com/embed/4AfRAVcThyA?version=3&#038;rel=1&#038;fs=1&#038;autohide=2&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent' allowfullscreen='true' style='border:0;'></iframe>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/09/28/my-cppcon-2017-session-is-now-on-youtube/feed/</wfw:commentRss>
		<slash:comments>29</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>C++17 is formally approved</title>
		<link>https://herbsutter.com/2017/09/06/c17-is-formally-approved/</link>
				<comments>https://herbsutter.com/2017/09/06/c17-is-formally-approved/#comments</comments>
				<pubDate>Wed, 06 Sep 2017 22:42:34 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3358</guid>
				<description><![CDATA[[revised 9/8 to reflect that there is no need to wait till the next WG21 meeting] As I mentioned in my Kona (March) trip report, WG21 (the ISO C++ committee) completed work on C++17 at our March meeting. At that point it was technically finalized, and since then we have been in the final procedural [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><em>[revised 9/8 to reflect that there is no need to wait till the next WG21 meeting]</em></p>
<p>As I mentioned in my <a href="https://herbsutter.com/2017/03/24/trip-report-winter-iso-c-standards-meeting-kona-c17-is-complete/">Kona (March) trip report</a>, WG21 (the ISO C++ committee) completed work on C++17 at our March meeting. At that point it was technically finalized, and since then we have been in the final procedural endgame of formal ISO approval and publication.</p>
<p>Today, I&#8217;m pleased to report that the last major ballot was completed: A few hours ago, the C++17 DIS (Draft International Standard) ballot came back with 100% approval, 23 editorial comments, and no technical comments. Unanimous approval of a DIS means that we get to skip the FDIS ballot (as we hoped) and proceed directly to publication. As far as ISO is concerned, we are now done and they are just waiting for us to update the document editorially and send them the final PDF we want to be published.</p>
<p>So the remaining steps are:</p>
<ul>
<li>The project editor (Richard Smith) and helpers will review and resolve the editorial comments, and any other pending editorial tweaks they feel like fixing (e.g., speling, for<em>matt</em>ing). This includes generating the official record of response paper summarizing what was done for each editorial DIS comment received.</li>
<li>We send the final PDF to ISO for publication, and ISO after a month or two ISO publishes it in the ISO store.</li>
</ul>
<p>Note again that all this is just formally putting a bow on C++17. WG21&#8217;s active project now is C++20, and we already began work on that at our last meeting in Toronto, including to add a major feature (concepts!), and we&#8217;ll continue serious work on that in Albuquerque and beyond.</p>
<p>This is a product of many people&#8217;s labors and many often-unsung efforts. <strong>Thank you again</strong> to the hundreds of participants in the ISO C++ committee, and many interested commenters and helpers in the community, for all your work and support for C++ standardization.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/09/06/c17-is-formally-approved/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Update on October seminar in London</title>
		<link>https://herbsutter.com/2017/09/05/update-on-october-seminar-in-london/</link>
				<comments>https://herbsutter.com/2017/09/05/update-on-october-seminar-in-london/#comments</comments>
				<pubDate>Tue, 05 Sep 2017 18:23:12 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Effective Concurrency]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3325</guid>
				<description><![CDATA[As I mentioned earlier, part of my fall schedule is to give a repeat of this spring&#8217;s sold-out seminar: &#8220;High-Performance and Low-Latency C++&#8221; (October 9-11, London, UK). I am still getting mails about whether there are alternative/additional European dates for this seminar. Unfortunately, the answer is still no, but since I&#8217;m getting inquiries about it let [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>As I mentioned earlier, part of my fall schedule is to give a repeat of <a href="https://herbsutter.com/2017/02/13/this-spring-high-performance-and-low-latency-c-stockholm-and-accu-bristol/">this spring&#8217;s</a> sold-out seminar: <a href="https://www.alfasoft.com/en/events/other/683-683-high-performance-and-low-latency-c-with-herb-sutter.html">&#8220;High-Performance and Low-Latency C++&#8221; (October 9-11, London, UK)</a>.</p>
<p>I am still getting mails about whether there are alternative/additional European dates for this seminar. Unfortunately, the answer is still no, but since I&#8217;m getting inquiries about it let me repeat that part of the earlier post:</p>
<blockquote><p>On October 9-11, I’ll be in London giving a one-time repeat of <a href="https://www.alfasoft.com/en/events/other/683-683-high-performance-and-low-latency-c-with-herb-sutter.html"><strong>“High-Performance and Low-Latency C++” </strong>(course details page)</a>. This is the same as the public course I gave in Stockholm [in April]; because that course sold out, and I was coming to Europe again for Qt World Summit anyway, we decided to do a single repeat that same week, this time in London.</p>
<p>Notes: (1) Some of you have emailed me asking if there will be other dates/cities, and the answer is no, sorry, I do seminars very rarely and this is the last one I have time to do for the foreseeable future. So if you are interested then this is the one to attend. (2) Some of you have also emailed me to ask whether the seminar will be recorded, and the answer is again no, sorry, the organizers are not set up for that. However, you can find all of my past <em>Effective Concurrency</em> writing (on which parts of this course are based) freely available via this blog, just search for that phrase or use the category tag — there’s a book’s worth of free material written by me in individual-article form.</p></blockquote>
<p>So, if you&#8217;re interested, I hope you&#8217;ll be able to attend this October, and I look forward to seeing many of you there.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/09/05/update-on-october-seminar-in-london/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Metaclasses: Thoughts on generative C++</title>
		<link>https://herbsutter.com/2017/07/26/metaclasses-thoughts-on-generative-c/</link>
				<comments>https://herbsutter.com/2017/07/26/metaclasses-thoughts-on-generative-c/#comments</comments>
				<pubDate>Wed, 26 Jul 2017 15:34:32 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3292</guid>
				<description><![CDATA[I’ve been working on an experimental new C++ language feature tentatively called “metaclasses” that aims to make C++ programming both more powerful and simpler. You can find out about it here: Current proposal paper: P0707R1. I hope the first ten pages give a readable motivation and overview. (The best two pages to start with are [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I’ve been working on an experimental new C++ language feature tentatively called “metaclasses” that aims to make C++ programming both more powerful and simpler. You can find out about it here:</p>
<ul>
<li><a href="https://herbsutter.files.wordpress.com/2017/07/p0707r1.pdf"><strong>Current proposal paper: P0707R1.</strong></a> I hope the first ten pages give a readable motivation and overview. (The best two pages to start with are 9 and 10, which probably means I need to reorder the paper…)</li>
<li><a href="https://youtu.be/6nsyX37nsRs"><strong>Initial intro talk video: ACCU 2017 (YouTube).</strong></a> This is the initial public presentation three months ago. Thank you to <strong>Roger Orr, Russel Winder, Julie Archer, and the other ACCU organizers</strong> for inviting me and for holding back the video until we could have the ISO C++ summer meeting about a week ago, so it could go live along with a report (herein) on the results of this feature’s first presentation to the ISO C++ committee. And special thanks to <strong>Ina and Arvid</strong>, the two audience volunteers who graciously agreed to come on-stage to participate in a live mini UX study. There’s a lot of subtle information in their nuanced reactions to the code examples; pay special attention when their responses are different or as their responses evolve.</li>
<li><strong>“Incomplete and experimental” prototype compiler.</strong> The Clang-based prototype by <strong>Andrew Sutton</strong> is available as an online live compiler at <a href="https://cppx.godbolt.org/">cppx.godbolt.org</a>, and as source at <a href="https://github.com/asutton/clang">github.com/asutton/clang</a>. It’s incomplete but can compile a number of the examples in the paper (see the paper for example code links). Thanks to <strong>Matt Godbolt</strong> for hosting it on godbolt.org!</li>
</ul>
<p>Please see the paper and video to answer “what are metaclasses and why should I care?” If you’re the “show me code first, English later” kind of person, try the live compiler and these quick examples: <a href="https://godbolt.org/g/Uzw5iJ">interface</a>, <a href="https://godbolt.org/g/sXmhkN">base_class</a>, <a href="https://godbolt.org/g/59LSSZ">value</a> (regular type), <a href="https://godbolt.org/g/2uMpF5">plain_struct</a> (these links are also in the paper).</p>
<p>The rest of this post aims not to duplicate any information above, but to provide some context about the broader journey, and what I and others are attempting to accomplish.</p>
<h1>A journey: Toward more powerful and simpler C++ programming</h1>
<h2>Phase 1: By using the existing language better</h2>
<p>About five years ago, I started working on long-term effort toward making using C++ simpler and safer.</p>
<p>In the first phase, a small group of us—centered on <strong>Bjarne Stroustrup, Gabriel Dos Reis, Neil MacIntosh </strong>and <strong>Andrew Pardoe</strong>—pushed to see how far we could get with “C++ as it is” plus just a few well-chosen library-only extensions, with a particular goal of improving type and memory safety. Bjarne, Neil, and I first publicly reported on this effort in the two CppCon 2015 plenary sessions <a href="https://www.youtube.com/watch?v=1OEu9C51K2A">“Writing Good C++14”</a> and <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA">“Writing Good C++14… By Default.”</a> The results of that work so far have manifested as the <a href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">C++ Core Guidelines</a> and its support library <a href="http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#S-gsl">GSL</a> that adds a limited number of library types (e.g., <a href="https://wg21.link/P0122"><em>span</em>, now being standardized</a>); and I led the Lifetime design in particular (available in the <a href="https://github.com/isocpp/CppCoreGuidelines/tree/master/docs">Guidelines /docs folder</a>) which Neil and I and others continue to work on formalizing with the aim of sharing a “draft” static analysis spec later this year.</p>
<p>One of the goals of this phase was to answer the question: “How much progress can we make toward simplifying the existing C++ language with only a few key library extensions?” The answer as I see it turned out to be: “Some solid progress, but probably not a major simplification.” And so that answer led to phase two…</p>
<h2>Phase 2: By evolving the language</h2>
<p>Two years ago, I started to focus specifically on exploring ways that we might evolve the C++ language itself to make C++ programming both more powerful and simpler. The only way to accomplish both of those goals at the same time is by adding abstractions that let programmers directly express their intent—to elevate comments and documentation to testable code, and elevate coding patterns and idioms into compiler-checkable declarations. The work came up with several potential candidate features where judiciously adding some power to the language could simplify code dramatically.</p>
<p>Of those potential candidate features, metaclasses is the first major piece I picked to propose for ISO C++. [*] We presented it for the first time at the summer ISO C++ meeting earlier this month, and it received a warm reception. There was (rare) unanimous support for pursuing this kind of capability, but also some concern about how best to expose it and specific design change feedback the committee wants us to apply to improve the proposal. [**] We’ll work to include in a revision for the November standards meeting as we start the multi-year process of vetting and refining the proposal. So this is good progress, but note that it (only) means encouragement to continue the experiment and see where it leads; it’s far too early to talk about potential ship vehicles.</p>
<p>So do expect change: The proposal is still evolving, and it in turn assumes and builds on the <a href="https://wg21.link/P0578">static reflection proposal (P0578 et al.)</a> and the <a href="https://wg21.link/P0633">compile-time programming proposal (P0633)</a>, both of which are actively evolving in their own right. Incidentally, one of the contributions of Andrew Sutton’s prototype metaclasses compiler is that it is implementing those other proposals too(!), since the metaclasses feature needs them. The aim is to keep the latest compiler and the latest P0707 paper in sync with each other and with those related proposals, but there will doubtless be occasional drift in between syncs.</p>
<h1>What’s next</h1>
<p>I’ll talk about metaclasses more in my upcoming <a href="https://cppcon.org/2017-keynote-speakers/">CppCon 2017 talk</a> this September, and<strong> Andrew Sutton </strong>will also be giving two CppCon talks about metaclasses—one about implementing them in Clang, and one about using them for a real project.</p>
<p>This is just the beginning, and we’ll see whether it all pans out and leads somewhere, but I hope you enjoy this exploration and I look forward to talking with many of you about it at CppCon this September.</p>
<p>&nbsp;</p>
<p>———</p>
<h1>Notes</h1>
<p>[*] I actually brought a smaller piece from this same work to the committee at the previous meeting, the winter meeting in Kona: <a href="https://wg21.link/P0515">P0515</a> (consistent comparisons), which proposes adding the three-way <strong>&lt;=&gt;</strong> comparison operator. P0515 is only about a minor feature, and not one of the most important things that can help improve C++, so normally I wouldn’t have picked that piece to contribute first; but the committee was already continuing to actively discuss comparisons, so I cherry-picked it from my design work and contributed it since I had the design in my pocket anyway. Happily the committee liked what they saw and both EWG and LEWG accepted it, and it is now progressing well and on track to hopefully be voted into draft C++20 in the next meeting or two. Thanks to <strong>Jens Maurer</strong> and <strong>Walter Brown</strong> for the heavy lifting of writing the core language and library standardese wording, respectively, for that P0515 proposal.</p>
<p>[**] The committee’s design feedback was primarily about how to wrap up the transformation code: Instead of putting it inside a new “meta” class-like abstraction, how about wrapping the same code inside a compile-time function-like abstraction that takes an input meta::type parameter and returns a generated meta::type return value? This doesn’t affect the proposal’s basic engine, just the shape of its steering wheel—for example, we could change the first line of each example metaclass definition from the class-like syntax</p>
<pre>$class <strong>interface</strong> {
    constexpr {
        // … basically same code …
    }
};</pre>
<p>to the decorator-function-like syntax</p>
<pre>meta::type <strong>interface</strong>(const meta::type source) {
    // … basically same code …
};</pre>
<p>where the latter has the advantage that it’s easy to see that we’re reading one type and generating another type. Interestingly, I think this dovetails with the mini UX study in the video where most of the difficulty the UX participants seemed to encounter was in understanding the $class syntax, not the metaclass bodies and not later using the metaclasses to author new types.</p>
<p>But we’ll explore this and other options and validate/invalidate it with more experiments… and feel free to express your thoughts in the comments if you like one of these styles better, or perhaps another variation.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/07/26/metaclasses-thoughts-on-generative-c/feed/</wfw:commentRss>
		<slash:comments>78</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Summer ISO C++ standards meeting (Toronto)</title>
		<link>https://herbsutter.com/2017/07/15/trip-report-summer-iso-c-standards-meeting-toronto/</link>
				<comments>https://herbsutter.com/2017/07/15/trip-report-summer-iso-c-standards-meeting-toronto/#comments</comments>
				<pubDate>Sat, 15 Jul 2017 15:39:08 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3259</guid>
				<description><![CDATA[[This post will be updated with additional details as mentioned in the comments section at bottom.] A few minutes ago, the ISO C++ committee completed its summer meeting in Toronto, Ontario, Canada. We had some 120 people at the meeting, representing nine national bodies. As usual, we met for six days Monday through Saturday, including [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><img data-attachment-id="3267" data-permalink="https://herbsutter.com/2017/07/15/trip-report-summer-iso-c-standards-meeting-toronto/wg21-toronto-city/" data-orig-file="https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png" data-orig-size="645,861" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-toronto-city" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png?w=225" data-large-file="https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png?w=500" class="alignright size-medium wp-image-3267" src="https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png?w=225&#038;h=300" alt="No, we didn't meet at city hall, but this shot was taken from the primary hotel which was across the street from city hall. Also, this building appears in Star Trek: http://spacing.ca/toronto/2013/10/01/star-trek-toronto-city-hall/" width="225" height="300" srcset="https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png?w=225&amp;h=300 225w, https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png?w=450&amp;h=600 450w, https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png?w=112&amp;h=150 112w" sizes="(max-width: 225px) 100vw, 225px" /><em>[This post will be updated with additional details as mentioned in the comments section at bottom.]</em></p>
<p>A few minutes ago, the ISO C++ committee completed its summer meeting in Toronto, Ontario, Canada. We had some 120 people at the meeting, representing nine national bodies. As usual, we met for six days Monday through Saturday, including several evenings.</p>
<p>The following are some highlights of what we achieved this week. You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>. The main things to note are:</p>
<ul>
<li>“IS” means “international standard.” In our case, it’s the core C++ standard itself. Think of this as “trunk.”</li>
<li>“TS” means “technical specification,” a document separate from the main standard where we can gain experience with new features before putting them into the IS. We have several of these, summarized on the <a href="http://isocpp.org/std/status">status page</a>. Think of these as “beta branches.”</li>
</ul>
<p>Note: As I reported in my <a href="https://herbsutter.com/2017/03/24/trip-report-winter-iso-c-standards-meeting-kona-c17-is-complete/">previous trip report</a> for the winter meeting (Kona 2017), we have already completed our work on C++17, which is now still going through its final ISO approval steps. Nothing we did this week affects C++17, but we did begin work on C++20…</p>
<h2>First meeting for C++20</h2>
<p>This was the first meeting where we could vote changes into Draft C++20. And we did!</p>
<p>First, the<strong> Concepts TS </strong>was merged into draft C++20. Yes, Concepts are back in the draft international standard and better than C++0x, which makes the famous concepts feature (principally driven by Bjarne Stroustrup, Gabriel Dos Reis, and Andrew Sutton) the first major language feature voted into draft C++20. Recall that Concepts was published as a separate TS two years ago, and available in GCC; today we voted to adopt nearly of it, except only the “introducer syntax” and “terse/natural syntax” for now because that syntax still has a handful of remaining issues that don’t have consensus, but it’s close and Evolution also voted unanimously to aggressively pursue adding the terse syntax as soon as possible once those design questions can be addressed. A few specific Concepts changes were also approved along with the merge, notably removing the need to write &#8220;bool&#8221; and removing function concepts until we see a need to overload concepts.</p>
<p>Here are some other features that were added to C++20 at this meeting. Note: These links currently find the most recent pre-meeting papers and so may not reflect the exact wording adopted at the meeting, but the links will light up to the post-meeting versions of the papers that were actually adopted as soon as those are available in the post-meeting mailing about three weeks from now.</p>
<ul>
<li><a href="https://wg21.link/p0409">Allow lambda capture [=, this].</a> Mostly a style issue, but it extends the legal syntax for C++17’s capture of “this” so that programmers can write this stylistically if they want to be explicit in their code.</li>
<li><a href="https://wg21.link/p0329">Add designated initializers.</a> Draft C++20 now allows code like: struct A { int x; int y; int z; }; A b{<strong>.x =</strong> 1, <strong>.z =</strong> 2};</li>
<li><a href="https://wg21.link/p0428">Allow template parameter lists on lambdas.</a> For example: auto f = []<strong>&lt;typename T&gt;</strong>(std::vector&lt;T&gt; vector) { /*&#8230;*/ };</li>
</ul>
<h2>One TS sent for its ISO ballot, three TSes completed to be published</h2>
<p>We also spent quite a bit of the week working on three TSes that completed their review ballots, and sending out one more: The <strong>Modules TS</strong> is sent out for its comment and approval (PDTS) ballot. And the <strong>Coroutines TS</strong>, <strong>Networking TS</strong>, and <strong>Ranges TS</strong> are all done, as the groups worked hard to process and address all the comments from their ballots and we are sending them out for final publication. – It’s not every meeting that we publish three specifications! Some of them would have been handled at our last meeting, but we were busy finishing C++17 so they stacked up for this meeting.</p>
<p>Thank you very much again to all the volunteers who helped progress our proposals, send out our PDTSes, address our ballot comments and publish three (3) TSes, and get the C++20 cycle off to a roaring start.</p>
<h2>Other progress</h2>
<p>We considered merging one other published TS, the <strong>Concurrency TS</strong>. The feeling was that its three major features were in different stages of readiness, and some are advancing toward bring merged into C++20, possibly at our next meeting:</p>
<ul>
<li><strong>atomic_shared_ptr&lt;T&gt;</strong> is on track to be merged into C++20 with changes, in detailed standardese wording review and expected to be put up for approval at our next meeting. Interestingly, some of the changes are to make it more like the original design I proposed, including to name it atomic&lt;shared_ptr&lt;T&gt;&gt;.</li>
<li><strong>Latches</strong> are also approved, essentially as-is, and the feature is in wording review for the next meeting.</li>
<li><strong>Barriers</strong> are also potentially on track for C++20 but SG1 is still discussing open design problems. Its design can be expected to change substantially from the TS version.</li>
<li>Some minor pieces of the <strong>future</strong> extensions are moving ahead, but the extension has several unresolved design issues including to coordinate with the (we hope soon-coming) executors design.</li>
</ul>
<p>Other items making progress for possible consideration to be adopted in the fall meeting:</p>
<ul>
<li>The first part of <a href="https://wg21.link/P0194">compile-time reflection</a> is in wording review.</li>
<li>The library groups are starting to <a href="https://issues.isocpp.org/show_bug.cgi?id=311">remove deprecated features</a>.</li>
</ul>
<p>The Library Evolution group has started discussing at how to integrate modules and contracts into the standard library. They expect to start integrating concepts next meeting, which is a big benefit of getting a major feature merged early in the C++20 cycle. They are also actively working on <a href="https://wg21.link/P0244">Unicode support</a>, several new containers, and a <a href="https://wg21.link/P0355">date library</a>, among other things.</p>
<p>We also continued incubating other work. In particular, the <strong>Reflection</strong> study group had presentations, and gave direction and feedback, on a few additions to the static reflection proposal that is already progressing in the main subgroups, the compile-time programming proposal, and my new metaclasses paper. (I’ll post a separate report on the metaclasses part soon, probably in the next week or so, with a link to the ACCU video.)</p>
<h2>What’s next</h2>
<p>In my <a href="https://herbsutter.com/2016/11/15/trip-report-fall-iso-c-standards-meeting-issaquah/">trip report last fall</a>, two meetings ago, I wrote: “Then, once C++17 ships next year and possibly as soon as our July meeting, I expect we’ll start looking at merging more of the TS ‘beta branches’ into the C++ ‘trunk.’”</p>
<p>Well, that’s exactly what happened: We did finish C++17 at the next meeting, and now at the meeting after that we did merge our first major TS into the C++ trunk.</p>
<p>Here’s an updated snapshot of our status (the latest is always on the <a href="https://isocpp.org/std/status">isocpp.org/std/status</a> page):</p>
<p><a href="https://isocpp.org/files/img/wg21-timeline-2017-07b.png"><img data-attachment-id="3263" data-permalink="https://herbsutter.com/2017/07/15/trip-report-summer-iso-c-standards-meeting-toronto/wg21-timeline-2017-07b/" data-orig-file="https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=500" data-orig-size="1937,1427" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline-2017-07b" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=500?w=500" class="alignnone size-full wp-image-3263" src="https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=500" alt="wg21-timeline-2017-07b" srcset="https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=500 500w, https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=150 150w, https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=300 300w, https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></a></p>
<p>Thank you again to the 120 experts in Toronto this week, and the many more who participate in standardization through their national bodies! Have a good summer – and see you at <a href="https://cppcon.org/">CppCon</a>!</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/07/15/trip-report-summer-iso-c-standards-meeting-toronto/feed/</wfw:commentRss>
		<slash:comments>16</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2017/07/wg21-toronto-city-e1500123984972.png?w=450" medium="image">
			<media:title type="html">No, we didn&#039;t meet at city hall, but this shot was taken from the primary hotel which was across the street from city hall. Also, this building appears in Star Trek: http://spacing.ca/toronto/2013/10/01/star-trek-toronto-city-hall/</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2017/07/wg21-timeline-2017-07b.png" medium="image">
			<media:title type="html">wg21-timeline-2017-07b</media:title>
		</media:content>
	</item>
		<item>
		<title>This fall: ACAT &#038; CppCon (Seattle), High-Performance/Low-Latency C++ (London), Qt World Summit (Berlin)</title>
		<link>https://herbsutter.com/2017/06/25/this-fall-cppcon-seattle-high-performancelow-latency-c-london-qt-world-summit-berlin/</link>
				<comments>https://herbsutter.com/2017/06/25/this-fall-cppcon-seattle-high-performancelow-latency-c-london-qt-world-summit-berlin/#comments</comments>
				<pubDate>Mon, 26 Jun 2017 05:52:01 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Talks & Events]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=3125</guid>
				<description><![CDATA[[6/26: Updated to add ACAT] I can&#8217;t remember the last time I&#8217;ve gone to Europe twice in one year, but this is the year&#8230; up first are ACAT in August and CppCon in September, then a week later in early October I&#8217;ll be heading to London to give a single repeat of the three-day High-Performance and [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><em>[6/26: Updated to add ACAT]</em></p>
<p>I can&#8217;t remember the last time I&#8217;ve gone to Europe twice in one year, but this is the year&#8230; up first are ACAT in August and CppCon in September, then a week later in early October I&#8217;ll be heading to London to give a single repeat of the three-day <em>High-Performance and Low Latency C++</em> course, in the same week that I&#8217;ll be in Europe already to give a keynote at Qt World Summit in Berlin.</p>
<h3>Aug 21-25: ACAT</h3>
<p>This year I&#8217;ll be giving a keynote at <strong><a href="https://indico.cern.ch/event/567550/">ACAT</a></strong> (topic and day tbd). Unfortunately I cannot be there in person due to conflicts, but the organizers are graciously making arrangements for a remote presentation.</p>
<h3>Mon-Fri Sep 25-29*: CppCon (Seattle)</h3>
<p>I&#8217;ll be giving a brand-new talk at <a href="https://cppcon.org/2017-keynote-speakers/"><strong>CppCon</strong></a>. If you haven&#8217;t <a href="https://cppcon.org/registration/">registered</a> yet for CppCon but are thinking of coming, note that the Early Bird discount ends on July 7, the end of next week.</p>
<p>* Those are the dates of the 5-day core conference, but technically the full dates are Sep 23 &#8211; Oct 1 because CppCon has grown into, somewhat incredibly, a <em>nine-day</em> event this year. How it happened: Last year, we added two days of optional pre-conference tutorials on the weekend before the conference as an experiment; those were so successful that this year there are tutorials on both weekends, before <em>and </em>after the conference, again as an experiment&#8230; but I know that at least a few of you have already signed up for all 9 days (wow).</p>
<h3>Mon-Wed Oct 9-11: High-Performance and Low-Latency C++ (London)</h3>
<p>On October 9-11, I&#8217;ll be in London giving a one-time repeat of <a href="https://www.alfasoft.com/en/events/other/683-683-high-performance-and-low-latency-c-with-herb-sutter.html"><strong>&#8220;High-Performance and Low-Latency C++&#8221; </strong>(course details page)</a>. This is the same as the public course I gave in Stockholm two months ago; because that course sold out, and I was coming to Europe again for Qt World Summit anyway, we decided to do a single repeat that same week, this time in London.</p>
<p>Notes: (1) Some of you have emailed me asking if there will be other dates/cities, and the answer is no, sorry, I do seminars very rarely and this is the last one I have time to do for the foreseeable future. So if you are interested then this is the one to attend. (2) Some of you have also emailed me to ask whether the seminar will be recorded, and the answer is again no, sorry, the organizers are not set up for that. However, you can find all of my past <em>Effective Concurrency</em> writing (on which parts of this course are based) freely available via this blog, just search for that phrase or use the category tag &#8212; there&#8217;s a book&#8217;s worth of free material written by me in individual-article form.</p>
<h3>Thu Oct 12: Qt World Summit (Berlin)</h3>
<p>The next day, I&#8217;ll be in Berlin giving one of the keynotes at <a href="https://www.qtworldsummit.com/"><strong>Qt World Summit</strong></a>. I&#8217;m not sure yet whether it&#8217;ll be the closing keynote; for more details, please check their conference schedule once it&#8217;s posted.</p>
<p>I look forward to seeing many of you at these events.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/06/25/this-fall-cppcon-seattle-high-performancelow-latency-c-london-qt-world-summit-berlin/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Winter ISO C++ standards meeting (Kona), C++17 is complete</title>
		<link>https://herbsutter.com/2017/03/24/trip-report-winter-iso-c-standards-meeting-kona-c17-is-complete/</link>
				<comments>https://herbsutter.com/2017/03/24/trip-report-winter-iso-c-standards-meeting-kona-c17-is-complete/#comments</comments>
				<pubDate>Sat, 25 Mar 2017 00:03:44 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2984</guid>
				<description><![CDATA[The ISO C++ committee had its winter meeting in Kona, HI, USA from February 27 to March 4, hosted by Plum Hall and the Standard C++ Foundation. Over 100 people attended, officially representing 9 countries. C++17 is done! The big news is that we completed C++17, which dominated the work of the meeting: C++17 is now [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>The ISO C++ committee had its winter meeting in Kona, HI, USA from February 27 to March 4, hosted by Plum Hall and the Standard C++ Foundation. Over 100 people attended, officially representing 9 countries.</p>
<h3>C++17 is done!</h3>
<p>The big news is that we completed C++17, which dominated the work of the meeting: C++17 is now technically finished and being sent out for its final ISO balloting. All that remains for C++17 now is some ISO red tape and minor touch-up to get it officially published, which is expected to be just mechanical.</p>
<p>There&#8217;s not much exciting to report from a &#8220;new features added at this meeting&#8221; point of view, because the main work was to finish resolving national body review comments on C++17 and ship the product. Perhaps the most exciting thing was that we decided to add <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2017/p0298r3.pdf">the <em>std::byte</em> type</a>; the rest of the work was final pre-release bug fixes before casting C++17 in stone, the important-but-unsung work of getting a product to ship quality.</p>
<p>Thank you very much to everyone who contributed in person or through papers, email, telecons and otherwise to creating and shipping C++17 &#8212; as well as several TSes that we also worked on concurrently and will soon be considering to add early in the C++20 cycle! Your hard work is much appreciated by everyone. I especially want to call out the Library working group (LWG) members, who had the heaviest C++17 workload in Kona and worked around the clock every day to finish responding to the comments in their areas. Thanks again, everyone. Here&#8217;s a group photo we took just outside our main meeting room (directly behind us) right after approving C++17:</p>
<p><img data-attachment-id="3104" data-permalink="https://herbsutter.com/2017/03/24/trip-report-winter-iso-c-standards-meeting-kona-c17-is-complete/kona2017-full-committee-crop/" data-orig-file="https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg?w=500" data-orig-size="655,219" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Kona2017 full committee &#8211; crop" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg?w=500?w=500" class="alignnone size-full wp-image-3104" src="https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg?w=500" alt="Kona2017 full committee - crop" srcset="https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg?w=500 500w, https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg?w=150 150w, https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg?w=300 300w, https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg 655w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Next, we&#8217;re already shifting gears to begin work on C++20 at our next meeting this July in Toronto.</p>
<h3>Other progress</h3>
<p>We also approved shipping the <strong>Coroutines TS</strong> out for its (expected-to-be-only) international comment ballot, aka PDTS (Proposed Draft Technical Specification).</p>
<p>We came oh-so-close to approve shipping the <strong>Modules TS</strong> out for PDTS as well. The Evolution working group (EWG) weighed in on whether a couple of final cases should be included before sending it out for comments, and we hope to finalize that feature set and send it out in July in Toronto.</p>
<p>We also did work on the <strong>Parallelism 2 TS</strong>, and on a number of pre-TS proposals including <strong>2D Graphics</strong>. On a personal note, <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2017/p0515r0.pdf">my comparisons proposal</a> was positively reviewed by both EWG and the Library Evolution working group (LEWG) (only the core proposal was encouraged, none of the parts marked &#8216;optional&#8217;) and wouldn&#8217;t have got that far without standing on the shoulders of giants &#8212; the previous comparisons proposals listed in the paper, notably Bjarne Stroustrup&#8217;s efforts and again Jens Maurer&#8217;s writing the standardese wording for Bjarne and now for me &#8212; and the detailed comments of over two dozen reviewers many of whom did detailed reviews of multiple drafts (it was a busy winter) &#8212; thank you again to everyone who helped me with that, it is at least 2x better as a result. If people are interested, I might give a short talk about it at CppCon this fall.</p>
<p>The <strong>Reflection</strong> proposal has now progressed out of the incubator Study Group, and was presented to the main Evolution and Library Evolution subgroups for the first time. To handle related proposals, the Reflection Study Group&#8217;s charter is now being expanded to also include proposals toward a general first-class compile-time programming model. For anyone who loves the glorious compile-time magic that C++ template metaprogramming (TMP) is able to do, but wish it could both do much more and also <em>not</em> be template metaprogramming with angle brackets and inscrutable code and diagnostics, then you&#8217;ll love the work in this direction; think &#8220;constexpr on steroids.&#8221; I&#8217;m looking forward to seeing how this evolves.</p>
<p>Both the <strong>Networking TS</strong> and the <strong>Ranges TS</strong> successfully completed their only (PDTS) ballots before Kona. The only work that remains before finalizing those is to address their PDTS ballot comments, which will largely be done in LWG. LWG was fully booked all week long with C++17 CD comments, but on Saturday started processing the PDTS comments as well. We plan to finish resolving Networking and Ranges comments and finalize those TSes at our next meeting in July.</p>
<p>In EWG, we looked at some feedback on the <strong>Concepts TS</strong> with an eye toward hopefully merging the Concepts TS into the C++20 working paper early in the C++20 cycle &#8212; possibly as soon as this year. There was one design tweak that EWG approved, and a couple more that will likely be discussed again in July in Toronto.</p>
<p>Here is an updated snapshot of our status, also available on the <a href="https://isocpp.org/std/status">status page</a>:</p>
<p><img data-attachment-id="3095" data-permalink="https://herbsutter.com/2017/03/24/trip-report-winter-iso-c-standards-meeting-kona-c17-is-complete/wg21-timeline-2017-03/" data-orig-file="https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=500" data-orig-size="1937,1427" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline-2017-03" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=500?w=500" class="alignnone size-full wp-image-3095" src="https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=500" alt="wg21-timeline-2017-03.png" srcset="https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=500 500w, https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=150 150w, https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=300 300w, https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the over 100 experts in Kona, and the many more who participate in standardization through their national bodies! Have a good spring&#8230; next stop: Toronto, to start C++20 this July.<br />
<em>Correction, 3/25:</em> The original text did not reflect that LWG additionally spent a lot of time on Saturday processing Ranges PDTS issues. LWG did (thanks!), so we actually have a head start on those. As originally stated, we expect to complete the Ranges TS and Networking TS in July, and the Kona head start on PDTS comment resolution makes doing so that much easier.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/03/24/trip-report-winter-iso-c-standards-meeting-kona-c17-is-complete/feed/</wfw:commentRss>
		<slash:comments>37</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2017/03/kona2017-full-committee-crop.jpg" medium="image">
			<media:title type="html">Kona2017 full committee - crop</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2017/03/wg21-timeline-2017-03.png" medium="image">
			<media:title type="html">wg21-timeline-2017-03.png</media:title>
		</media:content>
	</item>
		<item>
		<title>Distinguishing between maybe-null vs never-null is the important thing</title>
		<link>https://herbsutter.com/2017/02/15/distinguishing-between-maybe-null-vs-never-null-is-the-important-thing/</link>
				<comments>https://herbsutter.com/2017/02/15/distinguishing-between-maybe-null-vs-never-null-is-the-important-thing/#comments</comments>
				<pubDate>Wed, 15 Feb 2017 17:36:40 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2971</guid>
				<description><![CDATA[This discussion today on the Core Guidelines repo issues is probably of broad interest. It&#8217;s regarding why we chose to annotate not_null&#60;T*&#62; rather than the reverse in the Guidelines and the Guideline Support Library (GSL). Pasting here: I would take this interface reduction one step further and make an un-annotated T* implicitly &#8220;not null&#8221;. I [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="https://github.com/isocpp/CppCoreGuidelines/issues/847#issuecomment-280078564">This discussion today</a> on the Core Guidelines repo issues is probably of broad interest. It&#8217;s regarding why we chose to annotate <em>not_null&lt;T*&gt;</em> rather than the reverse in the Guidelines and the Guideline Support Library (GSL).</p>
<p>Pasting here:</p>
<hr />
<blockquote><p>I would take this interface reduction one step further and make an un-annotated T* implicitly &#8220;not null&#8221;.</p></blockquote>
<p>I understand, and we considered that.</p>
<p>We decided against that for several reasons:</p>
<ul>
<li><code>T*</code>, <code>smart_ptr&lt;T&gt;</code>, <code>span&lt;T&gt;</code>, <code>container&lt;T&gt;::iterator</code>, <code>range&lt;T&gt;</code>, etc. are all non-owning indirections and should be consistent with each other &#8212; it would be strange for some to be nullable but not others. Iterators can be &#8220;null&#8221;, for example a default-constructed iterator is not referring to anything.</li>
<li>More generally, all of those can be default-constructed, and the only reasonable semantics for that are &#8220;doesn&#8217;t point to anything.&#8221; (This can be a springboard for a broader discussion about the situations where default-constructible types are important, Regular types, etc.)</li>
<li>A large fraction of existing of <code>T*</code> are deliberately intended to be null, because people by convention use references for not-null parameters in particular and so in modern C++ code the presence of a <code>T*</code>parameter often (not always) implies nullability by that convention. So trying to annotate the &#8220;nullable&#8221; case is a huge code churn, and not only unadoptable but actually against the intent of much existing code.</li>
<li>Even if we ignored that and changed the default for <code>T*</code>, then we&#8217;d need to invent yet another annotation wrapper such as <code>nullable&lt;T&gt;</code>, and have to teach and explain both <code>not_null&lt;T&gt;</code> and <code>nullable&lt;T&gt;</code> (inconsistently).</li>
</ul>
<p>For these and other reasons, we think that pointers should be nullable by default unless annotated otherwise.</p>
<blockquote><p>valid concerns that are being dismissed because of a failure to distinguish between best practices for new code, and pragmatic recommendations for updating old code</p></blockquote>
<p>I hope that helps reassure you that the concerns were considered deeply and aren&#8217;t being dismissed, and apply both to new code and old code. Defaults are important, and should reflect the common case especially for new code, but also for old code much of which is &#8220;correct&#8221; but just expressed without enough information about the intent because the programmer didn&#8217;t have the option or tool to express the intent.</p>
<p><strong>The key issue is to distinguish maybe-null and never-null in the type system, and both of our approaches agree on doing that.</strong> Tony Hoare called null pointers his &#8220;billion-dollar mistake,&#8221; but in my opinion, and I think yours, the mistake was not maybe-null pointers (which are necessary, unavoidable, and pervasively present in every language with pointer/reference indirections, including Java, C#, C, C++, etc.), but rather in <em>not distinguishing maybe-null and never-null pointers in the type system</em>. You and we are both trying to do that, and so in the above I think we&#8217;re largely agreeing and our discussion is narrowly just about which one should be the default.</p>
<p>&nbsp;</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/02/15/distinguishing-between-maybe-null-vs-never-null-is-the-important-thing/feed/</wfw:commentRss>
		<slash:comments>18</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>This spring: High-Performance and Low-Latency C++ (Stockholm) and ACCU (Bristol)</title>
		<link>https://herbsutter.com/2017/02/13/this-spring-high-performance-and-low-latency-c-stockholm-and-accu-bristol/</link>
				<comments>https://herbsutter.com/2017/02/13/this-spring-high-performance-and-low-latency-c-stockholm-and-accu-bristol/#comments</comments>
				<pubDate>Mon, 13 Feb 2017 18:13:49 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Effective Concurrency]]></category>
		<category><![CDATA[Software Development]]></category>
		<category><![CDATA[Talks & Events]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2879</guid>
				<description><![CDATA[I don&#8217;t get to Europe very often apart from ISO C++ standards meetings, but this spring I&#8217;ve been able to accept invitations for two English-language European events in the last week of April. If you&#8217;re interested in attending, please check out the links, and I look forward to meeting and re-meeting many of you there. Tue-Thu [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I don&#8217;t get to Europe very often apart from ISO C++ standards meetings, but this spring I&#8217;ve been able to accept invitations for two English-language European events in the last week of April. If you&#8217;re interested in attending, please check out the links, and I look forward to meeting and re-meeting many of you there.</p>
<h3>Tue-Thu Apr 25-27: High-Performance and Low-Latency C++ (Stockholm)</h3>
<p>On April 25-27, I&#8217;ll be in Stockholm (Kista) giving a three-day seminar on <strong><a href="https://www.alfasoft.com/en/events/intel/578-high-performance-and-low-latency-c-with-herb-sutter.html">&#8220;High-Performance and Low-Latency C++.&#8221;</a></strong> This contains updated and new material that reflects the latest C++ standards and compilers, with a focus to using modern C++11/14/17 effectively on modern hardware and memory architectures.</p>
<p>Note that the class size is limited to about 100, so that I&#8217;ll be able to interact with most attendees directly. Registration just opened recently and hasn&#8217;t been widely publicized yet, but today I was told that it&#8217;s already over 1/3 full. So if you or your colleagues might be interested in attending, please check out the link above; for group registrations, please contact Alfasoft directly.</p>
<p>Here is the summary, below; for a more detailed topic breakdown see the link above.</p>
<blockquote><p><strong>Description</strong></p>
<p>Performance and efficiency are C++’s bread and butter, and they matter more than ever on modern hardware: In processors, single-threaded performance improvements are slowing down (unless your code is parallel); in Internet of Things, we are often asked to do more work with less hardware; and in cloud computing, processor/hardware time is often the major component of cost and so making code twice as efficient often means saving close to half the processing cost. Today, getting the highest performance and the lowest latency on modern hardware often means being aware of the hardware in ways that most other programming languages can’t – from hardware caches where simply arranging our data in the right order can give 50x speedups with otherwise identical code, to hardware parallelism where using parallel algorithms turns on high-performance parallel and vector processor hardware that otherwise sits idle.</p>
<p>Additionally, low latency increasingly matters at all scales: In user interfaces, low latency means responsive apps and productive users without the dreaded “wait…” donut; in financial trading, low latency regularly saves large amounts of cash; in embedded real-time systems, low latency is crucial to meeting deadlines and can even save lives. Today, this makes concurrency more important than ever, because it delivers two things: It hides latencies we have to deal with and cannot remove, from disk I/O latency to speed-of-light network latency; and it makes our code responsive by not introducing needless latencies of our own even when we’re not hiding someone else’s latency.</p>
<p><strong>Goal</strong></p>
<p>This intensive three day course will provide developers with the knowledge and skills required to write high-performance and low-latency code on today’s modern systems using modern C++11/14/17. During the training you’ll learn how to get the highest performance and the lowest latency on modern hardware in ways that are unique to C++, including how to arrange data to use hardware caches effectively, and how to use standard and your own custom-written parallel algorithms to harness high-performance parallel and vector processor hardware to compute results faster. You’ll also learn how to manage latency for responsive apps and for real-time systems, and techniques to hide the underlying latencies we have to deal with and cannot remove such as disk and network latency, and to make your own code responsive by not introducing needless latencies in your own code.</p></blockquote>
<h3>Sat Apr 29: ACCU closing keynote (Bristol)</h3>
<p>Next, I&#8217;ll be heading to Bristol to catch the end of the ACCU 2017 conference, and give the closing talk on <strong><a href="https://conference.accu.org/site/stories/2017/sessions.html#XSomethingsNewincpp">&#8220;Something(s) New in C++.&#8221;</a></strong> No, the title is not intentionally a tease; it&#8217;s just that I have several topics available, and I won&#8217;t be sure until about a month before the event which will be the best one to speak about. Here is the current abstract:</p>
<blockquote><p>By the time the ACCU 2017 conference begins, C++17 is expected to be technically complete and in its final approval ballot. What comes next? Will C++ continue growing forever? Can C++ code be simplified? This is a brand-new talk of material I’ve never given before, in which I’ll present one (or more) of three proposals I’m personally working on to further improve C++ post-C++17. All follow a common theme – adding a strategic language and/or library feature to C++ that leads to significant, and sometimes dramatic, simplification of real-world C++ code. I’ll pick which one (or more) of those topics to present sometime in March.</p></blockquote>
<p>What I can say is that, whichever topic it ends up being, it&#8217;ll be something you haven&#8217;t seen before that&#8217;s forward-looking and aimed directly toward making C++ code simpler and easier&#8230; and of course without compromising C++&#8217;s model of efficient machine-near abstraction.</p>
<p>I look forward to seeing many of you in Europe this spring.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2017/02/13/this-spring-high-performance-and-low-latency-c-stockholm-and-accu-bristol/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Fall ISO C++ standards meeting (Issaquah)</title>
		<link>https://herbsutter.com/2016/11/15/trip-report-fall-iso-c-standards-meeting-issaquah/</link>
				<comments>https://herbsutter.com/2016/11/15/trip-report-fall-iso-c-standards-meeting-issaquah/#comments</comments>
				<pubDate>Tue, 15 Nov 2016 18:06:36 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2865</guid>
				<description><![CDATA[[ETA: Mentioning specific TSes expected to be merged soon post-C++17.] On Saturday, the ISO C++ committee completed its fall meeting in Issaquah, WA, USA, hosted by Microsoft and the Standard C++ Foundation. We had over 110 people at the meeting, representing 10 national bodies. We also had more than usual local visitors – note that [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><em>[ETA: Mentioning specific TSes expected to be merged soon post-C++17.]</em></p>
<p>On Saturday, the ISO C++ committee completed its fall meeting in Issaquah, WA, USA, hosted by Microsoft and the Standard C++ Foundation. We had over 110 people at the meeting, representing 10 national bodies. We also had more than usual local visitors – note that ISO C++ meetings are open and we always welcome people who are curious to see what goes on. As usual, we met for six days Monday through Saturday, including several evenings. Fun historical note: This meeting was held in the same hotel as the meeting that completed and shipped C++14.</p>
<p>The following are some highlights of what we achieved last week. You can find a brief summary of ISO procedures <a href="https://isocpp.org/std/iso-iec-jtc1-procedures">here</a>. The main things to note are:</p>
<ul>
<li>“IS” means “international standard.” In our case, it’s the core C++ standard itself. Think of this as “trunk.”</li>
<li>“TS” means “technical specification,” a document separate from the main standard where we can gain experience with new features before putting them into the IS. We have several of these, summarized on the <a href="http://isocpp.org/std/status">status page</a>. Think of these as “beta branches.”</li>
</ul>
<h1>C++17 completed its comment ballot, first of two (expected) meetings to address comments</h1>
<p>Draft C++17 hit its major feature-freeze at our previous meeting, and over the summer we conducted its major ISO comment ballot. So the primary focus at this meeting was addressing the review comments. Think of it as the “shakedown” stage of fixing bugs before release.</p>
<p>We expected to take two meetings to resolve all the comments, and we are on track. So at our next meeting we hope to finish addressing the ballot comments and any other fixes we can resolve and hopefully set C++17 in stone as we send it out for its possibly-final formal approval ballot. <em>(ISO administrative detail: I say “possibly-final” because as long as that ballot comes back with zero No votes, we can skip the actual final extra ballot, as we did with C++14. If for some reason it doesn’t, we’d run one more ballot over the summer. Either way, we’ll be done in 2017.)</em></p>
<p>We made some minor adjustments. For example, the <strong>std::variant</strong> type was tweaked to make it clear that <strong>Ts</strong> cannot be empty or contain <strong>void</strong> or <strong>T&amp;</strong> reference types.</p>
<p>Although we didn’t add any new features, we did agree to finally remove one: Old-style dynamic exception specifications were already deprecated, and have now been officially removed from the standard. They are superseded by <strong>noexcept.</strong></p>
<h1>Other progress</h1>
<p>Besides resolving C++17 ballot comments, we also worked on the TSes: We completed one, sent two out for their main ballots, and have two more expected to go out for their main ballots at the next meeting.</p>
<p>Here is a summary of progress, in rough order of expected delivery dates, starting with what we actually finished at this meeting:</p>
<p>The <strong>Library Fundamentals 2 TS</strong> is now done. This is another round of “beta” standard library extensions, and at this meeting we completed resolving its comment ballot results and approved sending the final text for publication.</p>
<p>The<strong> Networking </strong>TS and <strong>Ranges </strong>TS both reached feature-freeze and were sent out for their comment ballots. Both are expected to be completed and published in 2017.</p>
<p>The<strong> Modules</strong> TS and <strong>Coroutines</strong> TS are both “almost” ready to go out for their comment ballots. Both very nearly made it this time, but they need some final review and we expect both to go out for their comment ballots at our next meeting this winter. Depending on timing, they too might be done and published in 2017.</p>
<p>The<strong> Parallelism 2</strong> TS is in progress and should reach its comment ballot in a small number of meetings. The big news here is that it seems the concurrency subgroup has finally agreed on a unified executors proposal, which is important to be able to say “where” a piece of concurrent or parallel work executes. This is an important milestone and the result of copious amounts of effort across several meetings.</p>
<p>We also continued incubating other work. In particular, the <strong>Reflection</strong> study group reviewed the latest merged static reflection proposal and found it ready to enter the main Evolution groups at our next meeting to start considering the unified static reflection proposal for a TS or for the next standard.</p>
<h1>What’s next</h1>
<p>A lot of our C++ standardization work is reaching “ship stage” at about the same time, which is pretty exciting to see, so we’re in the middle of a busy handful of meetings. At our next <a href="https://isocpp.org/files/papers/n4573.txt">March 2017</a> meeting, we hope to finish addressing the ballot comments and plan to send C++17 out for its final approval ballot. We also expect to send out a few more TS “beta” branches out for review as mentioned above.</p>
<p>Then, once C++17 ships next year and possibly as soon as our July meeting, I expect we’ll start looking at merging more of the TS “beta branches” into the C++ “trunk,” including the published TSes that didn&#8217;t make the C++17 merge (notably Concepts and Concurrency). Here’s an updated snapshot of our status:</p>
<p><img data-attachment-id="2874" data-permalink="https://herbsutter.com/2016/11/15/trip-report-fall-iso-c-standards-meeting-issaquah/wg21-timeline-3/" data-orig-file="https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=500" data-orig-size="1901,1427" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=500?w=500" class="alignnone size-full wp-image-2874" src="https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=500" alt="wg21-timeline" srcset="https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=500 500w, https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=150 150w, https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=300 300w, https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to the over 110 experts at Issaquah last week, and the many more who participate in standardization through their national bodies! Have a good winter.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/11/15/trip-report-fall-iso-c-standards-meeting-issaquah/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2016/11/wg21-timeline.png" medium="image">
			<media:title type="html">wg21-timeline</media:title>
		</media:content>
	</item>
		<item>
		<title>My CppCon talk video is online</title>
		<link>https://herbsutter.com/2016/09/27/my-cppcon-talk-video-is-online/</link>
				<comments>https://herbsutter.com/2016/09/27/my-cppcon-talk-video-is-online/#comments</comments>
				<pubDate>Tue, 27 Sep 2016 18:02:29 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2852</guid>
				<description><![CDATA[You can find it on YouTube here. [ETA: Slides are here.] Here&#8217;s an embed, below:]]></description>
								<content:encoded><![CDATA[<p>You can find it on <a href="https://www.youtube.com/watch?v=JfmTagWcqoE">YouTube here</a>. [ETA: <a href="https://github.com/CppCon/CppCon2016/blob/master/Presentations/Lifetime%20Safety%20By%20Default%20-%20Making%20Code%20Leak-Free%20by%20Construction/Lifetime%20Safety%20By%20Default%20-%20Making%20Code%20Leak-Free%20by%20Construction%20-%20Herb%20Sutter%20-%20CppCon%202016.pdf">Slides are here.</a>] Here&#8217;s an embed, below:<br />
<iframe class='youtube-player' type='text/html' width='560' height='315' src='https://www.youtube.com/embed/JfmTagWcqoE?version=3&#038;rel=1&#038;fs=1&#038;autohide=2&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent' allowfullscreen='true' style='border:0;'></iframe></p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/09/27/my-cppcon-talk-video-is-online/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>To store a destructor</title>
		<link>https://herbsutter.com/2016/09/25/to-store-a-destructor/</link>
				<comments>https://herbsutter.com/2016/09/25/to-store-a-destructor/#comments</comments>
				<pubDate>Sun, 25 Sep 2016 18:46:02 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2778</guid>
				<description><![CDATA[[edited to add notes and apply Howard Hinnant&#8217;s de-escalation to static_cast] After my talk on Friday, a couple of people asked me how I was storing destructors in my gcpp library. Since several people are interested, I thought I&#8217;d write a note. The short answer is to store two raw pointers: one to the object, and [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><em>[edited to add notes and apply Howard Hinnant&#8217;s de-escalation to static_cast]</em></p>
<p>After my talk on Friday, a couple of people asked me how I was storing destructors in my <a href="https://github.com/hsutter/gcpp">gcpp library</a>. Since several people are interested, I thought I&#8217;d write a note.</p>
<p>The short answer is to store two raw pointers: one to the object, and one to a type-erased destructor function that&#8217;s handy to write using a lambda.</p>
<p>In deferred_heap.h, you&#8217;ll see that the library stores a deferred destructor as:</p>
<pre>struct destructor {
    const void* p;
    void(*destroy)(const void*);
};</pre>
<p>So we store two raw pointers, a raw pointer to the object to be destroyed and a raw function pointer to the destructor. Then later we can just invoke <em>d.destroy(d.p)</em>.</p>
<p>The most common question is: &#8220;But how can you get a raw function pointer to the destructor?&#8221; I use a lambda:</p>
<pre>// Called indirectly from deferred_heap::make&lt;T&gt;.
// Here, t is a T&amp;.
dtors.push_back({
    std::addressof(t), // address of object
    [](const void* x) { static_cast&lt;const T*&gt;(x)-&gt;~T(); }
});                    // dtor to invoke</pre>
<p>A non-capturing lambda has no state so it can be used as a plain function, and because we know T here we just write a lambda that performs the correct cast back to invoke the correct T destructor. So for each distinct type T that this is instantiated with, we generate one T-specific lambda function (on demand at compile time, globally unique) and we store that function&#8217;s address.</p>
<p>Notes:</p>
<ul>
<li>The lambda gives a handy way to do type erasure in this case. One line removes the type, and the other line adds it back.</li>
<li>Yes, it&#8217;s legal to call the destructor on a const object. It has to be; we have to be able to destroy const objects. Const never applies to a constructor or destructor, it applies to all the other member functions.</li>
<li>Some have asked what the body of the wrapper lambda generates. I looked at the code gen in Clang a couple of weeks ago, and depending on the optimization level, the lambda is generated as either a one-instruction function (just a single <em>jmp</em> to the actual destructor) or as a copy of the destructor if it&#8217;s inlined (no run-time overhead at all, just another inline copy of the destructor in the binary if it&#8217;s generally being inlined anyway).</li>
<li>Because we are storing the destructor at the same time as we are constructing the T object, we know the complete object&#8217;s type is T and therefore can easily store the correct destructor for the complete object. Later, regardless of whether the list deferred_ptr keeping it alive is a deferred_ptr&lt;T&gt; or something else, such as a deferred_ptr&lt;const T&gt; or deferred_ptr&lt;BaseClass&gt; or deferred_ptr&lt;TDataMember&gt;, the correct T destructor will be called to clean up the complete object.</li>
</ul>
<p>I&#8217;ve now added a version of this to the gcpp readme FAQ section.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/09/25/to-store-a-destructor/feed/</wfw:commentRss>
		<slash:comments>14</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>My talk tomorrow, and a little experimental library</title>
		<link>https://herbsutter.com/2016/09/22/my-talk-tomorrow-and-a-little-experimental-library/</link>
				<comments>https://herbsutter.com/2016/09/22/my-talk-tomorrow-and-a-little-experimental-library/#comments</comments>
				<pubDate>Thu, 22 Sep 2016 16:31:20 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2733</guid>
				<description><![CDATA[Thanks to everyone who responded to the little puzzle for CppCon that I posted on the weekend. I&#8217;ll show a couple of answers in my talk tomorrow at the conference, which will be recorded and should be available on YouTube in a week or so. My talk will focus primarily on how to use the great [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Thanks to everyone who responded to the <a href="https://herbsutter.com/2016/09/17/a-little-puzzle-for-cppcon/">little puzzle for CppCon</a> that I posted on the weekend. I&#8217;ll show a couple of answers in <a href="https://cppcon2016.sched.org/event/7opc/lifetime-safety-by-default-making-code-leak-free-by-construction">my talk tomorrow</a> at the conference, which will be recorded and should be available on YouTube in a week or so.</p>
<p>My talk will focus primarily on how to use the great <em>std::</em> facilities we already have in today&#8217;s C++, especially scoped lifetime, <em>unique_ptr</em>, and <em>shared_ptr</em>. Those are what you should prefer to use, in that order, to express object lifetimes in C++. In many basic situations, those tools let you express lifetime by construction with complete automation, good performance, and no extra coding work &#8212; the bee&#8217;s knees!</p>
<p>However, in some advanced situations, using today&#8217;s tools does still involve writing some manual code. In my talk I&#8217;ll cover how to do that by hand today.</p>
<p>Then at the end of the talk <strong>if time allows</strong>, I&#8217;ll offer some &#8220;very experimental&#8221; thoughts exploring whether some of that remaining manual code might be automatable, just as we automated single-owner-<em>new</em>/<em>delete</em> with <em>unique_ptr</em>, and automated multi-owner-<em>new</em>/<em>delete-</em>plus-reference-counting with <em>shared_ptr</em> and <em>weak_ptr</em>. To try the ideas out, I wrote a <a href="https://github.com/hsutter/gcpp">little demo library I call gcpp</a> [GitHub]. You can read about it at that link (but please also read the disclaimers!) and I&#8217;ll present parts of it at the end of my talk tomorrow if there&#8217;s time. Like any experiment, in the worst case it won&#8217;t work out and the ideas will be abandoned; in the best case, my hope is that it may contribute some interesting ideas to develop further.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/09/22/my-talk-tomorrow-and-a-little-experimental-library/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>A little puzzle for CppCon</title>
		<link>https://herbsutter.com/2016/09/17/a-little-puzzle-for-cppcon/</link>
				<comments>https://herbsutter.com/2016/09/17/a-little-puzzle-for-cppcon/#comments</comments>
				<pubDate>Sun, 18 Sep 2016 00:22:10 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2731</guid>
				<description><![CDATA[As CppCon begins, Stevens Capital Management is running an SCM Challenge quiz with questions provided by some CppCon speakers.(Creating a little login is required, in part so you can save progress, but they promise not to spam you.) I&#8217;ve contributed a simple little question that&#8217;s directly related to my CppCon closing plenary session on Friday. By &#8220;simple little&#8221; I mean that my [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>As CppCon begins, Stevens Capital Management is running an <strong><a href="https://scmchallenge.com/#!/">SCM Challenge quiz</a></strong> with questions provided by some CppCon speakers.(Creating a little login is required, in part so you can save progress, but they promise not to spam you.)</p>
<p>I&#8217;ve contributed a simple little question that&#8217;s directly related to my CppCon closing plenary session on Friday. By &#8220;simple little&#8221; I mean that my <em>question</em> itself is simple and can be illustrated well in a handful of short lines of code. Solving it with a valid <em>answer</em> is another matter, however. I wonder how many people will be able to give reasonable solutions[*] that pass the three short test cases&#8230;</p>
<p>Take a look, think about the question, and see if you can come up with a solution that works. Feel free to use the comments below to collaborate with others to solve the puzzle; if you&#8217;re at CppCon, use the great face time with other attendees to share possible solutions. If you succeed in writing a solution that prints &#8220;true&#8221; three times, they&#8217;ll email it to me and I&#8217;ll review it.</p>
<p>In my talk on Friday, I&#8217;ll present solutions to this and other lifetime problems. For those who aren&#8217;t here at CppCon in person, you&#8217;ll be able to catch the talk online on YouTube about a week later. (As always, all CppCon talks are being recorded and will be posted, but it will take a month or so to process and post all of the sessions &#8212; it takes a while to do professional-grade production for over 100 talks! Processing the plenary session videos is being expedited so that we can get those ones up quickly.)</p>
<p>I hope you enjoy the puzzle!</p>
<p>&nbsp;</p>
<p>[*] No fair hardcoding a hack that artificially prints the right results for just these three cases. I know how to do that too, but that&#8217;s evading the problem, not solving it. :)</p>
<p>&nbsp;</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/09/17/a-little-puzzle-for-cppcon/feed/</wfw:commentRss>
		<slash:comments>40</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Summer ISO C++ standards meeting (Oulu)</title>
		<link>https://herbsutter.com/2016/06/30/trip-report-summer-iso-c-standards-meeting-oulu/</link>
				<comments>https://herbsutter.com/2016/06/30/trip-report-summer-iso-c-standards-meeting-oulu/#comments</comments>
				<pubDate>Thu, 30 Jun 2016 23:17:09 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2660</guid>
				<description><![CDATA[On June 25, the ISO C++ committee completed its summer meeting in Oulu, Finland, hosted by Symbio and the Finnish national body. We again had some 100 experts officially representing nine national bodies. As usual, we met for six days Monday through Saturday, and around the clock from 8:30am till 11pm most days – evening [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>On June 25, the ISO C++ committee completed its summer meeting in Oulu, Finland, hosted by Symbio and the Finnish national body.</p>
<p>We again had some 100 experts officially representing nine national bodies. As usual, we met for six days Monday through Saturday, and around the clock from 8:30am till 11pm most days – evening sessions regularly went a little later than the usual 10pm because it was Midsummer and there was literally no full night all week long at that short distance from the Arctic Circle, and people commonly did a double take when they looked at their watches and were surprised to find that it was already nearly midnight.</p>
<p>Here’s a summary of what happened, with some details about the current ISO C++ process so you can see just how the work is progressing and getting released. I’ve tried to add some links to the relevant feature design papers, or to the papers that summarize what was done which in turn usually carry more links to the design papers.</p>
<h1>C++17 is feature-complete, enters review period</h1>
<p>The big news is that C++ is feature-complete, and on time! We added several more features to the C++17 working paper (see next section), then approved the result to be sent out this summer for its major ISO international comment ballot, which is the Committee Draft or “CD” ballot.</p>
<p>Between now and our November meeting, national bodies around the world will be reviewing the draft and reporting any concerns about feature design details and wording correctness or consistency. Then for probably the next two meetings we’ll be addressing every national body comment and recording its resolution, as well as continuing to process our own known issues lists to fine-tune the text of the standard. That usually takes two meetings, and if that’s the case again this time then we’ll be putting the finishing touches on C++17 in our November and March meetings and then, we hope, sending C++17 out for its possibly-final ballot in the spring. If we need an extra meeting, then that would extend to the July meeting next year and the possibly-final ballot in late summer.</p>
<p>So C++17 is and tracking to ship on schedule next year. In my <a href="https://herbsutter.com/2016/03/11/trip-report-winter-iso-c-standards-meeting/">March trip report</a>, I mentioned that after completing C++11 we switched to a “train model” where we have been shipping the standard consistently every three years. So far, we have been running the trains on time: C++14 was actually the first C++ standard ever that shipped when expected, and now C++17 is on track to do it again. This is excellent news for the community because it enables implementers to track the standard closely, whereas in previous releases they often held back from implementing new features aggressively because with an open-ended schedule the committee could (and did) change its mind again about the design of some feature before the standard actually shipped. The ISO C++ committee is now sticking to a high quality bar, voting features in when they’re stable and releasing on time, which removes uncertainty and is a major reason why compilers are more in sync than ever before: After C++98 shipped, it took 5 years before we saw the first complete conforming compiler that implemented all language features (modulo bugs of course); after C++11 shipped, it took 3 years; when C++14 shipped, it took months. Now, many C++17 features are already available in major compilers, and I wouldn’t be surprised if C++17 repeated C++14’s synchronization with the community so that we see at least one major implementation that has all C++17 features in the same year that C++17 is published. This is great news for the community, because it means we have to play less of the “which compilers actually implement which features” game; true, we still need to deal with older compilers, and some compilers are still not as quick as others to ship the latest features, but all of the major compilers’ current releases are in closer sync with the standard than they’ve ever been before and even the delta between them continues to shrink, which is good news for all C++ users.</p>
<p style="padding-left:30px;"><strong>Note:</strong> Last time I mentioned that there was some thought of moving to a two-year cadence after C++17, but for now we’re staying with three years, so the next standard after C++17 will be C++20.</p>
<h1>More features added to C++17</h1>
<p>At this meeting, we added several more features into C++17; you can find a good summary of those features in <a href="https://www.reddit.com/r/cpp/comments/4pmlpz/what_the_iso_c_committee_added_to_the_c17_working/">Bryce Lelbach’s Reddit post</a>. Again, note that these are just the ones we added at this meeting; the complete list of C++17 features is longer. For example, see my <a href="https://herbsutter.com/2016/03/11/trip-report-winter-iso-c-standards-meeting/">March trip report</a> for what was added at the spring meeting.</p>
<h2>Language features</h2>
<p>Here are some of the more noticeable language features we added to C++17 in Oulu. I’ll merge from Bryce’s nice list (thanks Bryce!), my own comments in the previous trip report, and some new comments and examples:</p>
<p><strong><a href="http://wg21.link/P0035">Dynamic memory allocation for over-aligned data</a>:</strong> Extending the C++11 <em>alignof</em>/<em>alignas</em> for heap allocated memory control.</p>
<p><strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0091r1.html">Template argument deduction for constructors</a></strong>, so that you can write just <em>pair p(2, 4.5);</em> instead of <em>pair<strong>&lt;int,double&gt;</strong> p(2, 4.5);</em> or <em>auto p = <strong>make_</strong>pair(2, 4.5);</em>. This is pretty sweet, including that it obsoletes many “make” helpers.</p>
<p><strong><em><a href="http://wg21.link/P0127">template &lt;auto&gt;</a></em>:</strong> Recall that templates can take “non-type parameters,” or ordinary compile-time values; a familiar example is <em>std::array&lt;widget,10&gt;</em> which is an array of 10 <em>widget</em> objects, passing 10 as a compile-time number. Well, as of C++11 we allow “auto”matically deducing the type of local variables:</p>
<pre>auto i = 10;           // deduces int</pre>
<p>and in the Concepts TS we allow “auto”matically deducing the type of parameters:</p>
<pre>void f(auto value) { } // same as template &lt;class T&gt; void f(T value);

f(10);                 // deduces int</pre>
<p>Now, with the <em>template&lt;auto&gt;</em> extension, C++17 will additionally allow the same to happen when you pass a value as a template parameter, which is just another place you can pass a value:</p>
<pre>template &lt;auto value&gt; void f() { }

f&lt;10&gt;();               // deduces int</pre>
<p><strong><a href="http://wg21.link/P0135">Guaranteed copy elision</a>:</strong> When you call a function that returns an object by value, and you use the copy to initialize a local variable, the language has always said that you copy (or move) twice. You may know that, since forever, C++ has also added, “but by the way, the compiler is allowed to elide (disappear) the extra copy.” With guaranteed copy elision, in many cases the C++17 language now says you copy (or move) once; that is, compiler is now <em>required</em> not to perform an extra copy or move, so that copy elision is no longer an optimization but a guaranteed language feature.</p>
<p>Richard Smith, the proposal author, provided the following additional notes and examples that show how the copy elision guarantee depends on what happens inside the function. In some cases, such as when the function returns a temporary of the right type, the new rules guarantee that zero copies will be performed, and the return type is not even required to be copyable or movable any more:</p>
<pre>T f() {
  return T{}; // no copy here (C++17)
}

T x = f();    // no copy here either (C++17)</pre>
<p>In other cases, where the named return value optimization (NRVO) would apply today, there is one copy and the compiler may elide the copy, but is not guaranteed to do so because there are cases where that could not be guaranteed:</p>
<pre>T g() {
  T t;
  return t;   // one copy, can be elided but elision is not guaranteed
}

T y = g();    // no copy here (C++17)</pre>
<p>And if the function returns something that really requires a copy, such as returning a reference parameter, you get exactly one copy:</p>
<pre>T h(T &amp;t) {
  return t;   // one guaranteed copy (by necessity)
}

T z = h(x);   // no copy here (C++17)</pre>
<p><strong><a href="http://wg21.link/P0145R2">Order of expression evaluation guarantees</a>:</strong> This removes portability and usability bugs. In a nutshell, a number of code examples that you thought worked, now actually do work. In particular, this solves the long-standing <a href="http://gotw.ca/gotw/056.htm"><em>f(new T, new T)</em> bug</a> that I wrote about nearly 20 years ago, fixes some examples in published books, and makes the brand-new <em>future&lt;T&gt;::then</em> chaining actually work correctly.</p>
<p><strong><a href="http://wg21.link/N4424">Inline variables</a>: </strong>This feature makes it easier to define global variables (that’s the bad news) correctly (that’s the good news), including in header files. The net effect is that some code people already write in practice, but shouldn’t have because it had subtle pitfalls, now works.</p>
<p><strong><em><u><a href="http://wg21.link/P0292R1">if constexpr</a></u>:</em></strong> This is a very powerful feature that allows branches that are evaluated at compile time. Note that this is a disciplined compile-time “if”, not just text substitution; the code in a false branch needs to be syntactically well-formed, but doesn’t need to be semantically valid.</p>
<p>This lets you express some pretty powerful stuff, including that a function template can write all the special cases of its algorithm right within its body (e.g., a fast algorithm for random-access iterators, and a fallback for less powerful iterators), without writing a set of template specializations.</p>
<p>It also works very nicely with C++14’s “auto” return type deduction for inline functions: It’s perfectly fine for two mutually exclusive <em>if constexpr</em> branches to return unrelated types since only one of the branches can be taken for a given set of inputs, and the correct return type will be deduced. Of course, within the same <em>if constexpr</em> branch the return types have to be compatible according to the current rules. In fact, we’ll see an example of this in the next topic…</p>
<p><strong><a href="http://wg21.link/P0144r2">Structured bindings</a>:</strong> This allows taking a value that contains multiple elements, such as a tuple or a struct, and binding convenient names to the individual elements – much like <em>std::tie</em>, except without having to have variables of the correct type already available. I was pleasantly surprised to see this one make it into C++17 even though it came in late in the cycle. Here’s a simple example of what it enables:</p>
<pre>tuple&lt;T1,T2,T3&gt; f();
auto [x,y,z] = f(); // types are: T1, T2, T3

map&lt;int,string&gt; mymap;
auto [iter, success] = mymap.insert(value); // types are: iterator, bool

struct mystruct { int i; string s; double d; };
mystruct s = { 1, “xyzzy”s, 3.14 };
auto [x,y,z] = s; // types are: int, string, double</pre>
<p>What if you want to add structured bindings for your own type that isn’t a struct or a tuple? I’m glad you asked, because it&#8217;s an excuse to also show off also how you can use <em>if constexpr</em>. Let’s say you&#8217;re the author of a type <em>S:</em></p>
<pre>class S {
   int i;
   char c[27];
   double d;
public:
   // ...
};</pre>
<p>Now you want to allow structured bindings for your type <em>S</em>, and for extra marks you don’t want to bind directly to the private variables but perhaps want member <em>c</em> to be bound as a <em>string_view</em> (also adopted for C++17; see below). Here’s how do add this ability; it’s a few lines, but you only have to do it once for all users of type <em>S</em>:</p>
<pre>// 1. Add tuple_size and tuple_element support
namespace std {
   template&lt;&gt; struct tuple_element&lt;0,S&gt; { using type = int; };
   template&lt;&gt; struct tuple_element&lt;1,S&gt; { using type = string_view; };
   template&lt;&gt; struct tuple_element&lt;2,S&gt; { using type = double; };
   template&lt;&gt; struct tuple_size&lt;S&gt;: public integral_constant&lt;size_t,3&gt; {};
}

// 2. Now add get&lt;&gt; support (using C++17, because why not; it’s better
// than =delete’ing the primary get&lt;&gt; template and adding specializations)
template&lt;int I&gt;
auto get(const S&amp;) {
   if      constexpr(I == 0) return x.i;
   else if constexpr(I == 1) return string_view{x.c}; }
   else if constexpr(I == 2) return x.d;
}</pre>
<p>Now all users of <em>S</em> can write code like this:</p>
<pre>S f();  // some function that returns an S

auto [ n, s, val ] = f(); // types are int, std::string_view, and double</pre>
<p><strong><a href="http://wg21.link/P0305r0"><em>if (init; condition)</em> and <em>switch (init; condition)</em></a>:</strong> Just like the venerable <em>for (int i = 0; /*&#8230;*/)</em> loop has always allowed declaring a variable (in that example, <em>i</em>) that exists for the scope of the loop, we will now be able to do the same for <em>if</em> and <em>switch</em> without having to resort to today’s workaround of declaring the variable before the <em>if</em> or <em>switch</em> and then wrapping it up in <em>{ }</em> to restrict its scope. Here’s an example of the new cleaner syntax, which allows more tightly-scoped variables:</p>
<pre>map&lt;int,string&gt; mymap;

if (auto result = mymap.insert(value); result.second) {
    // insert succeeded, and result is valid for this block
    use(result.first);  // ok
    // ...
} // result is destroyed here</pre>
<p>In fact, you might have noticed that I used a similar example for both structured bindings and for <em>if/switch</em> initialization. It took Reddit about 30 minutes to discover that they’re great together, like peanut butter and jelly:</p>
<pre>// better together: structured bindings + if initializer

if (auto [iter, succeeded] = mymap.insert(value); succeeded) {
    use(iter);  // ok
    // ...
} // iter and succeeded are destroyed here</pre>
<h2>Two language features that didn’t make it (yet)</h2>
<p>Of the new language features I mentioned last time, only two didn’t make it into C++17:</p>
<ul>
<li><strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0252r0.pdf"><em>operator.</em> (dot)</a> </strong>to allow smart references (in parallel with smart pointers) and much more. During final core language wording review, the authors discovered a problem that couldn’t be fixed in real time at this meeting, and was pulled back while the authors fix the proposal. This proposal is still active and is expected to come back with a fix to that problem very soon, possibly as soon as in the next week or two for the post-meeting mailing; I’m hearing some rumblings that national bodies might mention this in their summer ballot comments, so we might see it again during C++17 ballot resolution, else I’d expect it to be one of the first things added to the draft standard once C++17 ships.</li>
<li><strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0221r0.html">Defaulted comparisons</a></strong>, to generate <em>==, !=, &lt;, &lt;=, &gt;, &gt;=</em> for types that don’t write them by hand. The current version of the proposal is opt-out, and would generate comparisons for existing types. When the proposal got to the full committee, we discovered that the committee didn’t have consensus to approve the paper’s opt-out model; a number of people spoke up for an opt-in model instead. This proposal might eventually come back but probably not soon.</li>
</ul>
<h2>Standard library features</h2>
<p>Here are some of the library features that made it into C++17 at this meeting:</p>
<p><strong><em><a href="http://wg21.link/P0088r2">variant&lt;&gt;</a></em>:</strong> Don’t use raw unions any more. This addition completes the trifecta of <em>std::any</em> and <em>std::optional</em> (which were already added to C++17). The new <em>std::variant</em> is a type-safe union; for more background see also my <a href="https://herbsutter.com/2015/10/25/2568/">fall meeting trip report</a>. Here’s an example adapted from the paper that shows how you can use it:</p>
<pre>variant&lt;int, float, string&gt; v, w;
v = “xyzzy”;         // now v contains a string
v = 12;              // now v contains an int

int i = get&lt;int&gt;(v); // ok, because it contains an int

w = get&lt;int&gt;(v);     // ok, assign to another variant
w = get&lt;0&gt;(v);       // same effect as the previous line
w = v;               // same effect as the previous line

get&lt;double&gt;(v);      // compile-time error: v can’t contain a double
get&lt;3&gt;(v);           // compile-time error: v doesn’t have 4 types

try {
  get&lt;float&gt;(w);     // will throw: w contains an int, not a float
}
catch (bad_variant_access&amp;) {}</pre>
<p><strong><a href="http://wg21.link/P0083r2">Moving nodes between <em>map&lt;&gt;</em>, <em>unordered_map&lt;&gt;</em>, <em>set&lt;&gt;</em>, and <em>unordered_set&lt;&gt;</em></a>:</strong> You will now be able to directly move internal nodes from one node-based container directly into another container of the same type (differing at most in the comparator template parameter), either one node at a time or the whole container. Why is that important? Because it guarantees no memory allocation overhead, no copying of keys or values, and even no exceptions if the container’s comparison function doesn’t throw. The mechanics are provided by new functions <em>.extract</em> and <em>.move</em>, and corresponding new <em>.insert</em> overloads. Here’s an example adapted from the paper:</p>
<pre>map&lt;int, string&gt; src {{1,”one”}, {2,”two”}, {3,”buckle my shoe”}};
map&lt;int, string&gt; dst {{3,”three”}};

dst.insert(src.extract(src.find(1))); // iterator version
dst.insert(src.extract(2));           // key type version
auto r = dst.insert(src.extract(3));  // key type version
    // note: this last one will fail because dst already contains 3;
    // the node is owned by r, the returned struct

// At this point we have the following state:
//   src == {}
//   dst == {{1,“one”}, {2,“two”}, {3,“three”}}
//   r.position == dst.begin() + 2
//   r.inserted == false
//   r.node == {3,“buckle my shoe”}

// We can go back and retry the failed insert with a different key:
r.node.key() = 4;                      // use a non-conflicting value
dst.insert(r.position, std::move(r.node));  // now succeeds</pre>
<p><strong><a href="http://wg21.link/P0040r2">Extended memory management tools for in-place construction and destruction:</a></strong> These include <em>destroy(_at|_n), uninitialized_move(_n), uninitialized_value_construct(_n),</em> and <em>uninitialized_default_construct(_n)</em>.</p>
<h2>In case you missed it: <em>string_view</em> also in C++17</h2>
<p>C++17 also contains a number of other useful features. I’ve mentioned these before, including “small” but widely-used features like <em>optional</em> and <em>any</em>, right up to Parallel STL. But let me just take a moment to remark again on the wonderfulness of <em>string_view</em>, which is a non-owning view of a contiguous string owned by someone else.</p>
<p>If you have a <em>const string&amp;</em> parameter, consider just changing it to <em>string_view</em>. As Mark Isaacson mentioned in <a href="http://maintainablecode.logdown.com/posts/745037-tech-talk-exploring-c-17">his NDC talk</a> earlier this month, it’s pretty rare that you can get a performance boost by just doing a global search-and-replace, but Mark points out you can pretty much do that by globally replacing <em>const string&amp;</em> with <em>string_view</em> (with one exception noted in the next paragraph). Why is this often more efficient? In particular, when the caller passes something like a string literal as an argument, if your function takes it via a <em>const string&amp;</em> parameter that means the caller has to convert the string literal to a temporary <em>string</em> object, which typically incurs a heap allocation and deallocation, whereas passing it to a <em>string_view</em> incurs no allocation overhead at all.</p>
<p>However, beware one potential pitfall, especially until more of the world has migrated to <em>string_view</em>: If your function <em>f(/*some string*/ x)</em> internally calls one or more <em>other</em> functions that still take a <em>string&amp;</em> (either const or non-const), then let your function <em>f</em> continue to take <em>x</em> by <em>const string&amp;</em> and don’t change it to <em>string_view</em>. The reason is that if <em>f</em> is called with an actual <em>string</em> object, then <em>f(const string&amp; x)</em> can pass it along painlessly by reference, whereas <em>f(string_view x)</em> would avoid a copy when entering <em>f</em> but would need to create a new <em>string</em> internally just to pass it along to the other function that needs a <em>string</em>. Bottom line: If you know your function needs to call other functions that you don’t control and that take (possibly const) <em>string&amp;</em>, then you should probably leave your function taking <em>const string&amp;</em> too.</p>
<h1>C++17: Recognizably new</h1>
<p>C++17 will pervasively change the way we write C++ code, just as C++11 did. As these and other new features become available, we’re going to see new code using structured bindings, if/switch scope variables, <em>string_view</em>, <em>optional, any, variant,</em> Parallel STL, and more all over the place.</p>
<p>Here&#8217;s my personal litmus test for whether we’ve changed the way people program: Just as you can take a look at a screenful of code and tell that it’s C++11 (not C++98), if you can look at a screenful of code and tell that it’s C++17, then we’ve changed the way we program C++. I think C++17 will meet that bar.</p>
<p>Here’s a little “C++17 demo” put together by committee member Thomas Köppe, who is the author of the if/switch initializer proposal. It shows off a few of the features that will soon be available as part of C++17, and how they work together. Note this uses some other new C++17 features I didn’t specifically mention. I’ll let the comments speak for themselves; thanks, Thomas, for providing this demo.</p>
<pre>unordered_map&lt;string, unique_ptr&lt;Foo&gt;&gt; items;
vector&lt;unique_ptr&lt;Foo&gt;&gt; standby;

// Desired semantics of f: If there is currently no item 'id', install
// 'foo' as item 'id'. Otherwise, put 'foo' on the standby list for later.

//------------------------------------------------
// Before C++17: 7 lines + 4 pitfalls
//
void f(string id, unique_ptr&lt;Foo&gt; foo) {
   auto it = items.find(id);
   if (it == items.end()) {
      auto p = items.emplace(move(id), move(foo));
      p.first-&gt;second-&gt;launch();
   } else {
      standby.push_back(move(foo));
      standby.back()-&gt;wait_for_notification();
   }

   // Notes:  
   // * Variable 'id' can no longer be used (moved-from); or...  
   // * ...would need to pass by 'const string&amp; id' and force copying.
   // * Map lookup performed twice. Ordered map could use lower_bound +
   //   hint, but unordered map cannot.  
   // * (Cannot emplace unconditionally, because it might destroy *foo.)
}

//------------------------------------------------
// With C++17: 4 lines + none of those pitfalls
//
void f(string_view id, unique_ptr&lt;Foo&gt; foo) {
   if (auto [pos, inserted] = items.try_emplace(id, move(foo)); inserted){
      pos-&gt;second-&gt;launch();
   } else {
      standby.emplace_back(move(foo))-&gt;wait_for_notification();
   }
}</pre>
<h1>Other progress</h1>
<p>Because this time our focus was on completing C++17, we didn’t spend as much time on the other TSes as we did at a normal meeting, but we made progress on some of the TSes and will continue with all of them next time. In particular, the Reflection and 2D Graphics proposals received several hours of review each and are making great progress; at our next meeting we’ll continue with Ranges, Networking, Library Fundamentals 2, Parallelism 2, Modules, Coroutines, Contracts, and more.</p>
<h1>What’s next</h1>
<p>This summer, we’re going to send out the feature-complete C++17 out for its major international comment ballot. After that, we’ll address ballot comments at the <a href="https://isocpp.org/files/papers/N4571.pdf">November 2016</a> and <a href="https://isocpp.org/files/papers/n4573.txt">February-March 2017</a> meetings and plan to send C++17 out for its final approval ballot then.</p>
<p>Once C++17 ships next year, I expect we’ll start looking at merging more of the TS “beta branches” into the C++ “trunk.” Here’s an updated snapshot of our status:</p>
<p><img data-attachment-id="2724" data-permalink="https://herbsutter.com/2016/06/30/trip-report-summer-iso-c-standards-meeting-oulu/wg21-timeline-2/" data-orig-file="https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=500" data-orig-size="1901,1352" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=500?w=500" class="alignnone size-full wp-image-2724" src="https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=500" alt="wg21-timeline" srcset="https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=500 500w, https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=150 150w, https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=300 300w, https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>Thank you again to our host Symbio, to the over 100 experts at Oulu last week, and to the many more who participate in standardization through their national bodies, without whose efforts and willing collaborative spirit these results would not be achievable. The over four million C++ users worldwide benefit, and appreciate it very much too. Thank you, all, for your many contributions to Standard C++.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/06/30/trip-report-summer-iso-c-standards-meeting-oulu/feed/</wfw:commentRss>
		<slash:comments>54</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2016/06/wg21-timeline.png" medium="image">
			<media:title type="html">wg21-timeline</media:title>
		</media:content>
	</item>
		<item>
		<title>CppCast interview about the Oulu ISO C++ meeting</title>
		<link>https://herbsutter.com/2016/06/27/cppcast-interview-about-the-oulu-iso-c-meeting/</link>
				<comments>https://herbsutter.com/2016/06/27/cppcast-interview-about-the-oulu-iso-c-meeting/#comments</comments>
				<pubDate>Mon, 27 Jun 2016 17:36:21 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2627</guid>
				<description><![CDATA[On Saturday afternoon, at the ISO C++ meeting in Oulu, Finland, we completed the feature set of C++17 and approved sending out the feature-complete document for its primary international comment ballot (aka &#8220;CD&#8221; or Committee Draft ballot). An hour later, I sat down (via Skype) with Rob and Jason to do a CppCast interview about [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><img data-attachment-id="2643" data-permalink="https://herbsutter.com/2016/06/27/cppcast-interview-about-the-oulu-iso-c-meeting/logo2x/" data-orig-file="https://herbsutter.files.wordpress.com/2016/06/logo2x.png" data-orig-size="811,180" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="logo2x" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2016/06/logo2x.png?w=300&#038;h=67" data-large-file="https://herbsutter.files.wordpress.com/2016/06/logo2x.png?w=500" class=" size-medium wp-image-2643 alignright" src="https://herbsutter.files.wordpress.com/2016/06/logo2x.png?w=300&#038;h=67" alt="logo2x" width="300" height="67" srcset="https://herbsutter.files.wordpress.com/2016/06/logo2x.png?w=300&amp;h=67 300w, https://herbsutter.files.wordpress.com/2016/06/logo2x.png?w=600&amp;h=134 600w, https://herbsutter.files.wordpress.com/2016/06/logo2x.png?w=150&amp;h=33 150w" sizes="(max-width: 300px) 100vw, 300px" />On Saturday afternoon, at the ISO C++ meeting in Oulu, Finland, we completed the feature set of C++17 and approved sending out the feature-complete document for its primary international comment ballot (aka &#8220;CD&#8221; or Committee Draft ballot).</p>
<p>An hour later, I sat down (via Skype) with Rob and Jason to do a <strong><a href="http://cppcast.com/2016/06/herb-sutter/">CppCast interview about C++17</a></strong> and what happened at the just-concluded meeting. I hope you enjoy it. Also check out the two related links:</p>
<ul>
<li>Bryce Lelbach&#8217;s nice <a href="https://www.reddit.com/r/cpp/comments/4pmlpz/what_the_iso_c_committee_added_to_the_c17_working/">Reddit summary of the features that were just approved</a></li>
<li>The nice reminder about <a href="http://cppcon.org/regopen2016/">CppCon registration</a> (the early bird deadline is this Friday)</li>
</ul>
<p>Yesterday was a (long) travel day as many of us made our way back home &#8212; and had ad-hoc standards discussions in several different airport departure lounges. Now that I&#8217;m back in the office with my usual coffeemaker nearby, I&#8217;ll soon get around to writing up a written trip report. In the meantime, I hope you find the CppCast and other links useful.</p>
<p><em>(Interestingly, it just now occurs to me as I write this that one of the things we just adopted for C++17 make the CppCast subtitle needlessly verbose&#8230; the &#8220;&lt;C++&gt;&#8221; part can now be inferred! Cute. C++ without lots of angle brackets&#8230; who knew?)</em></p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/06/27/cppcast-interview-about-the-oulu-iso-c-meeting/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2016/06/logo2x.png?w=300" medium="image">
			<media:title type="html">logo2x</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Winter ISO C++ standards meeting</title>
		<link>https://herbsutter.com/2016/03/11/trip-report-winter-iso-c-standards-meeting/</link>
				<comments>https://herbsutter.com/2016/03/11/trip-report-winter-iso-c-standards-meeting/#comments</comments>
				<pubDate>Fri, 11 Mar 2016 23:50:44 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2579</guid>
				<description><![CDATA[On March 5, the ISO C++ committee completed its winter meeting in Jacksonville, FL, USA. We had record-tying attendance, with over 110 experts officially representing eight national bodies. As usual, we met for six days Monday through Saturday, and around the clock from 8:30am till 10pm most days, after which many people still went back [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>On March 5, the ISO C++ committee completed its winter meeting in Jacksonville, FL, USA. We had record-tying attendance, with over 110 experts officially representing eight national bodies. As usual, we met for six days Monday through Saturday, and around the clock from 8:30am till 10pm most days, after which many people still went back to hang out in the lobby or their rooms to update papers. — The hotel had a baby grand piano outside the main meeting room lobby, and so late at night you could often walk by and find one of several committee members playing a tune, while as usual people collaborated on their proposals, perched on couches and tables clustered around glowing rectangles, incanting standardese to the soft strains of Russian folk ballads and arena rock.</p>
<p>Here’s a summary of what happened, with some details about the current ISO C++ process so you can see just how the work is progressing and getting released. I’ve tried to add some links to the relevant feature design papers, or to the papers that summarize what was done which in turn usually carry more links to the design papers.</p>
<blockquote><p><strong>Note:</strong> The features listed below are those approved for C++17 at this meeting only. Previous meetings added other features that are already in the working draft.</p></blockquote>
<h1>What we did: Merging into C++17</h1>
<p>This meeting was a major milestone in two ways.</p>
<p>First, we largely completed choosing the target set of features the committee felt were ready for C++17. Some had their specification wording adopted last week into the working draft for the C++ international standard (IS), and a few more are targeted to be adopted at our next meeting in June in Oulu, Finland, following which C++17 is intended to be sent out for its major international comment ballot.</p>
<p>Second, and perhaps even more importantly, we had the first merge of the new Technical Specification (TS) “beta feature branches” into the C++ international standard “trunk.” The committee considered five candidates, and adopted the first four as ready for C++17, with reports from implementers and users that the features were baked and unlikely to need future breaking design changes. The criteria for whether the committee thinks a given feature is ready to merge will vary by feature; this time, the committee ended up merging all the ones that had been completed and in beta testing for a year or more.</p>
<p>The four accepted branches merged into C++17 were:</p>
<ul>
<li><strong><a href="http://isocpp.org/files/papers/P0024R2.html">The Parallelism TS</a>, a.k.a. “Parallel STL.”</strong> This includes parallelized versions of most STL algorithms, which get a new execution policy where you can opt into running them in parallel on multiple cores and/or on multiple vector lanes—hardware that is now ubiquitous in the mainstream, as most medium- and high-end smartphones are both multicore and have vector units built in. For example, C++17 now allows: <em>for_each(std::par, first, last, [](auto&amp; x){ process(x); });</em>.</li>
<li><strong><a href="http://isocpp.org/files/papers/p0220r1.html">The Library Fundamentals 1 TS (most parts)</a></strong>, adding a new round of library components for C++17 including <em>any, optional, string_view, shared_ptr</em> for arrays, memory pools, <em>search</em> and sampling algorithms, and more. (An example of “more”: Have you ever wanted to pass a <em>tuple</em> that contains a function call’s argument list and expand it into the individual arguments? Now you can, using built-in standard functionality.)</li>
<li><strong><a href="http://isocpp.org/files/papers/P0218r1.html">The File System TS</a></strong>, which allows portable handling of files, paths, symbolic links, and more.</li>
<li><strong><a href="http://isocpp.org/files/papers/P0226R1.pdf">The Mathematical Special Functions IS</a></strong>, which was originally part of the first Library TR back in the 2000s and has now finally gained approval to be added to the standard for C++17.</li>
</ul>
<p>We also voted the following other features directly into C++17 without going through a TS beta first:</p>
<ul>
<li>Lambdas are now <a href="http://isocpp.org/files/papers/P0170R1.pdf">allowed inside constexpr functions</a>.</li>
<li>Lambdas can now <a href="http://isocpp.org/files/papers/p0018r3.html">capture a copy of <em>*this</em></a> object by value, using the notation <em>[*this]</em>. It also works in combination with default capture, so <em>[=, *this]</em> is also allowed.</li>
<li>The range-<em>for</em> loop <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0184r0.html">can now deal with generalized ranges</a> where the “end” type is different from the “begin” type, such as sentinel-based and counted ranges, which will work well with the Ranges TS work.</li>
<li>The <a href="http://isocpp.org/files/papers/P0188R1.pdf"><em>[[fallthrough]]</em> attribute</a> lets you designate that you are intentionally letting a switch’s case block fall through to the next block without a break.</li>
<li>The <a href="http://isocpp.org/files/papers/P0189R1.pdf"><em>[[nodiscard]]</em> attribute</a> lets you annotate a return value to say that it should not be ignored by the caller, or annotate a type to apply to all uses of that type as a returned value. Canonical examples include the return value of <em>std::async</em> where ignoring the return value would mean being not async at all, and the return value of a container’s <em>empty()</em> function where people sometimes confuse <em>empty()</em> and <em>clear()</em> and we don’t want them to think calling <em>empty()</em> has side effects if they call it by mistake.</li>
<li>The <a href="http://isocpp.org/files/papers/P0212R1.pdf"><em>[[maybe_unused]]</em> attribute</a> lets you annotate an intentionally unused variable or parameter.</li>
<li>Various other minor improvements and fixes.</li>
</ul>
<p>Evolution also approved the following features that were not voted in at this meeting, but are currently on track for possible approval for C++17 at our next meeting in June for inclusion in the C++17 international comment ballot (note the links are to the pre-meeting paper versions; for example, in the paper that proposed <em>constexpr_if</em> the committee changed the syntax to <em>if constexpr</em> at the meeting):</p>
<ul>
<li><em><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0128r1.html">if constexpr</a></em> to allow branches that are evaluated at compile time. This is very powerful.</li>
<li><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0091r1.html">Template parameter deduction for constructors</a>, so that you can write just <em>pair p(2, 4.5);</em> instead of <em>pair&lt;int,double&gt; p(2, 4.5);</em> or <em>auto p = make_pair(2, 4.5);</em>. This is sweet, including that it obsoletes many “make” helpers.</li>
<li><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0145r1.pdf">Defining the order of expression evaluation</a> to reduce portability and usability bugs.</li>
<li><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0252r0.pdf">operator. (dot)</a> to allow smart references (in parallel with smart pointers) and much more.</li>
<li><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0221r0.html">Defaulted comparisons</a>, to generate ==, !=, &lt;, &lt;=, &gt;, &gt;= for types that don’t write them by hand.</li>
</ul>
<p>A few more, such as structured bindings, might make it too but have not yet received Evolution design approval, so we’ll see in June if there’s support in Evolution and Core to call them ready.</p>
<p>C++17 will change the way we write C++ code, just as C++11 and C++14 did. For example, string_view and optional are expected to be heavily used in writing interfaces. And with parallel STL often you can just add <em>std::par</em> or <em>std::par_vec</em>, and your algorithm will speed up by a factor of 2-4 on ordinary hardware; we had a compelling story with C++11 move semantics where we could say “just recompile your code and it’ll often be noticeably faster,” and this is likely to be an even bigger improvement.</p>
<h1>Other progress</h1>
<p>We also made significant progress on other work, including that we now have opened five TSes to launch our next round of beta feature branches, most of which we expect to be sent out for their “debutante” international comment ballots in the next handful of meetings:</p>
<ul>
<li><strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/n4569.pdf">Ranges</a>, <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/n4575.pdf">Networking</a>, <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4562.html">Library Fundamentals 2</a>, and <a href="https://isocpp.org/files/papers/N4352.html">Parallelism 2</a>: </strong>We approved creating these at our last meeting, and officially adopted the first working drafts for all four of these TSes at this meeting. These form the “first four” nucleus of the next round of TSes to be developed by the committee and are now being officially specified in detail.</li>
<li><strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0143r1.pdf">Modules</a>:</strong> Recall that at the last meeting we reached design agreement to start work on Modules. At this meeting, we approved the initial wording to officially start active work on a Modules specification as a TS. That brings us to five active TSes in this second round.</li>
</ul>
<p>And there are more to come:</p>
<ul>
<li><strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0057r2.pdf">Coroutines</a>:</strong> These are being targeted for a new TS (possibly Concurrency 2 or their own TS) so that we have additional time to finish investigating an alternative proposal. I expect this to settle out within another couple of years and then make progress in some form (either the current proposal, or the alternative one if it pans out equally well, or possibly both) into the following C++ standard.</li>
<li><strong>Concurrency 2:</strong> The concurrency group reports that they hope to launch a second Concurrency TS later this year at the Issaquah meeting. This might include coroutines as above. It might include features like <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0126r1.pdf">synchronic</a>, and there is still hope that the group might yet get design agreement on executors (a way to control where to execute work, such as where to run a parallel task, or where to execute a callback or continuation); if so, it would naturally go into the second Concurrency TS.</li>
<li><strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0267r0.pdf">2D Graphics</a>:</strong> The 2D Graphics proposal that specifies a portable C++ library to wrap the Cairo C API has progressed to design and wording review. It’s big, so it will take a couple of meetings to process it, but it’s looking good that we could get an initial TS draft started this year.</li>
</ul>
<p>At this meeting we also reached a design agreement on <strong>contracts</strong>, so that we now think we have a design that the <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0287r0.pdf">competing</a> <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0246r0.pdf">proposers</a> agree on and that the committee as a whole likes, and we hope to get initial draft specification wording later this year if this trend continues. Once we see the work, the committee can decide on a preferred target vehicle (TS or straight into the IS).</p>
<p>The committee also continued to spend time at the meeting incubating other work, including <strong>reflection</strong> APIs.</p>
<p>The main surprise last week was that the <strong><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0251r0.pdf">“part 1” unified call syntax proposal</a></strong> made it to full committee but we there discovered that there wasn’t yet consensus to adopt it. The authors (Bjarne Stroustrup and myself with the help of a number of experts) are continuing to work between meetings to see if consensus can be achieved by the June meeting.</p>
<p>Finally, we retired a TS that was not completed: We ended up not getting consensus on the experimental material intended for the <strong>Arrays</strong> TS, so last week we made the decision to retire that one.</p>
<h1>Status of concepts and modules</h1>
<p>Here are some specific notes about two particular TSes that everyone agrees are important and game-changing for how we will write C++ code: Concepts and modules.</p>
<p><strong>Concepts</strong> was published as a TS less than a year ago, with the first production compiler implementation to ship soon as part of GCC 6.0. Despite its relative newness and lack of field experience, the committee <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0248r0.pdf">seriously</a> <a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0225r0.html">considered</a> adopting it already for C++17 at this meeting. It was right on the edge: There was already a strong minority who felt it was ready to add to C++17, and a modest majority preferred to wait another year or two and get more experience with shipping implementations and field use of the feature.</p>
<p>Virtually everyone who spoke praised the feature as important, and either ready or getting close to ready, for adopting into the C++ standard. The only major distinction of opinion was whether or not they supported putting it specifically in C++17; those who spoke against that generally expressed that this feature was so important that we want to be sure we get it right and approve it once we have more experience using it in real world users’ code. My impression is that concepts is now one of the strongest feature candidates moving along well in the pipeline and adoption in the trunk IS working draft post-C++17.</p>
<p>At the October meeting, <strong>modules</strong> for the first time achieved a design consensus in the Evolution working group (EWG), with a “phase 1” that everyone agreed on and a “phase 2” that could be added. The most notable part of “phase 2” is determining whether and how to allow a module to carry and export macros. In October, EWG decided to aim modules for a TS covering “phase 1” and asked the proposers to come back with detailed specification wording, which they did for this meeting.</p>
<p>Last week, the whole committee voted to start a TS project and turn that document into the first working draft. Here’s a subtle but important note: This milestone of “create an initial working draft” is important, but usually not all that impactful to the community. The reason this one is different, and is actually very important to users, is that we knew that there are likely two major vendor implementation efforts waiting to start work on implementing support for modules in major compilers, but who were waiting until there was some draft specification that had been approved as a basis for development by the committee. We knew that having “at least an initial working draft” was a sufficient bar for the implementers to get started, and so despite our heavy workload this week focusing on C++17-targeted items (which this is not), I asked the Core working group to make a special effort to prioritize getting this project to this stage because we knew it would unblock new implementation efforts. We are very pleased to see this succeed, and look forward to active work beginning soon on more implementations of modules in several major compilers.</p>
<h1>The pipeline</h1>
<p>There are members who are very disappointed that we didn’t include more in C++17, especially concepts which was very close. To understand where we’re at, consider the following snapshot of our current “trunk” and “beta feature branches” status, shown in the context of three eras of C++ standardization laid side by side: C++9x, C++0x, and C++1x.</p>
<p><img data-attachment-id="2613" data-permalink="https://herbsutter.com/2016/03/11/trip-report-winter-iso-c-standards-meeting/wg21-timeline/" data-orig-file="https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=500" data-orig-size="1900,1427" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="wg21-timeline" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=500?w=300" data-large-file="https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=500?w=500" class="alignnone size-full wp-image-2613" src="https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=500" alt="wg21-timeline" srcset="https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=500 500w, https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=1000 1000w, https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=150 150w, https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=300 300w, https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png?w=768 768w" sizes="(max-width: 500px) 100vw, 500px"   /></p>
<p>The C++ international standard (IS) is the “trunk” containing everything that is formally part of C++. Every time it is published, we have a new official international legal specification for C++.</p>
<p>A Technical Specification (TS) is a “beta feature branch” shipped as a separate published document. The contents of a TS are the committee’s best guess at what C++ users need, with a lower confidence bar on that guess because it is a “beta” and we do get a chance to make corrections before setting it in stone in the standard. In 2015, we completed our first round of six published major TSes, and are launching a second round.</p>
<p>This is a turning point: We just finished filling the pipeline, and this meeting saw the first merge from the beta branches. The disappointment came from that some would have liked to merge another branch or two. The good news is that, those branches are already shipped beta specifications that vendors can implement—in fact, most of them already have at least one supported implementation in a production compiler or library product. The branches that did not quite land in time to merge for C++17 can be expected to merge early in the next cycle—and in the meantime we’re still shipping the “trunk” and its ready features too. Now that the pipeline is full, we can expect features to leave the pipeline and merge regularly at high quality, which is essential with over four million C++ users worldwide relying on our work.</p>
<p>Notes:</p>
<ul>
<li>Each bar starts at the meeting where the detailed specification work officially began (usually “adopt initial draft”) and ends at the meeting that technical work was completed (usually “start final ballot / send for publication”).</li>
<li>Arrowheads join the IS at the meeting at which a TS feature branch was merged into the IS trunk.</li>
<li>In the current decade, the smaller boxes show full ISO C++ meetings—sometimes two per year, sometimes three per year—and highlights the meetings where we launch a C++ CD (ISO comment ballot, light blue) or DIS (ISO approval ballot, dark blue).</li>
<li>I’ve omitted the 1998-2001 hiatus because no new features were under active development in that period. The committee was voluntarily taking a break, and also catching up with C++98 bug reports while compilers caught up with the standard.</li>
</ul>
<h1>From “what” to “when”: C++0x to C++1x</h1>
<p>During C++0x, the best and most solid parts of C++0x were the parts that shipped first as “beta” in the Library Extensions TR. That’s the model we’ve now embraced as the norm, rather than as the exception.</p>
<p><strong>C++0x followed the “what” or “feature” model:</strong> We picked “what” features were in the standard and released whenever they turned out to be ready. That means we giving up on being able to predict “when” we’d ship, and even while C++0x was repeatedly delayed and the “0x is hex” jokes started, we released nothing in the standard the meantime; even features that had been approved into the C++ draft standard in 2004 had to wait until 2011 before they appeared in an official final standard. C++11 was a good release, but we underestimated “when” it would be ready by as much as five years.</p>
<p><strong>C++1x follows the “when” or “train” model:</strong> We’re picking “when” to release the standard regularly, currently every three years, and including whatever features are ready. This still allows big long-pole features to be worked on; they’re just worked on concurrently until ready to merge. I’m pleased that the committee seems to be generally quite happy with the result. In Jacksonville, several experts came up to me to say that they had noticed how we had shipped more work in six years than in any other six-year period in the history of ISO C++. This would not be possible without the committee’s help and support; thank you again, everyone!</p>
<p>Although the train model has benefits, any model is also a tradeoff. The train model means we can’t slip a few meetings to try to “squeak in” another feature, and in fact we didn’t ship everything we hoped to ship in C++17, notably concepts… but neither did we at the same point in the C++0x cycle, in 2007. Now as in 2007, we are at a point where we have some good new features ready to ship in the standard, and at the same time we have several large desirable features in flight that are “almost but not quite” ready yet. In 2007, items on the edge or “just over the horizon” included work like threads and C++0x concepts, and in 2016 they include concepts “lite” and ranges. In both cases, those features are actually 3-4 years away (whether we knew it then or not). The difference is that in 2016, we’re shipping what is ready while still continuing development at full speed on the others.</p>
<p>Also, we initially thought a train model would let us alternate “minor” and “major” releases. The idea was that C++14 could be a “minor” release, and C++17 a “major” release. What actually happened was that we learned the pipeline+train model leads to regular “medium” releases as the pipeline moves at a steady pace and we regularly release what’s ready. As it turns out, C++14 was more than a fine-tuning release; it included powerful features like generic lambdas. Conversely, C++17 won’t be a “major release” on the scale of C++11, but neither could it be because C++11 took nine years to develop.</p>
<p>Never before in the history of C++ has the standard maintained such high specification quality, never before has it released on a regular predictable schedule… and as we removed that quality and schedule uncertainty, it’s no accident that never before have all the major compilers tracked the standard so closely, which benefits the whole worldwide C++ community.</p>
<h1>How to define “progress”: Being unblocked to move to the next stage</h1>
<p>How do we know we’re making progress? There is a tendency to emphasize “what features ship in C++.next,” a specific version; this was the committee’s mental model during C++0x.</p>
<p>In C++1x, the key is to keep the pipeline moving. What I monitor is that that major proposals are unblocked so the proposers can do work toward the next stage between meetings. As long as each proposal is not blocked, it’s moving forward toward the IS and “what ships in C++.next” will take care of itself as soon as it’s baked and ready.</p>
<p>Take a few minutes to read <a href="https://isocpp.org/std/the-life-of-an-iso-proposal">The life of an ISO proposal: From “cool idea” to “international standard.”</a> Here are how some major work moved along at this meeting, in the context of those Stages:</p>
<ul>
<li><strong>Ranges, Networking, Library Fundamentals 3, and Parallelism 2: Stage 6 -&gt; 7.</strong> All of these reached Stage 6 at our last meeting, and reached Stage 7 at this meeting. They’re all moving, and they’re well along in their development cycles and getting ready to debut in their international TS comment ballots in the near future.</li>
<li><strong>Modules: Stage 3 -&gt; 6.</strong> This reached Stage 3 at our previous meeting in November, and is already at Stage 6 at this meeting—that’s very rapid progress in one meeting!</li>
<li><strong>Contracts: Stage 2 -&gt; 3.</strong> This was stalled for a long time in Stage 2, and thanks to lots of work by the proposers (brokered personally by Bjarne Stroustrup) at the last meeting in November and then between meetings, it finally broke the logjam and reached Stage 3 at this meeting. Now it’s finally unblocked and on track again.</li>
<li><strong>Coroutines, and 2D Graphics: Stage 3.</strong> These have both been at Stage 3 for a couple of meetings, and should reach Stages 4 and 5 over the next meeting or three.</li>
</ul>
<p>If we focus primarily on each proposal moving incrementally to Stage N+1 and identifying and removing impediments, getting great new work in each new C++.next release of the standard becomes very nearly automatic.</p>
<h1>What’s next</h1>
<p>Our next meeting is <a href="https://isocpp.org/files/papers/N4570.pdf">this June in Oulu, Finland</a>, where we plan to send a feature-complete C++17 out for its major international comment ballot. After that, we’ll address ballot comments at the <a href="https://isocpp.org/files/papers/N4571.pdf">November 2016</a> and <a href="https://isocpp.org/files/papers/n4573.txt">February-March 2017</a> meetings and plan to send C++17 out for its final approval ballot then.</p>
<p>What’s after C++17? The default is to continue on the 3-year cycle (aim for C++20 then C++23), but we’re also thinking about whether to try out going to a 2-year cycle (aim for C++19, and if that works then C++21 and C++23). We’ll discuss that later this year as we see how C++17 and current/future TS plans are coming together, and should have more definite plans to report in a meeting or two.</p>
<p>Thank you again to the over 110 experts at Jacksonville last week, and the many more who participate in standardization through their national bodies, without whose efforts and willing collaborative spirit these results would not be achievable. The over four million C++ users worldwide benefit, and appreciate it very much too. Thank you, all, for your many contributions to Standard C++.</p>
<h1>Acknowledgments</h1>
<p>Thank you to everyone who provided input data and/or review of drafts of this trip report, including but not limited to: JF Bastien, Steve Clamage, Marshall Clow, Gabriel Dos Reis, William M. (Mike) Miller, Nathan Myers, Clark Nelson, Gor Nishanov, Peter Sommerlad, John Spicer, Bjarne Stroustrup, Ville Voutilainen, Jonathan Wakely, Nathan Wilson, and Jeffrey Yasskin.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2016/03/11/trip-report-winter-iso-c-standards-meeting/feed/</wfw:commentRss>
		<slash:comments>31</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2016/03/wg21-timeline.png" medium="image">
			<media:title type="html">wg21-timeline</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Fall 2015 ISO C++ standards meeting</title>
		<link>https://herbsutter.com/2015/10/25/2568/</link>
				<comments>https://herbsutter.com/2015/10/25/2568/#comments</comments>
				<pubDate>Sun, 25 Oct 2015 21:28:43 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2568</guid>
				<description><![CDATA[Yesterday we just wrapped up our fall ISO C++ committee meeting in Kona, HI, USA. We normally meet in windowless rooms all week, but because of the committee&#8217;s current size we had to use the hotel&#8217;s largest space which was open-air (though technically still windowless). It was a busy week. During the days from 8:00am-5:00pm, [&#8230;]]]></description>
								<content:encoded><![CDATA[<div data-shortcode="caption" id="attachment_2569" style="width: 510px" class="wp-caption aligncenter"><img data-attachment-id="2569" data-permalink="https://herbsutter.com/2015/10/25/2568/20151024_012338818_ios/" data-orig-file="https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg" data-orig-size="7840,3064" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.2&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;iPhone 6 Plus&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1445613818&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.15&quot;,&quot;iso&quot;:&quot;500&quot;,&quot;shutter_speed&quot;:&quot;0.0083333333333333&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="20151024_012338818_iOS" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=300" data-large-file="https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=500" class="wp-image-2569 size-large" src="https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=500&#038;h=195" alt="20151024_012338818_iOS" srcset="https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=500&amp;h=195 500w, https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=998&amp;h=390 998w, https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=150&amp;h=59 150w, https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=300&amp;h=117 300w, https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=768&amp;h=300 768w" sizes="(max-width: 500px) 100vw, 500px"   /><p class="wp-caption-text">Taking polls during the Friday afternoon plenary session &#8212; the room is hotter than it looks</p></div>
<p>Yesterday we just wrapped up our fall ISO C++ committee meeting in Kona, HI, USA. We normally meet in windowless rooms all week, but because of the committee&#8217;s current size we had to use the hotel&#8217;s largest space which was open-air (though technically still windowless).</p>
<p>It was a busy week. During the days from 8:00am-5:00pm, usually six sessions ran concurrently: Core (CWG), Evolution (EWG), Library (LWG), Library Evolution (LEWG), Concurrency (SG1), and usually at least one more subgroup such as Numerics. In the evenings, from 7:30-10:00pm, there were more evening sessions than evenings, and sometimes three would run concurrently. Daily sessions started at 8:00am, and most of us attended the evening sessions until 10:00pm each day, after which many people still went back to their rooms to update papers until midnight. (This schedule is pretty usual for ISO C++ meetings.)</p>
<h2>What we did</h2>
<p>We approved a number of actions &#8212; see <a href="https://www.reddit.com/r/cpp/comments/3q4agc/c17_progress_update_oct_2015/">STL&#8217;s great Reddit post</a> for a summary, and some details on the library parts. Here are a few more notes from my own perspective.</p>
<p>First, actual major deliverables:</p>
<p><strong>Concepts TS:</strong> It&#8217;s published! We did that between meetings, but it&#8217;s worth mentioning again here. There was initial discussion about putting it directly into C++17; we expect to seriously consider that at our next meeting.</p>
<p><strong>Concurrency TS:</strong> We approved the final Concurrency TS for publication. It&#8217;s done!</p>
<p><strong>Parallelism TS:</strong> The Concurrency group decided to pursue airlifting version 1 of this TS (which has already been published) into the draft for C++17, and we expect to see that proposed to the full committee at our next meeting. This week, we went ahead and also approved starting official work on version 2 of the Parallelism TS.</p>
<p><strong>Ranges TS:</strong> We approved starting official work on a Ranges TS based on Eric Niebler&#8217;s great working text. The goal is to send it out for its main ballot in March following our next meeting.</p>
<p><strong>Networking TS:</strong> We approved starting official work on a Networking TS based on Chris Kohlhoff&#8217;s excellent wording, evolved from his Boost.ASIO library.</p>
<p>Next, other major work:</p>
<p><strong>Modules</strong> has reached a milestone: design agreement! This was done by separating &#8220;phase 1&#8221; and &#8220;phase 2&#8221; of modules, and greenlighting phase 1 to proceed to wordsmithing for adoption (hopefully at our next meeting) into a new Modules TS, while in parallel continuing work on an expanded phase 2 which can follow.</p>
<p><strong>Variant</strong> has reached a milestone: design agreement! This consumed our main Monday evening session. For the first time, the broader set of committee members agreed on its design and we expect to see (and hopefully approve) actual wording at our next meeting. Its initial target will likely be Library Fundamentals v2. (Spoiler for those following along at home: It&#8217;s the same variant that LEWG approved at our last meeting in Lenexa, but after an exception renders the variant invalid, attempting to access the invalid variant causes defined behavior, such as throwing an exception, instead of undefined behavior. This was acceptable to three major constituencies: people who wanted a zero-overhead variant, people who wanted a variant without an omnipresent empty state, and people who wanted a variant without undefined behavior.)</p>
<p><strong>Contracts</strong> seem to have made a breakthrough in getting the various parties to agree on the nitty-gritty details of a design. This consumed two three-hour evening sessions on Tuesday and Wednesday nights. If this holds, we expect to see a combined proposal that for the first time achieves broad agreement in time for our next meeting.</p>
<p><strong>Reflection</strong> continues to make slow but steady progress. Chandler Carruth reminded us that several initial proposals have already started progressing through the committee.</p>
<p>There&#8217;s more, but those are some of the highlights.</p>
<h2>Next meetings</h2>
<p>Our next meetings (always <a href="https://isocpp.org/std/meetings-and-participation/upcoming-meetings">listed here</a>) will be Jacksonville, FL, USA on Feb 29 &#8211; Mar 5, 2016 and Oulu, Finland on Jun 20-25, 2016. Note that the Oulu meeting is when we plan to feature-complete C++17 and send it out for its main comment ballot, so that will be a big meeting. (It will also be within a few dozen kilometers of the Arctic Circle and is deliberately scheduled so that the summer solstice occurs during the meeting, so the joke is that there will likely again be lots of post-dinner sessions in Oulu, but for once we can guarantee there will be no evening sessions!)</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2015/10/25/2568/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2015/09/20151024_012338818_ios.jpg?w=660" medium="image">
			<media:title type="html">20151024_012338818_iOS</media:title>
		</media:content>
	</item>
		<item>
		<title>My talk at CppCon</title>
		<link>https://herbsutter.com/2015/09/27/my-talk-at-cppcon/</link>
				<comments>https://herbsutter.com/2015/09/27/my-talk-at-cppcon/#comments</comments>
				<pubDate>Sun, 27 Sep 2015 15:51:33 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2566</guid>
				<description><![CDATA[My talk at CppCon is now available online: &#8220;Writing Good C++14&#8230; By Default&#8221; (slides)  It&#8217;s about type and memory safety for C++ &#8212; not a small target. Definitely watch Bjarne&#8217;s keynote first. This talk is largely designed to be &#8220;part 2&#8221; of his keynote. I&#8217;m very excited about the C++ Core Guidelines to promote modern C++14 style [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>My talk at CppCon is now available online: <a href="https://www.youtube.com/watch?v=hEx5DNLWGgA">&#8220;Writing Good C++14&#8230; By Default&#8221;</a> <a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/talks/Sutter%20-%20CppCon%202015%20day%202%20plenary%20.pdf">(slides)</a>  It&#8217;s about type and memory safety for C++ &#8212; not a small target.</p>
<p>Definitely watch <a href="https://isocpp.org/blog/2015/09/stroustrup-cppcon15-keynote">Bjarne&#8217;s keynote</a> first. This talk is largely designed to be &#8220;part 2&#8221; of his keynote.</p>
<p>I&#8217;m very excited about the C++ Core Guidelines to promote modern C++14 style and this effort to achieve type and memory safety dovetails with that. Bjarne and I merged our efforts last winter, and with the help of many people brought it to this point where it&#8217;s ready to open up, and we hope this work can continue making progress.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2015/09/27/my-talk-at-cppcon/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>CppCon program online</title>
		<link>https://herbsutter.com/2015/07/31/cppcon-program-online/</link>
				<comments>https://herbsutter.com/2015/07/31/cppcon-program-online/#comments</comments>
				<pubDate>Sat, 01 Aug 2015 02:10:53 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2564</guid>
				<description><![CDATA[The CppCon 2015 program is up! If anything this is an even stronger program than last year, which is saying something. My name isn&#8217;t on it yet, but yes, I am giving a talk at CppCon. It should be announced this week.]]></description>
								<content:encoded><![CDATA[<p><a href="http://cppcon.org/2015program">The CppCon 2015 program is up!</a> If anything this is an even stronger program than last year, which is saying something.</p>
<p>My name isn&#8217;t on it yet, but yes, I am giving a talk at CppCon. It should be announced this week.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2015/07/31/cppcon-program-online/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Spring ISO C++ meeting</title>
		<link>https://herbsutter.com/2015/06/05/trip-report-spring-iso-c-meeting/</link>
				<comments>https://herbsutter.com/2015/06/05/trip-report-spring-iso-c-meeting/#comments</comments>
				<pubDate>Fri, 05 Jun 2015 18:01:01 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2562</guid>
				<description><![CDATA[I just posted my Lenexa ISO C++ trip report over on isocpp.org covering our recent meeting. The ISO C++ committee is shipping more work sooner via concurrent Technical Specifications, but it’s still fairly new to find ourselves doing so much work that the “new normal” is to issue an international ballot from every ISO C++ meeting. This [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I just <a href="https://isocpp.org/blog/2015/06/trip-report-spring-iso-cpp-meeting">posted my Lenexa ISO C++ trip report</a> over on isocpp.org covering our recent meeting.</p>
<p>The ISO C++ committee is shipping more work sooner via concurrent Technical Specifications, but it’s still fairly new to find ourselves doing so much work that the “new normal” is to issue an international ballot from every ISO C++ meeting. This time, we completed three Technical Specifications (Transactional Memory, Library Fundamentals, and Parallelism) and sent out another for its comment ballot (Concurrency). We also did quite a bit of forward-looking planning for C++17, which is much closer than one would think since we&#8217;re aiming for a comment draft in mid/late 2016.</p>
<p>And check out the CppCon angle&#8230; it&#8217;s great to see the committee/community interaction and collaboration, and I can&#8217;t wait for CppCon in September and the fall ISO C++ meeting in October.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2015/06/05/trip-report-spring-iso-c-meeting/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Announcing a financial assistance policy for ISO C++ meetings</title>
		<link>https://herbsutter.com/2015/05/04/announcing-a-financial-assistance-policy-for-iso-c-meetings/</link>
				<comments>https://herbsutter.com/2015/05/04/announcing-a-financial-assistance-policy-for-iso-c-meetings/#comments</comments>
				<pubDate>Tue, 05 May 2015 03:49:25 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2560</guid>
				<description><![CDATA[Today it was my pleasure to announce a financial assistance policy for ISO C++ meetings. You can read about it at the announcement here.]]></description>
								<content:encoded><![CDATA[<p>Today it was my pleasure to announce a financial assistance policy for ISO C++ meetings. <a href="https://isocpp.org/blog/2015/05/financial-assistance-policy">You can read about it at the announcement here.</a></p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2015/05/04/announcing-a-financial-assistance-policy-for-iso-c-meetings/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Reader Q&#038;A: Why was implicit int removed?</title>
		<link>https://herbsutter.com/2015/04/16/reader-qa-why-was-implicit-int-removed/</link>
				<comments>https://herbsutter.com/2015/04/16/reader-qa-why-was-implicit-int-removed/#comments</comments>
				<pubDate>Thu, 16 Apr 2015 19:08:14 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2557</guid>
				<description><![CDATA[Today, Vikram Ojha asked via email: I was just thinking why we removed &#8220;int&#8221; as default return type from C++ which was there in our traditional C type. Why we made such changes, is it to make language more safer? Short answer: Because it&#8217;s &#8216;inherently dangerous&#8217; in the words of the C committee. For C++, see [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Today, Vikram Ojha asked via email:</p>
<blockquote><p>I was just thinking why we removed &#8220;int&#8221; as default return type from C++ which was there in our traditional C type. Why we made such changes, is it to make language more safer?</p></blockquote>
<p>Short answer: Because it&#8217;s &#8216;inherently dangerous&#8217; in the words of the C committee.</p>
<p>For C++, see D&amp;E (The Design and Evolution of C++) index &#8220;implicit int&#8221; which takes you to section 2.8.1. For C, see the <a href="http://port70.net/~nsz/c/c99/C99RationaleV5.10.pdf">C99 Rationale</a> section 6.7.2 &#8212; interestingly, you can&#8217;t search for &#8220;implicit int&#8221; because that term isn&#8217;t used &#8212; this is where the string to search for is &#8220;inherent danger&#8221; :).</p>
<p>Cribbing from Bjarne&#8217;s writeup, “implicit int” was removed some 20 years ago for several reasons, including code clarity and in additional avoiding special cases, to simplify C++ code and/or the C++ grammar.</p>
<p>For example, what does this mean?</p>
<pre>void f(const T);</pre>
<p>In modern C++, it can mean only that f has a const parameter of type T that is unnamed.</p>
<p>If we had implicit int, this would be less obvious: Could it also be a const parameter of type int named T?</p>
<p>There are a number of other cases where just omitting the type, with the meaning that it&#8217;s a certain fixed type, makes the grammar and/or the program harder to think about than it should be. So the ability to do that was removed in both C and C++.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2015/04/16/reader-qa-why-was-implicit-int-removed/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Reader Q&#038;A: auto and for loop index variables</title>
		<link>https://herbsutter.com/2015/01/14/reader-qa-auto-and-for-loop-index-variables/</link>
				<comments>https://herbsutter.com/2015/01/14/reader-qa-auto-and-for-loop-index-variables/#comments</comments>
				<pubDate>Thu, 15 Jan 2015 01:23:38 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2552</guid>
				<description><![CDATA[[Edit: I really like the &#8216;range of values&#8217; several commenters proposed. We do need something like that in the standard library, and it may well come in with ranges, but as you can see there are several simple ways to roll your own in the meantime, and some third-party libraries have similar features already.] Today [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><em>[Edit: I really like the &#8216;range of values&#8217; several commenters proposed. We do need something like that in the standard library, and it may well come in with ranges, but as you can see there are several simple ways to roll your own in the meantime, and some third-party libraries have similar features already.]</em></p>
<p>Today a reader asked the following question:</p>
<blockquote><p><span style="color:#000000;font-family:Calibri;font-size:medium;">So I’ve been reading all I can about c++11/c++14 and beyond when time permits.  I like auto, I really do, I believe in it.  I have a small problem I’m trying to decide what to do about.  So in old legacy code we have things like this:</span></p>
<p><span style="color:#000000;font-family:Calibri;font-size:medium;">for (int i = 0; i &lt; someObject.size(); i++) { &#8230; }</span></p>
<p><span style="color:#000000;font-family:Calibri;font-size:medium;">For some object types size might be unsigned, size_t, int, int64_t etc…</span></p>
<p><span style="color:#000000;font-family:Calibri;font-size:medium;">Is there a proper way to handle this generically with auto?  The best I could come up with is:</span></p>
<p><span style="color:#000000;font-family:Calibri;font-size:medium;">auto mySize = someObject.size();</span></p>
<p><span style="color:#000000;font-family:Calibri;font-size:medium;">for (auto i = decltype(mySize){0}; i &lt; mySize; i++) { &#8230; }</span></p>
<p><span style="color:#000000;font-family:Calibri;font-size:medium;">But I feel dirty for doing it because although it actually is very concise, it’s not newbie friendly to my surrounding coworkers who aren’t as motivated to be on the bleeding edge.</span></p></blockquote>
<p>Good question.</p>
<p>First, of course, I&#8217;m sure you know the best choice is to use range-for where that&#8217;s natural, or failing that consider iterators and <strong>begin()/end()</strong> where auto naturally gets the iterator types right. Having said that, sometimes you do need an index variable (including for performance) so I&#8217;ll assume you&#8217;re in that case.</p>
<p>So here&#8217;s my off-the-cuff answer:</p>
<ul>
<li>If this isn’t in a template, then I think <strong>for( auto i = 0;</strong> etc. is fine, and if you get a warning about signed/unsigned mismatch just write <strong>for(auto i = 0u;</strong> etc. This is all I&#8217;ve usually needed to do.</li>
</ul>
<ul>
<li>If this is truly generic code in a template, then I suppose <strong>for( auto i = 0*mySize;</strong> etc. isn’t too bad – it gets the type and it’s not terribly ugly. Disclaimer: I&#8217;ve never written this, personally, as I haven&#8217;t had a need (yet). And I definitely don&#8217;t know that I like it&#8230; just throwing it out as an idea.</li>
</ul>
<p>But that&#8217;s an off-the-cuff answer. Dear readers, if you know other/better answers please tell us in the comments.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2015/01/14/reader-qa-auto-and-for-loop-index-variables/feed/</wfw:commentRss>
		<slash:comments>52</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>A quick poll about order of evaluation&#8230;</title>
		<link>https://herbsutter.com/2014/12/01/a-quick-poll-about-order-of-evaluation/</link>
				<comments>https://herbsutter.com/2014/12/01/a-quick-poll-about-order-of-evaluation/#comments</comments>
				<pubDate>Mon, 01 Dec 2014 20:46:43 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2547</guid>
				<description><![CDATA[Consider this program fragment: std::vector&#60;int&#62; v = { 0, 0 }; int i = 0; v[i++] = i++; std::cout &#60;&#60; v[0] &#60;&#60; v[1] &#60;&#60; endl; My question is not what it might print under today&#8217;s C++ rules. The third line runs afoul of two different categories of undefined and unspecified behavior. Rather, my question is [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Consider this program fragment:</p>
<pre>std::vector&lt;int&gt; v = { 0, 0 };
int i = 0;
v[i++] = i++;
std::cout &lt;&lt; v[0] &lt;&lt; v[1] &lt;&lt; endl;</pre>
<p>My question is not what it might print under today&#8217;s C++ rules. The third line runs afoul of two different categories of undefined and unspecified behavior.</p>
<p>Rather, my question is what you would <em>like</em> the result to be. Please let me know.</p>
<a name="pd_a_8490486"></a>
<div class="PDS_Poll" id="PDI_container8490486" data-settings="{&quot;url&quot;:&quot;https:\/\/secure.polldaddy.com\/p\/8490486.js&quot;}" style="display:inline-block;"></div>
<div id="PD_superContainer"></div>
<noscript><a href="https://polldaddy.com/poll/8490486">Take Our Poll</a></noscript><script type='text/javascript'>
(function(d,c,j){if(!d.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src='https://s2.wp.com/wp-content/mu-plugins/shortcodes/js/polldaddy-shortcode.js';s=d.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}  else if(typeof jQuery !=='undefined')jQuery(d.body).trigger('pd-script-load');}(document,'script','pd-polldaddy-loader'));
</script>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/12/01/a-quick-poll-about-order-of-evaluation/feed/</wfw:commentRss>
		<slash:comments>116</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Updates to my trip report</title>
		<link>https://herbsutter.com/2014/11/24/updates-to-my-trip-report/</link>
				<comments>https://herbsutter.com/2014/11/24/updates-to-my-trip-report/#comments</comments>
				<pubDate>Mon, 24 Nov 2014 19:16:19 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2545</guid>
				<description><![CDATA[(this is an echo of what I also just posted on isocpp.org) I wanted to add a few more things to my meeting trip report. I updated the trip report in-place, but for those who want to see the &#8220;diffs&#8221; I&#8217;ll also post just the new parts here as a standalone post: There were 106 [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><em>(this is an echo of what I also just posted on isocpp.org)<br />
</em></p>
<p>I wanted to add a few more things to <a href="https://isocpp.org/blog/2014/11/trip-report-fall">my meeting trip report</a>. I updated the trip report in-place, but for those who want to see the &#8220;diffs&#8221; I&#8217;ll also post just the new parts here as a standalone post:</p>
<p>There were 106 experts at this meeting, officially representing 7 nations. This meeting saw a recent-record number of papers, including over 120 in the pre-meeting mailing.</p>
<p>In addition to the other things I mentioned, we also approved several other interesting changes, including the following highlights:</p>
<ul>
<li>Adopted N4230, which allows nested namespace definitions like <em>namespace A::B::C { }</em> as a convenient shorthand for <em>namespace A { namespace B { namespace C { } } }</em>.</li>
<li>Adopted N3922, which fixes the most common pitfall with <em>auto</em> and <em>{}</em>, so that <em>auto x{y};</em> now deduces the sane and expected thing, namely the type of <em>y</em>. Before this, it deduced <em>initializer_list</em> which was unfortunate and surprising. So, fixed.</li>
<li>Adopted N4086, which removes trigraphs. Yes, we removed something from C++… and something that was inherited from C! But wait, there&#8217;s more…</li>
<li>Adopted N4190, and actually removed (not just deprecated) several archaic things from the C++ standard library, including <em>auto_ptr</em>, <em>bind1st</em>/<em>bind2nd</em>, <em>ptr_fun</em>/<em>mem_fun</em>/<em>mem_fun_ref</em>, <em>random_shuffle</em>, and a few more. Those are now all removed from the draft C++17 standard library and will not be part of future portable C++.</li>
</ul>
<p>We also did work and made progress on a lot of other proposals, including <strong>modules</strong>. See the pre-meeting mailing for details about papers considered at this meeting.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/11/24/updates-to-my-trip-report/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip Report: Fall ISO C++ Meeting</title>
		<link>https://herbsutter.com/2014/11/22/trip-report-fall-iso-c-meeting/</link>
				<comments>https://herbsutter.com/2014/11/22/trip-report-fall-iso-c-meeting/#comments</comments>
				<pubDate>Sun, 23 Nov 2014 00:19:54 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2541</guid>
				<description><![CDATA[I just posted my ISO C++ meeting trip report over on isocpp.org covering our meeting in Urbana-Champaign earlier this month. The ISO C++ committee is shipping more work sooner via concurrent Technical Specifications, but it&#8217;s still fairly new to find ourselves doing so much work that the &#8220;new normal&#8221; is to issue an international ballot from every [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I just <a href="https://isocpp.org/blog/2014/11/trip-report-fall">posted my ISO C++ meeting trip report</a> over on isocpp.org covering our meeting in Urbana-Champaign earlier this month.</p>
<p>The ISO C++ committee is shipping more work sooner via concurrent Technical Specifications, but it&#8217;s still fairly new to find ourselves doing so much work that the &#8220;new normal&#8221; is to issue an international ballot from every ISO C++ meeting. This time, we have <em>four</em> ballots coming out of this meeting &#8212; the first (of two) ballots for the Transactional Memory TS, the final ballots for the Library Fundamentals TS and the Parallelism TS, and a new work item for C++17 since this was the first meeting of the C++17 era.</p>
<p>Oh, and we had evening sessions. Did I mention evening sessions? Five nights&#8217; worth.</p>
<p>Now, two weeks later, I&#8217;m almost caught up on sleep.</p>
<p>Almost.</p>
<p>But what a blast. I&#8217;m looking forward to the next few smaller meetings over the winter, and the next full one in May.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/11/22/trip-report-fall-iso-c-meeting/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>VS, Clang, cross-platform, and a short video</title>
		<link>https://herbsutter.com/2014/11/12/vs-clang-cross-platform-and-a-short-video/</link>
				<comments>https://herbsutter.com/2014/11/12/vs-clang-cross-platform-and-a-short-video/#comments</comments>
				<pubDate>Wed, 12 Nov 2014 17:25:26 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2538</guid>
				<description><![CDATA[Today my team was part of the Visual Studio 2015 Preview announcement, and it&#8217;s nice to be able to share that Visual Studio is now going to support targeting Android and soon iOS, using the Clang compiler, from right inside VS. This is in addition to continued conformance and other improvements in our own VC++ compiler [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Today my team was part of the Visual Studio 2015 Preview announcement, and it&#8217;s nice to be able to share that Visual Studio is now going to support targeting Android and soon iOS, using the Clang compiler, from right inside VS. This is in addition to continued conformance and other improvements in our own VC++ compiler for targeting Microsoft platforms.</p>
<p>I recorded <a href="http://channel9.msdn.com/Events/Visual-Studio/Connect-event-2014/311">an 8-minute video</a> about Visual C++&#8217;s conformance improvements in our existing compiler that you can get now in the Preview available today, and why using a single source code base in C++ built using VC++ to target Windows/WP and also Clang/LLVM to target Android and iOS is a hot ticket right now. The Resources slide at the end includes links to two CppCon videos I hope you&#8217;ll check out if you haven&#8217;t already.</p>
<p>I hope you enjoy the news, and the Preview.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/11/12/vs-clang-cross-platform-and-a-short-video/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>My CppCon talks</title>
		<link>https://herbsutter.com/2014/10/18/my-cppcon-talks-2/</link>
				<comments>https://herbsutter.com/2014/10/18/my-cppcon-talks-2/#comments</comments>
				<pubDate>Sun, 19 Oct 2014 01:01:43 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2535</guid>
				<description><![CDATA[Also, my CppCon talks are all up on the CppCon YouTube channel. You can find them here: Back to the Basics! Essentials of Modern C++ Style: Loops, pointers and references, smart pointers, variable declarations, and parameter passing Lock-Free Programming (or, Juggling Razor Blades), Part 1: Lazy initialization with DCL vs. call_once vs. function local statics, [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Also, my CppCon talks are all up on the <a href="https://www.youtube.com/user/CppCon">CppCon YouTube channel</a>. You can find them here:</p>
<ul>
<li><a href="http://youtu.be/xnqTKD8uD64">Back to the Basics! Essentials of Modern C++ Style</a>: Loops, pointers and references, smart pointers, variable declarations, and parameter passing</li>
<li><a href="http://youtu.be/c1gO9aB9nbs">Lock-Free Programming (or, Juggling Razor Blades), Part 1</a>: Lazy initialization with DCL vs. call_once vs. function local statics, and lock-free mailbox algorithms</li>
<li><a href="http://youtu.be/CmxkPChOcvw">Lock-Free Programming (or, Juggling Razor Blades), Part 2</a>: Lock-free linked lists, the ABA problem, and atomic smart pointers</li>
</ul>
<p>I hope you find them useful.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/10/18/my-cppcon-talks-2/feed/</wfw:commentRss>
		<slash:comments>13</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>New Interview</title>
		<link>https://herbsutter.com/2014/10/18/new-interview/</link>
				<pubDate>Sun, 19 Oct 2014 00:51:51 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2533</guid>
				<description><![CDATA[While we were both at CppCon last month and had cameras around, Brian Overland interviewed me for InformIT. The video just went up a couple of days ago. You can find it here. If you&#8217;ve seen my interviews before, the first 14 minutes is stuff you&#8217;ve heard before, but I think you&#8217;ll find the last [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><img src="https://herbsutter.files.wordpress.com/2014/10/101914_0051_newintervie1.png?w=500" alt="" align="right" />While we were both at CppCon last month and had cameras around, Brian Overland interviewed me for InformIT. The video just went up a couple of days ago. <a href="http://youtu.be/dTZvKAo8-Qg">You can find it here.</a></p>
<p>If you&#8217;ve seen my interviews before, the first 14 minutes is stuff you&#8217;ve heard before, but I think you&#8217;ll find <a href="https://www.youtube.com/watch?v=dTZvKAo8-Qg&amp;feature=youtu.be&amp;t=14m23s">the last five minutes starting at 14:23</a> to be interesting new material.</p>
]]></content:encoded>
									
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2014/10/101914_0051_newintervie1.png" medium="image" />
	</item>
		<item>
		<title>Next stop: Stuttgart</title>
		<link>https://herbsutter.com/2014/09/16/next-stop-stuttgart/</link>
				<comments>https://herbsutter.com/2014/09/16/next-stop-stuttgart/#comments</comments>
				<pubDate>Tue, 16 Sep 2014 15:48:42 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2529</guid>
				<description><![CDATA[CppCon was a blast. I can&#8217;t wait till next year. But there&#8217;s something coming up sooner than that: In two weeks, Scott and Andrei and I will be holding the C++ and Beyond 2014 &#8220;Road Show&#8221; in Stuttgart, Germany. The key to this event is not new material, but a new location. Whereas all other [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>CppCon was a blast. I can&#8217;t wait till next year.</p>
<p>But there&#8217;s something coming up sooner than that: In two weeks, Scott and Andrei and I will be holding the <a href="http://www.qa-systems.com/academy/single-view.html?tuid=64"><em>C++ and Beyond</em> 2014 &#8220;Road Show&#8221; in Stuttgart, Germany</a>.</p>
<p>The key to this event is not new material, but a new location. Whereas all other C&amp;B&#8217;s have been in North America, this is the first time ever that Scott and Andrei and I are doing an event together in Europe. That&#8217;s exciting! (At least for us.) If you&#8217;ve been to C&amp;B you will have seen most of this material before, but if you haven&#8217;t been able to get to C&amp;B until now you may find it convenient to have the event be more local to European attendees. The talks are all talks we&#8217;ve given at C&amp;B before, but there will be updates.</p>
<p><a href="http://cppandbeyond.com/2014/09/15/cb-stuttgart-just-two-weeks-away/">Scott seems to be looking forward</a> to a debate with me about parameter passing. I&#8217;m glad he thinks I&#8217;m &#8220;seeing more reason than [I] used to, (i.e., having moved closer to [Scott&#8217;s] point of view)&#8221; – by which he means that he has moved closer to my point of view. :) Should be fun! The boring truth, as I presented at CppCon on Friday, is that <strong><em>everyone</em></strong> agrees that the default parameter passing rules are the same as C++98… <a href="http://acronyms.thefreedictionary.com/Grin+Duck+%26+Run">&lt;gd&amp;r&gt;</a> and let the games begin!</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/09/16/next-stop-stuttgart/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip Report: CppCon 2014</title>
		<link>https://herbsutter.com/2014/09/15/trip-report-cppcon-2014/</link>
				<comments>https://herbsutter.com/2014/09/15/trip-report-cppcon-2014/#comments</comments>
				<pubDate>Mon, 15 Sep 2014 17:13:04 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>
		<category><![CDATA[Uncategorized]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2527</guid>
				<description><![CDATA[I just posted my CppCon trip report over at isocpp.org. I&#8217;ll repeat just the last part here: Huge thanks again to the 150+ speakers, planners, and volunteers without whom this wonderful &#8220;C++ festival&#8221; (as several people spontaneously called it) would not have been possible. I had guardedly high hopes for the event, but I think [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I just <a href="https://isocpp.org/blog/2014/09/trip-report-cppcon-2014">posted my CppCon trip report</a> over at isocpp.org.</p>
<p>I&#8217;ll repeat just the last part here:</p>
<blockquote><p><strong>Huge thanks again to the 150+ speakers, planners, and volunteers without whom this wonderful &#8220;C++ festival&#8221; (as several people spontaneously called it) would not have been possible.</strong> I had guardedly high hopes for the event, but I think it exceeded all our expectations. This was the most exciting and enlightening week I&#8217;ve experienced in my 20 years of C++, and I&#8217;m still catching my breath. I can&#8217;t wait until September 2015.</p></blockquote>
<p><span style="color:black;">Here are a few pics I and others took. You&#8217;ll find more <a href="https://twitter.com/search?q=%23cppcon&amp;src=typd">on Twitter tagged #cppcon</a>.<br />
</span></p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc1.jpg?w=500" alt="" /> Mark Maimone of NASA and Mars Rover fame.</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc2.jpg?w=500" alt="" /> Bjarne taking questions after his talk.</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc3.jpg?w=500" alt="" /> &#8220;We&#8217;re sold out of <em>A Tour of C++</em> again… how about this instead?&#8221; [photo credit: Artur Laksberg]</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc4.jpg?w=500" alt="" /> [photo credit: Artur Laksberg]</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc5.jpg?w=500" alt="" /> [photo credit: Artur Laksberg]</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc6.jpg?w=500" alt="" /> Walter Brown speaking in one of the six concurrent breakout sessions.</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc7.jpg?w=500" alt="" /> Jon Kalb speaking in one of the other rooms.</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc8.jpg?w=500" alt="" /> Possibly the youngest attendee? [photo credit: Artur Laksberg]</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc9.jpg?w=500" alt="" /> Accessibility and community.</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc10.jpg?w=500" alt="" /> Yup. Modern C++.</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc11.jpg?w=500" alt="" /> View from the CppCon balcony before diving into more evening sessions.</p>
<p><img src="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc12.jpg?w=500" alt="" /> So long, Meydenbauer Center… see you next year! [photo credit: Hyrum Wright]</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/09/15/trip-report-cppcon-2014/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc1.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc2.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc3.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc4.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc5.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc6.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc7.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc8.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc9.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc10.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc11.jpg" medium="image" />

		<media:content url="https://herbsutter.files.wordpress.com/2014/09/091514_1712_tripreportc12.jpg" medium="image" />
	</item>
		<item>
		<title>My CppCon Plenary (updated)</title>
		<link>https://herbsutter.com/2014/08/19/my-cppcon-plenary-updated/</link>
				<comments>https://herbsutter.com/2014/08/19/my-cppcon-plenary-updated/#comments</comments>
				<pubDate>Tue, 19 Aug 2014 15:44:57 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2510</guid>
				<description><![CDATA[When we announced the CppCon conference program and I posted my final talk selection, the original plan for my Friday &#8216;endnote&#8217; plenary was for it to focus on giving an update on future standardization plans. However, quite a few people immediately wrote me to express disappointment that I wouldn&#8217;t cover my Modern C++ Style material, [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>When we announced the CppCon conference program and I <a href="https://herbsutter.com/2014/07/02/my-cppcon-talks/">posted my final talk selection</a>, the original plan for my Friday &#8216;endnote&#8217; plenary was for it to focus on giving an update on future standardization plans. However, quite a few people immediately wrote me to express disappointment that I wouldn&#8217;t cover my <em>Modern C++ Style</em> material, which they felt was sorely needed as we build updated C++ usage guidance in the presence of everything that&#8217;s new in C++11 and C++14 which really do make C++ feel like a new and fresh language. At the same time, I noticed that the standardization material I had planned to cover will be covered very well in the Monday CppCon talk <a href="http://sched.co/1iGEi0Q">&#8220;What the Committee Did Next!&#8221;</a> by Alisdair Meredith, chair of the Library Working Group of the C++ standards committee.
</p>
<p>So I suggested that maybe we ought to repurpose my Friday plenary session with the other highly-requested topic instead, and <a href="http://cppcon.org/final-plenary-session-2014/">the organizers agreed</a>. Here&#8217;s the new description:
</p>
<p style="margin-left:36pt;"><a href="http://sched.co/1v016xH"><strong>Back to the Basics! Elements of Modern C++ Style</strong></a><strong><br />
		</strong></p>
<p style="margin-left:36pt;">by Herb Sutter
</p>
<p style="margin-left:36pt;">This talk revisits basic questions, such as how to declare and initialize a variable, how to pass a value to a function, how to write a simple loop, and how to use smart pointers, in the light of experience with C++11 and the latest C++14 refinements. This involves examining auto, rvalue references, range-for loops, uniform initialization, lambda expressions, unique_ptr and shared_ptr, and more.
</p>
<p>Like all CppCon sessions, this talk will be recorded and is expected to be available online a month or two after the conference.
</p>
<p><strong>Note:</strong> If you&#8217;re in the Seattle area, note that <a href="http://cppcon.org/final-plenary-session-2014/">Friday admission is free and open to all</a>, as are evening and breakfast sessions, even if you don&#8217;t have a registration to see the other 100+ daytime technical sessions. (Though if you&#8217;re in the Seattle area and a C++ developer, why wouldn&#8217;t you register for the whole conference? Airfare and hotel are the majority of the total cost for most attendees, so if you&#8217;re local anyway this is some of the most inexpensive high-quality training there is. Just sayin&#8217;. Note that I am one of the CppCon organizers but I have no personal financial stake in CppCon – I&#8217;m not getting a penny from it – I&#8217;m just a delighted participant and attendee.)
</p>
<p>I&#8217;m looking forward to seeing many of you at CppCon!</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/08/19/my-cppcon-plenary-updated/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Trip report: Summer ISO C++ meeting</title>
		<link>https://herbsutter.com/2014/07/03/trip-report-summer-iso-c-meeting/</link>
				<comments>https://herbsutter.com/2014/07/03/trip-report-summer-iso-c-meeting/#comments</comments>
				<pubDate>Fri, 04 Jul 2014 03:05:09 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2507</guid>
				<description><![CDATA[I just posted my isocpp.org trip report from the recently concluded ISO C++ meeting in Switzerland. We sent three documents out for ballot. This is the first time in ISO C++ history that we have sent three documents out for ballot out of a single meeting. Wow. See the full trip report for more details&#8230;]]></description>
								<content:encoded><![CDATA[<p><img align="right" src="https://herbsutter.files.wordpress.com/2014/07/070414_0305_tripreports1.png?w=500" alt="" />
	</p>
<p>I just posted my <a href="https://isocpp.org/blog/2014/07/trip-report-summer-iso-c-meeting"><em>isocpp.org</em> trip report</a> from the recently concluded ISO C++ meeting in Switzerland.
</p>
<p>We sent three documents out for ballot. This is the first time in ISO C++ history that we have sent three documents out for ballot out of a single meeting. Wow.
</p>
<p>See the full trip report for more details&#8230;</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/07/03/trip-report-summer-iso-c-meeting/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2014/07/070414_0305_tripreports1.png" medium="image" />
	</item>
		<item>
		<title>My CppCon talks</title>
		<link>https://herbsutter.com/2014/07/02/my-cppcon-talks/</link>
				<comments>https://herbsutter.com/2014/07/02/my-cppcon-talks/#comments</comments>
				<pubDate>Wed, 02 Jul 2014 23:50:54 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2504</guid>
				<description><![CDATA[A few weeks ago, here and here, I posted the five talks I submitted for CppCon. Good news (really): The CppCon program (posted today) is so strong that some of my talks legitimately fell below the cut line. Instead of giving five talks, I&#8217;ll be giving two – one as I proposed it, one a [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="http://cppcon.org/conference-program/"><img align="right" src="https://herbsutter.files.wordpress.com/2014/07/070214_2350_mycppcontal1.png?w=500" alt="" border="0" /></a>
	</p>
<p>A few weeks ago, <a href="https://herbsutter.com/2014/05/20/cppcon-my-proposed-talks-part-1/">here</a> and <a href="https://herbsutter.com/2014/05/21/cppcon-my-proposed-talks-part-2/">here</a>, I posted the five talks I submitted for CppCon.
</p>
<p>Good news (really): The <a href="http://cppcon.org/conference-program/">CppCon program (posted today)</a> is so strong that some of my talks legitimately fell below the cut line. Instead of giving five talks, I&#8217;ll be giving two – one as I proposed it, one a plenary session condensed from three proposed talks. The fifth proposed talk fell under &#8220;thanks but there&#8217;s just no room, maybe next year.&#8221;
</p>
<p>This is an awesome problem to have. Seeing the other sessions I am sincerely happy to see some of my material and proposed topics have to be condensed and/or cut to make room for the high-quality content in the program from other speakers. Little did we know what a strong response there would be to the call for session proposals, with well over 100 speakers proposing talks, but the response was just, well, awesome. Now that the Program Committee has done its work (thanks again, PC members!), here&#8217;s how it came down for me:
</p>
<p>First, I&#8217;m doing a plenary session in the main hall which will be 90 minutes instead of 60 and so will let me combine and condense material from my proposed talks on Standardization Update, Garbage Collection, and C++ ABI, to make a single forward-looking &#8216;endnote-y&#8217; session. Here&#8217;s the merged title and abstract:
</p>
<h3>C++ Today and Tomorrow: C++14, a Gaggle of TSes, and Beyond<br />
</h3>
<p style="margin-left:36pt;">This talk starts with a standardization update: By the time we meet at CppCon, C++14 might already be ratified. But that&#8217;s only one of eight (so far) work items now in flight. This session will start off with a summary of the new features coming in C++14 itself, followed by a tour of the seven (7) near-term separate Technical Specifications already underway – think of these as the &#8220;C++14 wave&#8221; of deliverables, covering standard support for everything from file system access and networking, to concurrency and parallelism, to concepts and transactional memory. In each case, we&#8217;ll get a feel for what each major feature looks like and how to use it, and why it&#8217;s important for the standard and for your own portable C++ code.
</p>
<p style="margin-left:36pt;">Then we turn to future directions: What two features are expected to be pillars of C++17? What other work is being done, and what other problems need to be addressed, and how, for C++ to continue to fulfill its mission to be a modern close-to-the-metal systems programming language? Sutter will share thoughts on two specific forward-looking topics: First, how garbage collection can be added well to C++, directly complementing (not competing with) C++&#8217;s existing strengths and demonstrating why, as Stroustrup says, &#8220;C++ is the best language for garbage collection.&#8221; And second, why and how we might develop a standard C++ ABI, including directly addressing the #1 valid reason to use C instead of C++, and removing a major obstacle to sharing binary C++ libraries in a modern way.
</p>
<p>Second, I&#8217;m doing the lock-free programming talk as a regular talk:
</p>
<h3>Lock-Free Programming (or, Juggling Razor Blades)<br />
</h3>
<p style="margin-left:36pt;">Example-driven talk on how to design and write lock-free algorithms and data structures using C++ <em>atomic</em> – something that can look deceptively simple, but contains very deep topics. (Important note: This is not the same as my &#8220;atomic Weapons&#8221; talk; that talk was about the &#8220;what they are and why&#8221; of the C++ memory model and atomics, and did not cover how to actually use atomics to implement highly concurrent algorithms and data structures.)
</p>
<p>The talk that didn&#8217;t make the bar this time was <em>Modern C++ Style: Idioms of C++11/14</em>. It&#8217;s a shame, because I think it&#8217;s a strong talk, but some of its material will be covered well in talks by other speakers, and the 1-3 hours this talk would have occupied will be put to even better use by up to three other talks on other modern topics.
</p>
<p>I&#8217;m really looking forward to being in the audience for the talks that take the place of this one, even as I look forward to re-proposing this talk for next year&#8217;s CppCon.
</p>
<p>I hope to see many of you at CppCon.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/07/02/my-cppcon-talks/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2014/07/070214_2350_mycppcontal1.png" medium="image" />
	</item>
		<item>
		<title>CppCon: My Proposed Talks (Part 2)</title>
		<link>https://herbsutter.com/2014/05/21/cppcon-my-proposed-talks-part-2/</link>
				<comments>https://herbsutter.com/2014/05/21/cppcon-my-proposed-talks-part-2/#comments</comments>
				<pubDate>Wed, 21 May 2014 11:21:46 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2493</guid>
				<description><![CDATA[Yesterday I posted three of my proposed talks for CppCon. These are the ones I&#8217;ve given publicly before, but they&#8217;re not retreads – all are fresh and up to date, with refreshed or new material. But I&#8217;ve also proposed two brand new talks – titles and abstracts are below. Note: The CppCon program committee will [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Yesterday I <a href="https://herbsutter.com/2014/05/20/cppcon-my-proposed-talks-part-1/">posted three</a> of my proposed talks for CppCon. These are the ones I&#8217;ve given publicly before, but they&#8217;re not retreads – all are fresh and up to date, with refreshed or new material.
</p>
<p>But I&#8217;ve also proposed two brand new talks – titles and abstracts are below.
</p>
<blockquote>
<p>Note: The CppCon program committee will be considering the talk proposals to come up with a balanced program, so it&#8217;s possible that not all of these will be in the final program, but I have high hopes for most of these…
</p>
</blockquote>
<p>CppCon is building well. I don&#8217;t know how many talks there will be in the end as this depends on the program committee including in part how long the accepted talks are, but FWIW my talks are submissions #41 and #126-129. There&#8217;s some really great stuff in the pipeline on all sorts of topics of interest to C++ developers, not just about the language itself but also tools, specific domains, and lots of cool stuff that will be shown for the first time at CppCon.
</p>
<p>I look forward to seeing many of you at CppCon this fall! If we have the right equipment in the main auditorium, there might even be a wind of change…
</p>
<p style="text-align:center;">
 </p>
<h2>GC for C++, and C++ for GC: &#8220;Right&#8221; and &#8220;Wrong&#8221; Ways to Add Garbage Collection to C++ (1 to 2 hours)<br />
</h2>
<p><span style="font-family:Verdana;font-size:10pt;">&#8220;Garbage collection is essential to modern programming!&#8221; &#8220;Garbage collection is silly, who needs it!&#8221;<br />
</span></p>
<p><span style="font-family:Verdana;font-size:10pt;">As is usual with extremes, both of these statements are wrong. Garbage collection (GC) is not needed for most C++ programs; we&#8217;re very happy with determinism and smart pointers, and GC is absolutely penalizing when overused, especially as a default (or, <em>shudder</em>, only) memory allocator. However, the truth is that GC is also important to certain high-performance and highly-concurrent data structures, because it helps solve advanced lock-free problems like the ABA problem better than workarounds like hazard pointers.<br />
</span></p>
<p><span style="font-family:Verdana;font-size:10pt;">This talk presents thoughts about how GC can be added well to C++, directly complementing (not competing with) C++&#8217;s existing strengths and demonstrating why, as Stroustrup says, &#8220;C++ is the best language for garbage collection.&#8221;</span>
	</p>
<p>
 </p>
<h2>Addressing C++&#8217;s #1 Problem: Defining a C++ ABI (1 hour)<br />
</h2>
<p>&#8220;Why can&#8217;t I share C++ libraries even between my own internal teams without using the identical compiler and switch settings?&#8221; &#8220;Why are operating system APIs written in unsafe C, instead of C++?&#8221; &#8220;Why can&#8217;t I use <em>std::string</em> in a public shared library interface; it&#8217;s the C++ string, isn&#8217;t it?!&#8221;
</p>
<p>These and more perennial questions are caused by the same underlying problem: For various historical reasons, C++ does not have a standard binary interface, or ABI. Partial solutions exist, from the Itanium ABI which addresses only the language and only on some platforms, to COM and CORBA which do both less and far more than is needed.
</p>
<p>It is deeply ironic that there actually is a way to write an API in C++ so that it has a de facto stable binary ABI on every platform: <em>extern &#8220;C&#8221;</em>.
</p>
<p>This session describes current work driven by the presenter to develop a standard C++ ABI. This does not mean having identical binaries on all platforms. It does mean tackling all of the above problems, including directly addressing the #1 valid reason to use C instead of C++, and removing a major obstacle to sharing binary C++ libraries in a modern way.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/05/21/cppcon-my-proposed-talks-part-2/feed/</wfw:commentRss>
		<slash:comments>14</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>CppCon: My Proposed Talks (Part 1)</title>
		<link>https://herbsutter.com/2014/05/20/cppcon-my-proposed-talks-part-1/</link>
				<comments>https://herbsutter.com/2014/05/20/cppcon-my-proposed-talks-part-1/#comments</comments>
				<pubDate>Tue, 20 May 2014 12:24:16 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2490</guid>
				<description><![CDATA[I&#8217;ve been watching the talk proposals rolling in for CppCon, now well over 100 of them, and I was already looking forward to this conference but I just keep getting more jazzed. For my part, I&#8217;ve proposed five talks, with between 5 and 10 hours of material. I thought I&#8217;d share some of them here. [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I&#8217;ve been watching the talk proposals rolling in for <a href="http://cppcon.org/">CppCon</a>, now well over 100 of them, and I was already looking forward to this conference but I just keep getting more jazzed.
</p>
<p>For my part, I&#8217;ve proposed <strong>five talks</strong>, with between <strong>5 and 10 hours</strong> of material. I thought I&#8217;d share some of them here.
</p>
<blockquote>
<p>Note: The CppCon program committee will be considering the talk proposals to come up with a balanced program, so it&#8217;s possible that not all of these will be in the final program, but I have high hopes for most of these…
</p>
</blockquote>
<p>Below are three of the five proposed talks. These are the ones I&#8217;ve given publicly before, but they&#8217;re not retreads – all are fresh and up to date, with refreshed or new material.
</p>
<p>I&#8217;ll cover the other two new talks in a separate post soon.
</p>
<p>I hope to see you at CppCon this fall to talk about these and many more interesting topics by scores of great speakers!
</p>
<p style="text-align:center;">
 </p>
<h2>Lock-Free Programming – or, How to Juggle Razor Blades (~2 hours)<br />
</h2>
<p><span style="font-family:Verdana;font-size:10pt;">Example-driven talk on how to design and write lock-free algorithms and data structures using C++ atomic&lt;&gt; – something that can look deceptively simple, but contains very deep topics. (Important note: This is not the same as my &#8220;atomic&lt;&gt; Weapons&#8221; talk; that talk was about the &#8220;what they are and why&#8221; of the C++ memory model and atomics, and did not cover how to actually use atomics to implement highly concurrent algorithms and data structures.)</span>
	</p>
<p>This talk is about the &#8220;how to use them successfully&#8221; part of atomics, including:
</p>
<ul>
<li>Best practices and style for using atomic&lt;&gt;s
</li>
<li>Three or more examples, including lock-free mail slots and iterations of a lock-free linked list, all in portable Standard C++
</li>
<li>Defining and applying the different levels of &#8220;lock-freedom&#8221; (wait-free, lock-free, obstruction-free) to develop highly concurrent algorithms and data structures
</li>
<li>Explaining and applying key concepts including especially: linearizability; trading off concurrency vs. promptness; and trading off concurrency vs. throughput/utilization
</li>
<li>Demonstrating and solving the ABA problem, with clean and simple code – that&#8217;s right, did you know that in C++11 you can solve this without relying on esoterica like double-wide CAS (which isn&#8217;t always available) or hazard pointers (which are deeply complex) or garbage collection (which isn&#8217;t in the C++ standard&#8230; yet)?
</li>
</ul>
<p>
 </p>
<h2>Standardization Update: C++14 and the Seven Dwarfs (1 hour)<br />
</h2>
<p>Standardization has accelerated: By the time we meet at CppCon, C++14 might already be ratified. But that&#8217;s only one of eight (so far) work items now in flight. In this session, I&#8217;ll give a brief summary of the new features coming in C++14 itself, and then a tour of the seven (7) near-term separate Technical Specifications already underway – think of these as the &#8220;C++14 wave&#8221; of deliverables.
</p>
<p>The ISO C++ committee has transitioned to a &#8220;decoupled&#8221; model where updated versions of the standard are published more frequently, while at the same time major pieces of work can progress and be published independently from the Standard itself and delivered asynchronously in the form of Technical Specifications (TS&#8217;s) that are separate from the main Standard and can later be incorporated into the Standard. Come to this session to see how this is helping both the standard and C++ compiler implementations near you stay current with the latest in C++.
</p>
<p>The topics covered will be:
</p>
<ul>
<li>C++14: What&#8217;s new in the new standard due this year
</li>
<li>File System TS: Portable file system access
</li>
<li>Library Fundamentals TS (small): string_view and optional&lt;&gt;
</li>
<li>Array Extensions TS: Language and library dynamic arrays
</li>
<li>Concepts Lite TS: Templates + constraints = ++usability and ++diagnostics
</li>
<li>Concurrency TS: Nonblocking futures (.then, .when_*), executors, and (maybe) await
</li>
<li>Parallelism TS: A whole new Parallel STL with both parallel and vector execution support
</li>
<li>One of:<br />    &#8211; Networking TS (small): IP addresses, URIs, byte ordering<br />    &#8211; Transactional Memory TS: Language and library extensions for transactional memory instead of mutexes for many kinds of concurrency control
</li>
</ul>
<p>This session will present an overview of each set of features, what it looks like and how to use it, and why it&#8217;s important for the standard and for your own portable C++ code.
</p>
<p>
 </p>
<h2>Modern C++ Style: Idioms of C++11/14 (1 to 3 hours)<br />
</h2>
<p>This session will cover modern and current C++ style, focusing on C++14. It will demonstrate how major features and idioms from C++98 are now entirely replaced or subsumed and should be used no more; how other major features and idioms have been dramatically improved to the point where your code is cleaner and safer and you&#8217;ll even think in a different style; and how pervasive styles as common as variable declarations are changed forever, and not just for style but for serious technical safety and efficiency benefits. For one thing, you&#8217;ll never look at auto the same way again &#8211; and if hearing that makes you worry, worry not, just attend the session to dig deep into the good reasons for the new reality.
</p>
<p>Why C++14? Two reasons: First, it really does &#8220;complete C++11&#8221; with small but important consistency features like generic lambdas and make_unique that let us teach modern C++ style with fewer &#8220;except for&#8221; footnotes.  Second, C++14 &#8220;is&#8221; C++ for the next several years and it&#8217;s real; it is feature-complete and in the final stages of standardization, and more importantly we are already seeing near-complete conforming implementations becoming widely available around the same time C++14 is expected to be formally published.
</p>
<p>C++14 is a small but important improvement on C++11 that really does complete the language. What this means is that we&#8217;re going to have a complete and simpler set of idioms and styles to learn and use.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/05/20/cppcon-my-proposed-talks-part-1/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Reader Q&#038;A: How can I prevent a type from being instantiated on the stack?</title>
		<link>https://herbsutter.com/2014/05/03/reader-qa-how-can-i-prevent-a-type-from-being-instantiated-on-the-stack/</link>
				<comments>https://herbsutter.com/2014/05/03/reader-qa-how-can-i-prevent-a-type-from-being-instantiated-on-the-stack/#comments</comments>
				<pubDate>Sun, 04 May 2014 03:35:46 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2481</guid>
				<description><![CDATA[Anubhav asked: An interesting question has come up in our project while debating operator new as a class member function. Specifically, the question is about whether such a class should be allowed to be instantiated on stack. The understanding is that a class providing its own operator new would likely have special layout considerations which [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Anubhav asked:
</p>
<blockquote>
<p>An interesting question has come up in our project while debating operator new as a class member function. Specifically, the question is about whether such a class should be allowed to be instantiated on stack. The understanding is that a class providing its own operator new would likely have special layout considerations which would not be met if the object of such a class is instantiated locally.
</p>
</blockquote>
<p>The class specific operator new is used when allocating on the heap, but objects can still be allocated on the stack. The only way I know to prevent an object from being instantiated on the stack is by forcing creation through a factory function that always allocates on the heap, for example:
</p>
<p><pre><code>#include &lt;memory&gt;<br /><br />class X {<br />    // make all ctors private<br />    X();<br />    X(const X&amp;);<br />    // and any other ctors go here<br /><br />public:<br />    // Factory function (or it could be a nonmember friend)<br />    static auto make( /*…*/ ) { return std::unique_ptr&lt;X&gt;(new X( /*…*/ )); }<br /><br />    // the usual public member functions go here<br />};<br /><br />int main()<br />{<br />    X x;                  // error <br />    auto x2 = X::make();  // ok<br />}</code></pre></p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2014/05/03/reader-qa-how-can-i-prevent-a-type-from-being-instantiated-on-the-stack/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
	</channel>
</rss>
