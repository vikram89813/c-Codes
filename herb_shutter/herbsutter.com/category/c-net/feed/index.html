<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>C# / .NET &#8211; Sutter’s Mill</title>
	<atom:link href="https://herbsutter.com/category/c-net/feed/" rel="self" type="application/rss+xml" />
	<link>https://herbsutter.com</link>
	<description>Herb Sutter on software development</description>
	<lastBuildDate>
	Fri, 23 Nov 2018 09:30:43 +0000	</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
<cloud domain='herbsutter.com' port='80' path='/?rsscloud=notify' registerProcedure='' protocol='http-post' />
<image>
		<url>https://secure.gravatar.com/blavatar/4554b8d24c7f200dc5e2e1b18db1893f?s=96&#038;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fbuttonw-com.png</url>
		<title>C# / .NET &#8211; Sutter’s Mill</title>
		<link>https://herbsutter.com</link>
	</image>
	<atom:link rel="search" type="application/opensearchdescription+xml" href="https://herbsutter.com/osd.xml" title="Sutter’s Mill" />
	<atom:link rel='hub' href='https://herbsutter.com/?pushpress=hub'/>
	<item>
		<title>Recommended reading: Why mobile web apps are slow (Drew Crawford)</title>
		<link>https://herbsutter.com/2013/07/09/recommended-reading-why-mobile-web-apps-are-slow-drew-crawford/</link>
				<comments>https://herbsutter.com/2013/07/09/recommended-reading-why-mobile-web-apps-are-slow-drew-crawford/#comments</comments>
				<pubDate>Tue, 09 Jul 2013 16:47:02 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[Java]]></category>
		<category><![CDATA[Software Development]]></category>
		<category><![CDATA[Web]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=2224</guid>
				<description><![CDATA[I don&#8217;t often link to other articles, but this one is worth reading. Why mobile web apps are slow by Drew Crawford … So if you are trying to figure out exactly what brand of crazy all your native developer friends are on for continuing to write the evil native applications on the cusp of [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I don&#8217;t often link to other articles, but this one is worth reading.</p>
<blockquote><p><a href="http://sealedabstract.com/rants/why-mobile-web-apps-are-slow/"><span style="font-size:14pt;">Why mobile web apps are slow</span></a></p>
<p>by Drew Crawford</p>
<p>… So if you are trying to figure out exactly what brand of crazy all your native developer friends are on for continuing to write the evil native applications on the cusp of the open web revolution, or whatever, then bookmark this page, make yourself a cup of coffee, clear an afternoon, find a comfy chair, and then we&#8217;ll both be ready.<span style="font-size:14pt;"><br />
</span></p></blockquote>
<p>He offers data (imagine!) to justly debunk many common memes and &#8220;easy answers&#8221; that routinely litter HN/Reddit/Slashdot comment threads. The piece is also often subtly (and intentionally) hilarious – do watch for the subtle humor, not just the obvious wit.</p>
<p>Don&#8217;t be distracted by the author&#8217;s viewpoint and emphasis on &#8220;iOS and Javascript&#8221; development – the article covers lots of important ground, including:</p>
<ul>
<li>developing for ARM vs. x86;</li>
<li>developing for desktop vs. mobile;</li>
<li>managed vs. native code performance;</li>
<li>JIT issues vs. inherent language design tensions;</li>
<li>why garbage collection is not at all the panacea it&#8217;s often billed to be and often needs to be emphatically avoided (did you realize Apple already jettisoned GC?); and</li>
<li>as many of you know already, why if you&#8217;re serious about performance you&#8217;ll be <em>seriously</em> serious about memory usage and access patterns as a first-order issue.</li>
</ul>
<p>I agree with most of it, and not just because he quotes from my <a href="https://herbsutter.com/2012/04/02/reader-qa-when-will-better-jits-save-managed-code">When Will Better JITs Save Managed Code</a> blog post from last year.</p>
<p>Recommended.</p>
<h3>Spoilers</h3>
<p>A few takeaways from the conclusion (spoiler alert):</p>
<blockquote><p>Garbage collection is exponentially bad in a memory-constrained environment. It is way, way worse than it is in desktop-class or server-class environments.</p></blockquote>
<blockquote><p>Every competent mobile developer, whether they use a GCed environment or not, spends a great deal of time thinking about the memory performance of the target device</p></blockquote>
<blockquote><p>JavaScript, as it currently exists, is fundamentally opposed to even allowing developers to think about the memory performance of the target device</p></blockquote>
<blockquote><p>If they did change their minds and allowed developers to think about memory, experience suggests this is a technically hard problem.</p></blockquote>
<blockquote><p>asm.js show some promise, but even if they win you will be using C/C++ or similar &#8220;backwards&#8221; language as a frontend, rather than something dynamic like JavaScript</p></blockquote>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2013/07/09/recommended-reading-why-mobile-web-apps-are-slow-drew-crawford/feed/</wfw:commentRss>
		<slash:comments>36</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Perspective: &#8220;Why C++ Is Not &#8216;Back&#8217;&#8221;</title>
		<link>https://herbsutter.com/2012/12/03/perspective-why-c-is-not-back/</link>
				<comments>https://herbsutter.com/2012/12/03/perspective-why-c-is-not-back/#comments</comments>
				<pubDate>Mon, 03 Dec 2012 21:34:30 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1684</guid>
				<description><![CDATA[John Sonmez wrote a nice article on the weekend – both the article and the comments are worth reading. “Why C++ Is Not ‘Back’” by John Sonmez I love C++. […] There are plenty of excellent developers I know today that still use C++ and teach others how to use it and there is nothing [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="http://simpleprogrammer.com/2012/12/01/why-c-is-not-back/"><img style="float:right;margin:0 0 10px 10px;display:inline;" alt="" src="https://complextosimple.files.wordpress.com/2012/12/announcer_thumb.jpg?w=229&#038;h=240" height="240" width="229" /></a>John Sonmez wrote a nice article on the weekend – both the article and the comments are worth reading.</p>
<blockquote>
<h3><a href="http://simpleprogrammer.com/2012/12/01/why-c-is-not-back/">“Why C++ Is Not ‘Back’”</a></h3>
<p><em>by John Sonmez</em></p>
<p>I love C++. […] There are plenty of excellent developers I know today that still use C++ and teach others how to use it and there is nothing at all wrong with that.</p>
<p>So what is the problem then?</p>
<p>[…] Everyone keeps asking me if they need to learn C++, but just like my answer was a few years ago, it is the same today—NO!</p>
<p>Ok, so “NO” in caps is a bit harsh.  A better answer is “why?”</p>
<p>[…]</p></blockquote>
<p>Although I don’t agree with everything John says, he presents something quite valuable, and unfortunately rare: a <em>thoughtful hype-free opinion</em>. This is valuable especially when (not just “even when”) it differs from your own opinion, because combining different thoughtful views of the same thing gives something exceedingly important and precious: <em>perspective</em>.</p>
<p>By definition, depth perception is something you get from seeing and combining more than one point of view. This is why one of my favorite parts of any conference or group interview is discussions between experts on points where they disagree – because experts do regularly disagree, and when they each present their thoughtful reasons and qualifications and specific cases (not just hype), you get to see <em>why</em> a point is valid, <em>when</em> it is valid and not valid, <em>how</em> it applies to a specific situation or doesn’t, and so on.</p>
<p>I encourage you to read the article and the comments. This quote isn’t the only thing I don’t fully agree with, but it’s the one thing I’ll respond to a little from the article:</p>
<blockquote><p>There are only about three sensible reasons to learn C++ today that I can think of.</p></blockquote>
<p>There are other major reasons in addition to those, such as:</p>
<ul>
<li><em>Servicing</em>, which is harder when you depend on a runtime.</li>
<li><em>Testing</em>, since you lose the ability to test your entire application (compare doing all-static or mostly-static linking with having your application often be compiled/jitted for the first time on an end user’s machine).</li>
</ul>
<p>These aren’t bad things in themselves, just tradeoffs and reasons to prefer native code vs managed code depending on your application’s needs.</p>
<p>But even the three points John does mention are very broad reasons that apply often, especially the issue of control over memory layouts, to the point where I would say: <strong>In any language, if you are serious about performance you will be using arrays a lot (not “always,” just “a lot”). </strong>Some languages make that easier and give you much better control over layout in general and arrays in particular, while other languages/environments make it harder (possible! but harder) and you have to “opt out” or &#8220;work against&#8221; the language’s/runtime’s strong preference for pointer-chasing node-based data structures.</p>
<p>For more, please see also my April 2012 Lang.NEXT talk <strong><a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/-Not-Your-Father-s-C-">“(Not Your Father’s) C++”</a></strong>, especially the second half:</p>
<ul>
<li>From <strong>19:20</strong>, I try to contrast the <strong>value and tenets of C++ and of managed language/environments</strong>, including that each is making a legitimate and useful design choice.</li>
<li>From <strong>36:00</strong>, I try to address the question of: “<strong>can managed languages do essentially everything</strong> that’s interesting, so native C/C++ code should be really just for things like device drivers?”</li>
<li>From <strong>39:00</strong>, I talk about <strong>when each one is valuable and should be used</strong>, especially that if programmer time is your biggest cost, that’s what you should optimize for and it’s exactly what managed languages/environments are designed for.</li>
</ul>
<p>But again, I encourage you to read John’s article – <em>and the comments</em> – yourself. There’s an unusually high signal-to-noise ratio here.</p>
<p>It’s always nice to encounter a thoughtful balanced piece of writing, whether or not we agree with every detail. Thanks, John!</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2012/12/03/perspective-why-c-is-not-back/feed/</wfw:commentRss>
		<slash:comments>42</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="http://complextosimple.files.wordpress.com/2012/12/announcer_thumb.jpg" medium="image" />
	</item>
		<item>
		<title>&#8220;Strong&#8221; and &#8220;weak&#8221; hardware memory models</title>
		<link>https://herbsutter.com/2012/08/02/strong-and-weak-hardware-memory-models/</link>
				<comments>https://herbsutter.com/2012/08/02/strong-and-weak-hardware-memory-models/#comments</comments>
				<pubDate>Thu, 02 Aug 2012 11:26:37 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Hardware]]></category>
		<category><![CDATA[Java]]></category>
		<category><![CDATA[Talks & Events]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1590</guid>
				<description><![CDATA[In Welcome to the Jungle, I predicted that “weak” hardware memory models will disappear. This is true, and it’s happening before our eyes: x86 has always been considered a “strong” hardware memory model that supports sequentially consistent atomics efficiently. The other major architecture, ARM, recently announced that they are now adding strong memory ordering in [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>In <a href="https://herbsutter.com/welcome-to-the-jungle/">Welcome to the Jungle</a>, I predicted that “weak” hardware memory models will disappear. This is true, and it’s happening before our eyes:</p>
<ul>
<li>x86 has always been considered a “strong” hardware memory model that supports sequentially consistent atomics efficiently.</li>
<li>The other major architecture, ARM, recently announced that they are now adding strong memory ordering in ARMv8 with the new sequentially consistent <em>ldra </em>and <em>strl </em>instructions, as I predicted they would. (Actually, Hans Boehm and I influenced ARM in this direction, so it was an ever-so-slightly disingenuous prediction&#8230;)</li>
</ul>
<p>However, at least two people have been confused by what I meant by “weak” hardware memory models, so let me clarify what “weak” means – it means something different for hardware memory models and software memory models, so perhaps those aren’t the clearest terms to use.</p>
<p>By &#8220;weak <strong><em>(hardware)</em></strong> memory model&#8221; CPUs I mean specifically ones that do not natively support efficient sequentially consistent (SC) atomics, because on the <strong><em>software</em></strong> side programming languages have converged on &#8220;sequential consistency for data-race-free programs&#8221; (SC-DRF, roughly aka DRF0 or RCsc) as the default (C11, C++11) or only (Java 5+) supported software memory model for software. POWER and ARMv7 notoriously do not support SC atomics efficiently.</p>
<p>Hardware that supports only hardware memory models weaker than SC-DRF, <em>meaning that they do not support SC-DRF efficiently</em>, are permanently disadvantaged and will either become stronger or atrophy. As I mentioned specifically in the article, the two main current hardware architectures with what I called &#8220;weak&#8221; memory models were current ARM (ARMv7) and POWER:</p>
<ul>
<li>ARM recently announced ARMv8 which, as I predicted, is upgrading to SC acquire/release by adding new SC acquire/release instructions ldra and strl that are mandatory in both 32-bit and 64-bit mode. In fact, this is something of an industry first &#8212; ARMv8 is the first major CPU architecture to support SC acquire/release instructions directly like this. (Note: That’s for CPUs, but the roadmap for ARM GPUs is similar. ARM GPUs currently have a stronger memory model, namely fully SC; ARM has announced their GPU future roadmap has the GPUs fully coherent with the CPUs, and will likely add “SC load acquire” and “SC store release” to GPUs as well.)</li>
<li>It remains to be seen whether POWER will adapt similarly, or die out.</li>
</ul>
<p>Note that I&#8217;ve seen some people call x86 &#8220;weak&#8221;, but x86 has always been the poster child for a <strong><em>strong (hardware) </em></strong>memory model in all of our <strong><em>software</em></strong> memory model discussions for Java, C, and C++ during the 2000s. Therefore perhaps &#8220;weak&#8221; and &#8220;strong&#8221; are not useful terms if they mean different things to some people, and I&#8217;ve updated the WttJ text to make this clearer.</p>
<p>I will be discussing this in detail in my <a href="https://herbsutter.com/2012/06/29/cb-session-atomic-weapons-the-c11-memory-model-and-modern-hardware/">atomic&lt;&gt; Weapons</a> talk at C&amp;B next week, which I hope to make freely available online in the near future (as I do most of my talks). I’ll post a link on this blog when I can make it available online.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2012/08/02/strong-and-weak-hardware-memory-models/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Talk + panel online: &#8220;(Not Your Father&#8217;s) C++&#8221; + &#8220;Native Languages&#8221; Panel</title>
		<link>https://herbsutter.com/2012/04/12/talk-online-not-your-fathers-c-panel/</link>
				<comments>https://herbsutter.com/2012/04/12/talk-online-not-your-fathers-c-panel/#comments</comments>
				<pubDate>Fri, 13 Apr 2012 01:23:12 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Software Development]]></category>
		<category><![CDATA[Talks & Events]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1455</guid>
				<description><![CDATA[Last week at the Lang.NEXT 2012 conference in Redmond, I gave a 40-minute C++ talk and participated on a native languages panel. Both are now online at Channel 9. Here’s the 40-min C++ talk, taken from the C9 site: (Not Your Father’s) C++ Herb Sutter&#160; What makes ISO C++11 &#34;feel like a new language&#34;? What [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012"><img style="margin:10px 0 10px 10px;display:inline;float:right;" title="image" alt="image" align="right" src="https://herbsutter.files.wordpress.com/2012/04/image.png?w=360&#038;h=173" width="360" height="173" /></a>Last week at the <a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012">Lang.NEXT 2012 conference</a> in Redmond, I gave a 40-minute C++ talk and participated on a native languages panel. Both are now online at Channel 9.</p>
<p>Here’s the 40-min C++ talk, taken from the C9 site:</p>
<blockquote>
<p><strong><a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/-Not-Your-Father-s-C-">(Not Your Father’s) C++</a>        <br />Herb Sutter&#160; <br /></strong></p>
<p>What makes ISO C++11 &quot;feel like a new language&quot;? What things that we know about past C++ do we need to unlearn? Why is C++ designed the way it is – historically, and in C++11? Finally, what is the difference between managed and native languages anyway, and when is each applicable? This talk gives an overview and motivation of modern C++ and why it&#8217;s clean, safe, and fast – as clean to code in and as type-safe as any modern language, and more than ever the king of &quot;fast.&quot;</p>
</blockquote>
<p>And the panel (my favorite highlight is at <strong>24:00-28:00</strong>):</p>
<blockquote>
<p><strong><a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/Panel-Native-Languages">Lang.NEXT 2012 Expert Panel: Native Languages</a>        <br />Walter Bright, Robert Griesemer, Andrei Alexandrescu, Herb Sutter</strong></p>
<p>Native programming languages panel hosted by Martyn Lovell.</p>
</blockquote>
<p>I hope you enjoy them.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2012/04/12/talk-online-not-your-fathers-c-panel/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2012/04/image.png" medium="image">
			<media:title type="html">image</media:title>
		</media:content>
	</item>
		<item>
		<title>We want await! A C# talk that&#8217;s applicable to C++</title>
		<link>https://herbsutter.com/2012/04/06/we-want-await-a-c-talk-thats-applicable-to-c/</link>
				<comments>https://herbsutter.com/2012/04/06/we-want-await-a-c-talk-thats-applicable-to-c/#comments</comments>
				<pubDate>Sat, 07 Apr 2012 06:13:01 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Microsoft]]></category>
		<category><![CDATA[Talks & Events]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/?p=1450</guid>
				<description><![CDATA[A nice talk by Mads Torgersen just went live on Channel 9 about C#’s non-blocking Task&#60;T&#62;.ContinueWith() library feature and await language feature, which are a big hit in C# (and Visual Basic) for writing highly concurrent code that looks pretty much just like sequential code. Mads is one of the designers of await. If you’re [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>A <a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/Language-Support-for-Asynchronous-Programming">nice talk by Mads Torgersen just went live on Channel 9</a> about C#’s non-blocking <em>Task&lt;T&gt;.ContinueWith()</em> library feature and <em>await</em> language feature, which are a big hit in C# (and Visual Basic) for writing highly concurrent code that looks pretty much just like sequential code. Mads is one of the designers of <em>await</em>.</p>
<p>If you’re a C++ programmer, you may be interested in this because I’ve worked to have these very features be offered as proposals for ISO C++, just with a few naming tweaks like renaming <em>Task&lt;T&gt;.ContinueWith()</em> to <em>std::future&lt;T&gt;::then()</em>. They were initially presented at the recent Kona meeting in February, and we’ll dig deeper next month at the special ISO C++ study group meeting on concurrency and parallelism.</p>
<p>Here’s the talk link and abstract:</p>
<blockquote>
<h3><a href="http://channel9.msdn.com/Events/Lang-NEXT/Lang-NEXT-2012/Language-Support-for-Asynchronous-Programming">Language Support for Asynchronous Programming</a></h3>
<p><strong>Mads Torgersen</strong></p>
<p>Asynchronous programming is what the doctor usually orders for unresponsive client apps and for services with thread-scaling issues. This usually means a bleak departure from the imperative programming constructs we know and love into a spaghetti hell of callbacks and signups. C# and VB are putting an end to that, reinstating all your tried-and-true control structures on top of a future-based model of asynchrony.</p>
</blockquote>
<p>While we were chatting after the talk, I managed to gently twist Mads’ arm and he has graciously agreed to come to the May 7-9 ISO C++ parallelism study group special meeting to present this to the committee members in detail and answer questions about <em>await</em>’s design and C# users’ experience with it in production code, which will help the committee decide whether or not this is something they want to pursue for ISO C++.</p>
<p>I hope you enjoy the talk. While at Lang.NEXT, I also participated in a panel and gave a C++ talk but those sessions aren’t live yet; I’ll post links once they are.</p>
<p><strong></strong></p>
<p><strong>Trivia:</strong> If you noticed the Romanian accent in the first question from the audience, it’s because it came from Andrei Alexandrescu, who was sitting beside Walter Bright, both of whom were two of the other speakers at the conference. It was fun to be in a room full of language designers and implementers sharing notes about each other’s languages and experience.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2012/04/06/we-want-await-a-c-talk-thats-applicable-to-c/feed/</wfw:commentRss>
		<slash:comments>20</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Garbage Collection Synopsis, and C++</title>
		<link>https://herbsutter.com/2011/10/25/garbage-collection-synopsis-and-c/</link>
				<comments>https://herbsutter.com/2011/10/25/garbage-collection-synopsis-and-c/#comments</comments>
				<pubDate>Tue, 25 Oct 2011 23:44:51 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Software Development]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2011/10/25/garbage-collection-synopsis-and-c/</guid>
				<description><![CDATA[In response to my note about John McCarthy’s inventing automatic (non ref-counted) garbage collection, rosen4obg asked: OK, GC was invented half a century ago. When it is going to land in the C++ world? Here’s a short but detailed answer, which links to illuminating reading and videos. The Three Kinds of GC The three major [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;float:right;padding-top:0;border:0;" title="Insert your favorite &quot;stop the world&quot; joke here." src="https://herbsutter.files.wordpress.com/2011/10/image2.png?w=175&#038;h=244" alt="Insert your favorite &quot;stop the world&quot; joke here." width="175" height="244" align="right" border="0" /></p>
<p>In response to my <a href="https://herbsutter.com/2011/10/25/john-mccarthy/">note about John McCarthy’s inventing automatic (non ref-counted) garbage collection</a>, rosen4obg asked:</p>
<blockquote><p>OK, GC was invented half a century ago. When it is going to land in the C++ world?</p></blockquote>
<p>Here’s a short but detailed answer, which links to illuminating reading and videos.</p>
<h3>The Three Kinds of GC</h3>
<p>The three major families of garbage collection are:</p>
<ol>
<li>Reference counting.</li>
<li>Mark-sweep (aka non-moving) collectors, where objects are collected but live objects don&#8217;t move. This is what McCarthy first invented.</li>
<li>Mark-compact (aka moving) collectors, where live objects are moved together to make allocated memory more compact. Note that doing this involves updating pointers&#8217; values on the fly. This category includes semispace collectors as well as the more efficient modern ones like the .NET CLR&#8217;s that don&#8217;t use up half your memory or address space.</li>
</ol>
<p>When I say &#8220;automatic GC&#8221; I mean #2 or #3.</p>
<h3>GC and C++</h3>
<p>C++ has always supported #1 well via reference counted smart pointers. Those are now standard in C++11 in the form of unique_ptr, shared_ptr, weak_ptr. C++98 had auto_ptr, but it was never great and has been deprecated.</p>
<p>C++ has long supported #2, but less formally because the products were nonstandard, conservative, and not as portable. The major prior art is the Boehm (later Great Circle and Symantec) mark-sweep garbage collector. The new C++11 standard has just added a minimal GC ABI to more formally bless such non-moving collectors; see <a href="http://www2.research.att.com/~bs/C++0xFAQ.html#gc-abi">Stroustrup&#8217;s GC FAQ</a> for more.</p>
<p>C++ cannot support #3 without at least a new pointer type, because C/C++ pointer values are required to be stable (not change their values), so that you can cast them to an int and back, or write them to a file and back; this is why we created the ^ pointer type for C++/CLI which can safely point into #3-style compacting GC heaps. See section 3.3 of my paper <a href="http://www.gotw.ca/publications/C++CLIRationale.pdf">A Design Rationale for C++/CLI</a> for more rationale about ^ and gcnew.</p>
<h3>Other GC Resources</h3>
<p>For a wonderful 57-minute conversation on garbage collection by one of the world&#8217;s top GC experts, run don&#8217;t walk to the <a href="http://channel9.msdn.com/Shows/Going+Deep/E2E-Erik-Meijer-and-Patrick-Dussud-Inside-Garbage-Collection">C9 “Inside Garbage Collection” interview with Patrick Dussud</a>. Patrick wrote the .NET CLR&#8217;s GC, and it was far from his first; before that he had deep experience implementing Lisp runtimes, and I&#8217;m sure has forgotten more about GC than I&#8217;ll ever know. He&#8217;s also a great guy to work with.</p>
<p>For a great book on GC, I love <a href="http://www.amazon.com/Garbage-Collection-Algorithms-Automatic-Management/dp/0471941484"><em>Garbage Collection</em> by Jones and Lins</a>.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2011/10/25/garbage-collection-synopsis-and-c/feed/</wfw:commentRss>
		<slash:comments>34</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2011/10/image2.png" medium="image">
			<media:title type="html">Insert your favorite &#034;stop the world&#034; joke here.</media:title>
		</media:content>
	</item>
		<item>
		<title>My C++ and Beyond Intro: C++ Renaissance</title>
		<link>https://herbsutter.com/2011/09/07/my-c-and-beyond-intro-c-renaissance/</link>
				<comments>https://herbsutter.com/2011/09/07/my-c-and-beyond-intro-c-renaissance/#comments</comments>
				<pubDate>Wed, 07 Sep 2011 22:00:01 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Java]]></category>
		<category><![CDATA[Microsoft]]></category>
		<category><![CDATA[Software Development]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=627</guid>
				<description><![CDATA[Channel 9 has just posted a recording of my intro talk at C++ and Beyond 2011 last month in Banff. Here&#8217;s the link: C++ and Beyond 2011: Why C++. It&#8217;s a keynote-y talk, not a technical talk, but we felt it was important to address an important trend involving the language. The goal is to share a [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="https://herbsutter.files.wordpress.com/2011/09/why-c++.png"><img data-attachment-id="660" data-permalink="https://herbsutter.com/2011/09/07/my-c-and-beyond-intro-c-renaissance/capture-3/" data-orig-file="https://herbsutter.files.wordpress.com/2011/09/capture2.png" data-orig-size="508,282" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="Why C++" data-image-description="" data-medium-file="https://herbsutter.files.wordpress.com/2011/09/capture2.png?w=300&#038;h=166" data-large-file="https://herbsutter.files.wordpress.com/2011/09/capture2.png?w=500" class="alignright size-medium wp-image-660" title="Why C++" src="https://herbsutter.files.wordpress.com/2011/09/capture2.png?w=300&#038;h=166" alt="Why C++" width="300" height="166" srcset="https://herbsutter.files.wordpress.com/2011/09/capture2.png?w=300&amp;h=166 300w, https://herbsutter.files.wordpress.com/2011/09/capture2.png?w=150&amp;h=83 150w, https://herbsutter.files.wordpress.com/2011/09/capture2.png 508w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Channel 9 has just posted a recording of my intro talk at <a href="http://cppandbeyond.com">C++ and Beyond 2011</a> last month in Banff. Here&#8217;s the link: <strong><a href="http://channel9.msdn.com/posts/C-and-Beyond-2011-Herb-Sutter-Why-C" target="_blank">C++ and Beyond 2011: Why C++</a>.</strong></p>
<p>It&#8217;s a keynote-y talk, not a technical talk, but we felt it was important to address an important trend involving the language. The goal is to share a perspective and rationale for why of late there&#8217;s such a resurgence of interest in C++ &#8212; both across the industry, and within Microsoft.</p>
<p>Whether or not you agree with the perspective and rationale, I hope you enjoy it!</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2011/09/07/my-c-and-beyond-intro-c-renaissance/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>

		<media:content url="https://herbsutter.files.wordpress.com/2011/09/capture2.png?w=300" medium="image">
			<media:title type="html">Why C++</media:title>
		</media:content>
	</item>
		<item>
		<title>Interview on Channel 9</title>
		<link>https://herbsutter.com/2011/05/04/interview-on-channel-9-2/</link>
				<comments>https://herbsutter.com/2011/05/04/interview-on-channel-9-2/#comments</comments>
				<pubDate>Wed, 04 May 2011 23:33:09 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Microsoft]]></category>
		<category><![CDATA[Software Development]]></category>
		<category><![CDATA[Talks & Events]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=561</guid>
				<description><![CDATA[Channel 9 just posted a new interview with me about ISO C++0x, C++&#8217;s place in the modern world, and all things C++. The topics we talked about ranged pretty widely, as you can see from the questions below. Here&#8217;s the blurb as posted on Channel 9 with links to specific questions in the interview. Enjoy. Herb [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Channel 9 just posted a new <a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11">interview with me</a> about ISO C++0x, C++&#8217;s place in the modern world, and all things C++. The topics we talked about ranged pretty widely, as you can see from the questions below.</p>
<p>Here&#8217;s the blurb as posted on Channel 9 with links to specific questions in the interview. Enjoy.</p>
<p>Herb</p>
<blockquote><p>I was lucky enough to catch up with <a href="https://herbsutter.com/" target="_blank">Herb Sutter</a> not too long after the <a href="https://herbsutter.com/2011/03/25/we-have-fdis-trip-report-march-2011-c-standards-meeting/" target="_blank">FDIS announcement</a> (Final Draft International Standard is complete).</p>
<p>As usual when talking to Herb, the conversation is all about C++ (well, we <em>do</em> talk about C# for a little while, but in the context of C++. Why? Tune in&#8230;).</p>
<p>See below for the specific questions that were asked. You can simply click on a link to move directly to that point in the conversation. I do, however, strongly recommend that <em>you watch the entire thing</em>. I also recommend that you don&#8217;t get used to this level of categorization in my videos (it takes a fair amount of time to do this sort of thing, so enjoy the times when I actually do this, but don&#8217;t expect me to do this all of the time).</p>
<p>It&#8217;s always great to talk to Herb and get a glimpse of what goes on in the C++ Standards Committee (which Herb chairs). In this specific conversation, it&#8217;s uplifting to see how excited Herb is for the future of one of the world&#8217;s most capable and widely used general purpose programming languages. C++ is a modern programming language for power and performance, but it&#8217;s also a highly abstracted general purpose language for building user mode applications, mobile apps, etc. The amazing part is how C++ can provide rich general programming abstractions and also ensure that your code can run at machine speeds. We talk about this, of course.</p>
<p>Tune in. Learn. Go native!</p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=1m37s">1:37 -&gt; What were the goals of the C++0x standard, at a high level?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=2m40s">2:40 -&gt; Language and Library abstractions and performance (how high can you go and still be fast as possible?)&#8230;</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=5m23s">5:23 -&gt; C++ as an application development language (in addition to the traditional C++ is a systems programming language meme)&#8230;</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=7m17s">07:17 -&gt; C++0x or can we now call it C++11?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=9m21s">09:21 -&gt; Standards committees and real world user representation&#8230;</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=10m39s">10:39 -&gt; Who comes up with the new features that get standardized (or not&#8230;)?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=13m1s">13:01 -&gt; What were the goals of the C++0x standard (non-canned answer)?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=14m21s">14:21 -&gt; What does Bjarne mean by C++0x being a better C++ for novice programmers?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=15m51s">15:51 -&gt; Why can&#8217;t C++ look more like C#?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=18m50s">18:50 -&gt; At the end of the day, everything(in terms of programmer-controlled computing) boils down to memory, right?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=23m12s">23:12 -&gt; What are some of the most significant new features in C++0x?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=25m5s">25:05 -&gt; What can VC++ developers expect to see in terms of C++0x implementation in Visual C++ next?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=27m9s">27:09 -&gt; C++ and type safety&#8230;</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=29m5s">29:05 -&gt; C++0x and backwards compatibility: any big breaking changes?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=34m16s">34:16 -&gt; C++0x in the Standard Library&#8230;</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=37m1s">37:01 -&gt; Any thinking in the Committee about doing more frequent experimental releases C++?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=39m4s">39:04 -&gt; Are their features that didn&#8217;t make it into the standard that you really wanted to be standardized?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=41m45s">41:45 -&gt; Are you comfortable with C++&#8217;s current state? Is it modern enough?</a></p>
<p><a href="http://channel9.msdn.com/Shows/Going+Deep/Conversation-with-Herb-Sutter-Perspectives-on-Modern-C0x11#time=43m22s">43:22 -&gt; Conclusion (or Charles doesn&#8217;t end the conversation when his farewell begins &#8211; where does it go from there? )</a></p></blockquote>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2011/05/04/interview-on-channel-9-2/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Interview on Channel 9</title>
		<link>https://herbsutter.com/2011/01/14/interview-on-channel-9/</link>
				<comments>https://herbsutter.com/2011/01/14/interview-on-channel-9/#comments</comments>
				<pubDate>Sat, 15 Jan 2011 04:08:24 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Java]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=516</guid>
				<description><![CDATA[Over the holidays, Erik Meijer interviewed me on Channel 9. We covered a wide variety of topics, mostly centered on C++ with some straying into C#/Java/Haskell/Clojure/Erlang, but ranging from auto and closures to why (not?) derive future&#60;T&#62; from T, and from what the two most important problems in parallelism are in 2011 to why and how [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Over the holidays, Erik Meijer <a href="http://channel9.msdn.com/Shows/Going+Deep/E2E-Herb-Sutter-and-Erik-Meijer-Perspectives-on-C">interviewed me on Channel 9</a>. We covered a wide variety of topics, mostly centered on C++ with some straying into C#/Java/Haskell/Clojure/Erlang, but ranging from auto and closures to why (not?) derive future&lt;T&gt; from T, and from what the two most important problems in parallelism are in 2011 to why and how to taste new programming languages regularly. I think it turned out well. Enjoy!</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2011/01/14/interview-on-channel-9/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>PDC Languages Panel and (Shortened) Lambdas Talk</title>
		<link>https://herbsutter.com/2010/10/30/pdc-languages-panel-andshortened-lambdas-talk/</link>
				<comments>https://herbsutter.com/2010/10/30/pdc-languages-panel-andshortened-lambdas-talk/#comments</comments>
				<pubDate>Sun, 31 Oct 2010 00:03:43 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Microsoft]]></category>
		<category><![CDATA[Talks & Events]]></category>

		<guid isPermaLink="false">http://herbsutter.com/?p=481</guid>
				<description><![CDATA[At PDC 2010 this week, I participated in a panel and gave one talk. Both are now online for live on-demand viewing. Note: The talks should work on any browser. They do not require Silverlight. If you get a message that Silverlight is needed, it just made a mistake in auto-detecting your browser (I&#8217;m told this happens [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>At PDC 2010 this week, I participated in a panel and gave one talk. Both are now online for live on-demand viewing.</p>
<p><strong>Note: The talks should work on any browser.</strong> They <span style="text-decoration:underline;">do not</span> require Silverlight. If you get a message that Silverlight is needed, it just made a mistake in auto-detecting your browser (I&#8217;m told this happens with Firefox sometimes), so just click on one of the alternate formats and <a href="http://en.wikipedia.org/wiki/Bob's_your_uncle">Bob&#8217;s your uncle</a>.</p>
<p>Here they are:</p>
<p><strong><a href="http://bit.ly/bU23S2">1. Languages Panel</a> (update: <a href="http://channel9.msdn.com/Events/PDC/PDC10/FT11">new link</a>)</strong></p>
<p>I got to participate again this year on a fun panel on programming languages and software development, together with fellow panelists <a href="http://www.microsoft.com/presspass/exec/techfellow/hejlsberg/default.mspx">Anders Hejlsberg</a> (creator of Turbo Pascal, Delphi, and C#), <a href="http://bracha.org/Site/Home.html">Gilad Bracha</a> (of Java and Newspeak fame), and <a href="http://www.caplet.com/">Mark S. Miller</a> (of Ecmascript and E and general security fame). Our esteemed moderator, <a href="http://research.microsoft.com/en-us/um/people/emeijer/">Erik Meijer</a>, is one of the original designers of LINQ in C# and has contributed heavily to many other languages.</p>
<p><strong><a href="http://bit.ly/dcJcXN">2. Lambdas, Lambdas Everywhere</a> (update: <a href="http://channel9.msdn.com/Events/PDC/PDC10/FT13">new link</a>)</strong></p>
<p>This is a shortened version of the full lambdas talk I gave at C&amp;B on Wednesday, and will be giving again at <a href="http://cppandbeyond.com/">C++ and Beyond Encore</a> this December. To get the full talk, come to C&amp;B Encore&#8230; but to get a good chunk of it, check out this version online.</p>
<p>Note: Just before the talk, I went around the room to chat with individual attendees, and discovered that a lot of the audience members were C# programmers who didn&#8217;t realize this was a C++ talk. Just before we went live, I spoke up to the room and alerted everywhere about that, and nearly everyone stayed anyway, which was nice. But if you wonder why I mentioned C# lambdas a number of times to this audience, that&#8217;s why.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2010/10/30/pdc-languages-panel-andshortened-lambdas-talk/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Effective Concurrency: Prefer Using Active Objects Instead of Naked Threads</title>
		<link>https://herbsutter.com/2010/07/12/effective-concurrency-prefer-using-active-objects-instead-of-naked-threads/</link>
				<comments>https://herbsutter.com/2010/07/12/effective-concurrency-prefer-using-active-objects-instead-of-naked-threads/#comments</comments>
				<pubDate>Mon, 12 Jul 2010 20:22:50 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Software Development]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2010/07/12/effective-concurrency-prefer-using-active-objects-instead-of-naked-threads/</guid>
				<description><![CDATA[This month’s Effective Concurrency column, “Prefer Using Active Objects Instead of Naked Threads,” is now live on DDJ’s website. From the article: … Active objects dramatically improve our ability to reason about our thread&#8217;s code and operation by giving us higher-level abstractions and idioms that raise the semantic level of our program and let us [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>This month’s <strong>Effective Concurrency</strong> column, “<a href="http://www.drdobbs.com/go-parallel/article/showArticle.jhtml;jsessionid=JM3XD1KM22SCRQE1GHPSKH4ATMY32JVN?articleID=225700095">Prefer Using Active Objects Instead of Naked Threads</a>,” is now live on DDJ’s website.</p>
<p>From the article:</p>
<blockquote>
<p>… Active objects dramatically improve our ability to reason about our thread&#8217;s code and operation by giving us higher-level abstractions and idioms that raise the semantic level of our program and let us express our intent more directly. As with all good patterns, we also get better vocabulary to talk about our design. Note that active objects aren&#8217;t a novelty: UML and various libraries have provided support for active classes. Some actor-based languages already have variations of this pattern baked into the language itself; but fortunately, we aren&#8217;t limited to using only such languages to get the benefits of active objects. </p>
<p>This article will show how to implement the pattern, including a reusable helper to automate the common parts, in any of the popular mainstream languages and threading environments, including C++, C#/.NET, Java, and C/Pthreads.</p>
</p>
</blockquote>
<p>I hope you enjoy it. Finally, here are links to previous Effective Concurrency columns:</p>
<blockquote>
<p>1 <a href="http://www.ddj.com/hpc-high-performance-computing/200001985">The Pillars of Concurrency</a> (Aug 2007) </p>
<p>2 <a href="http://www.ddj.com/hpc-high-performance-computing/201202924">How Much Scalability Do You Have or Need?</a> (Sep 2007) </p>
<p>3 <a href="http://ddj.com/cpp/201804238">Use Critical Sections (Preferably Locks) to Eliminate Races</a> (Oct 2007) </p>
<p>4 <a href="http://www.ddj.com/hpc-high-performance-computing/202401098">Apply Critical Sections Consistently</a> (Nov 2007) </p>
<p>5 <a href="http://ddj.com/architect/202802983">Avoid Calling Unknown Code While Inside a Critical Section</a> (Dec 2007) </p>
<p>6 <a href="http://www.ddj.com/hpc-high-performance-computing/204801163">Use Lock Hierarchies to Avoid Deadlock</a> (Jan 2008) </p>
<p>7 <a href="http://www.ddj.com/cpp/205900309">Break Amdahl’s Law!</a> (Feb 2008) </p>
<p>8 <a href="http://www.ddj.com/hpc-high-performance-computing/206100542">Going Superlinear</a> (Mar 2008) </p>
<p>9 <a href="http://www.ddj.com/hpc-high-performance-computing/206903306">Super Linearity and the Bigger Machine</a> (Apr 2008) </p>
<p>10 <a href="http://ddj.com/architect/207100682">Interrupt Politely</a> (May 2008) </p>
<p>11 <a href="http://ddj.com/architect/208200273">Maximize Locality, Minimize Contention</a> (Jun 2008) </p>
<p>12 <a href="http://www.ddj.com/hpc-high-performance-computing/208801371">Choose Concurrency-Friendly Data Structures</a> (Jul 2008) </p>
<p>13 <a href="http://www.ddj.com/hpc-high-performance-computing/209900973">The Many Faces of Deadlock</a> (Aug 2008) </p>
<p>14 <a href="http://www.ddj.com/cpp/210600279">Lock-Free Code: A False Sense of Security</a> (Sep 2008) </p>
<p>15 <a href="http://www.ddj.com/hpc-high-performance-computing/210604448">Writing Lock-Free Code: A Corrected Queue</a> (Oct 2008) </p>
<p>16 <a href="http://www.ddj.com/cpp/211601363">Writing a Generalized Concurrent Queue</a> (Nov 2008) </p>
<p>17 <a href="http://www.ddj.com/cpp/211800538">Understanding Parallel Performance</a> (Dec 2008)</p>
<p>18 <a href="http://www.ddj.com/hpc-high-performance-computing/212201163">Measuring Parallel Performance: Optimizing a Concurrent Queue</a> (Jan 2009)</p>
<p>19 <a href="http://www.ddj.com/hpc-high-performance-computing/212701484">volatile vs. volatile</a> (Feb 2009)</p>
<p>20 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=214100002">Sharing Is the Root of All Contention</a> (Mar 2009)</p>
<p>21 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=215900465">Use Threads Correctly = Isolation + Asynchronous Messages</a> (Apr 2009)</p>
<p>22 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=216500409">Use Thread Pools Correctly: Keep Tasks Short and Nonblocking</a> (Apr 2009)</p>
<p>23 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217500206">Eliminate False Sharing</a> (May 2009)</p>
<p>24 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217801299">Break Up and Interleave Work to Keep Threads Responsive</a> (Jun 2009)</p>
<p>25 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=218401447">The Power of “In Progress”</a> (Jul 2009)</p>
<p>26 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=219200099">Design for Manycore Systems</a> (Aug 2009)</p>
<p>27 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=220600388">Avoid Exposing Concurrency – Hide It Inside Synchronous Methods</a> (Oct 2009)</p>
<p>28 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=221601309">Prefer structured lifetimes – local, nested, bounded, deterministic</a> (Nov 2009)</p>
<p>29 <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=222301165">Prefer Futures to Baked-In “Async APIs”</a> (Jan 2010)</p>
<p>30 <a href="http://www.drdobbs.com/go-parallel/article/showArticle.jhtml?articleID=224701827">Associate Mutexes with Data to Prevent Races</a> (May 2010)</p>
<p>31 <a href="http://www.drdobbs.com/go-parallel/article/showArticle.jhtml;jsessionid=JM3XD1KM22SCRQE1GHPSKH4ATMY32JVN?articleID=225700095">Prefer Using Active Objects Instead of Naked Threads</a> (June 2010)</p>
</blockquote>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2010/07/12/effective-concurrency-prefer-using-active-objects-instead-of-naked-threads/feed/</wfw:commentRss>
		<slash:comments>8</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Effective Concurrency: Prefer Futures to Baked-In &#8220;Async APIs&#8221;</title>
		<link>https://herbsutter.com/2010/01/17/effective-concurrency-prefer-futures-to-baked-in-async-apis/</link>
				<comments>https://herbsutter.com/2010/01/17/effective-concurrency-prefer-futures-to-baked-in-async-apis/#comments</comments>
				<pubDate>Mon, 18 Jan 2010 02:25:00 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Software Development]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2010/01/18/effective-concurrency-prefer-futures-to-baked-in-async-apis/</guid>
				<description><![CDATA[This month’s Effective Concurrency column, Prefer Futures to Baked-In “Async APIs”, is now live on DDJ’s website. From the article: When designing concurrent APIs, separate &#34;what&#34; from &#34;how&#34; Let&#8217;s say you have an existing synchronous API function [called DoSomething]… Because DoSomething could take a long time to execute (whether it keeps a CPU core busy [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>This month’s <strong>Effective Concurrency</strong> column, <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=222301165">Prefer Futures to Baked-In “Async APIs”</a>, is now live on DDJ’s website.</p>
<p>From the article:</p>
<blockquote>
<p><em>When designing concurrent APIs, separate &quot;what&quot; from &quot;how&quot;</em></p>
<p>Let&#8217;s say you have an existing synchronous API function [called <strong>DoSomething</strong>]… Because <strong>DoSomething </strong>could take a long time to execute (whether it keeps a CPU core busy or not), and might be independent of other work the caller is doing, naturally the caller might want to execute <strong>DoSomething </strong>asynchronously. … </p>
<p>The question is, how should we enable that? There is a simple and correct answer, but because many interfaces have opted for a more complex answer let&#8217;s consider that one first. </p>
</blockquote>
<p>I hope you enjoy it. Finally, here are links to previous Effective Concurrency columns:</p>
<blockquote>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/200001985">The Pillars of Concurrency</a> (Aug 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/201202924">How Much Scalability Do You Have or Need?</a> (Sep 2007) </p>
<p><a href="http://ddj.com/cpp/201804238">Use Critical Sections (Preferably Locks) to Eliminate Races</a> (Oct 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/202401098">Apply Critical Sections Consistently</a> (Nov 2007) </p>
<p><a href="http://ddj.com/architect/202802983">Avoid Calling Unknown Code While Inside a Critical Section</a> (Dec 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/204801163">Use Lock Hierarchies to Avoid Deadlock</a> (Jan 2008) </p>
<p><a href="http://www.ddj.com/cpp/205900309">Break Amdahl’s Law!</a> (Feb 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206100542">Going Superlinear</a> (Mar 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206903306">Super Linearity and the Bigger Machine</a> (Apr 2008) </p>
<p><a href="http://ddj.com/architect/207100682">Interrupt Politely</a> (May 2008) </p>
<p><a href="http://ddj.com/architect/208200273">Maximize Locality, Minimize Contention</a> (Jun 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/208801371">Choose Concurrency-Friendly Data Structures</a> (Jul 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/209900973">The Many Faces of Deadlock</a> (Aug 2008) </p>
<p><a href="http://www.ddj.com/cpp/210600279">Lock-Free Code: A False Sense of Security</a> (Sep 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/210604448">Writing Lock-Free Code: A Corrected Queue</a> (Oct 2008) </p>
<p><a href="http://www.ddj.com/cpp/211601363">Writing a Generalized Concurrent Queue</a> (Nov 2008) </p>
<p><a href="http://www.ddj.com/cpp/211800538">Understanding Parallel Performance</a> (Dec 2008)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212201163">Measuring Parallel Performance: Optimizing a Concurrent Queue</a> (Jan 2009)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212701484">volatile vs. volatile</a> (Feb 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=214100002">Sharing Is the Root of All Contention</a> (Mar 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=215900465">Use Threads Correctly = Isolation + Asynchronous Messages</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=216500409">Use Thread Pools Correctly: Keep Tasks Short and Nonblocking</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217500206">Eliminate False Sharing</a> (May 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217801299">Break Up and Interleave Work to Keep Threads Responsive</a> (Jun 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=218401447">The Power of “In Progress”</a> (Jul 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=219200099">Design for Manycore Systems</a> (Aug 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=220600388">Avoid Exposing Concurrency – Hide It Inside Synchronous Methods</a> (Oct 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=221601309">Prefer structured lifetimes – local, nested, bounded, deterministic</a> (Nov 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=222301165">Prefer Futures to Baked-In “Async APIs”</a> (Jan 2010)</p>
</blockquote>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2010/01/17/effective-concurrency-prefer-futures-to-baked-in-async-apis/feed/</wfw:commentRss>
		<slash:comments>11</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Effective Concurrency: Avoid Exposing Concurrency &#8211; Hide It Inside Synchronous Methods</title>
		<link>https://herbsutter.com/2009/10/12/effective-concurrency-avoid-exposing-concurrency-hide-it-inside-synchronous-methods/</link>
				<comments>https://herbsutter.com/2009/10/12/effective-concurrency-avoid-exposing-concurrency-hide-it-inside-synchronous-methods/#comments</comments>
				<pubDate>Mon, 12 Oct 2009 23:59:53 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Effective Concurrency]]></category>
		<category><![CDATA[Software Development]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2009/10/12/effective-concurrency-avoid-exposing-concurrency-hide-it-inside-synchronous-methods/</guid>
				<description><![CDATA[This month’s Effective Concurrency column, Avoid Exposing Concurrency – Hide It Inside Synchronous Methods, is now live on DDJ’s website. From the article: You have a mass of existing code and want to add concurrency. Where do you start? Let’s say you need to migrate existing code to take advantage of concurrent execution or scale [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>This month’s <strong>Effective Concurrency</strong> column, <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=220600388">Avoid Exposing Concurrency – Hide It Inside Synchronous Methods</a>, is now live on DDJ’s website.</p>
<p>From the article:</p>
<blockquote>
<p><em>You have a mass of existing code and want to add concurrency. Where do you start?</em></p>
<p>Let’s say you need to migrate existing code to take advantage of concurrent execution or scale on parallel hardware. In that case, you’ll probably find yourself in one of these two common situations, which are actually more similar than different:</p>
<ul>
<li>Migrating an application: You’re an application developer, and you want to migrate your existing synchronous application to be able to benefit from concurrency.</li>
<li>Migrating a library or framework: You’re a developer on a team that produces a library or framework used by other teams or external customers, and you want to let the library take advantage of concurrency on behalf of the application without requiring application code rewrites.</li>
</ul>
<p>You have a mountain of opportunities and obstacles before you. Where do you start?</p>
</blockquote>
<p>I hope you enjoy it. Finally, here are links to previous Effective Concurrency columns:</p>
<blockquote>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/200001985">The Pillars of Concurrency</a> (Aug 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/201202924">How Much Scalability Do You Have or Need?</a> (Sep 2007) </p>
<p><a href="http://ddj.com/cpp/201804238">Use Critical Sections (Preferably Locks) to Eliminate Races</a> (Oct 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/202401098">Apply Critical Sections Consistently</a> (Nov 2007) </p>
<p><a href="http://ddj.com/architect/202802983">Avoid Calling Unknown Code While Inside a Critical Section</a> (Dec 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/204801163">Use Lock Hierarchies to Avoid Deadlock</a> (Jan 2008) </p>
<p><a href="http://www.ddj.com/cpp/205900309">Break Amdahl’s Law!</a> (Feb 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206100542">Going Superlinear</a> (Mar 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206903306">Super Linearity and the Bigger Machine</a> (Apr 2008) </p>
<p><a href="http://ddj.com/architect/207100682">Interrupt Politely</a> (May 2008) </p>
<p><a href="http://ddj.com/architect/208200273">Maximize Locality, Minimize Contention</a> (Jun 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/208801371">Choose Concurrency-Friendly Data Structures</a> (Jul 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/209900973">The Many Faces of Deadlock</a> (Aug 2008) </p>
<p><a href="http://www.ddj.com/cpp/210600279">Lock-Free Code: A False Sense of Security</a> (Sep 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/210604448">Writing Lock-Free Code: A Corrected Queue</a> (Oct 2008) </p>
<p><a href="http://www.ddj.com/cpp/211601363">Writing a Generalized Concurrent Queue</a> (Nov 2008) </p>
<p><a href="http://www.ddj.com/cpp/211800538">Understanding Parallel Performance</a> (Dec 2008)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212201163">Measuring Parallel Performance: Optimizing a Concurrent Queue</a> (Jan 2009)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212701484">volatile vs. volatile</a> (Feb 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=214100002">Sharing Is the Root of All Contention</a> (Mar 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=215900465">Use Threads Correctly = Isolation + Asynchronous Messages</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=216500409">Use Thread Pools Correctly: Keep Tasks Short and Nonblocking</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217500206">Eliminate False Sharing</a> (May 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217801299">Break Up and Interleave Work to Keep Threads Responsive</a> (Jun 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=218401447">The Power of “In Progress”</a> (Jul 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=219200099">Design for Manycore Systems</a> (Aug 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=220600388">Avoid Exposing Concurrency – Hide It Inside Synchronous Methods</a> (Oct 2009)</p>
</blockquote>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2009/10/12/effective-concurrency-avoid-exposing-concurrency-hide-it-inside-synchronous-methods/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>VS2010 Beta 1 Now Available</title>
		<link>https://herbsutter.com/2009/05/20/vs2010-beta-1-now-available/</link>
				<comments>https://herbsutter.com/2009/05/20/vs2010-beta-1-now-available/#comments</comments>
				<pubDate>Thu, 21 May 2009 00:43:20 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2009/05/20/vs2010-beta-1-now-available/</guid>
				<description><![CDATA[For those of you who are interested in using or trying Microsoft development tools, I’m happy to report that Visual Studio 2010 Beta 1 is now available. If you’re interested in: concurrency and parallel computing, check out the new concurrency runtime (ConcRT) that implements efficient work stealing for scalable code, the Asynchronous Agents Library and [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>For those of you who are interested in using or trying Microsoft development tools, I’m happy to report that <a href="http://msdn.microsoft.com/en-us/netframework/dd582936.aspx">Visual Studio 2010 Beta 1</a> is now available.</p>
<p>If you’re interested in:</p>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/dd504870(VS.100).aspx"><strong>concurrency and parallel computing</strong></a>, check out the new concurrency runtime (ConcRT) that implements efficient work stealing for scalable code, the <a href="http://msdn.microsoft.com/en-us/library/dd492627(VS.100).aspx">Asynchronous Agents Library</a> and the <a href="http://msdn.microsoft.com/en-us/library/dd492418(VS.100).aspx">Parallel Patterns Library (PPL)</a> for C++, and the <a href="http://msdn.microsoft.com/en-us/library/dd460717(VS.100).aspx">Task Parallel Library (TPL)</a> and <a href="http://msdn.microsoft.com/en-us/library/dd460688(VS.100).aspx">Parallel LINQ (PLINQ)</a> for .NET. And some nifty concurrency debugging and profiling tools, too. </li>
<li><strong><a href="http://msdn.microsoft.com/en-us/library/dd465215(VS.100).aspx">C++0x features</a></strong>, check out the <a href="http://msdn.microsoft.com/en-us/library/dd293608(VS.100).aspx">lambda functions</a> (my fave), move-semantic <a href="http://msdn.microsoft.com/en-us/library/dd293668(VS.100).aspx">rvalue references</a>, the new <a href="http://msdn.microsoft.com/en-us/library/6k3ybftz(VS.100).aspx">auto</a>, its good friend <a href="http://msdn.microsoft.com/en-us/library/dd537655(VS.100).aspx">decltype</a>, and the ever-helpful <a href="http://msdn.microsoft.com/en-us/library/dd293588(VS.100).aspx">static_assert</a>. </li>
<li><strong>functional programming in VS</strong>, enjoy the <a href="http://msdn.microsoft.com/en-us/library/dd553242(VS.100).aspx">F# programming language</a>. </li>
</ul>
<p>Remember this is just a beta and not intended for production use, but there’s a lot of cool stuff to play around with and it should run fine side-by-side with VS2008. Feedback via <a href="http://social.msdn.microsoft.com/Forums/en-US/category/VSPreRelease,netdevelopmentprerelease,visualstudioprerelease,vstsprerelease">forums</a> or <a href="http://go.microsoft.com/fwlink/?LinkID=151484">filing a bug/suggestion</a> is always appreciated. Enjoy!</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2009/05/20/vs2010-beta-1-now-available/feed/</wfw:commentRss>
		<slash:comments>17</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Effective Concurrency: Eliminate False Sharing</title>
		<link>https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/</link>
				<comments>https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/#comments</comments>
				<pubDate>Fri, 15 May 2009 18:51:38 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Hardware]]></category>
		<category><![CDATA[Software Development]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2009/05/15/effective-concurrency-eliminate-false-sharing/</guid>
				<description><![CDATA[This month’s Effective Concurrency column, “Eliminate False Sharing”, is now live on DDJ’s website. People keep writing asking me about my previous mentions of false sharing, even debating whether it’s really a problem. So this month I decided to treat it in depth, including: A compelling and realistic example where just changing a couple of [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>This month’s <strong>Effective Concurrency</strong> column, <a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217500206">“Eliminate False Sharing”</a><strong></strong>, is now live on DDJ’s website.</p>
<p>People keep writing asking me about my previous mentions of false sharing, even debating whether it’s really a problem. So this month I decided to treat it in depth, including:</p>
<ul>
<li>A compelling and realistic example where just changing a couple of lines to remove false sharing takes an algorithm from zero scaling to perfect scaling – even when many threads are merely doing reads. Hopefully after this nobody will argue that false sharing isn’t a problem. :-)</li>
<li>How your performance monitoring and analysis tools do and/or don’t help you uncover the problem, and how to use them effectively to identify the culprit. Short answer: CPU activity monitors aren’t very helpful, but cycles-per-instruction (CPI) and cache miss rate measurements attributed to specific lines of source code are your friend.</li>
<li>The two ways to correct the code: Reduce the frequency of writes to the too-popular cache line, or add padding to move other data off the line.</li>
<li>Reusable code in C++ and C#, and a note about Java, that you can use to use padding (and alignment if available) to put frequently-updated objects on their own cache lines.</li>
</ul>
<p>From the article:</p>
<blockquote>
<p>In two previous articles I pointed out the performance issue of false sharing (aka cache line ping-ponging), where threads use different objects but those objects happen to be close enough in memory that they fall on the same cache line, and the cache system treats them as a single lump that is effectively protected by a hardware write lock that only one core can hold at a time. … It’s easy to see why the problem arises when multiple cores are writing to different parts of the same cache line… In practice, however, it can be even more common to encounter a reader thread using what it thinks is read-only data still getting throttled by a writer thread updating a different but nearby memory location…</p>
<p>A number of readers have asked for more information and examples on where false sharing arises and how to deal with it. … This month, let’s consider a concrete example that shows an algorithm <em>in extremis </em>due to false sharing distress, how to use tools to analyze the problem, and the two coding techniques we can use to eliminate false sharing trouble. …</p>
</blockquote>
<p>I hope you enjoy it. Finally, here are links to previous Effective Concurrency columns:</p>
<blockquote>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/200001985">The Pillars of Concurrency</a> (Aug 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/201202924">How Much Scalability Do You Have or Need?</a> (Sep 2007) </p>
<p><a href="http://ddj.com/cpp/201804238">Use Critical Sections (Preferably Locks) to Eliminate Races</a> (Oct 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/202401098">Apply Critical Sections Consistently</a> (Nov 2007) </p>
<p><a href="http://ddj.com/architect/202802983">Avoid Calling Unknown Code While Inside a Critical Section</a> (Dec 2007) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/204801163">Use Lock Hierarchies to Avoid Deadlock</a> (Jan 2008) </p>
<p><a href="http://www.ddj.com/cpp/205900309">Break Amdahl’s Law!</a> (Feb 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206100542">Going Superlinear</a> (Mar 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206903306">Super Linearity and the Bigger Machine</a> (Apr 2008) </p>
<p><a href="http://ddj.com/architect/207100682">Interrupt Politely</a> (May 2008) </p>
<p><a href="http://ddj.com/architect/208200273">Maximize Locality, Minimize Contention</a> (Jun 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/208801371">Choose Concurrency-Friendly Data Structures</a> (Jul 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/209900973">The Many Faces of Deadlock</a> (Aug 2008) </p>
<p><a href="http://www.ddj.com/cpp/210600279">Lock-Free Code: A False Sense of Security</a> (Sep 2008) </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/210604448">Writing Lock-Free Code: A Corrected Queue</a> (Oct 2008) </p>
<p><a href="http://www.ddj.com/cpp/211601363">Writing a Generalized Concurrent Queue</a> (Nov 2008) </p>
<p><a href="http://www.ddj.com/cpp/211800538">Understanding Parallel Performance</a> (Dec 2008)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212201163">Measuring Parallel Performance: Optimizing a Concurrent Queue</a> (Jan 2009)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212701484">volatile vs. volatile</a> (Feb 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=214100002">Sharing Is the Root of All Contention</a> (Mar 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=215900465">Use Threads Correctly = Isolation + Asynchronous Messages</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=216500409">“Use Thread Pools Correctly: Keep Tasks Short and Nonblocking”</a> (Apr 2009)</p>
<p><a href="http://www.ddj.com/go-parallel/article/showArticle.jhtml?articleID=217500206">“Eliminate False Sharing”</a> (May 2009)</p>
</blockquote>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2009/05/15/effective-concurrency-eliminate-false-sharing/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Effective Concurrency: volatile vs. volatile</title>
		<link>https://herbsutter.com/2009/01/12/effective-concurrency-volatile-vs-volatile/</link>
				<comments>https://herbsutter.com/2009/01/12/effective-concurrency-volatile-vs-volatile/#comments</comments>
				<pubDate>Mon, 12 Jan 2009 09:12:15 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Java]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2009/01/12/effective-concurrency-volatile-vs-volatile/</guid>
				<description><![CDATA[This month&#8217;s Effective Concurrency column, &#8220;volatile vs. volatile&#8221;, is now live on DDJ&#8217;s website and also appears in the print magazine. (As a historical note, it&#8217;s DDJ&#8217;s final print issue, as I mentioned previously.) This article aims to answer the frequently asked question: &#8220;What does volatile mean?&#8221; The short answer: &#8220;It depends, do you mean [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>This month&#8217;s <strong>Effective Concurrency</strong> column, <strong><a href="http://www.ddj.com/hpc-high-performance-computing/212701484">&#8220;volatile vs. volatile&#8221;</a></strong>, is now live on DDJ&#8217;s website and also appears in the print magazine. (As a historical note, it&#8217;s DDJ&#8217;s final print issue, as I <a href="https://herbsutter.wordpress.com/2008/12/31/the-2008-media-inflection-meet-dr-web-the-new-gorilla/">mentioned previously</a>.)</p>
<p>This article aims to answer the frequently asked question: &#8220;What does volatile mean?&#8221; The short answer: &#8220;It depends, do you mean Java/.NET volatile or C/C++ volatile?&#8221; From the article:</p>
<blockquote>
<p>What does the <b>volatile</b> keyword mean? How should you use it? Confusingly, there are two common answers, because depending on the language you use volatile supports one or the other of two different programming techniques: lock-free programming, and dealing with &#8216;unusual&#8217; memory.</p>
<p>Adding to the confusion, these two different uses have overlapping requirements and impose overlapping restrictions, which makes them appear more similar than they are. Let&#8217;s define and understand them clearly, and see how to spell them correctly in C, C++, Java and C# &#8212; and not always as <b>volatile</b>. &#8230;</p>
</blockquote>
<p>I hope you enjoy it. Finally, here are links to previous Effective Concurrency columns and the DDJ print magazine issue in which they first appeared:</p>
<blockquote>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/200001985">The Pillars of Concurrency</a> (Aug 2007)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/201202924">How Much Scalability Do You Have or Need?</a> (Sep 2007)  </p>
<p><a href="http://ddj.com/cpp/201804238">Use Critical Sections (Preferably Locks) to Eliminate Races</a> (Oct 2007)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/202401098">Apply Critical Sections Consistently</a> (Nov 2007)  </p>
<p><a href="http://ddj.com/architect/202802983">Avoid Calling Unknown Code While Inside a Critical Section</a> (Dec 2007)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/204801163">Use Lock Hierarchies to Avoid Deadlock</a> (Jan 2008)  </p>
<p><a href="http://www.ddj.com/cpp/205900309">Break Amdahl’s Law!</a> (Feb 2008)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206100542">Going Superlinear</a> (Mar 2008)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/206903306">Super Linearity and the Bigger Machine</a> (Apr 2008)  </p>
<p><a href="http://ddj.com/architect/207100682">Interrupt Politely</a> (May 2008)  </p>
<p><a href="http://ddj.com/architect/208200273">Maximize Locality, Minimize Contention</a> (Jun 2008)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/208801371">Choose Concurrency-Friendly Data Structures</a> (Jul 2008)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/209900973">The Many Faces of Deadlock</a> (Aug 2008)  </p>
<p><a href="http://www.ddj.com/cpp/210600279">Lock-Free Code: A False Sense of Security</a> (Sep 2008)  </p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/210604448">Writing Lock-Free Code: A Corrected Queue</a> (Oct 2008)  </p>
<p><a href="http://www.ddj.com/cpp/211601363">Writing a Generalized Concurrent Queue</a> (Nov 2008)  </p>
<p><a href="http://www.ddj.com/cpp/211800538">Understanding Parallel Performance</a> (Dec 2008)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212201163">Measuring Parallel Performance: Optimizing a Concurrent Queue</a> (Jan 2009)</p>
<p><a href="http://www.ddj.com/hpc-high-performance-computing/212701484">volatile vs. volatile</a> (Feb 2009)</p>
</blockquote>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2009/01/12/effective-concurrency-volatile-vs-volatile/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Effective Concurrency: Lock-Free Code &#8212; A False Sense of Security</title>
		<link>https://herbsutter.com/2008/08/05/effective-concurrency-lock-free-code-a-false-sense-of-security/</link>
				<comments>https://herbsutter.com/2008/08/05/effective-concurrency-lock-free-code-a-false-sense-of-security/#comments</comments>
				<pubDate>Wed, 06 Aug 2008 00:31:41 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Concurrency]]></category>
		<category><![CDATA[Java]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2008/08/05/effective-concurrency-lock-free-code-a-false-sense-of-security/</guid>
				<description><![CDATA[DDJ posted the next Effective Concurrency column a couple of weeks earlier than usual. You can find it here: &#8220;Lock-Free Code: A False Sense of Security&#8221;, just went live on DDJ&#8217;s site, and also appears in the print magazine.   This is a special column in a way, because I rarely critique someone else&#8217;s published [&#8230;]]]></description>
								<content:encoded><![CDATA[<div>DDJ posted the next <strong>Effective Concurrency</strong> column a couple of weeks earlier than usual. You can find it here: <a href="http://www.ddj.com/cpp/210600279"><strong>&#8220;Lock-Free Code: A False Sense of Security&#8221;</strong></a>, just went live on DDJ&#8217;s site, and also appears in the print magazine.</div>
<div> </div>
<div>This is a special column in a way, because I rarely critique someone else&#8217;s published code. However, mere weeks ago DDJ itself published <a href="http://www.ddj.com/208801974">an article with fundamentally broken code</a> that tried to show how to write a simplified lock-free queue. I corresponded with the author, Petru Marginean, and his main reviewer, Andrei Alexandrescu, to discuss the problems, and they have patched the code somewhat and added a disclaimer to the article. But the issues need to be addressed, and so Petru kindly let me vivisect his code in public in this column (and the next, not yet available, which will show how to do it right).</div>
<div> </div>
<div>From the article:</div>
<blockquote><p>[Lock-free code is] hard even for experts. It&#8217;s easy to write lock-free code that appears to work, but it&#8217;s very difficult to write lock-free code that is correct and performs well. Even good magazines and refereed journals have published a substantial amount of lock-free code that was actually broken in subtle ways and needed correction.</p>
<p>To illustrate, let&#8217;s dissect some peer-reviewed lock-free code that was published here in <em>DDJ</em> just two months ago &#8230;</p></blockquote>
<div>I hope you enjoy it. (Note: Yes, the title is a riff on Tom Cargill&#8217;s classic article <a href="http://www.informit.com/content/images/020163371x/supplements/Exception_Handling_Article.html">&#8220;Exception Handling: A False Sense of Security&#8221;</a>, one of Scott Meyers&#8217; five <a href="http://www.artima.com/cppsource/top_cpp_publications.html">&#8220;Most Important C++ Non-Book Publications&#8230;Ever&#8221;</a>.)</div>
<div> </div>
<div>Finally, here are links to previous Effective Concurrency columns (based on the magazine print issue dates):</div>
<table border="0" cellspacing="5" cellpadding="5" width="555">
<tbody>
<tr>
<td width="114" valign="top">August 2007</td>
<td width="422" valign="top"><a href="http://www.ddj.com/hpc-high-performance-computing/200001985">The Pillars of Concurrency</a></td>
</tr>
<tr>
<td width="114" valign="top">September 2007</td>
<td width="422" valign="top"><a href="http://www.ddj.com/hpc-high-performance-computing/201202924">How Much Scalability Do You Have or Need?</a></td>
</tr>
<tr>
<td width="114" valign="top">October 2007</td>
<td width="422" valign="top"><a title="Use Critical Sections (Preferably Locks) to Eliminate Races" href="http://ddj.com/cpp/201804238">Use Critical Sections (Preferably Locks) to Eliminate Races</a></td>
</tr>
<tr>
<td width="114" valign="top">November 2007</td>
<td width="422" valign="top"><a title="Use Critical Sections (Preferably Locks) to Eliminate Races" href="http://www.ddj.com/hpc-high-performance-computing/202401098">Apply Critical Sections Consistently</a></td>
</tr>
<tr>
<td width="114" valign="top">December 2007</td>
<td width="422" valign="top"><a href="http://herbsutter.spaces.live.com/blog/cns!2D4327CC297151BB!342.entry"></a><a title="Avoid Calling Unknown Code While Inside a Critical Section" href="http://ddj.com/architect/202802983">Avoid Calling Unknown Code While Inside a Critical Section</a></td>
</tr>
<tr>
<td width="114" valign="top">January 2007</td>
<td width="422" valign="top"><a href="http://www.ddj.com/hpc-high-performance-computing/204801163">Use Lock Hierarchies to Avoid Deadlock</a></td>
</tr>
<tr>
<td width="114" valign="top">February 2008</td>
<td width="422" valign="top"><a href="http://www.ddj.com/cpp/205900309">Break Amdahl&#8217;s Law!</a></td>
</tr>
<tr>
<td width="114" valign="top">March 2008</td>
<td width="422" valign="top"><a href="http://www.ddj.com/hpc-high-performance-computing/206100542">Going Superlinear</a></td>
</tr>
<tr>
<td width="114" valign="top">April 2008</td>
<td width="422" valign="top"><a href="http://www.ddj.com/hpc-high-performance-computing/206903306">Super Linearity and the Bigger Machine</a></td>
</tr>
<tr>
<td width="114" valign="top">May 2008</td>
<td width="422" valign="top"><a href="http://ddj.com/architect/207100682">Interrupt Politely</a></td>
</tr>
<tr>
<td width="114" valign="top">June 2008</td>
<td width="422" valign="top"><a href="http://ddj.com/architect/208200273">Maximize Locality, Minimize Contention</a></td>
</tr>
<tr>
<td width="114" valign="top">July 2008</td>
<td width="422" valign="top"><a href="http://www.ddj.com/hpc-high-performance-computing/208801371">Choose Concurrency-Friendly Data Structures</a></td>
</tr>
<tr>
<td width="114" valign="top">August 2008</td>
<td width="422" valign="top"><a href="http://www.ddj.com/hpc-high-performance-computing/209900973">The Many Faces of Deadlock</a></td>
</tr>
<tr>
<td width="114" valign="top">September 2008</td>
<td width="422" valign="top"><a href="http://www.ddj.com/cpp/210600279">&#8220;Lock-Free Code: A False Sense of Security&#8221;</a></td>
</tr>
</tbody>
</table>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2008/08/05/effective-concurrency-lock-free-code-a-false-sense-of-security/feed/</wfw:commentRss>
		<slash:comments>13</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
		<item>
		<title>Constructor Exceptions in C++, C#, and Java</title>
		<link>https://herbsutter.com/2008/07/25/constructor-exceptions-in-c-c-and-java/</link>
				<comments>https://herbsutter.com/2008/07/25/constructor-exceptions-in-c-c-and-java/#comments</comments>
				<pubDate>Fri, 25 Jul 2008 19:43:04 +0000</pubDate>
		<dc:creator><![CDATA[Herb Sutter]]></dc:creator>
				<category><![CDATA[C# / .NET]]></category>
		<category><![CDATA[C++]]></category>
		<category><![CDATA[Java]]></category>
		<category><![CDATA[Software Development]]></category>

		<guid isPermaLink="false">http://herbsutter.wordpress.com/2008/07/25/constructor-exceptions-in-c-c-and-java/</guid>
				<description><![CDATA[I just received the following question, whose answer is the same in C++, C#, and Java. Question: In the following code, why isn&#8217;t the destructor/disposer ever called to clean up the Widget when the constructor emits an exception? You can entertain this question in your mainstream language of choice: // C++ (an edited version of [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I just received the following question, whose answer is the same in C++, C#, and Java.</p>
<p>Question: In the following code, why isn&#8217;t the destructor/disposer ever called to clean up the Widget when the constructor emits an exception? You can entertain this question in your mainstream language of choice:</p>
<table border="0" cellspacing="1" cellpadding="15" width="400">
<tbody>
<tr>
<td width="400" valign="top">// C++ (an edited version of the original code<br />
// that the reader emailed me)<br />
class Gadget {<br />
   Widget* w;</p>
<p>public:<br />
   Gadget() {<br />
     w = new Widget();<br />
     throw new exception();<br />
     // &#8230; or some API call might throw<br />
   };</p>
<p>   <strong>~Gadget()</strong> {<br />
<strong>      if( w != nullptr ) delete w;<br />
</strong>   }<br />
};</td>
</tr>
<tr>
<td width="400" valign="top">// C# (equivalent)<br />
class Gadget <strong>: IDisposable</strong> {<br />
   private Widget w;</p>
<p>   public Gadget() {<br />
     w = new Widget();<br />
     throw new Exception();<br />
     // &#8230; or some API call might throw<br />
   };</p>
<p><strong>   public void Dispose()</strong> {<br />
     // &#8230; eliding other mechanics, eventually calls:<br />
<strong>     if( w != null ) w.Dispose();<br />
     // or just &#8220;w = null;&#8221; if Widget isn&#8217;t IDisposable<br />
</strong>   }<br />
};</td>
</tr>
<tr>
<td width="400" valign="top">// Java (equivalent)<br />
class Gadget {<br />
   private Widget w;</p>
<p>   public Gadget() {<br />
     w = new Widget();<br />
     throw new Exception();<br />
     // &#8230; or some API call might throw<br />
   };</p>
<p><strong>   public void dispose()</strong> {<br />
<strong>     if( w != null ) w.dispose();<br />
     // or just &#8220;w = null;&#8221; if Widget isn&#8217;t disposable</strong><br />
   }<br />
};</td>
</tr>
</tbody>
</table>
<p>Interestingly, we can answer this even without knowing the calling code&#8230; but there is typical calling code that is similar in all three languages that reinforces the answer.</p>
<h3>Construction and Lifetime</h3>
<p>The fundamental principles behind the answer is the same in C++, C#, and Java:</p>
<ol>
<li>A constructor conceptually turns a suitably sized chunk of raw memory into an object that obeys its invariants. <strong>An object&#8217;s lifetime doesn&#8217;t begin until its constructor completes successfully. </strong>If a constructor ends by throwing an exception, that means it never finished creating the object and setting up its invariants &#8212; and at the point the exceptional constructor exits, the object not only doesn&#8217;t exist, but never existed.</li>
<li>A destructor/disposer conceptually turns an object back into raw memory. Therefore, just like all other nonprivate methods, destructors/disposers assume as a precondition that &#8220;this&#8221; object is actually a valid object and that its invariants hold. Hence, <strong>destructors/disposers only run on successfully constructed objects.</strong></li>
</ol>
<p>I&#8217;ve covered some of these concepts and consequences before in <a href="http://www.gotw.ca/gotw/066.htm">GotW #66, &#8220;Constructor Failures,&#8221;</a> which appeared in updated and expanded form as Items 17 and 18 of <em><a href="http://www.amazon.com/exec/obidos/ASIN/020170434X/gotwca-20">More Exceptional C++</a></em>.</p>
<p>In particular, if Gadget&#8217;s constructor throws, it means that the Gadget object wasn&#8217;t created and never existed. So there&#8217;s nothing to destroy or dispose: The destructor/disposer not only isn&#8217;t needed to run, but it can&#8217;t run because it doesn&#8217;t have a valid object to run against.</p>
<p>Incidentally, it also means that the Gadget constructor isn&#8217;t exception-safe, because it and only it can clean up resources it might leak. In the C++ version, the usual simple way to write the code correctly is to change the w member&#8217;s type from Widget* to shared_ptr&lt;Widget&gt; or an equivalent smart pointer type that owns the object. But let&#8217;s leave that aside for now to explore the more general issue.</p>
<h3>A Look At the Calling Code</h3>
<p>Next, let&#8217;s see how these semantics are actually enforced, whether by language rules or by convention, on the calling side in each language. Here are the major idiomatic ways in each language to use an Gadget object in an exception-safe way:</p>
<table border="0" cellspacing="1" cellpadding="15" width="400">
<tbody>
<tr>
<td width="400" valign="top">// C++ caller</p>
<p>{<br />
<strong>  Gadget myGadget;<br />
</strong>  // do something with myGadget<br />
}</td>
</tr>
<tr>
<td width="400" valign="top">// C# caller</p>
<p><strong>using( Gadget myGadget = new Gadget() )<br />
</strong>{<br />
  // do something with myGadget<br />
}</td>
</tr>
<tr>
<td width="400" valign="top">// Java caller</p>
<p>Gadget myGadget = new Gadget();</p>
<p><strong>try {<br />
</strong>  // do something with myGadget<br />
<strong>}<br />
finally {<br />
  myGadget.dispose();<br />
}</strong></td>
</tr>
</tbody>
</table>
<p>Consider the two cases where an exception can occur:</p>
<ul>
<li>What if an exception is thrown <strong>while using myGadget </strong>&#8212; that is, during &#8220;do something with myGadget&#8221;? In all cases, we know that myGadget&#8217;s destructor/dispose method is guaranteed to be called.</li>
<li>But what if an exception is thrown <strong>while constructing myGadget</strong>? Now in all cases the answer is that the destructor/dispose method is guaranteed <strong>not </strong>to be called.</li>
</ul>
<p>Put another way, we can say for all cases: The destructor/dispose is guaranteed to be run if and only if the constructor completed successfully.</p>
<h3>Another Look At the Destructor/Dispose Code</h3>
<p>Finally, let&#8217;s return to each key line of code one more time:</p>
<table border="0" cellspacing="1" cellpadding="15" width="404">
<tbody>
<tr>
<td width="400" valign="top">// C++<br />
<strong>      if( w != nullptr ) delete w;</strong></td>
</tr>
<tr>
<td width="400" valign="top">// C#<br />
<strong>     if( w != null ) w.Dispose();</strong></td>
</tr>
<tr>
<td width="400" valign="top">// Java<br />
<strong>     if( w != null ) w.dispose();</strong></td>
</tr>
</tbody>
</table>
<p>The motivation for the nullness tests in the original example was to clean up partly-constructed objects. That motivation is suspect in principle &#8212; it means the constructors aren&#8217;t exception-safe because only they can clean up after themselves &#8212; and as we&#8217;ve seen it&#8217;s flawed in practice because the destructors/disposers won&#8217;t ever run on the code paths that the original motivation cared about. So we don&#8217;t need the nullness tests for that reason, although you might still have nullness tests in destructors/disposers to handle &#8216;optional&#8217; parts of an object where a valid object might hold a null pointer or reference member during its lifetime.</p>
<p>In this particular example, we can observe that the nullness tests are actually unnecessary, because w will always be non-null if the object was constructed successfully. There is no (legitimate) way that you can call the destructor/disposer (Furthermore, C++ developers will know that the test is unnecessary for a second reason: Delete is a no-op if the pointer passed to it is null, so there&#8217;s never a need to check for that special case.)</p>
<h3>Conclusion</h3>
<p>When it comes to object lifetimes, all OO languages are more alike than different. Object and resource lifetime matters, whether or not you have a managed language, garbage collection (finalizers are not destructors/disposers!), templates, generics, or any other fancy bell or whistle layered on top of the basic humble class.</p>
<p>The same basic issues arise everywhere&#8230; the code you write to deal with them is just spelled using different language features and/or idioms in the different languages, that&#8217;s all. We can have lively discussions about which language offers the easiest/best/greenest/lowest-carbon-footprint way to express how we want to deal with a particular aspect of object construction, lifetime, and teardown, but those concerns are general and fundamental no matter which favorite language you&#8217;re using to write your code this week.</p>
]]></content:encoded>
							<wfw:commentRss>https://herbsutter.com/2008/07/25/constructor-exceptions-in-c-c-and-java/feed/</wfw:commentRss>
		<slash:comments>35</slash:comments>
						
		<media:content url="https://0.gravatar.com/avatar/c0ba56bfd231f8f04feb057728975181?s=96&#38;d=identicon&#38;r=G" medium="image">
			<media:title type="html">Herb Sutter</media:title>
		</media:content>
	</item>
	</channel>
</rss>
